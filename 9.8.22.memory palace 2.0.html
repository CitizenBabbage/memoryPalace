<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>memory palace 2.0</title>
<style title="Twine CSS">@keyframes appear{0%{opacity:0}to{opacity:1}}@keyframes fade-in-out{0%,to{opacity:0}50%{opacity:1}}@keyframes rumble{25%{top:-0.1em}75%{top:0.1em}0%,to{top:0px}}@keyframes shudder{25%{left:0.1em}75%{left:-0.1em}0%,to{left:0px}}@keyframes buoy{25%{top:0.25em}75%{top:-0.25em}0%,to{top:0px}}@keyframes sway{25%{left:0.25em}75%{left:-0.25em}0%,to{left:0px}}@keyframes pulse{0%{transform:scale(0, 0)}20%{transform:scale(1.2, 1.2)}40%{transform:scale(0.9, 0.9)}60%{transform:scale(1.05, 1.05)}80%{transform:scale(0.925, 0.925)}to{transform:scale(1, 1)}}@keyframes zoom-in{0%{transform:scale(0, 0)}to{transform:scale(1, 1)}}@keyframes shudder-in{0%, to{transform:translateX(0em)}5%, 25%, 45%{transform:translateX(-1em)}15%, 35%, 55%{transform:translateX(1em)}65%{transform:translateX(-0.6em)}75%{transform:translateX(0.6em)}85%{transform:translateX(-0.2em)}95%{transform:translateX(0.2em)}}@keyframes rumble-in{0%, to{transform:translateY(0em)}5%, 25%, 45%{transform:translateY(-1em)}15%, 35%, 55%{transform:translateY(1em)}65%{transform:translateY(-0.6em)}75%{transform:translateY(0.6em)}85%{transform:translateY(-0.2em)}95%{transform:translateY(0.2em)}}@keyframes fidget{0%, 8.1%, 82.1%, 31.1%, 38.1%, 44.1%, 40.1%, 47.1%, 74.1%, 16.1%, 27.1%, 72.1%, 24.1%, 95.1%, 6.1%, 36.1%, 20.1%, 4.1%, 91.1%, 14.1%, 87.1%, to{left:0px;top:0px}8%, 82%, 31%, 38%, 44%{left:-1px}40%, 47%, 74%, 16%, 27%{left:1px}72%, 24%, 95%, 6%, 36%{top:-1px}20%, 4%, 91%, 14%, 87%{top:1px}}@keyframes slide-right{0%{transform:translateX(-100vw)}}@keyframes slide-left{0%{transform:translateX(100vw)}}@keyframes slide-up{0%{transform:translateY(100vh)}}@keyframes slide-down{0%{transform:translateY(-100vh)}}@keyframes fade-right{0%{opacity:0;transform:translateX(-1em)}to{opacity:1}}@keyframes fade-left{0%{opacity:0;transform:translateX(1em)}to{opacity:1}}@keyframes fade-up{0%{opacity:0;transform:translateY(1em)}to{opacity:1}}@keyframes fade-down{0%{opacity:0;transform:translateY(-1em)}to{opacity:1}}@keyframes flicker{0%,29%,31%,63%,65%,77%,79%,86%,88%,91%,93%{opacity:0}30%{opacity:0.2}64%{opacity:0.4}78%{opacity:0.6}87%{opacity:0.8}92%, to{opacity:1}}@keyframes blur{0%{filter:blur(2rem);opacity:0}25%{opacity:1}to{filter:blur(0rem);opacity:1}}.dom-debug-mode tw-story,.dom-debug-mode tw-passage,.dom-debug-mode tw-sidebar,.dom-debug-mode tw-include,.dom-debug-mode tw-hook,.dom-debug-mode tw-expression,.dom-debug-mode tw-link,.dom-debug-mode tw-dialog,.dom-debug-mode tw-columns,.dom-debug-mode tw-column,.dom-debug-mode tw-align{outline:1px solid #f5a3da;min-height:32px;display:block !important}.dom-debug-mode tw-story::before,.dom-debug-mode tw-passage::before,.dom-debug-mode tw-sidebar::before,.dom-debug-mode tw-include::before,.dom-debug-mode tw-hook::before,.dom-debug-mode tw-expression::before,.dom-debug-mode tw-link::before,.dom-debug-mode tw-dialog::before,.dom-debug-mode tw-columns::before,.dom-debug-mode tw-column::before,.dom-debug-mode tw-align::before{position:absolute;top:0;left:0;height:16px;background-color:#f5a3da;color:black;font-size:16px;font-weight:normal;font-style:normal;font-family:monospace;display:inline-block;line-height:100%;white-space:pre;z-index:999997}.dom-debug-mode tw-story:hover,.dom-debug-mode tw-passage:hover,.dom-debug-mode tw-sidebar:hover,.dom-debug-mode tw-include:hover,.dom-debug-mode tw-hook:hover,.dom-debug-mode tw-expression:hover,.dom-debug-mode tw-link:hover,.dom-debug-mode tw-dialog:hover,.dom-debug-mode tw-columns:hover,.dom-debug-mode tw-column:hover,.dom-debug-mode tw-align:hover{outline:1px solid #fc9}.dom-debug-mode tw-story:hover::before,.dom-debug-mode tw-passage:hover::before,.dom-debug-mode tw-sidebar:hover::before,.dom-debug-mode tw-include:hover::before,.dom-debug-mode tw-hook:hover::before,.dom-debug-mode tw-expression:hover::before,.dom-debug-mode tw-link:hover::before,.dom-debug-mode tw-dialog:hover::before,.dom-debug-mode tw-columns:hover::before,.dom-debug-mode tw-column:hover::before,.dom-debug-mode tw-align:hover::before{background-color:#fc9;transition:background-color 1s}.dom-debug-mode tw-passage,.dom-debug-mode tw-include,.dom-debug-mode tw-hook,.dom-debug-mode tw-expression,.dom-debug-mode tw-link,.dom-debug-mode tw-dialog,.dom-debug-mode tw-columns,.dom-debug-mode tw-column,.dom-debug-mode tw-align{padding:1em;margin:0}.dom-debug-mode tw-story::before{content:'<tw-story tags="' attr(tags) '">'}.dom-debug-mode tw-passage::before{top:-16px;content:'<tw-passage tags="' attr(tags) '">'}.dom-debug-mode tw-sidebar::before{top:-16px;content:"<tw-sidebar>"}.dom-debug-mode tw-hook::before{content:'<tw-hook name="' attr(name) '">'}.dom-debug-mode tw-expression::before{content:'<tw-expression name="' attr(name) '">'}.dom-debug-mode tw-link::before{content:'<tw-link name="' attr(name) '">'}.dom-debug-mode tw-dialog::before{content:"<tw-dialog>"}.dom-debug-mode tw-columns::before{content:"<tw-columns>"}.dom-debug-mode tw-column::before{content:"<tw-column>"}.dom-debug-mode tw-align::before{content:"<tw-align>"}.dom-debug-mode tw-include::before{content:'<tw-include type="' attr(type) '" title="' attr(title) '">'}.debug-mode tw-expression{display:inline-block !important}.debug-mode tw-expression[type=variable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"$" attr(name)}.debug-mode tw-expression[type=tempVariable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"_" attr(name)}.debug-mode tw-expression[return=boolean]{background-color:rgba(179,179,179,0.2)}.debug-mode tw-expression[return=array]{background-color:rgba(255,102,102,0.2)}.debug-mode tw-expression[return=dataset]{background-color:rgba(255,128,0,0.2)}.debug-mode tw-expression[return=number]{background-color:rgba(255,179,102,0.2)}.debug-mode tw-expression[return=datamap]{background-color:rgba(255,255,102,0.2)}.debug-mode tw-expression[return=changer]{background-color:rgba(179,255,102,0.2)}.debug-mode tw-expression[return=lambda]{background-color:rgba(102,255,102,0.2)}.debug-mode tw-expression[return=hookname]{background-color:rgba(102,255,204,0.2)}.debug-mode tw-expression[return=string]{background-color:rgba(102,255,255,0.2)}.debug-mode tw-expression[return=datatype]{background-color:rgba(102,153,255,0.2)}.debug-mode tw-expression[return=gradient],.debug-mode tw-expression[return=colour]{background-color:rgba(204,102,255,0.2)}.debug-mode tw-expression[return=instant],.debug-mode tw-expression[return=macro]{background-color:rgba(240,117,199,0.2)}.debug-mode tw-expression[return=command]{background-color:rgba(153,153,255,0.2)}.debug-mode tw-expression.false{background-color:rgba(255,0,0,0.2) !important}.debug-mode tw-expression[type=macro]::before{content:"(" attr(name) ":)";padding:0 0.5rem;font-size:1rem;vertical-align:middle;line-height:normal;background-color:inherit;border:1px solid rgba(255,255,255,0.5)}.debug-mode tw-hook{background-color:rgba(0,85,255,0.1) !important}.debug-mode tw-hook::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"["}.debug-mode tw-hook::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]"}.debug-mode tw-hook[name]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]<" attr(name) "|"}.debug-mode tw-pseudo-hook{background-color:rgba(255,170,0,0.1) !important}.debug-mode tw-collapsed::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"{"}.debug-mode tw-collapsed::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"}"}.debug-mode tw-verbatim::before,.debug-mode tw-verbatim::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"`"}.debug-mode tw-align[style*="text-align: center"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 50%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: left"]{background:linear-gradient(to right, rgba(255,204,189,0.25) 0%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: right"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 100%)}.debug-mode tw-column{background-color:rgba(189,228,255,0.2)}.debug-mode tw-enchantment{animation:enchantment 0.5s infinite;border:1px solid}.debug-mode tw-link::after,.debug-mode tw-broken-link::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(passage-name)}.debug-mode tw-include{background-color:rgba(204,128,51,0.1)}.debug-mode tw-include::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(type) ' "' attr(title) '"'}@keyframes enchantment{0%,to{border-color:#ffb366}50%{border-color:#6fc}}tw-debugger{position:fixed;box-sizing:border-box;bottom:0;right:0;z-index:999999;min-width:10em;min-height:1em;padding:0em 0.5em 0.5em 1em;font-size:1.25em;font-family:sans-serif;color:#000;border-left:solid #000 2px;border-top:solid #000 2px;border-top-left-radius:.5em;background:#fff;opacity:1}tw-debugger select{margin-right:1em;width:12em}tw-debugger button{border-radius:3px;border:solid #999 1px;margin:auto 4px;background-color:#fff;font-size:inherit;color:#000}tw-debugger button.enabled{background-color:#eee;box-shadow:inset #ddd 3px 5px 0.5em}tw-debugger .panel{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;position:absolute;bottom:100%;left:-2px;right:0;padding:1em;max-height:40vh;overflow-y:scroll;overflow-x:hidden;z-index:999998;background:#fff;border:inherit;border-bottom:solid #999 2px;border-top-left-radius:.5em;border-bottom-left-radius:.5em;font-size:0.8em}tw-debugger .panel:empty,tw-debugger .panel[hidden]{display:none}tw-debugger .panel-source,tw-debugger .panel-row-source{font-family:monospace;overflow-x:scroll;white-space:pre;-ms-flex-preferred-size:100%;flex-basis:100%}tw-debugger .panel-row-source{margin:5px 0}tw-debugger .panel-rows{width:100%;overflow-x:scroll}tw-debugger .panel-rows>*{display:table-row}tw-debugger .panel-rows>div:nth-of-type(2n){background:#EEE}tw-debugger .panel-row-buttons{text-align:right}tw-debugger .panel-variables .panel-rows:empty::before{content:"~ No variables ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-enchantments .panel-rows:empty::before{content:"~ No enchantments ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-errors .panel-rows:empty::before{content:"~ No errors... for now. ~";font-style:italic;color:#888;text-align:center}tw-debugger .panel-rows:empty+.panel-variables-bottom{display:none}tw-debugger .panel-storylets:not(.panel-exclusive) .storylet-exclusive,tw-debugger .panel-storylets:not(.panel-urgent) .storylet-urgent{display:none}tw-debugger .panel-variables-bottom{padding-top:5px}tw-debugger .enchantment-row{min-height:1.5em}tw-debugger .variable-path{opacity:0.4}tw-debugger .temporary-variable-scope,tw-debugger .enchantment-local{font-family:sans-serif;font-weight:normal;opacity:0.8;font-size:0.75em}tw-debugger .temporary-variable-scope:not(:empty)::before,tw-debugger .enchantment-local:not(:empty)::before{content:" in "}tw-debugger .variable-name,tw-debugger .enchantment-name{font-family:monospace;font-weight:bold}tw-debugger .variable-type{color:#444;font-weight:normal;text-overflow:ellipsis;overflow:hidden;max-width:10em}tw-debugger .error-row{display:table-row;background-color:rgba(230,101,204,0.3)}tw-debugger .error-row:nth-of-type(2n){background-color:rgba(237,145,219,0.3)}tw-debugger .error-row>*{display:table-cell;padding:0.25em 0.5em}tw-debugger .error-row .error-message{cursor:help}tw-debugger .error-row .error-passage{color:#444}tw-debugger .storylet-row{background-color:rgba(201,233,222,0.3)}tw-debugger .storylet-row:nth-child(2n){background-color:rgba(128,203,178,0.3)}tw-debugger .storylet-row.storylet-closed{font-style:italic;opacity:0.4;background-color:rgba(217,217,217,0.3)}tw-debugger .storylet-row.storylet-closed:nth-child(2n){background-color:rgba(166,166,166,0.3)}.storylet-error tw-debugger .storylet-row{background-color:rgba(230,101,204,0.3)}.storylet-error tw-debugger .storylet-row:nth-child(2n){background-color:rgba(237,145,219,0.3)}tw-debugger .storylet-row .storylet-name,tw-debugger .storylet-row .storylet-value{display:inline-block;width:50%}tw-debugger .tabs{padding-bottom:0.5em}tw-debugger .tab{border-radius:0px 0px 0.5em 0.5em;border-top:none}tw-debugger .resizer{position:absolute;height:3em;border-left:2px solid #ccc;border-right:2px solid #ccc;top:10px;left:4px;width:8px;cursor:ew-resize}tw-dialog{z-index:999997;border:#fff solid 2px;padding:2em;color:#fff;background-color:#000;display:block}@media (min-width: 576px){tw-dialog{max-width:50vw}}tw-dialog input[type=text]{font-size:inherit;width:100%}tw-dialog-links{text-align:right;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end}tw-backdrop{z-index:999996;position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.8);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}tw-backdrop ~ tw-backdrop{display:none}tw-link,.link,tw-icon,.enchantment-clickblock{cursor:pointer}tw-link,.enchantment-link{color:#4169E1;font-weight:bold;text-decoration:none;transition:color 0.2s ease-in-out}tw-passage [style^="color"] tw-link:not(:hover),tw-passage [style*=" color"] tw-link:not(:hover),tw-passage [style^="color"][hover="true"] tw-link:hover,tw-passage [style*=" color"][hover="true"] tw-link:hover,tw-passage [style^="color"] .enchantment-link:not(:hover),tw-passage [style*=" color"] .enchantment-link:not(:hover),tw-passage [style^="color"][hover="true"] .enchantment-link:hover,tw-passage [style*=" color"][hover="true"] .enchantment-link:hover{color:inherit}tw-link:hover,.enchantment-link:hover{color:#00bfff}tw-link:active,.enchantment-link:active{color:#DD4B39}.visited{color:#6941e1}tw-passage [style^="color"] .visited:not(:hover),tw-passage [style*=" color"] .visited:not(:hover),tw-passage [style^="color"][hover="true"] .visited:hover,tw-passage [style*=" color"][hover="true"] .visited:hover{color:inherit}.visited:hover{color:#E3E}tw-broken-link{color:#993333;border-bottom:2px solid #993333;cursor:not-allowed}tw-passage [style^="color"] tw-broken-link:not(:hover),tw-passage [style*=" color"] tw-broken-link:not(:hover),tw-passage [style^="color"][hover="true"] tw-broken-link:hover,tw-passage [style*=" color"][hover="true"] tw-broken-link:hover{color:inherit}.enchantment-mouseover{border-bottom:2px dashed #999}.enchantment-mouseout{border:rgba(64,149,191,0.6) 1px solid}.enchantment-mouseout:hover{background-color:rgba(175,197,207,0.75);border:transparent 1px solid;border-radius:0.2em}.enchantment-clickblock{width:100%;height:100%;display:block}.enchantment-clickblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;color:rgba(65,105,225,0.5);transition:color 0.2s ease-in-out}.enchantment-clickblock>:not(tw-enchantment):hover::after{color:rgba(0,191,255,0.5)}.enchantment-clickblock>:not(tw-enchantment):active::after{color:rgba(222,78,59,0.5)}.enchantment-clickblock>:not(tw-enchantment)::after{box-shadow:inset 0 0 0 0.5vmax}.enchantment-clickblock>tw-passage::after,.enchantment-clickblock>tw-sidebar::after{box-shadow:0 0 0 0.5vmax}.enchantment-mouseoverblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;border:2px dashed #999}.enchantment-mouseoutblock>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;border:rgba(64,149,191,0.6) 2px solid}.enchantment-mouseoutblock:hover>:not(tw-enchantment)::after{content:"";width:100%;height:100%;top:0;left:0;display:block;box-sizing:border-box;position:absolute;pointer-events:none;background-color:rgba(175,197,207,0.75);border:transparent 2px solid;border-radius:0.2em}tw-link.enchantment-button,.enchantment-link.enchantment-button,.enchantment-button:not(.enchantment-link) tw-link,.enchantment-button:not(.enchantment-link) .enchantment-link{border-radius:16px;border-style:solid;border-width:2px;text-align:center;padding:0px 8px;display:block}tw-dialog-links{padding-top:1.5em}tw-dialog-links tw-link{border-radius:16px;border-style:solid;border-width:2px;text-align:center;padding:0px 8px;display:block;display:inline-block}html{margin:0;height:100%;overflow-x:hidden}*,:before,:after{position:relative;box-sizing:inherit}body{margin:0;height:100%}tw-storydata{display:none}tw-story{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;font:100% Georgia, serif;box-sizing:border-box;width:100%;min-height:100%;font-size:1.5em;line-height:1.5em;padding:5% 5%;overflow:hidden;background-color:#000;color:#fff}tw-story [style*=content-box] *{box-sizing:border-box}@media (min-width: 576px){tw-story{padding:5% 20%}}tw-story tw-consecutive-br{display:block;height:1.6ex;visibility:hidden}tw-story select{background-color:transparent;font:inherit;border-style:solid;padding:2px}tw-story select:not([disabled]){color:inherit}tw-story textarea{resize:none;background-color:transparent;font:inherit;color:inherit;border-style:none;padding:2px}tw-story input[type=checkbox]{transform:scale(1.5);margin:0 0.5em}tw-story tw-noscript{animation:appear 0.8s}tw-passage{display:block}tw-sidebar{text-align:center;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}@media (min-width: 576px){tw-sidebar{left:-5em;width:3em;position:absolute;-ms-flex-direction:column;flex-direction:column}}tw-icon{display:inline-block;margin:0.5em 0;font-size:66px;font-family:"Verdana",sans-serif}tw-icon[alt]{opacity:0.2}tw-icon[alt]:hover{opacity:0.4}tw-icon[data-label]::after{font-weight:bold;content:attr(data-label);font-size:20px;bottom:-20px;left:-50%;white-space:nowrap}tw-meter{display:block}tw-hook:empty,tw-expression:empty{display:none}tw-error{display:inline-block;border-radius:0.2em;padding:0.2em;font-size:1rem;cursor:help;white-space:pre-wrap}tw-error.error{background-color:rgba(223,58,190,0.6);color:#fff}tw-error.warning{background-color:rgba(223,140,58,0.6);color:#fff;display:none}.debug-mode tw-error.warning{display:inline}tw-error-explanation{display:block;font-size:0.8rem;line-height:1rem}tw-open-button,tw-folddown{cursor:pointer;line-height:0em;border-radius:1px;border:1px solid black;font-size:0.8rem;margin:0 0.4rem;padding:2px;white-space:pre}tw-folddown::after{content:"\25b6"}tw-folddown.open::after{content:"\25bc"}tw-open-button::after{content:"Open"}tw-notifier{border-radius:0.2em;padding:0.2em;font-size:1rem;background-color:rgba(223,182,58,0.4);display:none}.debug-mode tw-notifier{display:inline}tw-notifier::before{content:attr(message)}tw-colour{border:1px solid black;display:inline-block;width:1em;height:1em}h1{font-size:3em}h2{font-size:2.25em}h3{font-size:1.75em}h1,h2,h3,h4,h5,h6{line-height:1em;margin:0.3em 0 0.6em 0}pre{font-size:1rem;line-height:initial}small{font-size:70%}big{font-size:120%}mark{color:rgba(0,0,0,0.6);background-color:#ff9}ins{color:rgba(0,0,0,0.6);background-color:rgba(255,242,204,0.5);border-radius:0.5em;box-shadow:0em 0em 0.2em #ffe699;text-decoration:none}center{text-align:center;margin:0 auto;width:60%}blink{text-decoration:none;animation:fade-in-out 1s steps(1, end) infinite alternate}tw-align{display:block}tw-columns{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between}.transition-in{animation:appear 0ms step-start}.transition-out{animation:appear 0ms step-end}[data-t8n^=dissolve].transition-in,[data-t8n=fade].transition-in{animation:appear .8s}[data-t8n^=dissolve].transition-out,[data-t8n=fade].transition-out{animation:appear .8s reverse}[data-t8n^=shudder].transition-in{display:inline-block !important;animation:shudder-in .8s}[data-t8n^=shudder].transition-out{display:inline-block !important;animation:shudder-in .8s reverse}[data-t8n^=rumble].transition-in{display:inline-block !important;animation:rumble-in .8s}[data-t8n^=rumble].transition-out{display:inline-block !important;animation:rumble-in .8s reverse}[data-t8n^=pulse].transition-in{animation:pulse .8s;display:inline-block !important}[data-t8n^=pulse].transition-out{animation:pulse .8s reverse;display:inline-block !important}[data-t8n^=zoom].transition-in{animation:zoom-in .8s;display:inline-block !important}[data-t8n^=zoom].transition-out{animation:zoom-in .8s reverse;display:inline-block !important}[data-t8n^=blur].transition-in{animation:blur .8s;display:inline-block !important}[data-t8n^=blur].transition-out{animation:blur .8s reverse;display:inline-block !important}[data-t8n^=slideleft].transition-in{animation:slide-left .8s;display:inline-block !important}[data-t8n^=slideleft].transition-out{animation:slide-right .8s reverse;display:inline-block !important}[data-t8n^=slideright].transition-in{animation:slide-right .8s;display:inline-block !important}[data-t8n^=slideright].transition-out{animation:slide-left .8s reverse;display:inline-block !important}[data-t8n^=slideup].transition-in{animation:slide-up .8s;display:inline-block !important}[data-t8n^=slideup].transition-out{animation:slide-down .8s reverse;display:inline-block !important}[data-t8n^=slidedown].transition-in{animation:slide-down .8s;display:inline-block !important}[data-t8n^=slidedown].transition-out{animation:slide-up .8s reverse;display:inline-block !important}[data-t8n^=fadeleft].transition-in{animation:fade-left .8s;display:inline-block !important}[data-t8n^=fadeleft].transition-out{animation:fade-right .8s reverse;display:inline-block !important}[data-t8n^=faderight].transition-in{animation:fade-right .8s;display:inline-block !important}[data-t8n^=faderight].transition-out{animation:fade-left .8s reverse;display:inline-block !important}[data-t8n^=fadeup].transition-in{animation:fade-up .8s;display:inline-block !important}[data-t8n^=fadeup].transition-out{animation:fade-down .8s reverse;display:inline-block !important}[data-t8n^=fadedown].transition-in{animation:fade-down .8s;display:inline-block !important}[data-t8n^=fadedown].transition-out{animation:fade-up .8s reverse;display:inline-block !important}[data-t8n^=flicker].transition-in{animation:flicker .8s}[data-t8n^=flicker].transition-out{animation:flicker .8s reverse}
</style>
</head>
<body>
<tw-story><noscript><tw-noscript>JavaScript needs to be enabled to play memory palace 2.0.</tw-noscript></noscript></tw-story>
<tw-storydata name="memory palace 2.0" startnode="1" creator="Twine" creator-version="2.3.12" ifid="14664727-C41C-4880-B68E-989947B4E5A4" zoom="0.6" format="Harlowe" format-version="3.2.1" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style><script role="script" id="twine-user-script" type="text/twine-javascript">window.Harlowe = { 'State' : State };
window.processInputElements = function () {
    $('input[data-varname]').on('change', function () {
        var varName = $(this).attr('data-varname');
        Harlowe.State.variables[varName] = this.value;
        $("tw-story").css("height","100%");
				$("tw-story").css("background-repeat","no-repeat");	
    });
};


if (typeof window.CustomScripts == "undefined") {
	window.CustomScripts = {
		updateBackground(myBackground){
			// if it's always going to be cover, you can put it outside the if statement
			$("tw-story").css("background-size","contain");
			$("tw-story").css("background-repeat","no-repeat");					
			$("tw-story").css("background-position","center");	
			// check the functions parameter for which background image to use
			if(myBackground == 0) //century backgrounds take nos 0, 100, 200 etc.
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/v4xx3o3w11a0vql/cof2vTfnHtunnels.jpg?raw=1)");
			}
			else if(myBackground == -13) 
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/zmg7jk2/arches-Of-Notre-Dame.jpg)");
			}
			else if(myBackground == -12) // 
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/fkvzyZX/thugs.jpg)");
			}
			else if(myBackground == -11) // 
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/wKZ7YhN/thomas-Becket-Blinded.jpg)");
			}
			else if(myBackground == -10) // 
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/yVNS2QL/charlemagnes-Death.jpg)");
			}
			else if(myBackground == -9) // 
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/hyzKg9M/thomas-Becket-Window-Invert.jpg)");
			}
			else if(myBackground == -8) // 
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Kw4PqNq/baby-Dragon.jpg)");
			}
			else if(myBackground == -7) // 
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/10Ss8Vp/eustace-Red.jpg)");
			}
			else if(myBackground == -6) // 
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/BK35wdS/treaty-Of-Winchester-Bloody.png)");
			}
			else if(myBackground == -5) // 
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/zPXS9fj/king2-Purple.jpg)");
			}
			else if(myBackground == -4) // 
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/yfz3mc2/Stephen-Blue.jpg)");
			}
			else if(myBackground == -3) // 
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Lp6SFJ9/prince-Corpse.jpg)");
			}
			else if(myBackground == -2) // 
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/FwnDHCw/butcher2.jpg)");
			}
			else if(myBackground == -1) // 
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/08/b2/5a/08b25ac76c7c0c5571e0b98af8bd53f5.jpg)");
			}
			else if(myBackground == 0.000001) // exception at 0, 
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/93iq8q4auwoerie/black.jpeg?raw=1)");
			}
			else if(myBackground == 0.00001) // 
			{
				$("tw-story").css("background-image","url(			https://www.dropbox.com/s/il78q0fsq1tctqs/gazebo.jpg?raw=1)");
			}
			else if(myBackground == 0.00002) // 
			{
				$("tw-story").css("background-image","url(			https://www.dropbox.com/s/etir7y2yinvg3kj/pink.jpeg?raw=1)");
			}
			else if(myBackground == 0.00003) // 
			{
				$("tw-story").css("background-image","url(			https://www.dropbox.com/s/g99ux4o8rct7kyq/red.jpeg?raw=1)");
			}	
			else if(myBackground == 0.00004) // 
			{
				$("tw-story").css("background-image","url(			https://www.dropbox.com/s/rh6zp0edqs27vt2/purple.jpeg?raw=1)");
			}
			else if(myBackground == 0.00005) // 
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/ht53azopieym51m/blue.jpeg?raw=1)");
			}
			else if(myBackground == 0.00006) // 
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/nydf5armz25489n/turquoise.jpeg?raw=1)");
			}
			else if(myBackground == 0.00007) // 
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/vyn3agwv12dxan1/grassy.jpeg?raw=1)");
			}
			else if(myBackground == 0.00008) // 
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/zyaqskc1fskgwz5/yellow.jpeg?raw=1)");
			}
			else if(myBackground == 0.00009) // 
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/mbit55sgo4lzwqt/bench.jpeg?raw=1)");
			}
				else if(myBackground == 0.000010) // 
			{
				$("tw-story").css("background-image","url(	https://www.dropbox.com/s/h4ah5ljb7j006d0/20.jpeg?raw=1)");
			}			
	else if(myBackground == 0.000011) // 
			{
				$("tw-story").css("background-image","url(	https://www.dropbox.com/s/18dy7qsnpv0trqu/21.jpeg?raw=1)");
			}	
	else if(myBackground == 0.000012) // 
			{
				$("tw-story").css("background-image","url(	https://www.dropbox.com/s/ixtja8zkexsfq5a/22.jpeg?raw=1)");
			}
	else if(myBackground == 0.000013) // 
			{
				$("tw-story").css("background-image","url(	https://www.dropbox.com/s/j5vaukhzwfvjcmx/23.jpeg?raw=1)");
			}
	else if(myBackground == 0.000014) // 
			{
				$("tw-story").css("background-image","url(	https://www.dropbox.com/s/d1fs93fjwp134uu/14.jpeg?raw=1)");
			}
	else if(myBackground == 0.000015) // 
			{
				$("tw-story").css("background-image","url(	https://www.dropbox.com/s/68ws45ikqmsob0d/15.jpeg?raw=1)");
			}
	else if(myBackground == 0.000016) // 
			{
				$("tw-story").css("background-image","url(	https://www.dropbox.com/s/bpz86ugcibb7vld/16.jpeg?raw=1)");
			}
	else if(myBackground == 0.000017) // 
			{
				$("tw-story").css("background-image","url(	https://www.dropbox.com/s/dnwrtyfhh674nex/17.jpeg?raw=1)");
			}
	else if(myBackground == 0.000018) // 
			{
				$("tw-story").css("background-image","url(	https://www.dropbox.com/s/7q78y2ib9mx5ily/18.jpeg?raw=1)");
			}
	else if(myBackground == 0.000019) // 
			{
				$("tw-story").css("background-image","url(	https://www.dropbox.com/s/cq8ro5e5oevreq1/19.jpeg?raw=1)");
			}
	else if(myBackground == 0.000020) // 
			{
				$("tw-story").css("background-image","url(	https://www.dropbox.com/s/h4ah5ljb7j006d0/20.jpeg?raw=1)");
			}
			else if(myBackground == 1) // decade nos end in 1
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/qho1wdd3j3xalrx/mushrooms.jpeg?raw=1)");
			}

			
			else if(myBackground == 0.00100)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/i5qjdc2y78qwhd9/0winchRoom2.jpeg?raw=1)");
			}
	else if(myBackground == 0.00101)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/cjtp5kiip7smtd4/1jester15.jpeg?raw=1)");
			}
	else if(myBackground == 0.00102)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/6fjozxai0x5qlrh/2masterOfCeremonies.jpeg?raw=1)");
			}
	else if(myBackground == 0.00103)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/fs8rjqkxxx8qwiv/3dancers5.jpeg?raw=1)");
			}
	else if(myBackground == 0.00104)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/mbxpmg58r9l8d3t/4messHall4.jpeg?raw=1)");
			}
	else if(myBackground == 0.00105)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/iy14fu0xbvj53kk/5glads7.jpeg?raw=1)");
			}
	else if(myBackground == 0.00106)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/hui5v7o0dplf92k/6cagedBeasts3.jpeg?raw=1)");
			}
	else if(myBackground == 0.00107)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/3ba547fx41l2ij9/7christian.jpeg?raw=1)");
			}
	else if(myBackground == 0.00108)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/zkao1jtc8fhjckq/8woundedGladiator.jpeg?raw=1)");
			}
	else if(myBackground == 0.00109)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/ivddnsmt9xmx861/9morgu.jpeg?raw=1)");
			}
	else if(myBackground == 0.001010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/4zdvnfh1z95s64c/10download%20%2827%29.png?raw=1)");
			}
	else if(myBackground == 0.001011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/p2fn35pi49ysd1u/11download%20%2825%29.png?raw=1)");
			}
	else if(myBackground == 0.001012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/3ffxz8h95blsek7/12download%20%2828%29.png?raw=1)");
			}
	else if(myBackground == 0.001013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/gbzqwlk66p05hag/13download%20%2829%29.png?raw=1)");
			}
	else if(myBackground == 0.001014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/ml0liu3g2nssvdz/14download%20%2830%29.png?raw=1)");
			}
	else if(myBackground == 0.001015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/gfjushux4fjymp1/16download%20%2833%29.png?raw=1)");
			}
	else if(myBackground == 0.001016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/j0cmtrdbb856ji7/17download%20%2834%29.png?raw=1)");
			}
	else if(myBackground == 0.001017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/4nyvqkhkv05imac/18download%20%2835%29.png?raw=1)");
			}
	else if(myBackground == 0.001018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/dr16sfkhp9koehu/19download%20%2836%29.png?raw=1)");
			}
	else if(myBackground == 0.001019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/buxq9s29tu3pmdm/20download%20%2845%29.png?raw=1)");
			}
	else if(myBackground == 0.001020)  
 			 {
 				 $("tw-story").css("background-image","url(None)");
			}
			

			else if(myBackground == 11)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/mpjuiwhxpowiy39/hypogeum.jpeg?raw=1)");
			}
			else if(myBackground == 21)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/xswxjd64vru9hmz/download%20%2819%29.jpeg?raw=1)");
			}
				else if(myBackground == 0.00200)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/78j55aj4mptwy1c/0mess.jpeg?raw=1)");
			}
	else if(myBackground == 0.00201)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/uo6qobiii1kjcsu/1chessRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.00202)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/74ngf8o2yc5jf0b/2spyhole.jpeg?raw=1)");
			}
	else if(myBackground == 0.00203)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/1kuy8btejbwixxx/3womens_area4.jpeg?raw=1)");
			}
	else if(myBackground == 0.00204)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/lfg7hgxk2a5wi6t/4lounge3.jpeg?raw=1)");
			}
	else if(myBackground == 0.00205)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/qq4q4g8ugtm5v99/5interrogationRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.00206)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/5cem7ems1uycl45/6detentionCell.jpeg?raw=1)");
			}
	else if(myBackground == 0.00207)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/tdu1mtgm2m40ob9/7prayerMat.jpeg?raw=1)");
			}
	else if(myBackground == 0.00208)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/17lykurpo390r3s/8sickBay.jpeg?raw=1)");
			}
	else if(myBackground == 0.00209)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/jr2s8743okg185g/9morgue.jpeg?raw=1)");
			}
	else if(myBackground == 0.002010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/m6aruzh1gsfavvs/download%20%281%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.002011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/scxyvm8tyxfomx8/download%20%282%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.002012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/6dxfzk7ygyofz0q/download%20%283%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.002013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/mccxoxtmyzeqysj/download%20%284%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.002014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/n4ue3f5rbou3f83/download%20%285%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.002015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/uewuzn62thk1sod/download%20%286%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.002016)  
 			 {
 				 $("tw-story").css("background-image","url(https://i.ibb.co/hCsSZw0/CREATOR-gd-jpeg-v1-0-using-IJG-JPEG-v80-quality-80.jpg)");
			}
	else if(myBackground == 0.002017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/xpsy3o1ew03o0wm/topOfStairs.jpeg?raw=1)");
			}
	else if(myBackground == 0.002018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/x7c69o4tqsdd54q/download%20%287%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.002019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/0wlk3d8wowixxo5/download%20%288%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.002020)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/vcgcx5ywb36987r/download%20%289%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.002021)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/irh9ehfkqsdj8hw/download%20%2810%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.002022)  
 			 {
 				 $("tw-story").css("background-image","url(None)");
			}
			else if(myBackground == 31)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/cw1dsh2z9mv4ep3/download.jpeg?raw=1)");
			}
				else if(myBackground == 0.00300)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/k8fmkbki2hqp0gl/0birthing.jpeg?raw=1)");
			}
	else if(myBackground == 0.00301)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/5wqo144veker8tp/1orgy.jpeg?raw=1)");
			}
	else if(myBackground == 0.00302)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/ih66u6e1rt06lrq/2detective.jpeg?raw=1)");
			}
	else if(myBackground == 0.00303)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/7lxqdoz4oe3n84i/3lovers.jpeg?raw=1)");
			}
	else if(myBackground == 0.00304)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/b5luevyc0wvog3y/4lounge.jpeg?raw=1)");
			}
	else if(myBackground == 0.00305)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/rjm6qwppibvrjny/5fightingLovers.jpeg?raw=1)");
			}
	else if(myBackground == 0.00306)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/xnxm46m5q9o4hnv/6bdsm.jpeg?raw=1)");
			}
	else if(myBackground == 0.00307)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/3mtd9d6l934gc9l/7priest.jpeg?raw=1)");
			}
	else if(myBackground == 0.00308)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/ik06l9mo72qiopd/8brokenhearted.jpeg?raw=1)");
			}
	else if(myBackground == 0.00309)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/82zd8hwt2kj0yyl/9abortion.jpeg?raw=1)");
			}
	else if(myBackground == 0.003010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/c7kmbwo5mdml6nk/download%20%281%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.003011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/9fxhe13cve5urkw/download%20%282%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.003012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/2f2nob16y18iwlc/download%20%283%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.003013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/pwdqnmd6wueggd3/download%20%284%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.003014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/fpkjpdkpptebpe6/download%20%285%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.003015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/7tuj8xugqm1x38f/download%20%286%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.003016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/ibd3vuyu5t0bd1h/download%20%287%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.003017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/zoh8bacan20vsws/download%20%288%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.003018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/kt53qq1q25ar6gn/download%20%289%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.003019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/zp14z34ejommubd/download%20%2810%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.003020)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/g2eagfyeapm9e4h/download%20%2811%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.003021)  
 			 {
 				 $("tw-story").css("background-image","url(None)");
			}

			else if(myBackground == 41)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/2c/6a/6d/2c6a6da05c9ba99228068306657fbf82.jpg)");
			}
			else if(myBackground == 0.00400)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/liczwcvn4neukhz/0_baptismPool.jpeg?raw=1)");
			}
	else if(myBackground == 0.00401)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/o1e12iaov377z4v/1_sunday_school.jpeg?raw=1)");
			}
	else if(myBackground == 0.00402)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/17w28bh0znebe36/2_testament_room.jpeg?raw=1)");
			}
	else if(myBackground == 0.00403)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/u6wzldxjxfg04qu/3_matrimonial_chapel.jpeg?raw=1)");
			}
	else if(myBackground == 0.00404)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/n5n9tfovra6n6mr/4_social_hall.jpeg?raw=1)");
			}
	else if(myBackground == 0.00405)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/mofkzkpwq4vz4s4/5_disputing_chamber.jpeg?raw=1)");
			}
	else if(myBackground == 0.00406)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/472o0j6gs8l1t4x/6_penance_chaamber.jpeg?raw=1)");
			}
	else if(myBackground == 0.00407)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/e17364txqvatdgj/7_chapel.jpeg?raw=1)");
			}
	else if(myBackground == 0.00408)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/go0lk6ft5os2ytq/8_stigmatic_saint.jpeg?raw=1)");
			}
	else if(myBackground == 0.00409)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/uv4cm977bxrvtgw/9_catacombs.jpeg?raw=1)");
			}
	else if(myBackground == 0.004010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/y5lhtt6xmkov993/10_tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.004011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/7n3c2233qwz3d2t/11_tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.004012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/fmigkypv3rop98x/12_tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.004013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/n6h3nodeslqeazi/13_tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.004014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/gaopgr96hg97c3a/14_tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.004015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/0jq3j3z2xtbcune/15_tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.004016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/rwqxox9yr1779gj/16_tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.004017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/t6v94hn48zd9ibn/17_tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.004018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/3311wbrnk9pub9u/18_tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.004019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/jm978grr51286me/19_tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.004020)  
 			 {
 				 $("tw-story").css("background-image","url(None)");
			}

			else if(myBackground == 51)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/buo1xycwf4lzgvx/intro.jpeg?raw=1)");
			}
	else if(myBackground == 0.00500)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/g0uk6nr44krehap/1forge.jpeg?raw=1)");
			}
	else if(myBackground == 0.00501)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/tcq08rl595gw41a/2drillPractice.jpeg?raw=1)");
			}
	else if(myBackground == 0.00502)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/cw593bmy5lju6ca/2library.jpeg?raw=1)");
			}
	else if(myBackground == 0.00503)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/so2clv2t530f0q0/3bar.jpeg?raw=1)");
			}
	else if(myBackground == 0.00504)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/cizbsdhsy16w2c9/4heraldry%20room.jpeg?raw=1)");
			}
	else if(myBackground == 0.00505)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/2n7fs58o0uf2fok/5heavyMagazine.jpeg?raw=1)");
			}
	else if(myBackground == 0.00506)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/25gwynllj8jfrz0/6prison.jpeg?raw=1)");
			}
	else if(myBackground == 0.00507)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/2rznkmuwey69cg8/7holysword.jpeg?raw=1)");
			}
	else if(myBackground == 0.00508)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/1qimn4d5eixgxv4/8repairShop.jpeg?raw=1)");
			}
	else if(myBackground == 0.00509)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/kyb9skvp960ng7q/9decommissioning.jpeg?raw=1)");
			}
	else if(myBackground == 0.005010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/pwc1i9iujrdxww5/10tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.005011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/e1vyha3e7gynkkk/11tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.005012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/mqulk2lazpf9rgi/12tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.005013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/q0he7d2sdm0rifs/13tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.005014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/neagffz3u5fg3c6/14tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.005015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/7yij583m93m05le/15tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.005016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/6c088b8xdbxb0d0/16stairs.jpeg?raw=1)");
			}
	else if(myBackground == 0.005017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/qmsn5v658f74lkk/17stairs.jpeg?raw=1)");
			}
	else if(myBackground == 0.005018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/ldhg2ios0pkyj9v/16tunnel.jpeg?raw=1)");
			}

			

			else if(myBackground == 61)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AACwlmb3Jsx-O-J4r0luimABa/19tunnel.jpeg?raw=1)");
			}
			
				else if(myBackground == 0.00600)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AADUCQWnuHSgKxJtt4gjXhT2a/0pitchBlack.jpeg?raw=1)");
			}
	else if(myBackground == 0.00601)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AACLbodauNBF1-APOxDLdhHQa/1wellLit.jpeg?raw=1)");
			}
	else if(myBackground == 0.00602)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AAC44gXePdyVGra1CcaeTZMwa/2library.jpeg?raw=1)");
			}
	else if(myBackground == 0.00603)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AADPounm6Aji7O1cp7yVNMjua/3kitchen.jpeg?raw=1)");
			}
	else if(myBackground == 0.00604)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AADpxXWl54_6p5_-8YtLLerxa/4purple.jpeg?raw=1)");
			}
	else if(myBackground == 0.00605)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AADP672z_1T-GbMEDzyb8xWIa/5fightingPit.webp?raw=1)");
			}
	else if(myBackground == 0.00606)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AACXzjCevZYX981dxNaZBynia/6prisonYard.jpg?raw=1)");
			}
	else if(myBackground == 0.00607)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AABRsQ3px6YSAHAtyb0csu-Ia/7chapel.jpeg?raw=1)");
			}
	else if(myBackground == 0.00608)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AAC--9vGhN-PXmYwMFL2WSLRa/8latrine.jpeg?raw=1)");
			}
	else if(myBackground == 0.00609)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AABE4biP0RPL1k-eaC6Pwblva/9garbage.jpeg?raw=1)");
			}
	else if(myBackground == 0.006010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AAB-VlUE8y8Xn44UA_n8tZEDa/10tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.006011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AAAWu9kEJkH2nDQ5CCmz2OWTa/11tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.006012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AAAbXOFeJRi2mkrxW5cwrjMHa/12tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.006013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AABVAyN3FRnpkn8n_l9Md038a/13tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.006014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AAD5cMyEi6bsXZBCZbn8vgOva/14tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.006015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AACZ_LlQalCEy1dpd_YUUQgva/15tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.006016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AAA7DUCeyjKXyTpf5fB8IjQva/16stairs.jpeg?raw=1)");
			}
	else if(myBackground == 0.006017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AABVPa8MO9VeopJB373JL8r2a/17stairs.jpeg?raw=1)");
			}
	else if(myBackground == 0.006018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AAAsv4UUYezfenMPWmF1AI-pa/18tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.006019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/68pdicrbmzqgwuk/AACwlmb3Jsx-O-J4r0luimABa/19tunnel.jpeg?raw=1)");
			}

			else if(myBackground == 71)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AAA1ExH1w-6G_Sf68S84Q4xBa/19tunnel.jpeg?raw=1)");
			}
				else if(myBackground == 0.00700)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AADKkKbym92Db2lIdtW76OVVa/0font.jpeg?raw=1)");
			}
	else if(myBackground == 0.00701)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AADrSUfuTdF2brXbrP2imSiWa/1childrensPrayerRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.00702)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AAC8CD2FDEgBcP9-DYk1y3mPa/2pamphletRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.00703)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AACBUlXbydOuHPGK0zcCBpPOa/3virginMary.jpeg?raw=1)");
			}
	else if(myBackground == 0.00704)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AADUTtrBS7Vs2XBnb3NpU4j1a/4eldersQuarters.jpeg?raw=1)");
			}
	else if(myBackground == 0.00705)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AADWkl81J25h1qud5qau0u76a/5abandonedSwords.jpeg?raw=1)");
			}
	else if(myBackground == 0.00706)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AAAOHBuGewPIMEyVlv_pLLuNa/6hideout.jpeg?raw=1)");
			}
	else if(myBackground == 0.00707)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AAClCwjScctITQ2wvr-rHXOZa/7altar.jpeg?raw=1)");
			}
	else if(myBackground == 0.00708)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AADM7CesJEIx1YvQO0VwdKdWa/8brokenArtifacts.jpeg?raw=1)");
			}
	else if(myBackground == 0.00709)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AAD7ijY7VwwP6ayG6JB3puLva/9crypt.jpeg?raw=1)");
			}
	else if(myBackground == 0.007010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AAA-zzjzmebqI_B-LleBxOaXa/10tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.007011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AACjU2kR87H28h_YMri7INVza/11tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.007012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AACuL0js2S6qvQz_WzyapY0Wa/12tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.007013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AABq0h5Pk8lDYV69D_uH2c73a/13tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.007014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AADrs6nk9gvDIoSjaOl3mon4a/14tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.007015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AADFIYVJBgMi4jqjvr5P4p3Ia/15tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.007016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AADrB88YnRJvIX_LkZe2eoyra/16tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.007017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AABubhrxv4mwtJDEmeoS40Vta/17tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.007018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AACkYBJ1Y7_ehCXwz8sUARAea/18tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.007019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/vppyq82kgjysfup/AAA1ExH1w-6G_Sf68S84Q4xBa/19tunnel.jpeg?raw=1)");
			}
			else if(myBackground == 81)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/wi3beb8gij6a3jh/entry.jpeg?raw=1)");
			}
				else if(myBackground == 0.00800)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AABy8jcTI5QdnsoMElPsagBia/0breakfast.jpeg?raw=1)");
			}
	else if(myBackground == 0.00801)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AAAnkd7Vhm6LbkFl3LEuIHh7a/1games.jpeg?raw=1)");
			}
	else if(myBackground == 0.00802)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AAAvt87eyu78HdWnfGDnYl35a/2study.jpeg?raw=1)");
			}
	else if(myBackground == 0.00803)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AABep6CiofZ6bFdfm-XTDLwqa/3bathroom.jpeg?raw=1)");
			}
	else if(myBackground == 0.00804)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AADLxNBkznGXEMDOvG2yEOtpa/4lounge.jpeg?raw=1)");
			}
	else if(myBackground == 0.00805)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AACaDhVrkr9M4DnfhXRutes-a/5bathhouse.jpeg?raw=1)");
			}
	else if(myBackground == 0.00806)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AADBaIwC5h1yJGSYiEfrHY2Oa/6cell.jpeg?raw=1)");
			}
	else if(myBackground == 0.00807)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AADLbPEaMYXOhln0VBfAwcSha/7prayerroom.jpeg?raw=1)");
			}
	else if(myBackground == 0.00808)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AACQZy7BogWZQLFRL44ar6DRa/8apothecary.jpeg?raw=1)");
			}
	else if(myBackground == 0.00809)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AACZxl9I9vSTILzdaP5nNCR3a/9morgue.jpeg?raw=1)");
			}
	else if(myBackground == 0.008010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AABTeY9k1IHEqOu8Q2onMszFa/10tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.008011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AAD4TQz7yRTNG0mZDdAnRZZia/11tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.008012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AABVTMesSYFFtnYpYkxYlNX0a/12tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.008013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AADkX0PFqkqi7tDBAx9tR9pCa/13tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.008014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AADmQbzwbIJFJh2kbqdXS0VGa/14tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.008015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AACpD0rg5lyV02XtpcPj7xZta/15tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.008016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AAB-JRqMZ7eROkUdYSxDypbXa/16tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.008017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AAB6V9WrctzFUeStTGkvUGuRa/17tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.008018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AAC_I-5qtnLRimLbOY9lItnha/18tunnel.jpeg?raw=1)");
			}
	else if(myBackground == 0.008019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uof7j7qlz98flbi/AADZ1HcQB2S0jq5Szbk1jqE2a/19tunnel.jpeg?raw=1)");
			}
			else if(myBackground == 91)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/88/92/e1/8892e11f0ae9128001380264179ffd88.jpg)");
			}
				else if(myBackground == 0.00900)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/0s3wfa7c5ru5pi5/0pitchblacktomb.jpeg?raw=1)");
			}
	else if(myBackground == 0.00901)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/rz6ohmgkhtdlsom/1childsSarcophagus.jpeg?raw=1)");
			}
	else if(myBackground == 0.00902)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/hrknzpilmf8aj0r/2_epitaphs2.jpeg?raw=1)");
			}
	else if(myBackground == 0.00903)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/pp5kvnbgespgn8n/3women%27sCrypt.jpeg?raw=1)");
			}
	else if(myBackground == 0.00904)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/532v0izo104fa63/4treasury.jpeg?raw=1)");
			}
	else if(myBackground == 0.00905)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/bq6dybe1jogw4nt/5armory.jpeg?raw=1)");
			}
	else if(myBackground == 0.00906)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/9q0k83jj9bul2az/6immurementChamber.jpeg?raw=1)");
			}
	else if(myBackground == 0.00907)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/s0dej1vevaobrmi/7shrine.jpeg?raw=1)");
			}
	else if(myBackground == 0.00908)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/i7fcor89n5aldk7/8collapsedChamber.jpeg?raw=1)");
			}
	else if(myBackground == 0.00909)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/o6iusv72o0nanw3/9chamberOfBones.png?raw=1)");
			}
	else if(myBackground == 0.009010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/3095zrhp7kh0dwz/10corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.009011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/jb55v2fe8k4sute/11corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.009012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/yvvu2htk65n4r5q/12corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.009013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/20fa6gta8i6n4yb/13corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.009014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/83fkax71v3q7mmu/14corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.009015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/ccb0v0mmht239hy/15corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.009016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/35t57rtxi20fy9h/16corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.009017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/tzhcby1qhnk4rzm/17corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.009018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/yl484ri0qmqzn1d/18corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.009019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/1a9jtggfv9a2j9m/19corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.009020)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/e5r6vv2t9npdsh0/20corridor.jpeg?raw=1)");
			}

			else if(myBackground == 100)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/4f/0b/88/4f0b88df6b723ffda1fb80629884521a.jpg)");
			}
			else if(myBackground == 101)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/5b/c7/19/5bc719f84cfc170ff0558702b2c97876.jpg)");
			}
				else if(myBackground == 0.01000)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AAA0KximQBo5LnlzcodPb07ha/0blackShale.jpeg?raw=1)");
			}
	else if(myBackground == 0.01001)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AAChsBhch4I6jErVthikHe46a/1swingSeat.jpeg?raw=1)");
			}
	else if(myBackground == 0.01002)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AABqun3Y8z6eO4UK_QB4BgyRa/2pinkCarnations.jpeg?raw=1)");
			}
	else if(myBackground == 0.01003)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AAA8t8M2d2_p8CJarsc3Ollca/3loveseat.jpeg?raw=1)");
			}
	else if(myBackground == 0.01004)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AAArhOO3Rk7m2F4TB36ln6Fra/4statue.jpeg?raw=1)");
			}
	else if(myBackground == 0.01005)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AAALiDa43tJzT4HSEUeGiCMaa/5cenotaph.jpeg?raw=1)");
			}
	else if(myBackground == 0.01006)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AADNb3ZPsyjxPQuiJPorUIQJa/6cagedDisplay.jpeg?raw=1)");
			}
	else if(myBackground == 0.01007)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AAC5CHK9woP5GjWg3FAsddx1a/7grassy.jpeg?raw=1)");
			}
	else if(myBackground == 0.01008)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AADjW3AXzwHAFvK2CoyPIx75a/8sunflowers.jpeg?raw=1)");
			}
	else if(myBackground == 0.01009)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AAA5hInTJW9JwQX3yB-nglbOa/9bench.jpeg?raw=1)");
			}
	else if(myBackground == 0.010010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AADiqiaIeUncUCHXt5WhiYBwa/10armando-savoia-giardino-2.jpeg?raw=1)");
			}
	else if(myBackground == 0.010011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AAD71Eqvo1C9Ioxshv-JQ8d2a/11michel-kooper-ryse-naturalpath01.jpeg?raw=1)");
			}
	else if(myBackground == 0.010012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AABXsf9qTn8KDnOweO43d0QXa/12michel-kooper-ryse-naturalpath04.jpeg?raw=1)");
			}
	else if(myBackground == 0.010013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AAAapdFPPPwszp85XFyQV6j8a/13michel-kooper-ryse-naturalpath05.jpeg?raw=1)");
			}
	else if(myBackground == 0.010014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AABgNGBibghISrKQq4XZ8wCba/14michel-kooper-ryse-naturalpath06.jpeg?raw=1)");
			}
	else if(myBackground == 0.010015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AAChvNmZ4fC93OgJS2Sv5KRsa/15sina-hayati-img-modified.jpeg?raw=1)");
			}
	else if(myBackground == 0.010016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AADarv6OtJXVPcvTqbazInjga/16mohsen-zamanpoor-dolatabad02.jpeg?raw=1)");
			}
	else if(myBackground == 0.010017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AADvpytbA0c3dukoO0haLuzLa/17jason-peek-highresscreenshot00034.jpeg?raw=1)");
			}
	else if(myBackground == 0.010018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AAC7TbXMPm1XN6mBWrwbO9cUa/18jason-peek-highresscreenshot00035.jpeg?raw=1)");
			}
	else if(myBackground == 0.010019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/xv2vdgbiy60k78m/AACXZmLVaNGQd8HzawDbAPFca/19waterfallMod.jpeg?raw=1)");
			}
			else if(myBackground == 111)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AABkZm0nK_-86SNp71D3jJkqa/archive0_gilles-beloeil-ace-arene-crocodilopolis-entrance-color-gbeloeil.jpeg?raw=1)");
			}
			else if(myBackground == 0.01100)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AAC89THY3dh7yvr3f--l03Lma/0_gilles-beloeil-ace-arene-crocodilopolis-entrance-color-gbeloeil.jpeg?raw=1)");
			}
	else if(myBackground == 0.01101)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AAAOL5cXgJhrMQqsY7hevtjMa/1practiceArea.jpeg?raw=1)");
			}
	else if(myBackground == 0.01102)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AAAHWJAgRvqvWgYdsFoRoPnCa/2scorersBallustrade.jpeg?raw=1)");
			}
	else if(myBackground == 0.01103)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AABpNRoqi9li5_peSYEFuvjTa/3pavilion.jpeg?raw=1)");
			}
	else if(myBackground == 0.01104)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AADxKMhWJ4w9lCML3BY5xjyBa/4caesarsBox.jpeg?raw=1)");
			}
	else if(myBackground == 0.01105)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AABBQx1-8gs0Oq6JBJBs3JH3a/5southWestStand.jpeg?raw=1)");
			}
	else if(myBackground == 0.01106)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AABrhL6RcBhlPwEVIDhdbYvRa/6cagedAnimal.jpeg?raw=1)");
			}
	else if(myBackground == 0.01107)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AAAxj6ukprzfyiVu1-PaA9kra/7prayertent.jpeg?raw=1)");
			}
	else if(myBackground == 0.01108)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AACEDouj1NQH3C_cnzZeuqKBa/8injuryTent.jpeg?raw=1)");
			}
	else if(myBackground == 0.01109)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AAAPerSBuCrJ1V1vGTiIW_Hoa/9morgue.jpeg?raw=1)");
			}
	else if(myBackground == 0.011010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AADjg0WMH6cwSUFBJKzJVh84a/10southeastStand.jpeg?raw=1)");
			}
	else if(myBackground == 0.011011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AADMkJOMHixZTF0NN4KbAX0-a/11behindMainStand.jpeg?raw=1)");
			}
	else if(myBackground == 0.011012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AADa4n6zHEHH6QTUY6UjH2waa/12_8477eac606801135e48e2208305f3914%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.011013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AABZ98YJLIp5bl6r6r2Rhyena/13topOfStairs.jpeg?raw=1)");
			}
	else if(myBackground == 0.011014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AADOlQ6cpLthQvmPVAsNn7lxa/14cheapSeats.jpeg?raw=1)");
			}
	else if(myBackground == 0.011015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AAApEZALe6PG5BMERfndv_Q3a/15_8477eac606801135e48e2208305f3914%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.011016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AAApd7UlieJ08s33rOdmvmPka/16steps.jpeg?raw=1)");
			}
	else if(myBackground == 0.011017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AABXdqZUWP7ksssNHtcYzjbWa/17_8477eac606801135e48e2208305f3914%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.011018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AABAkUqKknamEp6Jpyd3h19ja/18eaststand.jpeg?raw=1)");
			}
	else if(myBackground == 0.011019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AABw0DXOx_brWT3fapYZZNCya/19stepway.jpeg?raw=1)");
			}
	else if(myBackground == 0.011020)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AADh9CsbSmPTPOLNn3IAz7eMa/20_8477eac606801135e48e2208305f3914%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.011021)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AAC8GUtEvH-vnav4ovsNaz4Ba/21footOfStairwell.jpeg?raw=1)");
			}
	else if(myBackground == 0.011022)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AACBe6hv6OFhHH5IY8LxxLZ3a/22_8477eac606801135e48e2208305f3914%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.011023)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AAAKI5g33Xr2uIcGn2IQmC4wa/23_8477eac606801135e48e2208305f3914.jpeg?raw=1)");
			}
	else if(myBackground == 0.011024)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AAC4c47jc7kfdfXWkrY437uJa/24stands.webp?raw=1)");
			}
	else if(myBackground == 0.011025)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AAD3FZ97if4-E_qlJfKdCYHPa/25entrance.jpeg?raw=1)");
			}
	else if(myBackground == 0.011026)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AABrwPCNcm8cxzwBR4oOPDnPa/26northStand.jpeg?raw=1)");
			}
	else if(myBackground == 0.011027)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AAByIhppQFyvO2KQofGK4FLca/27northwestStand.jpeg?raw=1)");
			}
	else if(myBackground == 0.011028)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AAC9DjFEet2vILpC_OXvh5Eaa/28corner.jpeg?raw=1)");
			}		
	else if(myBackground == 0.011031)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AADE8EubXuwRZeZ0jxKVi5wWa/31southeastStand%20copy.jpeg?raw=1)");
			}				
	else if(myBackground == 0.011032)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/53axrb8pveqyp0g/AACc3r0w2lzP6PoTZJUU6aXha/32_8477eac606801135e48e2208305f3914%20copy%203.jpeg?raw=1)");
			}		

			else if(myBackground == 121)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AADZZ8OclLCiER_ON9uE_9Ora/2trainingYard.jpeg?raw=1)");
			}
			else if(myBackground == 0.01200)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AAC88IQ3wPdbYWwzM1fRHsXSa/0granary.jpeg?raw=1)");
			}
	else if(myBackground == 0.01201)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AABUdpJhty26BEhOwBB97ieea/1mess.jpeg?raw=1)");
			}
	else if(myBackground == 0.01202)  
 			 {
 				 $("tw-story").css("background-image","url(https://th.bing.com/th/id/Rde8b516f69680e4a2a7243c2ec81a701?rik=FLjo2Zvd6dVPyw&riu=http%3a%2f%2fimages4.wikia.nocookie.net%2f__cb20130419200553%2fspartacus%2fimages%2f5%2f59%2fSpartacus_Legends_Ludus_fight.png&ehk=YzsHyiOKeH38%2fusktTVJv%2beUid2DYSentQ23hcClX98%3d&risl=&pid=ImgRaw)");
			}
	else if(myBackground == 0.01203)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AABnhevxxvPWrUPEfGPijpica/3consort.jpeg?raw=1)");
			}
	else if(myBackground == 0.01204)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AADLSiz3FIVT2rJogQjhJmDQa/4dorm.jpeg?raw=1)");
			}
	else if(myBackground == 0.01205)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AAAa8QlsIdFX6ngX3oQ00L8Za/5armory.jpeg?raw=1)");
			}
	else if(myBackground == 0.01206)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AACmcUe61GmCeNJzQqUb79-sa/6cell.jpeg?raw=1)");
			}
	else if(myBackground == 0.01207)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AADWz895ICVCBg06w7dgmL5ea/7prayerRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.01208)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AAATOzmnN-7AA-91E4ppJkTCa/8apothecary.jpeg?raw=1)");
			}
	else if(myBackground == 0.01209)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AAALRrKTPm_kp6SQy5R6BeHaa/9morgue.jpeg?raw=1)");
			}
	else if(myBackground == 0.012010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AADzre9g6YAv0aGUCXIJ8B2ea/11corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.012011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AABfTvAn4MRwbfKKT9LjeaF1a/12corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.012012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AAAKy1-PPXSgJ---p_GSCW7Ga/13corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.012013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AAB2Hf4hoCDPQKsP06yuF0V0a/14corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.012014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AAByD7EbDuuco8bJFL7OWdtBa/15corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.012015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AADDV4MiwSc4peXqyRUIDydHa/16corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.012016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AADkiLpSy5VDend0ZGs5Qa2Qa/17corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.012017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AAD77C-xjfmvstdwPhxtN8d7a/18corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.012018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AACVuoQoS7Q78wbUlBXxFgXla/19corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.012019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3ku7p8d4y7qivgp/AADwBQ4mcuyLM3_xgZFazxWHa/21corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.012020)  
 			 {
 				 $("tw-story").css("background-image","url()");
			}
			else if(myBackground == 131)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/YW02YJF/temple-Of-Vesta.jpg)");
			}
			else if(myBackground == 0.01300)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AABsJphHM9nN6GEWkg6IqOnTa/0allotment.jpeg?raw=1)");
			}
	else if(myBackground == 0.01301)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAAoDobPEKCSGRcMyAcGCrtua/1chorus.jpeg?raw=1)");
			}
	else if(myBackground == 0.01302)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AADZSb1ove9O9wZwVE9ENI-ya/2scriptorium.jpeg?raw=1)");
			}
	else if(myBackground == 0.01303)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AADyUDEoajdvbwb_f4A8KL-ra/3kitchen.jpeg?raw=1)");
			}
	else if(myBackground == 0.01304)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AABxoj8YRiXG6pyLstHNipcea/4highPriestess.jpeg?raw=1)");
			}
	else if(myBackground == 0.01305)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AACVpX4xNRV5X-VgVHW5CDUoa/5chamberOfMars.jpeg?raw=1)");
			}
	else if(myBackground == 0.01306)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAANKW2DP1x08b_gBqzfr35Ma/6cell.jpeg?raw=1)");
			}
	else if(myBackground == 0.01307)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AACwD-TU2XRQ8Yonl6cwWKSea/7sacredFlame.jpeg?raw=1)");
			}
	else if(myBackground == 0.01308)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAC8_l42fw5wekbp-EXTuArXa/8infirmary.jpeg?raw=1)");
			}
	else if(myBackground == 0.01309)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AABDdo8raMtszjiuKDe6NOWCa/9morgue.jpeg?raw=1)");
			}
	else if(myBackground == 0.013010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AADeQ2TACIagrr3uibmxDYxWa/10__statue.jpeg?raw=1)");
			}
	else if(myBackground == 0.013011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAC-CS9Uqpn9wVkVTX4yOZOJa/11__insideWall.jpeg?raw=1)");
			}
	else if(myBackground == 0.013012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AABCLXen47nx-qh0wtKOYXYYa/12__rearAllotment.jpeg?raw=1)");
			}
	else if(myBackground == 0.013013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAAv_lOjgvfAu8gAWR4VknbIa/13__topOfStairs.jpeg?raw=1)");
			}
	else if(myBackground == 0.013014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AACO0vzDwuCAEonkL0prrdpBa/14__deambulatio.jpeg?raw=1)");
			}
	else if(myBackground == 0.013015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AADbvmQwU0kbXarpfn-9E53xa/15__allotment.jpeg?raw=1)");
			}
	else if(myBackground == 0.013016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAAGodlswXOX7ZZe3ZRMJaaFa/16__steps.jpeg?raw=1)");
			}
	else if(myBackground == 0.013017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAD18iJvPttTzLP7ZG5wi5sFa/17__pebbledPath.jpeg?raw=1)");
			}
	else if(myBackground == 0.013018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAAct7-4zzY4lE7Y0NqgnZ_ba/18__insideWall.jpeg?raw=1)");
			}
	else if(myBackground == 0.013019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAB3AasQ-xSL2ry9YcamwhqYa/19__groundFloorSteps.jpeg?raw=1)");
			}
	else if(myBackground == 0.013020)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AABV6cgywrQgR1louVR96o8Ia/20__footOfStairwell.jpeg?raw=1)");
			}
	else if(myBackground == 0.013021)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAD8F3b7Z7bxW9VbaBO_0rU_a/21__footOfStairwell%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.013022)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AABbn5kYx3j5aLEyAHsrCQdua/22__statue.jpeg?raw=1)");
			}
	else if(myBackground == 0.013023)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAAfzgOwDTALRuYUvOMxbNZWa/23__filler%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.013024)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AABel58xriYAWvd9_f8VYOb5a/24__insideWall.jpeg?raw=1)");
			}
	else if(myBackground == 0.013025)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAD6v72Coi4iNvVEN_9vBzvwa/25__stands.webp?raw=1)");
			}
	else if(myBackground == 0.013026)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AACZSlawZtlcHMDjWisBkn7-a/26__vestibulumWall.jpeg?raw=1)");
			}
	else if(myBackground == 0.013027)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AACJsMax_-Z14eFH6EfgMVtOa/27__Spire.jpeg?raw=1)");
			}
	else if(myBackground == 0.013028)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAD0nD6FtZrF7ZBXDoT6yyWea/28__corner.jpeg?raw=1)");
			}
	else if(myBackground == 0.013029)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AABQ6rvbF0WWxc9NQnItb33Ga/29__lowseats.jpeg?raw=1)");
			}
	else if(myBackground == 0.013030)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AACtj0NFfNBHXLvbuL860o6pa/30__lowseats%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.013031)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAChXVPWWx6SFdRSYsyA_ERQa/31__spire.jpeg?raw=1)");
			}
	else if(myBackground == 0.013032)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AAAAc_3-etd8irbwQ5mEX4N6a/32__sanctumGate.jpeg?raw=1)");
			}
	else if(myBackground == 0.013033)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AABTIon9Zmq_ubVL0VVZBR6ba/33__lowseats.jpeg?raw=1)");
			}
				else if(myBackground == 0.01300)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/43tsg9hrv75psok/AABsJphHM9nN6GEWkg6IqOnTa/0allotment.jpeg?raw=1)");
			}


			else if(myBackground == 141)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AACPoeto-1v6NNkuBemyBeB9a/800h-600-2599642.jpeg?raw=1)");
			}
			
				else if(myBackground == 0.01400)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AABOaWSJlETlLWTywhjKssYea/0_nursery.jpeg?raw=1)");
			}
	else if(myBackground == 0.01401)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AACWBzqYujf82ZOnlN48MwHBa/1_gamesRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.01402)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAANGZJ2ZRID0iuvPhTrbWdja/2_study.jpeg?raw=1)");
			}
	else if(myBackground == 0.01403)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AACciRPjhzrF5QZtWBiEREVna/3_kitchen.jpeg?raw=1)");
			}
	else if(myBackground == 0.01404)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AADXt_HTRLueH5XjXiesUHT4a/4_villaDiningRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.01405)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AACWjWqlKDXg_pQXQ1Mj6ChLa/5__trophyRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.01406)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAC3jk7Vit6flYtvmqJB4D4ra/6_stable2.jpeg?raw=1)");
			}
	else if(myBackground == 0.01407)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AABkaBD70VYrx1sDJEWkIU8Ga/7_shrine.jpeg?raw=1)");
			}
	else if(myBackground == 0.01408)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AABGKZgYe8tRIClg6oc9oHC_a/8_robert-roder-romanrains01.jpeg?raw=1)");
			}
	else if(myBackground == 0.01409)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AACrAYFjGjPUsBWf6ggMjKyia/9_casketRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.014010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAAXuaLClw21FgvvwQsGvMc6a/10_pattern%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.014011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAAQnMXLU_wVrrCoDdZnDoAaa/11_pattern%20copy%204.jpeg?raw=1)");
			}
	else if(myBackground == 0.014012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AADiC_InmAX5X-3XRw_yW7C-a/12_villa.jpeg?raw=1)");
			}
	else if(myBackground == 0.014013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAAQbyMuVZQR3Egq_sxu88qxa/13_villaInterior3.jpeg?raw=1)");
			}
	else if(myBackground == 0.014014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AABjqlmbHRh0oWNKLavCI-Q-a/14_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.014015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAAa1lj4H_AZ6gvsrBEbXFhfa/15_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.014016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AADvE7idaGKpedpJx3ms2dJNa/16_villaInterior4.jpeg?raw=1)");
			}
	else if(myBackground == 0.014017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AABt-07VdM1kHkNR8iOpx7kya/17_pattern%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.014018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AACpzyQVEfYxExo0Dh01IBCTa/18_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.014019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AACjaKR4X-2TneCwKLZby7SOa/19_steps.jpeg?raw=1)");
			}
	else if(myBackground == 0.014020)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AACEuv6CIdhVsy0SonwNtwZYa/20_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.014021)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAC-qvvN6FSJTQbMO0X-_FQ7a/21_basementStairs.jpeg?raw=1)");
			}
	else if(myBackground == 0.014022)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAB8t0Qux1d9seiNG1LDifZoa/22_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.014023)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAC8hDZsLVUk5cM84G92CenQa/23_villa.jpeg?raw=1)");
			}
	else if(myBackground == 0.014024)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAAOGD_acRYYd_aeg0W3EZV7a/24_pattern%20copy%203.jpeg?raw=1)");
			}
	else if(myBackground == 0.014025)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAAAoYYYodfFkQGtLnRVR-u_a/25_villaInterior1.jpeg?raw=1)");
			}
	else if(myBackground == 0.014026)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAAluI5-oQZujQggQXKsOAvba/26_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.014027)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AADQUDjMW65LZJT9jZTl0oBla/27_pattern%20copy%203.jpeg?raw=1)");
			}
	else if(myBackground == 0.014028)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAA2x75AOf6394dHpmdYEwVaa/28_pattern%20copy%203.jpeg?raw=1)");
			}
	else if(myBackground == 0.014029)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAC8_7QL1y5bquFJ1AJq-Cl8a/29_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.014030)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AABkXr-LivjS2HXswmezv5esa/30_pattern%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.014031)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AAAP5Q9mN2mCilGn1ZGBkbTRa/31_pattern.jpeg?raw=1)");
			}
	else if(myBackground == 0.014032)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AACbI2XkVq17Y8GnyURlGhzWa/32_pattern%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.014033)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/6xtmo59rv828d2s/AABOaWSJlETlLWTywhjKssYea/0_nursery.jpeg?raw=1)");
			}
			else if(myBackground == 151)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/6a/7f/c1/6a7fc16f23671dc5bd0bed4c462eccc4.jpg)");
			}
			else if(myBackground == 0.01500)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AACMIp07e5E4Md980mleJJb8a/0_granary.jpeg?raw=1)");
			}
	else if(myBackground == 0.01501)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAAl-8JhZd_q0VxDkSTq3uZea/1_mess.jpeg?raw=1)");
			}
	else if(myBackground == 0.01502)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAD6lfib3LYaOcECVgyUMqpGa/2_map_room.jpeg?raw=1)");
			}
	else if(myBackground == 0.01503)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAAEKuFxSg1bzDbNeTHPAvDda/3_kitchen.jpeg?raw=1)");
			}
	else if(myBackground == 0.01504)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AABIhLow_KFv0wEh16_Qs-Sya/4_dorm.jpeg?raw=1)");
			}
	else if(myBackground == 0.01505)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AACP0c3D1gX6-C2H8yhIA87Ha/5_armory.jpeg?raw=1)");
			}
	else if(myBackground == 0.01506)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AACSvN1A6HnHtrkNDTvetvDta/6_stables.jpeg?raw=1)");
			}
	else if(myBackground == 0.01507)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AACchzr_isk_qgpNzAywrhnHa/7_shrine.jpeg?raw=1)");
			}
	else if(myBackground == 0.01508)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AADT5b21J3YWoOb8Rr-TJOvCa/8_chariot.jpeg?raw=1)");
			}
	else if(myBackground == 0.01509)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AACUYgcD31zjdiFc3VsGTSPda/9_morgue.jpeg?raw=1)");
			}
	else if(myBackground == 0.015010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AADcVHAFKuG5sE_M22ezZsFoa/10_pattern%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.015011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAAQhHMNN_2ghKs424CnNoV2a/11_pattern%20copy%204.jpeg?raw=1)");
			}
	else if(myBackground == 0.015012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AADCHUQKQ-JQtxhbeW2VT2jea/12_barracks.jpeg?raw=1)");
			}
	else if(myBackground == 0.015013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AABhTGVtaS7YDm2HoAI0WwtFa/13_interior.jpeg?raw=1)");
			}
	else if(myBackground == 0.015014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AADZTJXrYl_uecUyGNoGW5zOa/14_balcony.jpeg?raw=1)");
			}
	else if(myBackground == 0.015015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AABBbS1BSOd4hxmDW4d_36LWa/15_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.015016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAC3c_Er2WMyBgc5a0cV_Jgia/16_floor1.jpeg?raw=1)");
			}
	else if(myBackground == 0.015017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AADsckyesFBW9SEaaIZ6quA4a/17_sidepath.jpeg?raw=1)");
			}
	else if(myBackground == 0.015018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAAb6PtkVCz-VMDANd1PmJC_a/18_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.015019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAD1amivJeHNO2DE77rGeeHXa/19_steps.jpeg?raw=1)");
			}
	else if(myBackground == 0.015020)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AADkHpgRmCjMaHXr7kDBHMmca/20_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.015021)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AABjSB53cMbS8SRgo3G8oC_8a/21_basementStairs.jpeg?raw=1)");
			}
	else if(myBackground == 0.015022)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AADH_z9fyVfnuYdyl6zSHhbAa/22_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.015023)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AABYM-xn6sQzo9_5QudKJ7fCa/23_yard.jpeg?raw=1)");
			}
	else if(myBackground == 0.015024)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAAHNmQKlnxG7PEMVIAM8TQJa/24_pattern%20copy%203.jpeg?raw=1)");
			}
	else if(myBackground == 0.015025)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AADuUdNHB8ZhnXYUPHatp1vza/25_entrance.jpeg?raw=1)");
			}
	else if(myBackground == 0.015026)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAA0HymRZHg2-018FlXYMP1_a/26_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.015027)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AADFpOz-wh1hSj9lY3GyCCYia/27_pattern%20copy%203.jpeg?raw=1)");
			}
	else if(myBackground == 0.015028)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAC29uIUpObD_OlzvYcBd72ma/28_pattern%20copy%203.jpeg?raw=1)");
			}
	else if(myBackground == 0.015029)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAB3fztBKmYS7t7JYGrMCF_ya/29_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.015030)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAB0s6bS3JoRDlJsPq-aaXSWa/30_pattern%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.015031)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAAP957ZZ7B5FBrs5vmROrUya/31_pattern.jpeg?raw=1)");
			}
	else if(myBackground == 0.015032)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AAD0XvdLbnSfv1P48yCbHLpVa/32_interior.jpeg?raw=1)");
			}
	else if(myBackground == 0.015033)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/j7qiqgtkhyrcm60/AACMIp07e5E4Md980mleJJb8a/0_granary.jpeg?raw=1)");
			}

			else if(myBackground == 161)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AACUpbwhiF7dekGyALMlMbfma/main_image.webp?raw=1)");
			}
				else if(myBackground == 0.01600)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AABiwB1xmpNFlsTunWulUHt9a/0_abortionStall.jpeg?raw=1)");
			}
	else if(myBackground == 0.01601)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AAAIRFmaFq6X-fYOtwlcmQZXa/1_childSlaves.jpeg?raw=1)");
			}
	else if(myBackground == 0.01602)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AABFkXIe9uP8XVdyN7TtWP0ca/2_diplomats.jpeg?raw=1)");
			}
	else if(myBackground == 0.01603)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AAAfyPeUHM4_7DzFItXg07g1a/3_sexSlaves.jpeg?raw=1)");
			}
	else if(myBackground == 0.01604)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AABU1AbDwJTm0QGapImoIwNpa/4_refreshmentTent.jpeg?raw=1)");
			}
	else if(myBackground == 0.01605)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AAComkMbdg7AT0j-bzeLy9JEa/5_gladiators.jpeg?raw=1)");
			}
	else if(myBackground == 0.01606)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AAA8KpWXch88w52RY--11RPga/6_shackles.jpeg?raw=1)");
			}
	else if(myBackground == 0.01607)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AADFKSzKOkKtYcqoH8y9duUna/7_preacher.jpeg?raw=1)");
			}
	else if(myBackground == 0.01608)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AABjAY69CbtFvrwrr9cDn8ELa/8_hair%26teeth.jpeg?raw=1)");
			}
	else if(myBackground == 0.01609)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AABM1aZ1fzOoGB4x40esWEqqa/9_skulls.jpeg?raw=1)");
			}
	else if(myBackground == 0.016010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AABM1aZ1fzOoGB4x40esWEqqa/9_skulls.jpeg?raw=1)");
			}
	else if(myBackground == 0.016011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AADwDF_ql4VkiYw3YIOkdV_Fa/11_marketstall.jpeg?raw=1)");
			}
	else if(myBackground == 0.016012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AACw3i_Mu4Kl3NuYLnu5xXwma/12_marketStall.jpeg?raw=1)");
			}
	else if(myBackground == 0.016013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AAAwrta2Cbnjm3dZ8bN1vykLa/13_marketStall.jpeg?raw=1)");
			}
	else if(myBackground == 0.016014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AAAHj_tgo9IgdCPztQRWt1eAa/14_marketStall.jpeg?raw=1)");
			}
	else if(myBackground == 0.016015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AADGz5LQ-V4voyMWXv8ZtTQGa/15_marketStall.jpeg?raw=1)");
			}
	else if(myBackground == 0.016016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AABDBGzQQTfUELlzqdgDxlhWa/16_marketStall.jpeg?raw=1)");
			}
	else if(myBackground == 0.016017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AABqFrQ9l5KXX8_LTGghou0sa/17_marketStall.jpeg?raw=1)");
			}
	else if(myBackground == 0.016018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AAA1t4fk3HlVp_JAWoEOcDmBa/18_marketStall.jpeg?raw=1)");
			}
	else if(myBackground == 0.016019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/liup8xcrtkamv0j/AABhfMauFQx_eKwm0Y76ZwNNa/19_marketStall.jpeg?raw=1)");
			}
			else if(myBackground == 171)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AABvl11QZBB1Kw0cph9mEWRxa/temple2.jpeg?raw=1)");
			}
				else if(myBackground == 0.01700)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AAA4_sJnKJd7YaR5078z8_Tua/0_starryai-10-973224231-1-10-photo.png?raw=1)");
			}
	else if(myBackground == 0.01701)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AAAazlNAQHqK56G2gCnAE95ca/1_interior2.jpeg?raw=1)");
			}
	else if(myBackground == 0.01702)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AAANu0LWeTGUTEaScscSmSwca/2_vestry.jpeg?raw=1)");
			}
	else if(myBackground == 0.01703)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AACIoHK5Od1BKXXPBGrSPnyUa/3_porch.jpeg?raw=1)");
			}
	else if(myBackground == 0.01704)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AABMK4PmOJEyQh7zSFI2hFfma/4_priestessCell.jpeg?raw=1)");
			}
	else if(myBackground == 0.01705)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AACM5VQA1COjQyhQqf6EXuKTa/5_mars.jpeg?raw=1)");
			}
	else if(myBackground == 0.01706)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AADbmiZIiiUrAgpUpZP_yYNKa/6_cell.jpeg?raw=1)");
			}
	else if(myBackground == 0.01707)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AABuF_tYP3O-aXSmIGVJ68XJa/7_altar.jpeg?raw=1)");
			}
	else if(myBackground == 0.01708)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AADd9HsTd8qoAevUwna0AHcXa/8_image.jpeg?raw=1)");
			}
	else if(myBackground == 0.01709)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AADxhmRj2BQjNDxPIpk1VsWYa/9_crypt.jpeg?raw=1)");
			}
	else if(myBackground == 0.017010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AAANoRkOoqWOlB7qr3CTg5Saa/10_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.017011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AAAq_K31bwE6tcyb0YSs09FWa/11_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.017012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AABwBc6EJTbqv5gnSR5K-Igxa/12_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.017013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AAD78PhncVWZrV-n2pe7OH8Ca/13_crossing.jpeg?raw=1)");
			}
	else if(myBackground == 0.017014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AAARG8IM68vqh4J07k4ewBtBa/14_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.017015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AABHIit7tKB0b77GJp5b4pDra/15_snakeRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.017016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AADTZYzf_QU5DtTF7uHSfF_2a/16_nave.jpeg?raw=1)");
			}
	else if(myBackground == 0.017017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AAB9lZx-Rkc1IchupkMfDH5fa/17_pattern%20copy%202.jpeg?raw=1)");
			}
	else if(myBackground == 0.017018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AABlsmftwRk4UytntWOvlMYBa/18_pattern%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.017019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/quxgqr9p71fvoi2/AACBd01VVZLL87tYMiorsydDa/19_narthex.jpeg?raw=1)");
			}
			else if(myBackground == 181)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/b4/39/a8/b439a87560b02424c656b1120e29740d.jpg)");
			}
				else if(myBackground == 0.01800)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AABCD0ZNDf7MEch9BRVvcyDoa/0_maternityWard.jpeg?raw=1)");
			}
	else if(myBackground == 0.01801)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AADwVWMnq81UFpZbnTiQFmVLa/1_games_room.jpeg?raw=1)");
			}
	else if(myBackground == 0.01802)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAAzsnBX9VSd8dUllHML--cAa/2_patientsLibrary.jpeg?raw=1)");
			}
	else if(myBackground == 0.01803)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAB44ghphs8eFnniDFVM9yiha/3_womensWard.jpeg?raw=1)");
			}
	else if(myBackground == 0.01804)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AACAC-91zEf05BR14qPF8_YBa/4_medicineCloset.jpeg?raw=1)");
			}
	else if(myBackground == 0.01805)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAC4QzshaCqK_uYhxtEsDtVEa/5_specimenRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.01806)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AADinwh1PrcUE99JCt79__RJa/6_quarantineRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.01807)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AADvHSTKQUFZrB6wl_jUk6yEa/7_chapel.jpeg?raw=1)");
			}
	else if(myBackground == 0.01808)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAD1d3hzkFScruXsS8Nfz91Va/8_traumaUnit.jpeg?raw=1)");
			}
	else if(myBackground == 0.01809)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AADWHyFzmBIDKLiBeBJpshKAa/9_casket_room.jpeg?raw=1)");
			}
	else if(myBackground == 0.018010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAB0zkWvbevfcMGX8il7D2hya/10_sameAs1.jpeg?raw=1)");
			}
	else if(myBackground == 0.018011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AABVbvnHjG4h80kzbHBxKWWfa/11_secretRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.018012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAD321AE_0vU90xtD_uZg3fea/12_yard.jpeg?raw=1)");
			}
	else if(myBackground == 0.018013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAB9Spjw8lBxaKEktdWk1KITa/13_secondYard.jpeg?raw=1)");
			}
	else if(myBackground == 0.018014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAByHuurR1BKcPIKijXJR4ida/14_altStaircase.jpeg?raw=1)");
			}
	else if(myBackground == 0.018015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AABHICkmTPxwSyTl2oJttRTAa/15_rearHall.jpeg?raw=1)");
			}
	else if(myBackground == 0.018016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AACpdOZw-WuaYnliNfxEefpRa/16_mainStaircase.jpeg?raw=1)");
			}
	else if(myBackground == 0.018017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AADvyn06dESfzmPakC6mkJ4xa/17_larder.jpeg?raw=1)");
			}
	else if(myBackground == 0.018018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAC8xWpDHYoLpw6nSpKUNIJIa/18_kitchen.jpeg?raw=1)");
			}
	else if(myBackground == 0.018019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AABNdfVBc17ktSb-dvLCVrUha/19_left_hallway.jpeg?raw=1)");
			}
	else if(myBackground == 0.018020)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AACnMPHVIWwgc4IaNuIMWLQxa/20_sameAs2.jpeg?raw=1)");
			}
	else if(myBackground == 0.018021)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AACw7vxXCauEjBhe4qD_mMCha/21_rightHallway.jpeg?raw=1)");
			}
	else if(myBackground == 0.018022)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AACKAKnb0WCg09kt5zAeF-Lha/22_gallery.jpeg?raw=1)");
			}
	else if(myBackground == 0.018023)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AACrJC6ckY7Q9Mim-2HdNKXaa/23_oratory.jpeg?raw=1)");
			}
	else if(myBackground == 0.018024)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AABJC7gl2Airt_Azd2T_Uf7Ja/24_buttery.jpeg?raw=1)");
			}
	else if(myBackground == 0.018025)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAANpUVnHmcHumJI50YCPngia/25_canteen.jpeg?raw=1)");
			}
	else if(myBackground == 0.018026)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AABmcNlzmWW-MRvGKKp0ztq2a/26_bathroom.jpeg?raw=1)");
			}
	else if(myBackground == 0.018027)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAD0Ww5CKpvmqOzvuKkEv9woa/27_attic.jpeg?raw=1)");
			}
	else if(myBackground == 0.018028)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAAhKqPtriPgAQ-hE2XaKqqza/28_atticStairs.jpeg?raw=1)");
			}
	else if(myBackground == 0.018029)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AACfLbQ8lbWHhhUsvvIj60Iqa/29_leftLanding.jpeg?raw=1)");
			}
	else if(myBackground == 0.018030)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAAJEMutA-MLoc97oIqpiD42a/30_sameAs3.jpeg?raw=1)");
			}
	else if(myBackground == 0.018031)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AADzD4ElsZHCjv8hjrLHzgBoa/31_master_bedroom.jpeg?raw=1)");
			}
	else if(myBackground == 0.018032)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AABMg5fxZjU4YCJk_RMhtnfSa/32_midleft_landing.jpeg?raw=1)");
			}
	else if(myBackground == 0.018033)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AABCwGhoyJ4ucTDgCOOXdnmua/33_main_landing.jpeg?raw=1)");
			}
	else if(myBackground == 0.018034)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AABeFitd9RqHD24qGgtO6nyLa/34_midrightLanding.jpeg?raw=1)");
			}
	else if(myBackground == 0.018035)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAC8Kgn37W7cxFWXZhaeh7GAa/35_right_landing.jpeg?raw=1)");
			}
	else if(myBackground == 0.018036)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AADGg5lptTjSPJdYpHW6taDCa/36_entrance.jpeg?raw=1)");
			}
	else if(myBackground == 0.018037)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AACGqM5oBtyl872tN-tMZygha/37_secondBedchamber.jpeg?raw=1)");
			}
	else if(myBackground == 0.018038)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAAP17r_47VHYKR9QvGAY8a6a/38_servants_quarters.jpeg?raw=1)");
			}
	else if(myBackground == 0.018039)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAB-GfOpjUzl48X6fjBQM5LCa/39_furnaceRoom.jpeg?raw=1)");
			}
	else if(myBackground == 0.018040)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAA_gUP3VJNoMm9cxBW-5sNEa/40_sameAs4.jpeg?raw=1)");
			}
	else if(myBackground == 0.018041)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAC_pnCv5Z-oATX7yG7JvZ56a/41_cellar.jpeg?raw=1)");
			}
	else if(myBackground == 0.018042)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AACe62Th5LSL03IXvHu-9ucSa/42_main_basement.jpeg?raw=1)");
			}
	else if(myBackground == 0.018043)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AAA6f_3OU0_x2aZIj_RtUp5Ta/43_basement_corridor.jpeg?raw=1)");
			}
	else if(myBackground == 0.018044)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/uqxlexe4elyagrt/AADsPxci4_QP-hA3l3I1OB54a/44_brickWall.jpeg?raw=1)");
			}

			else if(myBackground == 191)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/4c/ae/c0/4caec06d6814e915a3c32affa4123800.jpg)");
			}
				else if(myBackground == 0.01900)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AAAuzGCFONVPN_naAGhnH_KOa/0_willow.jpeg?raw=1)");
			}
	else if(myBackground == 0.01901)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AADyLuGdezSd7LGjg-5Nxtoya/1_statueOfChild.jpeg?raw=1)");
			}
	else if(myBackground == 0.01902)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AAAmmXyuC7MOjD77QxlJcxfIa/2_mausoleum.jpeg?raw=1)");
			}
	else if(myBackground == 0.01903)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AACnnTTt6DeTpCMXtYX-2yuba/3_witchsGraveyard.jpeg?raw=1)");
			}
	else if(myBackground == 0.01904)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AADfZ9taTtvoM9KU543dEQQ9a/4_gravediggersCottage.jpeg?raw=1)");
			}
	else if(myBackground == 0.01905)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AAC_lRfbCvtimIMJf0ey-Dbya/5_warriors_cenotaph.jpeg?raw=1)");
			}
	else if(myBackground == 0.01906)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AAChmP1yM946KiabR1UzhLOJa/6_fencedEnclosure.jpeg?raw=1)");
			}
	else if(myBackground == 0.01907)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AADllaxQoZP6O5UMOmx5s2kwa/7_temple_of_rest.jpeg?raw=1)");
			}
	else if(myBackground == 0.01908)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AACiPJX4Kwwsy9ZJs1h2u4OEa/8_pillagedGrave.jpeg?raw=1)");
			}
	else if(myBackground == 0.01909)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AAA-HcYg9Ng9_xb1ACKTieVpa/9_columbarium.jpeg?raw=1)");
			}
	else if(myBackground == 0.019010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AAAm7iYml7Yjt3cVQIpKTbnua/10_statueOfChild%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.019011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AACKBs6G6MvBkq6yEkJnXH1la/11_.jpeg?raw=1)");
			}
	else if(myBackground == 0.019012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AADxZhvXPrGdAi2BMnwhoFQ5a/12_.jpeg?raw=1)");
			}
	else if(myBackground == 0.019013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AABUBUXCHYvh3nlSaS4dQ6N5a/13_.jpeg?raw=1)");
			}
	else if(myBackground == 0.019014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AABwfizD1ciT7QXhq3grA1t9a/14_.jpeg?raw=1)");
			}
	else if(myBackground == 0.019015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AADyv-8v56y1Tr8kQsQ2vrINa/15_.jpeg?raw=1)");
			}
	else if(myBackground == 0.019016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AABANR4GG8iFdPpn2ez7gaUya/16_.jpeg?raw=1)");
			}
	else if(myBackground == 0.019017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AAAiX-zhPNKsIRA6k3EsJkf1a/17_.jpeg?raw=1)");
			}
	else if(myBackground == 0.019018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AACMPRgB6B_g0bTVzFhgQZy8a/18_.jpeg?raw=1)");
			}
	else if(myBackground == 0.019019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AACb3_aEq2lBXK7iaOMvKw3Ha/19_.jpeg?raw=1)");
			}
	else if(myBackground == 0.019020)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AAAe6y0Qh33AUrWvKeheCD-za/20_mausoleum%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.019021)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AACi9w2Ny5XwCbl78QpiJEp7a/21_.jpeg?raw=1)");
			}
	else if(myBackground == 0.019022)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/g1evuyv7ck1thnf/AABs03lnrzhGqrmn2rB5xmNra/22_.jpeg?raw=1)");
			}
			else if(myBackground == 200)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/QP3FV3P/forbidden-City.jpg)");
			}
				else if(myBackground == 2.020)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/tbiaz717fflumr5/AAALaUN45I73SHrtfsv-1hoRa/0_night_5ma-xiaoda-cn03.jpeg?raw=1)");
			}
	else if(myBackground == 2.021)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/tbiaz717fflumr5/AAB7M4w0aQ6rJpQqwmwC4onra/1_night7_yumi-zharko-2.jpeg?raw=1)");
			}
	else if(myBackground == 2.022)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/tbiaz717fflumr5/AAAuN9iWe87u2y8DZE2WYq8Ca/2_night1_chen-xiaoyan-0.jpeg?raw=1)");
			}
	else if(myBackground == 2.023)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/tbiaz717fflumr5/AADFnM_pDreycL5vXoDyJ07Aa/3_night8_yumi-zharko-3.jpeg?raw=1)");
			}
	else if(myBackground == 2.024)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/tbiaz717fflumr5/AADAJr0AQdWhvPGeElXIt99aa/4_night2_jiezhi-luo-4k-01.jpeg?raw=1)");
			}
	else if(myBackground == 2.025)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/tbiaz717fflumr5/AAD4F7-iiPa-5tIrC_MqOgmXa/5_night10_yumi-zharko-final-20200116.jpeg?raw=1)");
			}
	else if(myBackground == 2.026)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/tbiaz717fflumr5/AAAqB13-mBonVGDg0KePS8aNa/6_night3Pforbidden-City.jpg?raw=1)");
			}
	else if(myBackground == 2.027)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/tbiaz717fflumr5/AADLrKWEmcmvag_rYNyU1rE1a/7_night4_ma-xiaoda-cn02.jpeg?raw=1)");
			}
	else if(myBackground == 2.028)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/tbiaz717fflumr5/AADl3pbROvsxHMQSWgBoEqjua/8_night6_ma-xiaoda-cn05.jpeg?raw=1)");
			}
	else if(myBackground == 2.029)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/tbiaz717fflumr5/AADrrL1KAvU87z-2h6dBsWU9a/9_night9_yumi-zharko-4.jpeg?raw=1)");
			}
			else if(myBackground == 201)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AAAkUqU-sh-iMyXFOZjuV3Jva/forbidden-Garden.jpg?raw=1)");
			}
				else if(myBackground == 0.02000)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AABC6aOtkuiFtdKs07yreZYsa/0_yue-bao-highresscreenshot00013.jpeg?raw=1)");
			}
	else if(myBackground == 0.02001)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AAA87ZrZ9xC0_qyHarGSrVYDa/1_pengchao-shi-bs-21.jpeg?raw=1)");
			}
	else if(myBackground == 0.02002)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AABE-5cU6V0auyHuTZw2sotKa/2_jiantang-dong-11-08-14.jpeg?raw=1)");
			}
	else if(myBackground == 0.02003)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AAAPjeHFCNfUFS4K-6rB0Z7Va/3_q12-q20220602-copy-4.jpeg?raw=1)");
			}
	else if(myBackground == 0.02004)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AACLSxlcIfG6gctKeBEx0_qFa/4_pengchao-shi-3-08.jpeg?raw=1)");
			}
	else if(myBackground == 0.02005)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AADZ5Ajud_cYZkTmsPf4yJuMa/5_jiantang-dong-11-08-8.jpeg?raw=1)");
			}
	else if(myBackground == 0.02006)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AAD-vqwd88-JgCNjsOjUvV2Ya/6__frederic-bec-chinese-garden-03.jpeg?raw=1)");
			}
	else if(myBackground == 0.02007)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AABx7trhYFcpK2dN0qUstf3ya/7_steve-yang-1-1.jpeg?raw=1)");
			}
	else if(myBackground == 0.02008)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AACqSrdCd9-xwnxM47_HQFN4a/8_jiantang-dong-11-08-13.jpeg?raw=1)");
			}
	else if(myBackground == 0.02009)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AADEG4wtz8KPUmQVUmkSXvXSa/9_akanksha-mishra-render2.jpeg?raw=1)");
			}
	else if(myBackground == 0.020010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AABNu0N1j5zZliEdE-l5auSza/10_pengchao-shi-bs-21%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.020011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AADg4wsE_shWAjuGcUW4U1mua/11_jason-peek-garden-3072.jpeg?raw=1)");
			}
	else if(myBackground == 0.020012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AAC8gFKIyNZLRLAEA7GutdRra/12_jason-peek-highresscreenshot00044.jpeg?raw=1)");
			}
	else if(myBackground == 0.020013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AABZhaq32XzkiXH4vmzGUhAta/13_jiantang-dong-11-08-5.jpeg?raw=1)");
			}
	else if(myBackground == 0.020014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AADE6-rSSjsrQWJBjxYq-xPra/14_iantang-dong-11-08-6.jpeg?raw=1)");
			}
	else if(myBackground == 0.020015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AABP6RNdWnnS3zKPK0SMu77ga/15_iantang-dong-11-08-9.jpeg?raw=1)");
			}
	else if(myBackground == 0.020016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AAA-9na2e8y1iCs3fmjyLqfAa/16_jiantang-dong-11-08-12.jpeg?raw=1)");
			}
	else if(myBackground == 0.020017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AAAaE_miMnVChP21mybmk5N7a/17_jiantang-dong-11-08-15.jpeg?raw=1)");
			}
	else if(myBackground == 0.020018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AADKd5EQjhGJKBsC840uUmHLa/18_jiantang-dong-11-08-16.jpeg?raw=1)");
			}
	else if(myBackground == 0.020019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/gtrey52vnsd5rk7/AAClPT-wqq-PQjgFnsKRjMyca/19_jason-peek-highresscreenshot00048.jpeg?raw=1)");
			}
			else if(myBackground == 211)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/5f/00/3f/5f003fc16b10572cfe4c34c313beec70.jpg)");
			}
				else if(myBackground == 0.02100)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AADNH2G_jUjCyb1wcRrK_PgYa/1_download%20%281%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.02101)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AAAPDfVMVA3jERCed2OorY4Va/2_download%20%282%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.02102)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AADOWUqIkQsiMPGtqUhLLLZ4a/3_download%20%283%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.02103)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AADwNDwoyVHNKpKqqBb5lZqNa/4_download%20%284%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.02104)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AAD5-5vyNkmaLdR3Vc5DhdLHa/5_download%20%285%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.02105)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AABIj_vXe5q-v-YQz1TpHb7na/6_download%20%286%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.02106)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AAD1MQRLiA7t30RW5JWedqwsa/7_download%20%287%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.02107)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AACu9ly0wnbmkTXGOLd3JE_pa/8_download%20%288%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.02108)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AAC2Otf9OGaoUbOB0WHs7fhTa/9_download%20%289%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.02109)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AABxdsN4FAMFaNvmnpKa1uM2a/10_download%20%2810%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.021010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AACPP3nJ6UiSDsr1Al7x-mX4a/11_download%20%2810%29%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.021011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AABbbYlqol_vLVPqiCKk1hd7a/12_download%20%2811%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.021012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AAC0HB09fIbBpbeDUtPewezWa/13_download%20%2812%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.021013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AAAT26jJC-Xv1vzozHoxnRVJa/14_download%20%2813%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.021014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AAAbtfkYgAsD12NE2IA79sg9a/15_download%20%2814%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.021015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AAB9ux8kJbbxkw8S__u1SfWja/16_download%20%2815%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.021016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AABgBk0cKtClz43RtX_00R61a/17_download%20%2816%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.021017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AACQnMzD7AQ7tU-GW9yS_7ZQa/18_download%20%2817%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.021018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/hxhxtugt6h0hs9u/AABjPbEXkqi51S7yYseqxcYla/19_download.jpeg?raw=1)");
			}
			else if(myBackground == 221)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/9c/99/54/9c9954bc49514aafb47624cbb3c2a993.jpg)");
			}
	else if(myBackground == 0.02200)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/rqyx15xgltj7jlf/0_neophytes.jpeg?raw=1)");
			}
	else if(myBackground == 0.02201)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/f8mueowvfcfs3tc/1_go_board.jpeg?raw=1)");
			}
	else if(myBackground == 0.02202)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/kkmn0pa7d8srys8/2_studyHall.jpeg?raw=1)");
			}
	else if(myBackground == 0.02203)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/7u74iyek8akof4x/3_womensQuarters.jpeg?raw=1)");
			}
	else if(myBackground == 0.02204)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/q8d0h3ig5xq9pwk/4_lounge.jpeg?raw=1)");
			}
	else if(myBackground == 0.02205)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/nt6zxz6xccrzg7m/5_exams.jpeg?raw=1)");
			}
	else if(myBackground == 0.02206)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/fj8ynnv3pat3aw5/6_cloister.jpeg?raw=1)");
			}
	else if(myBackground == 0.02207)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/del4ypbs0lay8yx/7_temple.jpeg?raw=1)");
			}
	else if(myBackground == 0.02208)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/vpstzxtcgc0lhti/8_remedial.jpeg?raw=1)");
			}
	else if(myBackground == 0.02209)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/0f6uezi7etwexyt/9_emeritusChambers.jpeg?raw=1)");
			}
	else if(myBackground == 0.022010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/lks05a6emoi3es9/10_go_board%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.022011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/gdgr233ddf6re5q/11_download%20%281%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.022012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/id6mrxdyz8yiw9a/12_download%20%285%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.022013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/pcko8bj2bmm271l/13_download%20%285%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.022014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/olk3qrv49xeridq/14_download%20%285%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.022015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/kluqjh69ds4iqr6/15_download%20%285%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.022016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/cbc12idtjk0yvzq/16_download%20%285%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.022017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/vr8ubqyoalqupxt/17_download%20%285%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.022018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/nc4msa1orz3efl0/18_download%20%285%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.022019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/8avxxamtph2bjc6/19_download%20%285%29.jpeg?raw=1)");
			}
	else if(myBackground == 0.022020)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/s/m7og3yfui6vmue7/20_studyHall%20copy.jpeg?raw=1)");
			}
	else if(myBackground == 0.022021)  
 			 {
 				 $("tw-story").css("background-image","url(None)");
			}
			else if(myBackground == 231)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/9c/85/32/9c853217e910c978b24ed75ac63e923f.jpg)");
			}
			
			else if(myBackground == 241)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/67/f0/8b/67f08bbc42a27c9da1011532332c1fe5.jpg)");
			}
			else if(myBackground == 251)
			{
				$("tw-story").css("background-image","url(https://gcdn.daz3d.com/p/56851/i/chinese-temple-gate-05-daz3d.jpg)");
			}
			else if(myBackground == 261)
			{
				$("tw-story").css("background-image","url(https://gcdn.daz3d.com/p/63811/i/china-houses-04-daz3d.jpg)");
			}
			else if(myBackground == 271)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/14/10/2a/14102a474694c64c8f3779901390effc.jpg)");
			}
			else if(myBackground == 281)
			{
				$("tw-story").css("background-image","url(https://c4.wallpaperflare.com/wallpaper/49/579/585/jungle-fantasy-art-asian-architecture-artwork-wallpaper-preview.jpg)");
			}
			else if(myBackground == 291)
			{
				$("tw-story").css("background-image","url(https://c4.wallpaperflare.com/wallpaper/672/517/150/nature-digital-art-water-artwork-wallpaper-preview.jpg)");
			}
			else if(myBackground == 300)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/1a/b3/ef/1ab3ef0450478c4305701a2361add0a1.jpg)");
			}
			else if(myBackground == 301)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/BGgLGn6/farm.png)");
			}
			else if(myBackground == 311)
			{
				$("tw-story").css("background-image","url(https://farm4.staticflickr.com/3385/3496684667_b8f76dc6c1_z.jpg)");
			}
			else if(myBackground == 321)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/32/13/9d/32139df326afc0e39257f8494d345830.jpg)");
			}	
			else if(myBackground == 331)
			{
				$("tw-story").css("background-image","url(			https://i.pinimg.com/originals/a9/ed/9e/a9ed9efa3644d7d499d97e07395a55c6.jpg)");
			}
			else if(myBackground == 341)
			{
				$("tw-story").css("background-image","url(			https://i.pinimg.com/originals/42/ef/59/42ef592a42eb7cb19dfbadb818d73b3e.jpg)");
			}	
			else if(myBackground == 351)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/af/ea/b4/afeab4b55f09b86fd10b5cb7eeb1da14.jpg)");
			}
			else if(myBackground == 361)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/crJ8skB/under-Ground-Mine.jpg)");
			}
			else if(myBackground == 371)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/q09vQgb/The-Hedge-Maze.jpg)");
			}
			else if(myBackground == 381)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/YD4Gczm/st-John-The-Forerunner.jpg)");
			}
			else if(myBackground == 391)
			{
				$("tw-story").css("background-image","url(https://cdn.staticneo.com/n/1/hellraidtease.jpg)");
			}	
			else if(myBackground == 400)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/mqnHtMw/romeRuin.jpg)");
			}		
			else if(myBackground == 401)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/69/b6/28/69b6284a11d4bb26dabb4b5b181eeac6.jpg)");
			}
			else if(myBackground == 411)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/6HTWp0p/circus.jpg)");
			}
			else if(myBackground == 421)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/cc/a4/3f/cca43f0d9a53e1df81cda400000101dd.jpg)");
			}
			else if(myBackground == 431)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/33/33/b9/3333b98d98b9445d71b78a6b284cfe99.jpg)");
			}
			else if(myBackground == 441)
			{
				$("tw-story").css("background-image","url(https://cdna.artstation.com/p/assets/images/images/002/303/018/large/dongmin-shin-templar-ruinedtown-wip9.jpg?1459996240)");
			}	
			else if(myBackground == 451)
			{
				$("tw-story").css("background-image","url(https://www.wallpaperup.com/uploads/wallpapers/2013/07/20/120965/89b86219a5d4290deb3ff8c0da5b1a36.jpg)");
			}
			else if(myBackground == 461)
			{
				$("tw-story").css("background-image","url(https://i2-prod.mirror.co.uk/incoming/article5552145.ece/ALTERNATES/s1227b/PAY-Holmesburg-Prison.jpg)");
			}
			else if(myBackground == 471)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/ngYfvzq/garden.jpg)");
			}
			else if(myBackground == 481)
			{
				$("tw-story").css("background-image","url(https://cdna.artstation.com/p/assets/images/images/000/119/916/large/klaus-wittmann-asylum22.jpg?1443927398)");
			}
			else if(myBackground == 491)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/MZhYCtM/deathPit.jpg)");
			}
			else if(myBackground == 500)
			{
				$("tw-story").css("background-image","url(https://3.bp.blogspot.com/-79MN6Y6He4s/VHdEsATzIGI/AAAAAAADkaM/kQwDbXhJiLg/s1600/David%2BJermann-www.kaifineart.com-3.jpg)");
			}
			else if(myBackground == 501)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/f9pKJcb/enchanted-Wood2.jpg)");
			}	
			else if(myBackground == 511)
			{
				$("tw-story").css("background-image","url(http://coolvibe.com/wp-content/uploads/2012/08/2D-Art-Marcel-Mercado-Joust.jpg)");
			}	
			else if(myBackground == 521)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/68/7c/00/687c000923c080f9dc0c5e1c3cd0d0fa.jpg)");
			}				
			else if(myBackground == 531)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/1bZykJc/lake-by-glooh2.jpg)");
			}	
			else if(myBackground == 541)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/3d/c5/5d/3dc55d3812b254ac0c046f2eac668d91.jpg)");
			}	
			else if(myBackground == 551)
			{
				$("tw-story").css("background-image","url(https://images8.alphacoders.com/911/911883.jpg)");
			}	
			else if(myBackground == 561)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/f5/3e/3e/f53e3eb5bdd368ca60a01f157dc101d7.jpg)");
			}			
			else if(myBackground == 571)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/b2/67/39/b26739e37de690d1f43a6879cc5310f9.jpg)");
			}		
			else if(myBackground == 581)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/e2/53/5b/e2535b15f700f58515d548d7dd2aed27.jpg)");
			}				
			else if(myBackground == 591)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/KDCTZB2/plague-Barrow.jpg)");
			}	
			else if(myBackground == 600)
			{
				$("tw-story").css("background-image","url(http://vignette3.wikia.nocookie.net/assassinscreed/images/b/b8/Damascus-depth.jpg/revision/latest?cb=20100918105609)");
			}	
			else if(myBackground == 601)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/f1/20/1b/f1201baf2cec354672609d02d7ad4302.jpg)");
			}	
			else if(myBackground == 611)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/1dvz7wZ/hashish-Den4.jpg)");
			}
			else if(myBackground == 621)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/e9/2c/4c/e92c4caa1d93e7e015875de38ba6a16f.jpg)");
			}
			else if(myBackground == 631)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/69/9b/77/699b77b9295494ee80e77b84b98c0f7d.jpg)");
			}	
			else if(myBackground == 641)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/X29k7Xs/bazaar.jpg)");
			}	
			else if(myBackground == 651)
			{
				$("tw-story").css("background-image","url(https://static.thousandwonders.net/Citadel.of.Aleppo.original.36222.jpg)");
			}
			else if(myBackground == 661)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/2a/a6/a9/2aa6a900e767e36825a32d0a90d8b461.jpg)");
			}
			else if(myBackground == 671)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/a1/04/08/a10408cce174ca470a2341ad74755010.jpg)");
			}
			else if(myBackground == 681)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/3e/9c/40/3e9c40a4b3bd04ed44f843d22363ab48.jpg)");
			}
			else if(myBackground == 691)
			{
				$("tw-story").css("background-image","url(https://aidanmoher.com/blog/wp-content/uploads/2014/07/desert_village_by_crs1009-d5zij53.jpg)");
			}
			else if(myBackground == 700)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/9Hyc6dz/gothic-Street.png)");
			}
			else if(myBackground == 701)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/hVYjhGq/CREATOR-gd-jpeg-v1-0-using-IJG-JPEG-v80-quality-90.jpg)");
			}
			else if(myBackground == 711)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/cxY4RWS/thermae.jpg)");
			}
			else if(myBackground == 721)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/dmRYrMT/holy-Library3.jpg)");
			}
			else if(myBackground == 731)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/WtZTyLJ/gynaceum2.jpg)");
			}
			else if(myBackground == 741)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/24/e7/26/24e726a009e9c0905cbaf1ed8772caf1.jpg)");
			}
			else if(myBackground == 751)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/1rbyYTq/barracks4.png)");
			}
			else if(myBackground == 761)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/c7/60/28/c76028bc15bd6698b329980f7470cf49.jpg)");
			}
			else if(myBackground == 771)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/6c/25/76/6c2576e3bc81bc621c99980232d5c689.jpg)");
			}
			else if(myBackground == 781)
			{
				$("tw-story").css("background-image","url(https://uploads6.wikiart.org/images/francisco-goya/plague-hospital-1800.jpg!Large.jpg)");
			}
			else if(myBackground == 791)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/25/ee/e0/25eee032d448a0eec4b745e5a7a56aa8.jpg)");
			}
			else if(myBackground == 800)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/6c/fe/8c/6cfe8c56f9c18de0e14e98c531cde07a.jpg)");
			}
			else if(myBackground == 801)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/yWhgVjT/swamp4.jpg)");
			}		
			else if(myBackground == 811)
			{
				$("tw-story").css("background-image","url(https://jkroots.com/wp-content/uploads/2017/08/MysticPondPrint-scaled.jpg)");
			}	
			else if(myBackground == 821)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/6b9LMjn/flooded-Library.png)");
			}			
			else if(myBackground == 831)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/fa/6c/fd/fa6cfd32e3239cdf71f5331a95a9746b.jpg)");
			}	
			else if(myBackground == 841)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/ea/e1/65/eae16566315c05e3c623e4c3c7c06862.jpg)");
			}	
			else if(myBackground == 851)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/bm5QH4c/sunken-Castle2.jpg)");
			}	
			else if(myBackground == 861)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Tg6YH9v/pit-trap.jpg)");
			}				
			else if(myBackground == 871)
			{
				$("tw-story").css("background-image","url(https://www.wallpaperflare.com/static/208/667/589/church-fantasy-art-birds-artwork-wallpaper.jpg)");
			}			
			else if(myBackground == 881)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/37/00/be/3700be067e2732b411d950946ea44a4a.jpg)");
			}	
			else if(myBackground == 891)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/95/16/cf/9516cf9c7a517d5980c3453c1544617e.jpg)");
			}	
			else if(myBackground == 900)
			{
				$("tw-story").css("background-image","url(https://www.tfw2005.com/boards/attachments/james-paick-e-nazihq-20160503-wip-v6-jpaick-jpg.27755109/)");
			}		
			else if(myBackground == 901)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/da/5a/2c/da5a2ca8a224e52b14e10db82a280bff.jpg");
			}
			else if(myBackground == 911)
			{
				$("tw-story").css("background-image","url(https://th.bing.com/th/id/R.d2eeafba8c707986349e8deab24dc0ce?rik=GEWQecIHPeqzrg&riu=http%3a%2f%2fimg12.deviantart.net%2fcffe%2fi%2f2015%2f061%2f1%2fb%2fnazi_future_racing_1_by_heavytransit-d8k6966.jpg&ehk=0DxZbmpxcUQabWysj1CxFL%2f4U3EFAsYG4kMOSb3uXzs%3d&risl=&pid=ImgRaw&r=0)");
			}		
			else if(myBackground == 921)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/db0RsT8/snow-Troopers.jpg");
			}	
			else if(myBackground == 931)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/3NLznZc/convent.png)");
			}
			else if(myBackground == 941)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/vYhnyQZ/nazi-skyscraper.jpg");
			}
			else if(myBackground == 951)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/378VjDC/nazi-Court2.jpg)");
			}
			else if(myBackground == 961)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/wSHvdT9/camp.jpg)");
			}
			else if(myBackground == 971)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/6XVbmG4/cathedral.jpg)");
			}
			else if(myBackground == 981)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/736x/d4/ef/aa/d4efaa62a2ca4706ce8245148c137903--space-lab-sci-fi-environment.jpg)");
			}
			else if(myBackground == 991)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/mhYWKTX/belsen.jpg)");
			}
			else if(myBackground == 1000)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/DQkNrW7/pilgrims-Trail.jpg)");
			}
			else if(myBackground == 1001)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/BqZyxTX/st-Nicolas.jpg)");
			}
			else if(myBackground == 1011)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/R4kJzyb/st-Teresa-Of-Avila.jpg)");
			}
			else if(myBackground == 1021)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/QPFc64g/st-Albertus-Maximus.jpg)");
			}
			else if(myBackground == 1031)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/4PfQXty/magdalene5.jpg)");
			}
			else if(myBackground == 1041)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/dWXxXbr/homobonus.jpg)");
			}
			else if(myBackground == 1051)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/fdkMXJQ/adrian.jpg)");
			}
			else if(myBackground == 1061)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/thDKRxq/st-Leonard2.jpg)");
			}
			else if(myBackground == 1071)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/M8Nbr1Z/alternate0.jpg)");
			}
			else if(myBackground == 1081)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/4J59P6M/stPhocas.jpg)");
			}
			else if(myBackground == 1091)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/q7T8Rt4/stJoseph.jpg)");
			}
						else if(myBackground == 1100)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/smKnV4H/forest.jpg)");
			}
						else if(myBackground == 1101)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Ydny0bF/rufus.jpg)");
			}
						else if(myBackground == 1111)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/e1/d8/29/e1d829d8e27c1abb7f96c0963ace5448.jpg)");
			}
						else if(myBackground == 1121)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/tDHmywn/Templars-gathering.jpg)");
			}
						else if(myBackground == 1131)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/cb/06/5c/cb065c9a70c70d8025fbb6521cf9f4b5.jpg)");
			}
						else if(myBackground == 1132)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/x8g9Fsh/kings-Lynn.jpg)");
			}
			else if(myBackground == 1133)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/dL267Bm/la-Rochelle.jpg)");
			}
						else if(myBackground == 1134)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/kXJt9d4/sailing.jpg)");
			}
						else if(myBackground == 1135)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/NW3MZTw/high-Cliffs.jpg)");
			}
						else if(myBackground == 1141)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/85/c4/63/85c463290b20c10ecf25e86a8778921e.jpg)");
			}
						else if(myBackground == 1151)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/d1/f9/f6/d1f9f6da0f13f78af4e53fb9b4bd0639.jpg)");
			}
						else if(myBackground == 1161)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/58/86/96/588696aa555c578e99d44a75d0bf4172.jpg)");
			}
						else if(myBackground == 1171)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/XxzSJxp/canterbury2.jpg)");
			}
						else if(myBackground == 1181)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/33/24/bc/3324bc30dc9c7902ce768d49febb1bc2.jpg)");
			}
						else if(myBackground == 1191)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/FDwV42T/ship-Wreck.jpg)");
			}			
						else if(myBackground == 1200)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/d71Wcy1/steppe.jpg)");
			}
									else if(myBackground == 1201)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/L1XyfqN/after-Flood3.jpg)");
			}
									else if(myBackground == 1211)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/BwPjCVP/festival.jpg)");
			}
									else if(myBackground == 1221)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/DtZp1Dn/polos-Quarters.jpg)");
			}
									else if(myBackground == 1231)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/B4W3c8C/women-City-Final.png)");
			}
									else if(myBackground == 1241)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/3dVJPLL/mongols-Moving.jpg)");
			}
									else if(myBackground == 1251)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/K02xW4b/civil-War2.jpg)");
			}
									else if(myBackground == 1261)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/FmfB7zf/kiev5.jpg)");
			}
									else if(myBackground == 1271)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/JnpvjDB/khan-Tengri.jpg)");
			}
									else if(myBackground == 1281)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/bNxhZ3X/wrecked-Fleet2.jpg)");
			}
									else if(myBackground == 1282)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/yXF5qV6/beach.jpg)");
			}
									else if(myBackground == 1283)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/JWZRNM3/CREATOR-gd-jpeg-v1-0-using-IJG-JPEG-v80-quality-90.jpg)");
			}			
									else if(myBackground == 1291)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/XsFW0kg/burning-City.jpg)");
			}
									else if(myBackground == 1292)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/bRff5V1/beautiful-Middle-Eastern-City.jpg)");
			}
									else if(myBackground == 1293)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/M5V6q84/CREATOR-gd-jpeg-v1-0-using-IJG-JPEG-v62-quality-90.jpg)");
			}
									else if(myBackground == 1294)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/fQNRpqB/burning-Gates.jpg)");
			}
									else if(myBackground == 1300)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/ZffKypZ/plague-Swamps.jpg)");
			}
									else if(myBackground == 1301)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/wCMRF0W/manor3.jpg)");
			}
									else if(myBackground == 1311)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/zR8jK9h/fairy-Castle3.jpg)");
			}
									else if(myBackground == 1321)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/bHwYN2B/wiitch.jpg)");
			}
									else if(myBackground == 1331)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/DwP9sTy/tentCamp.jpg)");
			}
									else if(myBackground == 1341)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/sCjPVzW/village-Life.jpg)");
			}
									else if(myBackground == 1351)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/MhCbQ61/Schiltron.png)");
			}
									else if(myBackground == 1361)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/W287qzg/prison-Cellar.png)");
			}
									else if(myBackground == 1371)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/QcS7C6s/wycliffe3.jpg)");
			}
									else if(myBackground == 1381)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/4W4r6Y1/wallup-net.jpg)");
			}
									else if(myBackground == 1391)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/5sC5W6C/hanging-Bodies.jpg)");
			}
			else if(myBackground == 1400)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/bvCrvx9/shipPOV6.png)");
			}	
			else if(myBackground == 1400.1)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Zm1FTqj/narrowstraits.jpg)");
			}	
			else if(myBackground == 1401)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/sQ4rVkX/island2.jpg)");
			}	
			else if(myBackground == 1411)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/8M37Vcr/bearPits.jpg)");
			}	
			else if(myBackground == 1412)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/2PJrvHf/medieval-Port3.jpg)");
			}	
			else if(myBackground == 1421)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/VS73Qj4/renaissance-Street3.jpg)");
			}		
			else if(myBackground == 1422)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/LPG2fw0/renaissance-Port3.jpg)");
			}	
			else if(myBackground == 1431)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/6ZDwZZz/siege-Camp.jpg)");
			}	
			else if(myBackground == 1432)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Snwxrfm/sailing-To-Orleans.jpg)");
			}	
			else if(myBackground == 1441)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/ssWNSGg/alexander-skold-alexander-skold-aztec-empire-1.jpg)");
			}	
			else if(myBackground == 1442)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/y6PmmV1/sailing-Upriver3.jpg)");
			}	
			else if(myBackground == 1451)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/H7zSzwK/sieged-City3.jpg)");
			}	
						else if(myBackground == 1452)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/tqBPV0N/sailing-Up-River6.jpg)");
			}	
			else if(myBackground == 1461)
			{
				$("tw-story").css("background-image","url(https://i.pinimg.com/originals/c7/21/d9/c721d9fc92848c2419b43c670a25f15f.jpg)");
			}		
			else if(myBackground == 1462)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/R0yLRQR/london-Port3.jpg)");
			}	
			else if(myBackground == 1471)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/9gdQzqF/cathedral.jpg)");
			}			
			else if(myBackground == 1481)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/QKnCzFy/torture-Hall.jpg)");
			}	
			else if(myBackground == 1482)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Zz0GkGZ/spanish-Port.jpg)");
			}				
			else if(myBackground == 1491)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/60792FM/impaled-Fields.jpg)");
			}	
			else if(myBackground == 1492)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/cw1xwgL/sailing-Up-River5.jpg)");
			}	
			else if(myBackground == 1500)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/ZWC2p0n/square.jpg)");
			}	
			else if(myBackground == 1501)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/445wrpF/potato-Farm.jpg)");
			}	
			else if(myBackground == 1502)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/5946mkG/top-Middle.jpg)");
			}		
			else if(myBackground == 1503)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Tbn13XH/lane2.jpg)");
			}		
			else if(myBackground == 1504)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/DLBHF6d/street-Four-Fifths-Up.jpg)");
			}	
			else if(myBackground == 1505)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/sWL9KF8/street-Three-Fifths-Up.jpg)");
			}		
			else if(myBackground == 1506)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/vh7qVXg/street11.jpg)");
			}	
			else if(myBackground == 1507)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/tXqrtwZ/docks-Dark.jpg)");
			}	
			else if(myBackground == 1508)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/4FZ54gW/street-Two-Fifths-Up.png)");
			}			
			else if(myBackground == 1509)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Zmhqvbk/street-bottom.jpg)");
			}	
			else if(myBackground == 1510)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/bXxzFfK/street14-michal-salata-enviro-concept02.jpg)");
			}	
			else if(myBackground == 1511)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/1JG1gwr/peasants-bowling-in-a-village-street.jpg)");
			}		
			else if(myBackground == 1521)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/6tWhKcQ/staple-Inn.jpg)");
			}	
			else if(myBackground == 1531)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/f1jWdLy/dockside.jpg)");
			}		
			else if(myBackground == 1532)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/7VxDPNC/coldboat.jpg)");
			}	
			else if(myBackground == 1533)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/syN4wSw/cold-Antwerp.jpg)");
			}		
			else if(myBackground == 1534)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/x6ZQL2n/convent.jpg)");
			}				
			else if(myBackground == 1541)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/P57SMct/mores-House.jpg)");
			}		
			else if(myBackground == 1551)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/pPy3MRH/armadainvencible.jpg)");
			}			
			else if(myBackground == 1561)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/2Zq3VMZ/maryQoS.jpg)");
			}		
			else if(myBackground == 1571)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/v1dmNS2/chingle-Hall2.jpg)");
			}		
			else if(myBackground == 1581)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/S5f7L3j/broken-Statues.jpg)");
			}			
			else if(myBackground == 1591)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/RD8GQZh/Burning-at-the-Stake.jpg)");
			}	
			else if(myBackground == 1691)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/fDdcgbj/cliffside-Church.jpg)");
			}
			else if(myBackground == 17001)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/zJwJC51/street1.jpg)");
			}				
			else if(myBackground == 17002)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/XF89Y3V/street2.jpg)");
			}	
			else if(myBackground == 17003)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/2vHdqpH/street6.jpg)");
			}
			else if(myBackground == 17004)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/XZm40wN/sienne.jpg)");
			}	
			else if(myBackground == 17005)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/x8f44KX/street5.jpg)");
			}	
			else if(myBackground == 17006)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/QYrjRJt/street8.jpg)");
			}	
			else if(myBackground == 17007)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/4RRZD1d/street3.jpg)");
			}			
			else if(myBackground == 17009)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Ypw7zH2/bastille4.jpg)");
			}	
			else if(myBackground == 1701)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/SXQvgbX/farm2.jpg)");
			}
			else if(myBackground == 1711)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/C8h6Pxz/tuileries2.jpg)");
			}
			else if(myBackground == 1721)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/p4FT5xr/jacobin2.jpg)");
			}
			else if(myBackground == 1731)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/3m8nStP/La-Conciergerie-5.jpg)");
			}
			else if(myBackground == 1741)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/qCpwF6L/cafe2.jpg)");
			}
			else if(myBackground == 17500)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/tzsCd40/0ruined-market.jpg)");
			}
			else if(myBackground == 17501)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/PmXs1vP/barricade-Boulevard.jpg)");
			}
			else if(myBackground == 17502)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/swZWQt1/barricaded-Alley.jpg)");
			}
			else if(myBackground == 17503)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/d0yDRB2/barricaded-Junction.jpg)");
			}
			else if(myBackground == 17504)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/6yYjsmv/barricaded-Square.jpg)");
			}
			else if(myBackground == 17505)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/jgs3L0h/fighting-On-Barricade.jpg)");
			}
			else if(myBackground == 17506)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/7z2VGcf/lunching-Barricade.jpg)");
			}
			else if(myBackground == 17507)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/61sRvrh/barricaded-Government.jpg)");
			}	
			else if(myBackground == 17508)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/MkJH8tW/street-March.jpg)");
			}	
			else if(myBackground == 17509)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/nzcCNhV/relative-Peace.jpg)");
			}	
			else if(myBackground == 17510)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/JRZhwNh/river.jpg)");
			}	
			else if(myBackground == 17511)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/T4KdZ8g/bastille5.jpg)");
			}	
			else if(myBackground == 17512)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/DCmqwMx/bastille-Ruined.jpg)");
			}				
			else if(myBackground == 1751)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/TbhfNkL/festival2.jpg)");
			}
			else if(myBackground == 1752)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/LCPqBqm/1street-Party.jpg)");
			}
			else if(myBackground == 1752)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/9NyNQHH/2burning-Paper.jpg)");
			}
			else if(myBackground == 1753)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/sJSHYpS/3womens-March.png)");
			}
			else if(myBackground == 1754)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/WBYwsJc/4invaded-House.jpg)");
			}
			else if(myBackground == 1755)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/h2zdbDj/5street-War.jpg)");
			}
			else if(myBackground == 1756)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/t8v0F6t/6-Bastille.jpg)");
			}	
			else if(myBackground == 1757)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/VmPLGq4/7burnng-Church.png)");
			}	
			else if(myBackground == 1758)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/LkhbW1r/8street12.jpg)");
			}		
			else if(myBackground == 1759)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/n1yYmRm/9horse-Corpse.jpg)");
			}	
			else if(myBackground == 1761)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/p4yJ7kY/tour-Du-Temple.jpg)");
			}				
			else if(myBackground == 1771)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/dWvwPht/notre-dame-nave.jpg)");
			}
			else if(myBackground == 1781)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/mFfYwYX/bastille-Ruins.jpg)");
			}	
			else if(myBackground == 17801)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/RQyDHDS/bastille-Whole.jpg)");
			}	
			else if(myBackground == 17901)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/KwXyXty/guillotine-Right-Up.jpg)");
			}
			else if(myBackground == 17902)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/85dFdGv/opposite-Notre-Dame.jpg)");
			}
			else if(myBackground == 17903)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/cY4Zrjr/View-From-Above.jpg)");
			}
			else if(myBackground == 1791)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/ZMHDc00/1market-Guillotiine.jpg)");
			}
			else if(myBackground == 1792)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/QYBPGD5/2guillotine-Top-Of-College.jpg)");
			}
			else if(myBackground == 17920)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/GQYVzpL/2college-Arches.jpg)");
			}
			else if(myBackground == 1793)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/PCFQq29/3-Carmelites.jpg)");
			}		
			else if(myBackground == 1794)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/JCbhrFc/4guillotine-View-From-House.jpg)");
			}		
			else if(myBackground == 1795)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/qpGkfQN/5guards-Defend-Guillotine.jpg)");
			}	
			else if(myBackground == 1796)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/wsGpFzg/6guillotine-About-To-Die.jpg)");
			}		
			else if(myBackground == 1797)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/vJBxCpt/7-Notre-Dame-Roof.jpg)");
			}				
			else if(myBackground == 1798)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/pQqKr14/8guillotined-heads.jpg)");
			}
			else if(myBackground == 1799)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/kQbdLfZ/9guillotine-By-Body.jpg)");
			}			
			else if(myBackground == 1800)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/gmfsyTx/skyline.jpg)");
			}	
			else if(myBackground == 1801)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/rvKzq2m/hospital.jpg)");
			}	
			else if(myBackground == 1802)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/3vZ9dQf/dockside.jpg)");
			}	
			else if(myBackground == 1803)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/QkPK2TV/along-The-Thames.jpg)");
			}	
			else if(myBackground == 1804)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/YRF1D9F/street.jpg)");
			}
			else if(myBackground == 1805)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/n81Qxfr/alley2.jpg)");
			}
			else if(myBackground == 1806)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/0tZG1HW/alley.jpg)");
			}	
			else if(myBackground == 1807)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/3CbXzzc/downtown.jpg)");
			}	
			else if(myBackground == 1808)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/3FxNMbN/whitechapel3.jpg)");
			}		
			else if(myBackground == 1809)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/M9j9HG8/street2.jpg)");
			}	
			else if(myBackground == 1810)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/gM75JFk/st-pauls.png)");
			}	
			else if(myBackground == 1811)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/nBKwvxk/workhouse2.jpg)");
			}
			else if(myBackground == 1812)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/wZmt8RQ/culDeSac.jpg)");
			}
			else if(myBackground == 1821)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/hV9p9JY/bakerSt4.png)");
			}
		else if(myBackground == 1831)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/J7wqqLt/white-Chapel4.jpg)");
			}
			else if(myBackground == 1841)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/7kBnXYT/staircase.jpg)");
			}			
			else if(myBackground == 1842)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/dtL95r6/Kenway-Mansion-NIGHT.jpg)");
			}	
			else if(myBackground == 1851)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Gt566nk/fighting.jpg)");
			}	
			else if(myBackground == 1861)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/X4HdtrX/newgate.png)");
			}	
			else if(myBackground == 1871)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/F8pg94y/crowleys-Temple.jpg)");
			}	
			else if(myBackground == 18700)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/e38ynjn86luu9el/nursery3.jpeg?raw=1)");
			}
			else if(myBackground == 18701)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/c98opszhvm04ctj/ouijaRoom.jpeg?raw=1)");
			}			
			else if(myBackground == 18702)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/xg4e0dcq2apv9o7/study6.jpeg?raw=1)");
			}			
			else if(myBackground == 18703)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/xaql7zac712uhds/bedroom2.jpeg?raw=1)");
			}		
			else if(myBackground == 18704)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/9j5vwo4p7g35hex/livingRoom.jpeg?raw=1)");
			}				
			else if(myBackground == 18705)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/geblosa2vpwdqlw/trophyRoom.jpeg?raw=1)");
			}	
			else if(myBackground == 18706)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/30i1tl7qw9nj530/cage.jpeg?raw=1)");
			}
			else if(myBackground == 18707)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/71ra1fxsds07y9m/prayerRoom.jpeg?raw=1)");
			}			
			
			else if(myBackground == 18708)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/hhq9269joasglnu/stairs.jpeg?raw=1)");
			}	
			else if(myBackground == 18709)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/zz4c6bya5kszvju/seanceRoomDarker.jpeg?raw=1)");
			}	
			else if(myBackground == 18716)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/w6kx6y42qdrnyvh/halfwayUp.png?raw=1)");
			}				
			else if(myBackground == 18718)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/9ef12j0dhirnn71/kitchen2.jpeg?raw=1)");
			}	

			else if(myBackground == 18720)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/qukxqt8g78snxw3/mainHall1.jpeg?raw=1)");
			}	
			else if(myBackground == 18725)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/4gnj2s4l7eznqnt/diningRoom.jpeg?raw=1)");
			}			
			else if(myBackground == 18728)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/dedmra0icadnm1h/bathroom2.jpeg?raw=1)");
			}	
			else if(myBackground == 18729)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/xoy8ge6ho67wt1r/outsideBathroom.jpeg?raw=1)");
			}
			else if(myBackground == 18733)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/6kq07x24wfffta5/topOfStairs.jpeg?raw=1)");
			}			
			else if(myBackground == 18735)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/6iwc9ajpqyjapi6/landing2.jpeg?raw=1)");
			}		
			else if(myBackground == 18739)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/3lx5o4g2mphzbl6/furnaceRoom.jpeg?raw=1)");
			}	
			else if(myBackground == 18742)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/0qajjsg11laxw7k/laundryRoom.jpeg?raw=1)");
			}				
			else if(myBackground == 18743)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/bjjyfa9e4p91b08/basementToCage.jpeg?raw=1)");
			}	
			else if(myBackground == 18750)
			{
				$("tw-story").css("background-image","url(https://www.dropbox.com/s/zz4c6bya5kszvju/seanceRoomDarker.jpeg?raw=1)");
			}				
			else if(myBackground == 1872)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/4VJKDFc/fleetSt.jpg)");
			}	
			else if(myBackground == 1873)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Yb3ycLH/house.jpg)");
			}
			else if(myBackground == 1881)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Z8cHB4f/rutledge-asylum-sane-by-spicyhorseofficial-d4ikmud.jpg)");
			}	
			else if(myBackground == 1891)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/F3St1NG/vaults.jpg)");
			}	
			else if(myBackground == 1901)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/DLvPtqL/soviet-Farm2.jpg)");
			}	
			else if(myBackground == 19001)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/PxyG612/railway.jpg)");
			}
			else if(myBackground == 19002)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/qsHHq1r/under-Bridge-Toon.png)");
			}		
			else if(myBackground == 19003)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/sFZKq8K/tracks-Toon.jpg)");
			}			
			else if(myBackground == 19004)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/kgrfn46/diesel-Punk2.jpg)");
			}
			else if(myBackground == 19005)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/ypSWL1N/trash-Toon.png)");
			}			
			else if(myBackground == 19006)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/DYHqXNX/green.jpg)");
			}	
			else if(myBackground == 19007)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/jGTqhGL/metro.jpg)");
			}			
			else if(myBackground == 19008)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/F8qSqVL/oldStyle.png)");
			}	
			else if(myBackground == 19009)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/bmCqc2G/rails.jpg)");
			}	
			else if(myBackground == 19010)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/GtmCtV5/train3.jpg)");
			}				
			else if(myBackground == 1911)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/kJGY7Rv/olympics2.jpg)");
			}		
			else if(myBackground == 19101)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/VJt3Jt3/railFarm.jpg)");
			}				
			else if(myBackground == 1921)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/RHhs9Dz/kgb-Archive.jpg)");
			}	
			else if(myBackground == 19201)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Tq8d2FJ/kgb-building-Toon.jpg)");
			}	
				else if(myBackground == 1931)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/DG9L9P3/rabotnitsa.jpg)");
			}		
				else if(myBackground == 1941)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/RyJjdjM/kremlin2.jpg)");
			}	
				else if(myBackground == 1951)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/d2rq3hQ/afghn2.jpg)");
			}	
				else if(myBackground == 19501)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/M8mhng5/big-City-Station.jpg)");
			}	
				else if(myBackground == 19502)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/bvV178T/exiting-City.jpg)");
			}			
				else if(myBackground == 19503)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/XztD88Q/siberia2.jpg)");
			}	
				else if(myBackground == 19504)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/B4VNyxK/siberian-Stopped.jpg)");
			}	
				else if(myBackground == 19505)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/DbTzQPY/siberia3.jpg)");
			}	
				else if(myBackground == 19506)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/xm8ZJY1/siberia4.jpg)");
			}	
				else if(myBackground == 19507)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/h9sbfTf/on-The-Train.jpg)");
			}	
				else if(myBackground == 195081)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/RGFVzzk/desert2c.jpg)");
			}	
				else if(myBackground == 19508)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/crBZjj6/train-Afghan.jpg)");
			}	
				else if(myBackground == 19509)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/TgY43yT/afghan-Train3.jpg)");
			}				
				else if(myBackground == 1961)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Ycd0cL8/siberian-Station.jpg)");
			}	
			else if(myBackground == 19601)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/kJBYmDq/gulag2.jpg)");
			}	
			else if(myBackground == 1971)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/t2cPVjB/st-Basils2.jpg)");
			}	
				else if(myBackground == 1981)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/BGpbYgV/railway-Berliin-Art2.jpg)");
			}	
				else if(myBackground == 19800)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/7RDZdbV/0-babies.jpg)");
			}				
				else if(myBackground == 19801)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/MZpRtvF/1-bar.jpg)");
			}				
				else if(myBackground == 19802)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/xjW80vZ/2-listening-post.jpg)");
			}	
				else if(myBackground == 19803)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/f11sXs6/3-checkpoint4.jpg)");
			}		
				else if(myBackground == 198041)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/fV37dr7/4-bunker3.jpg)");
			}	
					else if(myBackground == 19804)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/DDNdGV0/4a-abovebunker.jpg)");
			}		
				else if(myBackground == 19805)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/VpF8xKH/5-guardtower.jpg)");
			}	
				else if(myBackground == 198051)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/ymTFvW0/5-view-From-Tower-With-Snow.jpg)");
			}	
				else if(myBackground == 19806)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/S0YF1G2/6-detention5.jpg)");
			}			
				else if(myBackground == 19807)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/TRMQDSR/7-church.jpg)");
			}		
				else if(myBackground == 19808)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/yymNj0Q/8-breach.jpg)");
			}	
				else if(myBackground == 19809)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/dL2T65g/9-sophien-cemetery3.jpg)");
			}				
				else if(myBackground == 1991)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/xFbmSsk/chernobyl1.jpg)");
			}		
			else if(myBackground == 19900)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/5YHSHnC/maternity6.jpg)");
			}	
			else if(myBackground == 19901)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Wn0SjfX/ferris-Wheel2.jpg)");
			}	
			else if(myBackground == 19902)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/nzjBmxp/school4.jpg)");
			}		
			else if(myBackground == 19903)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/0XHYvH0/office2.jpg)");
			}
			else if(myBackground == 19904)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/XCMFTck/mall2.jpg)");
			}	
			else if(myBackground == 19905)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/Kj7KGTc/magazine.jpg)");
			}	
			else if(myBackground == 19906)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/s12zw02/quarantine-zone-last-of-us-naughty-dog-1600x774-marked.jpg)");
			}		
						else if(myBackground == 19907)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/tmtrQ7w/church.jpg)");
			}	
						else if(myBackground == 19908)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/R0FpTM8/junkyard2.jpg)");
			}	
			else if(myBackground == 19909)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/5cQC4xG/grave.jpg)");
			}	
			else if(myBackground == 19910)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/47YszMv/rail2.jpg)");
			}	
			else if(myBackground == 19911)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/YDPKdp3/road2.jpg)");
			}			
			else if(myBackground == 19912)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/DVRdCtj/road3.jpg)");
			}			
			else if(myBackground == 19913)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/gDBpv10/road9.jpg)");
			}		
			else if(myBackground == 19914)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/C0xRHMs/by-rail-Station.jpg)");
			}		
			else if(myBackground == 19915)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/vcH0nGg/church-Center.jpg)");
			}	
			else if(myBackground == 19916)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/ZJ2bN3r/road10.jpg)");
			}	
			else if(myBackground == 19917)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/fDSdLcz/road11.jpg)");
			}			
			else if(myBackground == 19918)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/8dSQsbQ/road15.jpg)");
			}					
			else if(myBackground == 2071)
			{
				$("tw-story").css("background-image","url(http://www.scififantasyhorror.co.uk/wp-content/gallery/Su-Jian/su-jian-scifi-art-11.jpg)");
			}
			else if(myBackground == 9179)
			{
				$("tw-story").css("background-image","url(https://i.ibb.co/0rB8h1Y/foot-Of-Notre-Dame.png)");
			}
			
			
				else if(myBackground == 2.000)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3zcdgqlppttpmrn/AADBMLcb_8icQ5ElO4XuWbgNa/download%20%281%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.001)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3zcdgqlppttpmrn/AAAj5A8DXd0RWi5H5g1TsHmqa/download%20%282%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.002)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3zcdgqlppttpmrn/AAAmNounxUdcUCzYrCeJ6PaOa/download%20%283%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.003)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3zcdgqlppttpmrn/AAAlBYT4GeB9sq_5Jj5NDAIia/download%20%284%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.004)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3zcdgqlppttpmrn/AAANpedAnaRvGlX5-LrVMM_Ga/download%20%285%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.005)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3zcdgqlppttpmrn/AAARXco3pZ0V4a9SAbD0NO5Ea/download%20%286%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.006)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3zcdgqlppttpmrn/AABUpZv9aWnn2OhV6g9incTKa/download%20%288%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.007)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3zcdgqlppttpmrn/AAAvYfaeRdVt8utD_DNSYG3fa/download%20%289%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.008)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3zcdgqlppttpmrn/AAC2iKMFDmaR22NDYEAJkXiVa/download%20%2810%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.009)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/3zcdgqlppttpmrn/AABPOJZK5u_XYtHaoSMZjxD7a/download.jpeg?raw=1)");
			}
			
else if(myBackground == 2.010)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/ci841s97sr53da6/AADn_DeNqoxwpcYgATX--hVUa/download%20%281%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.011)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/ci841s97sr53da6/AABIV4C2t7WVR9bekGFJqWnOa/download%20%282%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.012)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/ci841s97sr53da6/AAAcs0hvAvA9jPUSu751vDoYa/download%20%283%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.013)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/ci841s97sr53da6/AACmzRB5ywmzo0n5A-r4hBZta/download%20%284%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.014)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/ci841s97sr53da6/AADhAB2n6zVXty2yz-FX5H7ma/download%20%285%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.015)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/ci841s97sr53da6/AAAjj7I-9h1KoV8ay-OxUvPSa/download%20%286%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.016)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/ci841s97sr53da6/AAABGA30g6mnPDfL8d3rLDS_a/download%20%287%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.017)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/ci841s97sr53da6/AAB_PC68n30-zhy9B7kqtveRa/download%20%288%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.018)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/ci841s97sr53da6/AACegmzCXvESvSkU5nI3UBw4a/download%20%289%29.jpeg?raw=1)");
			}
	else if(myBackground == 2.019)  
 			 {
 				 $("tw-story").css("background-image","url(https://www.dropbox.com/sh/ci841s97sr53da6/AADn_DeNqoxwpcYgATX--hVUa/download%20%281%29.jpeg?raw=1)");
			}

			
			
			
			else
			{
				$("tw-story").css("background-image","none");
			}
			
			

			
			
		}
	}
}

</script><tw-passagedata pid="1" name="elevator" tags="" position="1054,1031" size="100,100">{(set: $bastille to &quot;unstormed&quot;)
}(border: &quot;solid&quot;)[You are in an elevator. The dial permits you to choose any floor from 0 through 20. Please input the floor you desire.]  
&lt;input type=&quot;text&quot; data-varname=&quot;floorString&quot;&gt;
&lt;script&gt;processInputElements();&lt;/script&gt;

(link-goto: &quot;Done&quot;)

&lt;script&gt;CustomScripts.updateBackground(-1);&lt;/script&gt;
</tw-passagedata><tw-passagedata pid="2" name="Done" tags="" position="1052,1193" size="100,100">At last the elevator comes to a halt.
{
($setUpNewCentury:)
	}
	
The elevator doors open to the $rightOnNexusMap and you [[step out-&gt;top left]].</tw-passagedata><tw-passagedata pid="3" name="top left" tags="" position="1203,1034" size="100,100">{(set: $place to &quot;&quot;)
(set: $NexusRoom to 0)&lt;!--Nexus room nos end in 2--&gt;
(set: $decadeNum to 0)
(set: $imageType to 0) 

&lt;!--By running the following macro here in the passage, we get to reset the vocab each time we change passage using the &quot;either&quot; command in the vocab entries (if there is one). --&gt;
($resetNexusVocab:) 
($setNexusDirections: &quot;hr1&quot;)
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[$mainSentence. You can either $head [[$rightOnNexusMap-&gt;top middle]] or [[$downOnNexusMap-&gt;four fifths up]].
(if: $floorInt is 6)[A ladder inside a cupola leads [[down-&gt;complex zero]] from here.]
(else-if: $floorInt is 14)[The coast to the $upOnNexusMap opens into an estuary, via which you can [[sail inland-&gt;complex zero]].] 
(else-if: $floorInt is 19)[Alternatively, you can take a different line heading (link:&quot;towards the Ukraine&quot;)[(set: $previousStop to &quot;Moscow&quot;)(set:$nextStop to &quot;farm&quot;)(goto:&quot;train through countryside&quot;)].]
(else:) [You may also $head $upOnNexusMap (print: (1) of $doorTypes) (print: (either: &quot;&quot;, (2) of $doorTypes)) (print: (3) of $doorTypes) $exitPhrase [[$complexWord-&gt;complex zero]].] Another option is to step into the [[elevator]].]{


($setImage:)
($setNexusImage:)
(if: $floorInt is 17)[($overrideImage: &quot;17001&quot;)]
(if: $floorInt is 19)[($overrideImage: &quot;19001&quot;)]
($setNexusDirections: &quot;g1&quot;)}</tw-passagedata><tw-passagedata pid="4" name="top middle" tags="" position="1361,1037" size="100,100">{(set: $place to &quot;&quot;)
(set: $NexusRoom to 1)&lt;!--Nexus room nos end in 2--&gt;
(set: $decadeNum to 0)
(set: $imageType to 0) 
&lt;!--By running the following macro here in the passage, we get to reset the vocab each time we change passage using the &quot;either&quot; command in the vocab entries (if there is one). --&gt;
($resetNexusVocab:) 
($setNexusDirections: &quot;g1&quot;)
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[$mainSentence. You may $head [[$rightOnNexusMap-&gt;top right]] or [[$leftOnNexusMap-&gt;top left]] from here. There is also (if: $floorInt is 6)[a rooftop entrance, from which a [[ladder descends-&gt;complex two]] into the building below.] (else:) [(if: $floorInt is 14)[the mouth of a river to the $downOnNexusMap, via which you can [[sail inland-&gt;complex two]].](else:) [a (print: (3) of $doorTypes) to the $downOnNexusMap (unless: $floorInt is 19)[which goes] $exitPhrase [[$complexWord-&gt;complex two]].] ]
]{

($setImage:)
($setNexusImage:)
(if: $hundredNumber is 1500)[($overrideImage:&quot;1502&quot;)]
(if: $hundredNumber is 1800)[($overrideImage:&quot;1810&quot;)]
(if: $floorInt is 17)[($overrideImage: &quot;17002&quot;)]
(if: $floorInt is 19)[($overrideImage: &quot;19002&quot;)]}</tw-passagedata><tw-passagedata pid="5" name="four fifths up" tags="" position="1203,1324" size="100,100">{(set: $place to &quot;&quot;)
(set: $NexusRoom to 3)&lt;!--Nexus room nos end in 2--&gt;
(set: $decadeNum to 0)
(set: $imageType to 0) 
&lt;!--By running the following macro here in the passage, we get to reset the vocab each time we change passage using the &quot;either&quot; command in the vocab entries (if there is one). --&gt;
($resetNexusVocab:) 
($setNexusDirections: &quot;stem&quot;)

(set: $homeCity to &quot;Bishop&#39;s Lynn&quot;)
(set: $foreignCity to &quot;La Rochelle&quot;)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[$mainSentence. You may $head [[$upOnNexusMap-&gt;top left]] or [[$downOnNexusMap-&gt;three fifths up]] from here. (if: $floorInt is 6)[A ladder inside a cupola leads [[down-&gt;complex three]] from here.] (else:)[(if: $floorInt is 14)[To the $rightOnNexusMap you can see the coast opens up into an estuary, via which you can [[sail inland -&gt;complex three]].] (else:) [To the $rightOnNexusMap is [[a (print: (3) of $doorTypes) via which you can $head $exitPhrase $complexWord-&gt;complex three]].] ]
]{

($setImage:)
($setNexusImage:)
(if: $hundredNumber is 1500)[($overrideImage:&quot;1504&quot;)]
(if: $hundredNumber is 1800)[($overrideImage:&quot;1808&quot;)]
(if: $floorInt is 17)[($overrideImage: &quot;17004&quot;)]
(if: $floorInt is 19)[($overrideImage: &quot;19004&quot;)]

}</tw-passagedata><tw-passagedata pid="6" name="complex zero" tags="" position="1200,871" size="100,100">{
&lt;!--SPECIFICS--&gt;
(set: $decadeNum to 0) 
($setDecadeVariables:)


&lt;!--The following should be set differently for each complex entry point, so as to match the direction on screen from which we are exiting the nexus.--&gt;
(set: $directionIn to $upOnNexusMap)

&lt;!--The following function fixes the architecture by consulting the architecture database.--&gt;

($chooseArchitecture:) 

&lt;!--The following function requires directionIn and architecture to be set, and uses it to fix the startroom before flipping and rotating the map &amp; changing the startRoom each time as appropriate.--&gt;
($getComplexMap:)

($fixOptionalPaths:)
($setNexusWord:)
($refreshSentences:) 

&lt;!--IMAGES--&gt;
(unless: $floorInt is 19)[($setImage:)](else:)[($overrideImage: &quot;19101&quot;)]

&lt;!--END IMAGES--&gt;

&lt;!--This fixes the text that permits one to leave the complex.--&gt;
(set: $returnText to &quot;A different possibility is to head back to the $downOnNexusMap towards [[$nexusWord-&gt;complex zero]].&quot;) 

}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
(if: $floorInt is 6)[You are in one of the gatehouses to the city of Aleppo. A road leads [[$upOnNexusMap-&gt;$startRoom]] from here to the hanging farms. Alternatively you can go [[up a ladder-&gt;top left]] to $nexusWord.] 
(elseif: $floorInt is 14)[You are anchored in a wide, tropical river on an unexplored island in the new world. To explore the island, you must head [[$upOnNexusMap-&gt;$startRoom]] on foot. Alternatively you can $head [[$downOnNexusMap-&gt;top left]] to $nexusWord.] 
(elseif: $floorInt is 19)[You are at a small train station in the Ukrainian countryside. If you wish you can leave the station and [[explore the countryside nearby-&gt;$startRoom]]. Alternatively, you can catch a train to (link:&quot;Moscow&quot;)[(set: $previousStop to &quot;farm&quot;)(set: $nextStop to &quot;Moscow&quot;)(goto: &quot;train through countryside&quot;)] or catch (link:&quot;in the other direction&quot;)[(set: $previousStop to &quot;farm&quot;)(set: $nextStop to &quot;Pripyat&quot;)(goto: &quot;train through countryside&quot;).]].
	(else:)[$complexSentence3. From here you can go $downOnNexusMap to [[$nexusWord-&gt;top left]]. Alternatively, you may go (link: $upOnNexusMap)[(goto: $startRoom)].]}] 





</tw-passagedata><tw-passagedata pid="7" name="set up new century" tags="startup" position="23,3620" size="100,100">{
&lt;!--Called upon entry into a new century. Sets the variables accordingly.--&gt;
(set: $setUpNewCentury to
(macro: [
	($setLooseVocab:)
	($setCenturyVariables:)
	($setNexusMovementTerm:)
	($fixDirection:$floorInt)
	($setDoorTypes:)
	($setExitPhrase:)
	($setReferenceMap:)
	($setMapVariables:)
	(output-data:&quot;&quot;)
]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;set reference map]]
[[ -&gt;head (Nexus Movement Term)]]
[[ -&gt;set century variables]]
[[ -&gt;fix direction]]
[[ -&gt;set up door types]]
[[ -&gt;set exit phrase (for Nexus)]]
[[ -&gt;set reference map]]
[[ -&gt;set map variables]]
[[ -&gt;set loose century vocab]]
}</tw-passagedata><tw-passagedata pid="8" name="head (Nexus Movement Term)" tags="startup" position="158,3522" size="100,100">{&lt;!--This defines a movement term that is suitable to the century. E.g. if the character is moving around in a swamp, the movement term is set to &quot;wade&quot;. It has to be set via a macro because it needs to be re-called, with new variable settings, whenever a new century is entered.--&gt;

(set: $setNexusMovementTerm to
(macro: [
	(set: $head to (cond:
		$floorInt is 8, &quot;wade&quot;,
		$floorInt is 14, &quot;sail a course&quot;,
		(either: &quot;head&quot;, &quot;go&quot;)))
	(output-data:&quot;&quot;)
	]))
}</tw-passagedata><tw-passagedata pid="9" name="set century variables" tags="startup" position="155,3631" size="100,100">{
(set: $setCenturyVariables to 
(macro: 
	[
	(set: $floorInt to (num: $floorString))
	(set: $hundredNumber to $floorInt*100)
	(set: $floorString2 to (str: $hundredNumber))
	(output-data: &quot;&quot;)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="10" name="fix direction" tags="startup" position="155,3749" size="100,100">{
(set: $fixDirection to 
	(macro: num-type _directionNum, 
	[
	(set: $directions to 
		(cond: 
		_directionNum is 0,(a:&#39;north&#39;,&#39;east&#39;,&#39;south&#39;,&#39;west&#39;),
		_directionNum is 1,(a: &#39;east&#39;,&#39;south&#39;,&#39;west&#39;,&#39;north&#39;),
		_directionNum is 2,(a: &#39;south&#39;,&#39;west&#39;,&#39;north&#39;,&#39;east&#39;),
		_directionNum is 3,(a: &#39;west&#39;,&#39;north&#39;,&#39;east&#39;,&#39;south&#39;),
		(a:&#39;fail&#39;)))
	(if: 1st of $directions is &#39;fail&#39;)
		[($fixDirection:_directionNum - 4)]
	(output-data: &quot;&quot;)
	]
	)
)
}</tw-passagedata><tw-passagedata pid="11" name="set up door types" tags="startup" position="101,3881" size="100,100">{
(set: $setDoorTypes to 
(macro: [
	(set: $doorTypes to (cond: 
		$floorInt is 0, (a: &quot;through a&quot;, &quot;&quot;, &quot;doorway&quot;, &quot;into a&quot;),
		$floorInt is 1, (a: &#39;through an&#39;, &#39;&#39;, &#39;archway&#39;, &quot;into a&quot;),
		$floorInt is 2, (a: &#39;through a&#39;, &#39;red and gold&#39;, &#39;arch&#39;, &quot;into a&quot;),
		$floorInt is 3, (a: &#39;through a&#39;, &#39;golden&#39;, &#39;exit&#39;, &quot;into a&quot;),
		$floorInt is 4, (a: &#39;through a&#39;, &#39;collapsing&#39;, &#39;arch&#39;, &quot;into a&quot;),
		$floorInt is 5, (a: &#39;down a&#39;, &#39;long&#39;, &#39;road&#39;, &quot;to a&quot;),
		$floorInt is 6, (a: &#39;into a&#39;, &#39;rooftop&#39;,&#39;cupola&#39;, &quot;that provides access to a&quot;),
		$floorInt is 7, (a: &#39;down a&#39;, &#39;mud&#39;, &#39;lane&#39;, &quot;to a&quot;),
		$floorInt is 8, (a: &#39;up a&#39;, &#39;dry-earth&#39;, &#39;upgang&#39;, &quot;onto a&quot;),
		$floorInt is 9, (a: &#39;along a&#39;, &#39;narrow&#39;, &#39;Gasse&#39;, &quot;to a&quot;),
		$floorInt is 10, (a: &#39;down a&#39;, &#39;rarely trodden&#39;, &#39;path&#39;, &quot;to a&quot;),
		$floorInt is 11, (a: &#39;through a&#39;, &quot;farmer&#39;s&quot;,&#39;gate&#39;, &quot;into a&quot;),
		$floorInt is 12, (a: &#39;through a&#39;, &#39;&#39;, &#39;mountain pass&#39;, &quot;to a&quot;),
		$floorInt is 13, (a: &#39;through a&#39;, &#39;rotted&#39;, &#39;gate&#39;, &quot;into a&quot;),
		$floorInt is 14, (a: &#39;&#39;, &#39;&#39;, &#39;&#39;, &quot;to a&quot;),
		$floorInt is 15, (a: &#39;down a&#39;, &#39;&#39;, &#39;lane&#39;, &quot;to a&quot;),
		$floorInt is 16, (a: &#39;up a&#39;, &#39;&#39;, &#39;step&#39;, &quot;onto a&quot;),
		$floorInt is 17, (a: &#39;over a&#39;, &#39;narrow&#39;, &#39;bridge&#39;, &quot;to a different&quot;),
		$floorInt is 18, (a: &#39;down a&#39;, &#39;foggy&#39;, &#39;alley&#39;, &quot;to a different&quot;),
		$floorInt is 19, (a: &#39;through the&#39;, &#39;&#39;, &#39;turnstiles&#39;, &quot;if this is your&quot;),
		$floorInt is 20, (a: &#39;through an&#39;, &#39;&#39;, &#39;electronic turnstile&#39;, &quot;to a different&quot;),
	&quot;through a&quot;, &quot;&quot;, &quot;doorway&quot;, &quot;to a&quot;))
	(output-data:&quot;&quot;)
	]
	))
	}</tw-passagedata><tw-passagedata pid="12" name="set exit phrase (for Nexus)" tags="startup" position="23,3983" size="100,100">{
&lt;!--The century-specific text for exiting the nexus to a complex--&gt;

(set: $setExitPhrase to 
(macro: [
	(set: $exitPhrase to (cond: 
		$floorInt is 9, &quot;to somewhere&quot;,
		$floorInt is 6, &quot;into the&quot;, 
		$floorInt is 8, &quot;onto an&quot;,
		$floorInt is 14, &quot;towards a&quot;,
		(4) of $doorTypes + &quot; &quot;
	))
	(output-data:&quot;&quot;)
	]))
	
}</tw-passagedata><tw-passagedata pid="13" name="write Main Sentence (for Nexus)" tags="startup" position="212,2145" size="100,100">{
(set: $writeMainSentence to
(macro: [
	($setNexusPassage:)
	($setNexusPhrase:)
	(set: $mainSentence to &quot;You are &quot; 
		+ 1st of $nexusPassage 
		+ &quot; &quot; 
		+ 2nd of $nexusPassage
		+ &quot; &quot; 
		+ 3rd of $nexusPassage
		+ ($somewhere:) 
		+ 1st of $nexusPhrase
		+ &quot; &quot; 
		+ 2nd of $nexusPhrase
		+ &quot; &quot;
		+ 3rd of $nexusPhrase
		+ &quot; &quot;
		+ 4th of $nexusPhrase
	)
	(output-data:&quot;&quot;)
	]
	))
	
&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;set nexus passage]]
[[ -&gt;set nexus phrase]]
[[ -&gt;somewhere]]
}</tw-passagedata><tw-passagedata pid="14" name="set nexus phrase" tags="startup" position="357,2308" size="100,100">{
(set: $setNexusPhrase to 
(macro: [
	(set: $nexusPhrase to (cond: 
	$floorInt is 0, 
		(a: &#39;in the&#39;, &#39;dusty&#39;, &#39;underworld&#39;, &#39;of ancient Rome&#39;),
	$floorInt is 1, 
		(a: &#39;in the&#39;, &#39;bustling&#39;, &#39;forum&#39;, &#39;of ancient Rome&#39;),
	$floorInt is 2, 
		(a: &#39;on the&#39;, &#39;opulent&#39;, &#39;avenues&#39;, &#39;of the Forbidden City&#39;),
	$floorInt is 3, 
		(a: &#39;in a&#39;, &#39;glistening&#39;, &#39;palace&#39;, &#39;in ancient Byzantium&#39;),
	$floorInt is 4, 
		(a: &#39;in the&#39;, &#39;ruins&#39;, &#39;&#39;, &#39;of ancient Rome&#39;),
	$floorInt is 5, 
		(a: &#39;on the&#39;, &#39;olde&#39;, &#39;pyke&#39;, &#39;in Arthurian Britain&#39;),
	$floorInt is 6, 
		(a: &#39;above the&#39;, &#39;bustling&#39;, &#39;city&#39;, &#39;of Aleppo&#39;),
	$floorInt is 7, 
		(a: &quot;in Charlemagne&#39;s&quot;, &#39;&#39;, &#39;Palace Complex&#39;, &#39;at Aachen&#39;),
	$floorInt is 8, 
		(a: &#39;wading through the&#39;, &#39;stinking&#39;, &#39;Somerset levels&#39;, &#39;, within the bells of the Athelney Abbey&#39;),
	$floorInt is 9, 
		(a: &#39;in the&#39;, &#39;&#39;, &#39;First Reich&#39;, &#39;&#39;),
	$floorInt is 10, 
		(a: &#39;near the&#39;, &#39;&#39;, &#39;twelve holy communities&#39;, &#39;of St Benedict&#39;),
	$floorInt is 11, 
		(a: &#39;in&#39;, &#39;&#39;,&#39;Sherwood Forest&#39;, &#39;&#39;),
	$floorInt is 12, 
		(a: &#39;on the&#39;, &#39;boundless&#39;, &#39;steppes&#39;, &#39;of Asia&#39;),
	$floorInt is 13, 
		(a: &#39;in the&#39;, &#39;diseased&#39;, &#39;ditches&#39;, &#39;of medieval Scotland&#39;),
	$floorInt is 14, 
		(a: &#39;in sight of&#39;, &#39;&#39;, &#39;unexplored shores&#39;, &#39;&#39;),
	$floorInt is 15, 
		(a: &#39;on the&#39;, &#39;sectarian&#39;, &#39;lanes&#39;, &#39;of Elizabethan England&#39;),
	$floorInt is 16, 
		(a: &#39;on the&#39;, &#39;tranquil&#39;, &#39;waterways&#39;, &#39;of the Grachtengordel&#39;),
	$floorInt is 17, 
		(a: &#39;on the&#39;, &#39;bloody&#39;, &#39;streets&#39;, &#39;of revolutionary Paris&#39;),
	$floorInt is 18, 
		(a: &#39;on the&#39;, &#39;foggy&#39;, &#39;thoroughfares&#39;, &#39;of Victorian London&#39;),
	$floorInt is 19, 
		(a: &#39;somewhere on the&#39;, &#39;concrete&#39;, &#39;landscape&#39;, &#39;of Soviet Russia&#39;),
	$floorInt is 20, 
		(a: &#39;within the&#39;, &#39;dense&#39;, &#39;cityscape&#39;, &#39;of neon lit Shanghai&#39;),
	(a: &quot;&quot;,&quot;&quot;,&quot;world&quot;,&quot;&quot;)))
	(output-data:&quot;&quot;)
	]
	))

}</tw-passagedata><tw-passagedata pid="15" name="somewhere" tags="startup" position="358,2419" size="100,100">{
(set: $somewhere to 
(macro:[
	(set: _somewhere to (cond: 
		$floorInt is 8, &quot; &quot;,
		&quot; &quot;)
	)
	(output-data:_somewhere)
	]
	))
}</tw-passagedata><tw-passagedata pid="16" name="set images" tags="startup" position="11,2620" size="100,100">{
(set: $setImage to 
(macro: [	
	&lt;!--decadeNum is always 0 in nexus.--&gt;
	(set: $imageRef to (str: $hundredNumber + $decadeNum + $imageType))
	(set: $imgScript to &quot;&lt;script&gt;CustomScripts.updateBackground(&quot; + $imageRef +&quot;);&lt;/script&gt;&quot;)
		(output-data: $imgScript)
		]
		))
		
}</tw-passagedata><tw-passagedata pid="17" name="set nexus passage" tags="startup" position="357,2194" size="100,100">{
(set: $setNexusPassage to
(macro: [
	(set: $nexusPassage to (cond: 
	$floorInt is 0, (a: &#39;in a&#39;, &#39;narrow&#39;, &#39;tunnel&#39;),
	$floorInt is 1, (a: &#39;on a&#39;, &#39;busy&#39;, &#39;street&#39;),
	$floorInt is 2, (a: &#39;on a&#39;, &#39;clay-brick&#39;, &#39;avenue&#39;),
	$floorInt is 3, (a: &#39;in a&#39;, &#39;high&#39;, &#39;hallway&#39;),
	$floorInt is 4, (a: &#39;on a&#39;, &#39;desolate&#39;, &#39;street&#39;),
	$floorInt is 5, (a: &#39;on a&#39;, &#39;grassy&#39;, &#39;path&#39;),
	$floorInt is 6, (a: &#39;on a&#39;, &#39;clay tiled&#39;,&#39;rooftop&#39;),
	$floorInt is 7, (a: &#39;on a&#39;, &#39;muddy&#39;, &#39;street&#39;),
	$floorInt is 8, (a: &#39;&#39;, &#39;&#39;, &#39;&#39;),
	$floorInt is 9, (a: &#39;on a&#39;, &#39;dark brick&#39;, &#39;Straße&#39;),
	$floorInt is 10, (a: &#39;on a&#39;, &quot;pilgrim&#39;s&quot;, &#39;trail&#39;),
	$floorInt is 11, (a: &#39;on a&#39;, &#39;drizzled&#39;,&#39;path&#39;),
	$floorInt is 12, (a: &#39;on a&#39;, &#39;wide open&#39;, &#39;trail&#39;),
	$floorInt is 13, (a: &#39;on a&#39;, &#39;slutchy&#39;, &#39;path&#39;),
	$floorInt is 14, (a: &#39;on a&#39;, &#39;wooden&#39;, &#39;frigate&#39;),
	$floorInt is 15, (a: &#39;on a&#39;, &#39;misty&#39;, &#39;pike&#39;),
	$floorInt is 16, (a: &#39;on a&#39;, &#39;calm&#39;, &#39;canal&#39;),
	$floorInt is 17, (a: &#39;on a&#39;, &#39;cobbled&#39;, &#39;rue&#39;),
	$floorInt is 18, (a: &#39;on a&#39;, &#39;cobbled&#39;, &#39;street&#39;),
	$floorInt is 19, (a: &#39;at a&#39;, &#39;train&#39;, &#39;station&#39;),
	$floorInt is 20, (a: &#39;on a&#39;, &#39;vibrant&#39;, &#39;street&#39;),
	&quot;way&quot;))
	(output-data:&quot;&quot;)
	]
	))

}</tw-passagedata><tw-passagedata pid="18" name="set complexWord (for nexus)" tags="startup" position="215,2007" size="100,100">{
(set: $setComplexWord to 
(macro: [
	(set: $complexWord to (cond: 
		$floorInt is 0, &#39;part of the labyrinth&#39;,
		$floorInt is 1, &#39;quarter&#39;,
		$floorInt is 2, &#39;ward&#39;,
		$floorInt is 3, &#39;wing&#39;,
		$floorInt is 4, &#39;quarter&#39;,
		$floorInt is 5, &#39;realm&#39;,
		$floorInt is 6, &#39;building below&#39;,
		$floorInt is 7, &#39;quarter&#39;,
		$floorInt is 8, &#39;island&#39;,
		$floorInt is 9, &#39;unknown&#39;,
		$floorInt is 10, &#39;commune&#39;,
		$floorInt is 11, &#39;parish&#39;,
		$floorInt is 12, &#39;region&#39;,
		$floorInt is 13, &#39;parish&#39;,
		$floorInt is 14, &#39;nearby port&#39;,
		$floorInt is 15, &#39;quarter&#39;,
		$floorInt is 16, &#39;district&#39;,
		$floorInt is 17, &#39;quarter&#39;,
		$floorInt is 18, &#39;neighborhood&#39;,
		$floorInt is 19, &#39;stop&#39;,
		$floorInt is 20, &#39;sector&#39;,
		&quot;region&quot;))
	(output-data: &quot;&quot;)
		]
		))

}</tw-passagedata><tw-passagedata pid="19" name="Reset Nexus Vocab" tags="startup" position="39,2143" size="100,100">{
(set:$resetNexusVocab to
(macro: [
	($writeMainSentence:)
	($setComplexWord:)
	($setSecondaryPassage:)
	(output-data:&quot;&quot;)
	]
	))
	
&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;set complexWord (for nexus)]]
[[ -&gt;write Main Sentence (for Nexus)]]
[[ -&gt;set secondary passage (for nexus)]]
}</tw-passagedata><tw-passagedata pid="20" name="top right" tags="" position="1511,1038" size="100,100">{(set: $place to &quot;&quot;)
(set: $NexusRoom to 2)&lt;!--Nexus room nos end in 2--&gt;
(set: $decadeNum to 0)
(set: $imageType to 0) 
&lt;!--By running the following macro here in the passage, we get to reset the vocab each time we change passage using the &quot;either&quot; command in the vocab entries (if there is one). --&gt;
($resetNexusVocab:) 
($setNexusDirections: &quot;g1&quot;)
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[$mainSentence, (if: $floorInt is 6)[at the $rightOnNexusMap most end, which ends with a cupola, inside which is a ladder that leads [[down-&gt;complex one]]. Alternatively, you may $head to the [[$leftOnNexusMap-&gt;top middle]].] (else:)[(if: $floorInt is 14)[at the $rightOnNexusMap end of a closed sea. From here, you may $head into a estuary to the $rightOnNexusMap, via which you can access a river and [[sail inland-&gt;complex one]], or you can $head [[$leftOnNexusMap-&gt;top middle]].] (else:) [at the $rightOnNexusMap most end, which ends in a (print: (3) of $doorTypes). You may [[take the (print: (3) of $doorTypes)-&gt;complex one]], or head to the [[$leftOnNexusMap-&gt;top middle]].]]
]{

($setImage:)
($setNexusImage:)
(if: $hundredNumber is 1500)[($overrideImage:&quot;1503&quot;)]
(if: $hundredNumber is 1800)[($overrideImage:&quot;1812&quot;)]
(if: $floorInt is 17)[($overrideImage: &quot;17003&quot;)]
(if: $floorInt is 19)[($overrideImage: &quot;19003&quot;)]}</tw-passagedata><tw-passagedata pid="21" name="complex two" tags="" position="1363,1190" size="100,100">{
&lt;!--SETTINGS--&gt;
&lt;!--These must be reset for each complex.--&gt;
&lt;!--This is the number that (in combination with the century number) fixes the parameters for the specific decade.--&gt;
(set: $decadeNum to 20) 

&lt;!--The following should be set differently for each complex entry point, so as to match the direction on screen from which we are exiting the nexus.--&gt;
(set: $directionIn to $downOnNexusMap)

(set: $exitPoint to &quot;top middle&quot;)
(set: $thisRoom to &quot;complex two&quot;)


&lt;!--END OF SETTINGS--&gt;

(set: $intoHere to $directionIn)
(set: $outOfHere to ($oppositeCompass: $intoHere))

&lt;!--The following fixes the text that permits one to leave the complex.--&gt;
(set: $returnText to &quot;A different possibility is to head back to the $outOfHere towards [[$nexusWord-&gt;$thisRoom]].&quot;) 

($setDecadeVariables:)

&lt;!--The following function fixes the architecture by consulting the architecture database.--&gt;

($chooseArchitecture:) 

&lt;!--The following function requires directionIn and architecture to be set, and uses it to fix the startroom before flipping and rotating the map &amp; changing the startRoom each time as appropriate.--&gt;
($getComplexMap:)

($fixOptionalPaths:)
($setNexusWord:)
($refreshSentences:) 

&lt;!--IMAGES--&gt;
($setImage:)
(if: $floorInt is 17)[($overrideImage: &quot;17504&quot;)]
(if: $floorInt is 19)[($overrideImage: &quot;19201&quot;)]
&lt;!--END IMAGES--&gt;


}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[{
(if: $floorInt is 6)[You are in the library of the hashashins in the city of Aleppo. To explore the library, you must head [[$intoHere-&gt;$startRoom]]. You can leave the library by heading [[up-&gt;$exitPoint]] to $nexusWord.] 
(elseif: $floorInt is 14)[(set: $place to &quot;Strasbourg&quot;)You are at a port in the city of Strasbourg, where Johannes Gutenberg has invented his printing press. To explore the city, you must head [[$intoHere-&gt;$startRoom]] on foot. Alternatively you can $head [[$outOfHere-&gt;$exitPoint]] to $nexusWord.]
(elseif: $floorInt is 19)[You are at an imposing double door to the KGB building in Moscow. From here you may go through the door to the (link:&quot;KGB archive&quot;)[($overrideImage: &quot;1921&quot;)(goto: $startRoom)] or you can $head [[$outOfHere-&gt;$exitPoint]] to $nexusWord.]
(else:)[$complexSentence3. From here you can go $outOfHere to [[$nexusWord-&gt;$exitPoint]]. Alternatively, you may go [[$intoHere-&gt;$startRoom]].]
	}]







</tw-passagedata><tw-passagedata pid="22" name="complex one" tags="" position="1686,1032" size="100,100">{
&lt;!--SETTINGS--&gt;
&lt;!--These must be reset for each complex.--&gt;
&lt;!--This is the number that (in combination with the century number) fixes the parameters for the specific decade.--&gt;
(set: $decadeNum to 10) 

(set: $outOfHere to $leftOnNexusMap)
(set: $intoHere to $rightOnNexusMap)
(set: $exitPoint to &quot;top right&quot;)
(set: $thisRoom to &quot;complex one&quot;)


&lt;!--END OF SETTINGS--&gt;

&lt;!--The following fixes the text that permits one to leave the complex.--&gt;
(set: $returnText to &quot;A different possibility is to head back to the $outOfHere towards [[$nexusWord-&gt;$thisRoom]].&quot;) 

($setDecadeVariables:)

&lt;!--The following should be set differently for each complex entry point, so as to match the direction on screen from which we are exiting the nexus.--&gt;
(set: $directionIn to $rightOnNexusMap)

&lt;!--The following function fixes the architecture by consulting the architecture database.--&gt;

($chooseArchitecture:) 

&lt;!--The following function requires directionIn and architecture to be set, and uses it to fix the startroom before flipping and rotating the map &amp; changing the startRoom each time as appropriate.--&gt;
($getComplexMap:)

($fixOptionalPaths:)
($setNexusWord:)
($refreshSentences:) 

&lt;!--IMAGES--&gt;
($setImage:)

&lt;!--END IMAGES--&gt;


}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[{
(if: $floorInt is 6)[You are in a labyrinth of smoky hashish bars somewhere in the seedier quarter of the city of Aleppo. You can explore the quarter by heading [[$intoHere-&gt;$startRoom]]. Alternatively you can go [[up a ladder-&gt;$exitPoint]] to $nexusWord.] 
(else:)[
	(if: $floorInt is 14)[(set: $place to &quot;York&quot;)You are at a port in the city of York. To explore the city, you must head [[$intoHere-&gt;$startRoom]] on foot. Alternatively you can $head [[$leftOnNexusMap-&gt;$exitPoint]] to $nexusWord.]	(else:)[$complexSentence3.
From here you can go $outOfHere to [[$nexusWord-&gt;$exitPoint]]. Alternatively, you may go [[$intoHere-&gt;$startRoom]].] 
]
}]</tw-passagedata><tw-passagedata pid="23" name="three fifths up" tags="" position="1206,1594" size="100,100">{(set: $place to &quot;&quot;)
(set: $NexusRoom to 4)&lt;!--Nexus room nos end in 2--&gt;
(set: $decadeNum to 0)
(set: $imageType to 0)
&lt;!--By running the following macro here in the passage, we get to reset the vocab each time we change passage using the &quot;either&quot; command in the vocab entries (if there is one). --&gt;
($resetNexusVocab:) 
($setNexusDirections: &quot;hr2&quot;)
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[$mainSentence. (if: $floorInt is 14)[Though passage to the $leftOnNexusMap is blocked by a coastal cliffs, you may chart a course [[$upOnNexusMap-&gt;four fifths up]], [[$rightOnNexusMap-&gt;middle middle]] or [[$downOnNexusMap-&gt;two fifths up]] from here.] (else:) [A $secondaryPassage branches off to the [[$rightOnNexusMap-&gt;middle middle]]. Or you may take the main $secondaryPassage to the [[$upOnNexusMap-&gt;four fifths up]] or to the [[$downOnNexusMap-&gt;two fifths up]].]
]{

($setImage:)
($setNexusImage:)
(if: $hundredNumber is 1500)[($overrideImage:&quot;1505&quot;)]
(if: $hundredNumber is 1800)[($overrideImage:&quot;1804&quot;)]
(if: $floorInt is 17)[($overrideImage: &quot;17005&quot;)]
(if: $floorInt is 19)[($overrideImage: &quot;19005&quot;)]
}</tw-passagedata><tw-passagedata pid="24" name="complex three" tags="" position="1363,1325" size="100,100">{
&lt;!--SETTINGS--&gt;
&lt;!--These must be reset for each complex.--&gt;
&lt;!--This is the number that (in combination with the century number) fixes the parameters for the specific decade.--&gt;
(set: $decadeNum to 30) 

&lt;!--The following should be set differently for each complex entry point, so as to match the direction on screen from which we are exiting the nexus.--&gt;
(set: $directionIn to $rightOnNexusMap)

(set: $exitPoint to &quot;four fifths up&quot;)
(set: $thisRoom to &quot;complex three&quot;)


&lt;!--END OF SETTINGS--&gt;

(set: $intoHere to $directionIn)
(set: $outOfHere to ($oppositeCompass: $intoHere))

&lt;!--The following fixes the text that permits one to leave the complex.--&gt;
(set: $returnText to &quot;A different possibility is to head back to the $outOfHere towards [[$nexusWord-&gt;$thisRoom]].&quot;) 

($setDecadeVariables:)

&lt;!--The following function fixes the architecture by consulting the architecture database.--&gt;

($chooseArchitecture:) 

&lt;!--The following function requires directionIn and architecture to be set, and uses it to fix the startroom before flipping and rotating the map &amp; changing the startRoom each time as appropriate.--&gt;
($getComplexMap:)

($fixOptionalPaths:)
($setNexusWord:)
($refreshSentences:) 

&lt;!--IMAGES--&gt;
($setImage:)
(if: $floorInt is 11)[($overrideImage:&quot;1135&quot;)]
(if: $floorInt is 14)[($overrideImage:&quot;1432&quot;)]
(if: $floorInt is 15)[(set: $homeCity to &quot;London&quot;)(set: $foreignCity to &quot;Antwerp&quot;)]
&lt;!--END IMAGES--&gt;


}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[{(if: $floorInt is in (a: 6, 11, 14, 15))[
(if: $floorInt is 6)[You are in the Sultan&#39;s palace in the city of Aleppo, where exotic belly dancers put on a show for the Sultan&#39;s many guests. To explore the palace, you must head [[$intoHere-&gt;$startRoom]]. to leave, you may head [[up-&gt;$exitPoint]] to $nexusWord.] 
(if: $floorInt is 11) [You are on a high and windy path overlooking the port town of Bishop&#39;s Lynn. From here, you can head inland towards [[Sherwood Forest-&gt;$exitPoint]] or make your way down into the [[port city-&gt;port1]].]
(if: $floorInt is 14)[(set: $place to &quot;Orleans&quot;)You are docked at the city of Orleans, which is under siege from the forces of Joan of Arc. To explore, you must head [[$intoHere-&gt;$startRoom]] on foot. Alternatively you can $head [[$outOfHere-&gt;$exitPoint]] to $nexusWord.]
(if: $floorInt is 15) [($overrideImage: &quot;1510&quot;) You are on a dilapidated street near the docks in Elizabethan London. From here, you can head [[$outOfHere-&gt;$exitPoint]] or [[$intoHere-&gt;port1]].]
]
(else:)[$complexSentence3. From here you can go $outOfHere to the [[$nexusWord-&gt;$exitPoint]]. Alternatively, you may go [[$intoHere-&gt;$startRoom]].]
	}]
	






</tw-passagedata><tw-passagedata pid="25" name="middle middle" tags="" position="1363,1593" size="100,100">{(set: $place to &quot;&quot;)
(set: $NexusRoom to 5)&lt;!--Nexus room nos end in 2--&gt;
(set: $decadeNum to 0)
(set: $imageType to 0) 
(set: $elizabethanDock to &quot;outbound&quot;)
&lt;!--By running the following macro here in the passage, we get to reset the vocab each time we change passage using the &quot;either&quot; command in the vocab entries (if there is one). --&gt;
($resetNexusVocab:)
($setNexusDirections: &quot;g2&quot;)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[$mainSentence. You may $head [[$leftOnNexusMap-&gt;three fifths up]] or [[$rightOnNexusMap-&gt;middle right]] from here. (if: $floorInt is 6)[A ladder inside a cupola leads [[down-&gt;complex four]] from here.] (else:)[ (if: $floorInt is 14)[The coast to the $upOnNexusMap opens up into an estuary, via which you can [[sail inland-&gt;complex four]].] (else:) [There is also [[a way to the $upOnNexusMap-&gt;complex four]] to a $complexWord.]]
]{

($setImage:)
($setNexusImage:)
(if: $hundredNumber is 1500)[($overrideImage:&quot;1506&quot;)]
(if: $hundredNumber is 1800)[($overrideImage:&quot;1805&quot;)]
(if: $hundredNumber is 1900)[(set: $siberianDirection to &quot;east&quot;)(set:$siberianCounter to 0)]
(if: $floorInt is 17)[($overrideImage: &quot;17006&quot;)]
(if: $floorInt is 19)[($overrideImage: &quot;19006&quot;)]
}</tw-passagedata><tw-passagedata pid="26" name="two fifths up" tags="" position="1206,1749" size="100,100">{(set: $NexusRoom to 7)&lt;!--Nexus room nos end in 2--&gt;
(set: $mervDirection to &quot;inbound&quot;)
(set:$crowleyDirection to &quot;inbound&quot;)
(set: $imageType to 0) 
(set: $decadeNum to 0)
(set: $place to &quot;&quot;)
&lt;!--By running the following macro here in the passage, we get to reset the vocab each time we change passage using the &quot;either&quot; command in the vocab entries (if there is one). --&gt;
($resetNexusVocab:) 
($setNexusDirections: &quot;g2&quot;)

($setImage:)
(if: $hundredNumber is 1800)[($overrideImage:&quot;1807&quot;)]
(if: $hundredNumber is 1500)[($overrideImage:&quot;1508&quot;)]
(if: $hundredNumber is 1700)[($overrideImage:&quot;-13&quot;)]
(if: $floorInt is 14)[($overrideImage: &quot;1400.1&quot;)]

}
{(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[(unless: $floorInt is in (a:17,19))[$mainSentence]
(elseif: $floorInt is 17)[You are beneath the arches at the entrance to Notre Dame Cathedral. From here you can go $rightOnNexusMap [[into the cathedral-&gt;complex seven]] or $leftOnNexusMap [[into the square-&gt;complex nine]], where a crowd gathers to watch the executions at the guillotine.]
(elseif: $floorInt is 19)[You are at a train station in central Moscow. You can exit the station [[through a turnstile to the $rightOnNexusMap-&gt;complex seven]]. ]
(if: $floorInt is 14)[, sailing down a narrow sea between two lands]
(if: $floorInt is 18)[, at Charing Cross, near the Thames.] 
(unless: $floorInt is 19)[You may (if: $floorInt is 17)[also ]$head [[$forceSpace $upOnNexusMap-&gt;three fifths up]] $forceSpace or [[$forceSpace $downOnNexusMap-&gt;bottom]] $forceSpace from here.](else:)[You may also take the city line [[$upOnNexusMap-&gt;three fifths up]] from here.] 
(if: $floorInt is 6)[There are also twin cupolas here, in which ladders descend into the buildings below. You may take the [[one to the $rightOnNexusMap -&gt;complex seven]] or the [[one to the $leftOnNexusMap -&gt;complex nine]].]
(else-if: $floorInt is 14)[To the [[$rightOnNexusMap-&gt;complex seven]] and [[$leftOnNexusMap-&gt;complex nine]] are coastal estuaries via which you can sail inland.]
(else-if: $floorInt is 19)[Alternatively, you can (link:&quot;take a train through the countryside&quot;)[(set: $previousStop to &quot;Moscow&quot;)(set: $nextStop to &quot;Pripyat&quot;)(goto: &quot;train through countryside&quot;)], or (link: &quot;take a train towards East Germany&quot;)[(set: $previousStop to &quot;Moscow&quot;)(set: $nextStop to &quot;Berlin&quot;)(goto: &quot;train through countryside&quot;)].]
(else:) [(unless: $floorInt is in (a:17,19))[Alternatively, you might take [[a (print: (3) of $doorTypes) to the $rightOnNexusMap -&gt;complex seven]], or a (print: (3) of $doorTypes) to the [[$leftOnNexusMap -&gt;complex nine]].]]]


($setNexusImage:)
(if: $floorInt is 19)[($overrideImage: &quot;19008&quot;)]
}</tw-passagedata><tw-passagedata pid="27" name="bottom" tags="" position="1201,1998" size="100,100">{(set: $NexusRoom to 8)&lt;!--Nexus room nos end in 2--&gt;
(set: $place to &quot;&quot;)
(set: $decadeNum to 0)
(set: $imageType to 0) 
&lt;!--By running the following macro here in the passage, we get to reset the vocab each time we change passage using the &quot;either&quot; command in the vocab entries (if there is one). --&gt;
($resetNexusVocab:) 
($setNexusDirections: &quot;g2&quot;)
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[$mainSentence, (if: $floorInt is 6)[at the $downOnNexusMap most end, which ends with a cupola, inside which is a ladder that leads [[down-&gt;complex eight]]. You may take it,] (else:)[(if: $floorInt is 14)[at the $downOnNexusMap end of a closed sea. From here, you may $head into a river mouth to the $downOnNexusMap, via which you can [[sail inland-&gt;complex eight]],](else:) [at the $downOnNexusMap most end, which ends in a (print: (3) of $doorTypes). You may [[take the (print: (3) of $doorTypes)-&gt;complex eight]],]] or $head to the [[$upOnNexusMap-&gt;two fifths up]]. 
]{

(set: $japanBattle to &quot;outbound&quot;)
($setImage:)
($setNexusImage:)
(if: $hundredNumber is 1500)[($overrideImage:&quot;1509&quot;)]
(if: $hundredNumber is 1800)[($overrideImage:&quot;1803&quot;)]
(if: $floorInt is 17)[($overrideImage: &quot;17009&quot;)]
(if: $floorInt is 19)[($overrideImage: &quot;19009&quot;)]

}</tw-passagedata><tw-passagedata pid="28" name="complex seven" tags="" position="1365,1757" size="100,100">{
&lt;!--SETTINGS--&gt;
&lt;!--These must be reset for each complex.--&gt;
&lt;!--This is the number that (in combination with the century number) fixes the parameters for the specific decade.--&gt;
(set: $decadeNum to 70) 

&lt;!--The following should be set differently for each complex entry point, so as to match the direction on screen from which we are exiting the nexus.--&gt;
(set: $directionIn to $rightOnNexusMap)

(set: $exitPoint to &quot;two fifths up&quot;)
(set: $thisRoom to &quot;complex seven&quot;)


&lt;!--END OF SETTINGS--&gt;

(set: $intoHere to $directionIn)
(set: $outOfHere to ($oppositeCompass: $intoHere))

&lt;!--The following fixes the text that permits one to leave the complex.--&gt;
(set: $returnText to &quot;A different possibility is to head back to the $outOfHere towards [[$nexusWord-&gt;$thisRoom]].&quot;) 

($setDecadeVariables:)

&lt;!--The following function fixes the architecture by consulting the architecture database.--&gt;

($chooseArchitecture:) 

&lt;!--The following function requires directionIn and architecture to be set, and uses it to fix the startroom before flipping and rotating the map &amp; changing the startRoom each time as appropriate.--&gt;
($getComplexMap:)

($fixOptionalPaths:)

($setNexusWord:)

($refreshSentences:) 


&lt;!--IMAGES--&gt;
($setImage:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;1872&quot;)]

&lt;!--END IMAGES--&gt;



(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[
(if: $floorInt is 6)[You are in the great mosque in the city of Aleppo. You can explore the mosque by heading [[$intoHere-&gt;$startRoom]]. Alternatively you can leave the mosque by [[climbing up a ladder-&gt;$exitPoint]] to $nexusWord.] 
(if: $floorInt is 14)[You are at a port in the Vatican city, which suffers under the corrupt Papacy of Rodrigo Borgia. To explore the Vatican, you must head [[$intoHere-&gt;$startRoom]] on foot. Alternatively you can $head [[$outOfHere-&gt;$exitPoint]] to $nexusWord.]
(if: $floorInt is 15)[You are on the grounds around Singleton Hall, also known as Chingle Hall. The manor is surrounded by a moat and, if you wish, you may [[take the bridge-&gt;bridge over the moat]] that crosses it. Otherwise you can $head [[$outOfHere-&gt;$exitPoint]] to $nexusWord.]
(if: $floorInt is 17)[You are within the magnificent arched portal of Notre Dame cathedral. To one side, the entrance to the eastern bell tower is nailed shut, but you can (link:&quot;head into the western&quot;)[(goto: &quot;bell tower&quot;)]. Or, if you wish, you may (link:&quot;head further into the cathedral&quot;)[(goto:$startRoom)]. Otherwise you can $head [[$outOfHere-&gt;$exitPoint]] to the arches at the entrance of the cathedral.]
(if: $floorInt is 18) [
	(if: $crowleyDirection is &quot;inbound&quot;)[You walk the cold, drizzled streets towards the temple of the Hermetic Order of the Golden Dawn. Soon you are [[there-&gt;Crowley&#39;s temple]].]
	(else:)[You walk on the cold, drizzled streets not far from the temple of the Hermetic Order of the Golden Dawn. If you wish, [[you can go back there-&gt;Crowley&#39;s temple]]. Alternatively, you can head for [[$nexusWord-&gt;two fifths up]].]]
(unless: $floorInt is in (a:6,14,15,17,18))[$complexSentence3. From here you can go $outOfHere to [[$nexusWord-&gt;$exitPoint]]. Alternatively, you may go [[$intoHere-&gt;$startRoom]].]
	]

}





</tw-passagedata><tw-passagedata pid="29" name="complex nine" tags="" position="1043,1752" size="100,100">{
&lt;!--SETTINGS--&gt;
&lt;!--These must be reset for each complex.--&gt;
&lt;!--This is the number that (in combination with the century number) fixes the parameters for the specific decade.--&gt;
(set: $decadeNum to 90) 

&lt;!--The following should be set differently for each complex entry point, so as to match the direction on screen from which we are exiting the nexus.--&gt;
(set: $directionIn to $leftOnNexusMap)

(set: $exitPoint to &quot;two fifths up&quot;)
(set: $thisRoom to &quot;complex nine&quot;)


&lt;!--END OF SETTINGS--&gt;

(set: $intoHere to $directionIn)
(set: $outOfHere to ($oppositeCompass: $intoHere))

&lt;!--The following fixes the text that permits one to leave the complex.--&gt;
(set: $returnText to &quot;A different possibility is to head back to the $outOfHere towards [[$nexusWord-&gt;$thisRoom]].&quot;) 

($setDecadeVariables:)

&lt;!--The following function fixes the architecture by consulting the architecture database.--&gt;

($chooseArchitecture:) 

&lt;!--The following function requires directionIn and architecture to be set, and uses it to fix the startroom before flipping and rotating the map &amp; changing the startRoom each time as appropriate.--&gt;
($getComplexMap:)

($fixOptionalPaths:)
($setNexusWord:)
($refreshSentences:) 

&lt;!--IMAGES--&gt;
($setImage:)
(if: $decadeNumber is 1290 and $mervDirection is &quot;inbound&quot;)
	[($overrideImage:&quot;1292&quot;)]
(if: $decadeNumber is 1890)[($overrideImage:&quot;1802&quot;)]
(if: $decadeNumber is 1790)[($overrideImage:&quot;9179&quot;)]
(if: $decadeNumber is 1990)[($overrideImage:&quot;19910&quot;)]
&lt;!--END IMAGES--&gt;


}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[{
(if: $floorInt is 6)[You are at one of the gatehouses to the city of Aleppo. From here, a road leads to the forgotten cities to the $intoHere. You may [[take the road $intoHere-&gt;$startRoom]] if you like, or [[climb up-&gt;$exitPoint]] to $nexusWord.] 
(if: $floorInt is 8)[You wade among the dead, killed at the recent battle between the Anglo Saxons and the Vikings. From here you can wade $outOfHere to the [[$nexusWord-&gt;$exitPoint]]. Alternatively, you may wade [[$intoHere-&gt;$startRoom]].]
(if: $floorInt is 11)[A wrecked ship is beached here, the shallow water lapping around it at low tide. Beside it, an old butcher, rests on a rock, his feet submerged in the ebbing foam. If you wish, [[you may speak with him-&gt;Berold of Rouen]],  Alternatively, you may [[climb up onto the deck of the ship-&gt;$startRoom]].]
(if: $floorInt is 12 and $mervDirection is &quot;inbound&quot;)[You find a boatway towards the central Asian city of Merv. The skyline is breathtaking. However, a family hurriedly rowing in the opposite direction shouts a warning. &quot;Turn back!&quot; they warn, calling out over the water. &quot;The Mongols have taken the city and are killing everyone, man, woman and child!&quot; You can ignore the warning and [[head into the city anyway-&gt;burning merv]]. Or you can [[turn back-&gt;$exitPoint]] to $nexusWord.]
(if: $floorInt is 12 and $mervDirection is &quot;outbound&quot;)[You escape, coughing from the smoke, from the blazing inferno and out through the gates of the city. You have no option but to [[head back-&gt;$exitPoint]] to $nexusWord. ] 
(if: $floorInt is 14)[(set: $place to &quot;Wallachia&quot;)You are up river near the city of Târgoviște, where Vlad the Impaler rules with an iron fist. Outside the city, fields of impaled bodies send an ominous message to the enemies of Wallachia. To head towards the fields, you must head [[$intoHere-&gt;$startRoom]] on foot. Alternatively you can $head [[$outOfHere-&gt;$exitPoint]] to $nexusWord.] 
(if: $floorInt is 17)[You are in the square at the front of Notre Dame cathedral. In the center of the square, prisoners are executed using the guillotine. From here you can go $intoHere [[to the scaffold-&gt;$startRoom]], or (link:&quot;over towards a market area&quot;)[(goto:&quot;toy vendor&quot;)] If you would prefer to enter the cathedral, you can[[step through the arches-&gt;two fifths up]]. Alternatively, you could (link:&quot;climb up the side of the cathedral&quot;)[(goto:&quot;notre dame roof&quot;)] onto the roof. ] 
(if: $floorInt is 19)[You are at a mostly abandoned train station in Pripyat, Ukraine. From here you may catch a train (link:&quot;back towards Moscow&quot;)[(set: $previousStop to &quot;Pripyat&quot;)(set: $nextStop to &quot;Moscow&quot;)(goto: &quot;train through countryside&quot;)], take a (link:&quot;train towards East Germany&quot;)[(set: $previousStop to &quot;Pripyat&quot;)(set: $nextStop to &quot;Berlin&quot;)(goto: &quot;train through countryside&quot;)], or leave the station to (link:&quot;explore Pripyat&quot;)[(set: $previousStop to &quot;null&quot;)(goto: $startRoom)]. (if: $previousStop is &quot;Moscow&quot;)[You can also just stay on this train to (link:&quot;see where it goes&quot;)[(set: $previousStop to &quot;Pripyat&quot;)(set: $nextStop to &quot;farm&quot;)(goto: &quot;train through countryside&quot;)].](if: $previousStop is &quot;null&quot;)[You can also catch whichever train comes next and just (link:&quot;see where it goes&quot;)[(set: $previousStop to &quot;Pripyat&quot;)(set: $nextStop to &quot;farm&quot;)(goto: &quot;train through countryside&quot;)].]]
(unless: $floorInt is in (a:6,8,12,14,17,19)) [$complexSentence3.  From here you may head $outOfHere towards [[$nexusWord-&gt;$exitPoint]]. Alternatively, you may head [[$intoHere-&gt;$startRoom]].]}]</tw-passagedata><tw-passagedata pid="30" name="complex eight" tags="" position="1201,2163" size="100,100">{
&lt;!--SETTINGS--&gt;
&lt;!--These must be reset for each complex.--&gt;
&lt;!--This is the number that (in combination with the century number) fixes the parameters for the specific decade.--&gt;
(set: $decadeNum to 80) 

&lt;!--The following should be set differently for each complex entry point, so as to match the direction on screen from which we are exiting the nexus.--&gt;
(set: $directionIn to $downOnNexusMap)

(set: $exitPoint to &quot;bottom&quot;)
(set: $thisRoom to &quot;complex eight&quot;)


&lt;!--END OF SETTINGS--&gt;

(set: $intoHere to $directionIn)
(set: $outOfHere to ($oppositeCompass: $intoHere))

&lt;!--The following fixes the text that permits one to leave the complex.--&gt;
(set: $returnText to &quot;A different possibility is to head back to the $outOfHere towards [[$nexusWord-&gt;$thisRoom]].&quot;) 

($setDecadeVariables:)

&lt;!--The following function fixes the architecture by consulting the architecture database.--&gt;

($chooseArchitecture:) 

&lt;!--The following function requires directionIn and architecture to be set, and uses it to fix the startroom before flipping and rotating the map &amp; changing the startRoom each time as appropriate.--&gt;
($getComplexMap:)

($fixOptionalPaths:)
($setNexusWord:)
(if: $floorInt is 17)[($bastillePhrase:)]
($refreshSentences:) 

&lt;!--IMAGES--&gt;
($setImage:)


&lt;!--END IMAGES--&gt;


}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[{
(if: $floorInt is 12)[
	(if: $japanBattle is &quot;outbound&quot;)[($overrideImage:&quot;1283&quot;)You come to what appears to be an empty beach. Suddenly, however, you see a ship peeping out from behind a large rock and heavy hands fall on your shoulders. You are being pressed into service into the Mongol fleet! You slip from their grasp and you may take your one chance to [[escape-&gt;$exitPoint]]. Alternatively, you can surrender and [[see where this goes.-&gt;wreckStory]] ]
	(else:)[($overrideImage:&quot;1282&quot;)You wash up on the beach. From here you may head [[back-&gt;$exitPoint]] to $nexusWord.]]
(else-if: $floorInt is 6)[You are in the penal quarter of the ancient city of Aleppo, under the shadow of the citadel, where sinners and criminals are justly flogged, mutilated or executed. To explore the quarter, you must head [[$intoHere-&gt;$startRoom]]. You can leave the quarter by climbing [[up-&gt;$exitPoint]] to $nexusWord.] 
(else-if: $floorInt is 14)[(set: $place to &quot;Seville&quot;)You are at a riverside dock in the city of Seville, where the Inquisition roots out Jews, Muslims and heretics to be painfully converted to the one true faith. To explore the city, you must head [[$intoHere-&gt;$startRoom]] on foot. Alternatively you can head [[$outOfHere-&gt;$exitPoint]] to the $nexusWord.]
(else-if:$floorInt is 8)[You walk among the wounded Anglo Saxons, bloodied from their victory against the Viking raiders. You may head [[$intoHere-&gt;$startRoom]] from here. Alternatively you can $head [[$outOfHere-&gt;$exitPoint]] to $nexusWord.]
(else-if:$floorInt is 17)[($setBaileyAdj:)
	(if: $bastille is &quot;joining in&quot;)[($overrideImage: &quot;1756&quot;)(set: $bastille to &quot;stormed&quot;) You join in the mayhem. There is the loud BOOM of a gunpowder explosion,  and one of the walls of the fortress collapses into the street behind you, blocking you from heading back the way you came. 

The chaos eventually ends and the crowd begins to disperse. Most are heading [[$outOfHere-&gt;$exitPoint]] towards the cathedral of Notre Dame. But if you wish you may linger here and [[explore the ruin of the Bastille-&gt;$startRoom]].]
	(else-if: $bastille is &quot;unstormed&quot;) [($overrideImage: &quot;17801&quot;) You are at the mighty citadel of the Bastille. From here you can head [[$outOfHere-&gt;$exitPoint]] towards the cathedral of Notre Dame. Alternatively you can [[explore the Bastille-&gt;$startRoom]].]
	(else-if: $bastille is &quot;stormed&quot;) [($overrideImage: &quot;17512&quot;)You are at the ruins of the once mighty citadel of the Bastille. From here you can head [[$outOfHere-&gt;$exitPoint]] towards the cathedral of Notre Dame. Alternatively you can [[explore the ruins-&gt;$startRoom]].]
	(else:) [&quot;error in complex eight. Out of options.&quot;]	
	]
(else-if: $floorInt is 19)[You are at a station in East Berlin. You may take a train from here to (link:&quot;Moscow&quot;)[(set: $previousStop to &quot;Berlin&quot;)(set: $nextStop to &quot;Moscow&quot;)(goto: &quot;train through countryside&quot;)], or to (link:&quot;the Ukraine&quot;)[(set: $previousStop to &quot;Berlin&quot;)(set: $nextStop to &quot;Pripyat&quot;)(goto: &quot;train through countryside&quot;)]. Or you may leave the station to [[explore East Berlin-&gt;$startRoom]].]
(else:)[$complexSentence3. From here you can go $outOfHere to [[$nexusWord-&gt;$exitPoint]]. Alternatively, you may go [[$intoHere-&gt;$startRoom]].]  
	
	($setNexusImage:)
	}]







</tw-passagedata><tw-passagedata pid="31" name="middle right" tags="" position="1548,1592" size="100,100">{(set: $place to &quot;&quot;)
(set: $NexusRoom to 6)&lt;!--Nexus room nos end in 2--&gt;
(set: $decadeNum to 0)
(set: $imageType to 0) 

&lt;!--By running the following macro here in the passage, we get to reset the vocab each time we change passage using the &quot;either&quot; command in the vocab entries (if there is one). --&gt;
($resetNexusVocab:)
($setNexusDirections: &quot;g2&quot;)
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[{(if: $floorInt is in (a: 6,14,15))[
(if: $floorInt is 6)[$mainSentence, at the $rightOnNexusMap most end. There are two rooftop entrances here, via which you can descend by rope into the buildings below. You may take [[the one to the $rightOnNexusMap-&gt;complex five]] or [[the one to the $downOnNexusMap -&gt;complex six]]. You also have the option of heading [[$leftOnNexusMap-&gt;middle middle]] along the rooftop.]
(elseif: $floorInt is 14)[$mainSentence at the $rightOnNexusMap end of a closed sea. From here, you may $head into [[a delta to the $rightOnNexusMap-&gt;complex five]], via which you can sail inland, or $head into a different estuary to the [[$downOnNexusMap-&gt;complex six]]. Alternatively, you can $head [[$leftOnNexusMap-&gt;middle middle]].] 
(elseif: $floorInt is 15) [(if: $elizabethanDock is &quot;outbound&quot;)[You are at the](else:)[You sail back to the] docks on the River Thames in Elizabethan London. From here, you can head [[$leftOnNexusMap-&gt;middle middle]] into the city or go [[$upOnNexusMap-&gt;port1]] along the dockside. (if: $elizabethanDock is &quot;outbound&quot;)[Alternatively, there are some burly men stalking the dockside. You can [[go and ask them what they are doing-&gt;complex five]].]]
]
(elseif: $floorInt is 19 and $siberianCounter is 0) [You are at a train station. If you like, (link:  &quot;you can head to the &quot; + $leftOnNexusMap)[(goto: &quot;middle middle&quot;)]. Alternatively, there is a soviet official coming over to speak to you. (link:&quot;You can wait around to see what he wants...&quot;)[(goto: &quot;soviet official&quot;)]] 
(elseif: $floorInt is 19)[You are on a train crossing the frozen steppes of Siberia.{
}(if: $afghanCounter is -1)[(set: $afghanCounter to 0) The line ends at a Spartan platform in the blizzards of Siberia. The trains traveling east from here only contain prisoners, so your only option is to catch a train (link:&quot;west&quot;) [(set: $siberianDirection to &quot;west&quot;).(set:$siberianCounter to 2)(goto: &quot;middle right&quot;)]]
(elseif: $siberianCounter is 3 and $siberianDirection is &quot;east&quot;)[The train stops at a station and you see an opportunity to escape. If you wish to take it, you can (link:&quot;disembark and catch a train heading south &quot;)[(set: $afghanDirection to &quot;south&quot;)(set: $afghanCounter to 1)(goto: &quot;Afghanistan line&quot;)] or one heading (link:&quot;back to the west.&quot;)[(set: $siberianDirection to &quot;west&quot;)(set:$siberianCounter to 2)(goto: &quot;middle right&quot;)] Alternatively, you can choose to remain a prisoner on the train (link:&quot;east.&quot;)[(set: $siberianDirection to &quot;east&quot;).(set:$siberianCounter to 4)(goto: &quot;middle right&quot;)] ]
(elseif: $siberianCounter is 3)[You stop at a station where you can (link:&quot;disembark to catch a train south towards Afghanistan&quot;)[(set: $afghanDirection to &quot;south&quot;)(set: $afghanCounter to 1)(goto: &quot;Afghanistan line&quot;)] Alternatively, you can (link:&quot;stay on this train and continue west.&quot;)[(set:$siberianCounter to 2)(goto: &quot;middle right&quot;)]]
(elseif: $siberianCounter is 1 and $siberianDirection is &quot;west&quot;)[(link:&quot;You watch the world go by as the train nears the end of its journey.&quot;)[(set: $siberianCounter to $siberianCounter - 1)(goto: &quot;middle right&quot;)]]
(elseif: $siberianCounter is 5 and $siberianDirection is &quot;east&quot;)[(link:&quot;You watch the world go by as the train nears the end of its journey.&quot;)[(set: $siberianCounter to $siberianCounter+1)(goto: &quot;complex six&quot;)]]
(else:)[You have no option but to (link:&quot;watch the world go by.&quot;)[(if: $siberianDirection is &quot;east&quot;)[(set: $siberianCounter to $siberianCounter + 1)](else:)[(set: $siberianCounter to $siberianCounter - 1)](goto: &quot;middle right&quot;)].]]
(else:) [$mainSentence, at the $rightOnNexusMap most end, which ends in a (print: (3) of $doorTypes). You may [[take the (print: (3) of $doorTypes)-&gt;complex five]], take [[another (print: (3) of $doorTypes) to the $downOnNexusMap -&gt;complex six]] or $head to the [[$leftOnNexusMap-&gt;middle middle]].]}]{


($setImage:)
($setNexusImage:)
(if: $hundredNumber is 1500)[($overrideImage:&quot;1531&quot;)]
(if: $hundredNumber is 1800)[($overrideImage:&quot;1806&quot;)]
(if: $floorInt is 17)[($overrideImage: &quot;17007&quot;)]
(if: $floorInt is 19)[($overrideImage:(str: 19501 + $siberianCounter))]
}</tw-passagedata><tw-passagedata pid="32" name="complex four" tags="" position="1363,1446" size="100,100">{
&lt;!--SETTINGS--&gt;
&lt;!--These must be reset for each complex.--&gt;
&lt;!--This is the number that (in combination with the century number) fixes the parameters for the specific decade.--&gt;
(set: $decadeNum to 40) 

&lt;!--The following should be set differently for each complex entry point, so as to match the direction on screen from which we are exiting the nexus.--&gt;
(set: $directionIn to $upOnNexusMap)

(set: $exitPoint to &quot;middle middle&quot;)
(set: $thisRoom to &quot;complex four&quot;)


&lt;!--END OF SETTINGS--&gt;

(set: $intoHere to $directionIn)
(set: $outOfHere to ($oppositeCompass: $intoHere))

&lt;!--The following fixes the text that permits one to leave the complex.--&gt;
(set: $returnText to &quot;A different possibility is to head back to the $outOfHere towards [[$nexusWord-&gt;$thisRoom]].&quot;) 

($setDecadeVariables:)
($setBaileyAdj:)

&lt;!--The following function fixes the architecture by consulting the architecture database.--&gt;

($chooseArchitecture:) 

&lt;!--The following function requires directionIn and architecture to be set, and uses it to fix the startroom before flipping and rotating the map &amp; changing the startRoom each time as appropriate.--&gt;
($getComplexMap:)

($fixOptionalPaths:)
($setNexusWord:)
($refreshSentences:) 

&lt;!--IMAGES--&gt;
($setImage:)
(if: $hundredNumber is 1800)[($overrideImage:&quot;1842&quot;)]

&lt;!--END IMAGES--&gt;


}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[{(if: $floorInt is 6)[You are in the bustling souk of Al-Madina, where vendors from far and wide peddle their wares to the busy city. The souk heads [[$intoHere-&gt;$startRoom]] from here. Alternatively you can exit the souk by [[climbing up-&gt;$exitPoint]] to $nexusWord.]
(else:)[
	(if: $floorInt is 14)[(set: $place to &quot;Aztec&quot;)You are on a river to an unknown port in the new world. To dock at a magnificent city of pyramids and explore the city, you must head [[$intoHere-&gt;$startRoom]]. Alternatively you can $head [[$outOfHere-&gt;$exitPoint]] to $nexusWord.]
	(else:)[ $complexSentence3. From here you can go $outOfHere to [[$nexusWord-&gt;$exitPoint]]. Alternatively, you may go [[$intoHere-&gt;$startRoom]].]
	]
	}]






</tw-passagedata><tw-passagedata pid="33" name="complex five" tags="" position="1701,1594" size="100,100">{
&lt;!--SETTINGS--&gt;
&lt;!--These must be reset for each complex.--&gt;
&lt;!--This is the number that (in combination with the century number) fixes the parameters for the specific decade.--&gt;
(set: $decadeNum to 50) 

&lt;!--The following should be set differently for each complex entry point, so as to match the direction on screen from which we are exiting the nexus.--&gt;
(set: $directionIn to $rightOnNexusMap)

(set: $exitPoint to &quot;middle right&quot;)
(set: $thisRoom to &quot;complex five&quot;)
(set: $elizabethanDock to &quot;inbound&quot;)

&lt;!--END OF SETTINGS--&gt;

(set: $intoHere to $directionIn)
(set: $outOfHere to ($oppositeCompass: $intoHere))

&lt;!--The following fixes the text that permits one to leave the complex.--&gt;
(set: $returnText to &quot;A different possibility is to head back to the $outOfHere towards [[$nexusWord-&gt;$thisRoom]].&quot;) 

($setDecadeVariables:)

&lt;!--The following function fixes the architecture by consulting the architecture database.--&gt;

($chooseArchitecture:) 

&lt;!--The following function requires directionIn and architecture to be set, and uses it to fix the startroom before flipping and rotating the map &amp; changing the startRoom each time as appropriate.--&gt;
($getComplexMap:)

($fixOptionalPaths:)
($setNexusWord:)
($refreshSentences:) 

&lt;!--IMAGES--&gt;
($setImage:)
&lt;!--END IMAGES--&gt;


}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[{
(if: $floorInt is 6)[You are in the inner gatehouse to the Citadel of Aleppo. The doors to the city are locked and unopenable, but you can explore the citadel by heading [[$intoHere-&gt;$startRoom]]. Alternatively you can leave the citadel by [[climbing up a ladder-&gt;$exitPoint]] to $nexusWord.] 
(elseif: $floorInt is 14)[(set: $place to &quot;Istanbul&quot;)You are at a port in the city of Istanbul, which is under siege from the forces of Mehmet II. To explore the city, you must head [[$intoHere-&gt;$startRoom]] on foot. Alternatively you can $head [[$outOfHere-&gt;$exitPoint]] to $nexusWord.]
(elseif: $floorInt is 15)[You approach the men but, before you have chance to say anything, two of them grab you while the third clubs you over the head. You awake to the creaking of timber and the crack of sails. You can do nothing but (link: &quot;find out where you are&quot;)[(goto:&quot;deck&quot;)].]
(elseif: $floorInt is 19)[You spot an opportunity to desert your unit and head [[back towards the station-&gt;Afghanistan line]]. [[Or you can continue to fight alongside your brothers-&gt;$startRoom]].]
(else:)[$complexSentence3. From here you can go $outOfHere to [[$nexusWord-&gt;$exitPoint]]. Alternatively, you may go [[$intoHere-&gt;$startRoom]].]
}]
(if: $floorInt is 15)[($overrideImage: &quot;-12&quot;)]
(if: $hundredNumber is 1900)[(set: $siberiaDirection to &quot;west&quot;)]






</tw-passagedata><tw-passagedata pid="34" name="complex six" tags="" position="1556,1757" size="100,100">{
&lt;!--SETTINGS--&gt;
&lt;!--These must be reset for each complex.--&gt;
&lt;!--This is the number that (in combination with the century number) fixes the parameters for the specific decade.--&gt;
(set: $decadeNum to 60) 

&lt;!--The following should be set differently for each complex entry point, so as to match the direction on screen from which we are exiting the nexus.--&gt;
(set: $directionIn to $downOnNexusMap)

(set: $exitPoint to &quot;middle right&quot;)
(set: $thisRoom to &quot;complex six&quot;)


&lt;!--END OF SETTINGS--&gt;

(set: $intoHere to $directionIn)
(set: $outOfHere to ($oppositeCompass: $intoHere))

&lt;!--The following fixes the text that permits one to leave the complex.--&gt;
(set: $returnText to &quot;A different possibility is to head back to the $outOfHere towards [[$nexusWord-&gt;$thisRoom]].&quot;) 

($setDecadeVariables:)

&lt;!--The following function fixes the architecture by consulting the architecture database.--&gt;

($chooseArchitecture:) 

&lt;!--The following function requires directionIn and architecture to be set, and uses it to fix the startroom before flipping and rotating the map &amp; changing the startRoom each time as appropriate.--&gt;
($getComplexMap:)

($fixOptionalPaths:)
($setNexusWord:)
($refreshSentences:) 

&lt;!--IMAGES--&gt;
($setImage:)
&lt;!--END IMAGES--&gt;


}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[{
(if: $floorInt is 6)[You are in the Jewish quarter of the ancient city of Aleppo. To explore the quarter, you must head [[$intoHere-&gt;$startRoom]]. You can leave the quarter by climbing [[up-&gt;$exitPoint]] to $nexusWord.] 
(elseif: $floorInt is 14)[(set:$place to &quot;London&quot;)You are at a port in the city of London, where the Lollards are imprisoned. To explore the city, you must head [[$intoHere-&gt;$startRoom]] on foot. Alternatively you can $head [[$outOfHere-&gt;$exitPoint]] to $nexusWord.]
(elseif: $floorInt is 19 and $siberianDirection is &quot;east&quot;)[(set: $siberianDirection to &quot;west&quot;)You disembark at the end of your journey. You are a cold, bleak, deserted train station in what seems like the middle of nowhere. Outside, a blizzard blows. (if: $gulag is &quot;escaped&quot;)[Your only option is to (link: &quot;catch a train heading west&quot;)[(goto:&quot;middle right&quot;)].](else:)[Guards waiting at the station take you into their custody and (link:&quot;escort you to the gulag&quot;)[($overrideImage:&quot;19601&quot;)(goto: $startRoom)].]]
(elseif: $floorInt is 19 and $siberianDirection is &quot;west&quot;)[You are at a cold, bleak, deserted train station in what seems like the middle of nowhere. Outside, a blizzard blows. Your only option is to (link: &quot;catch a train heading west&quot;)[(goto:&quot;middle right&quot;)].]
(else:)[$complexSentence3. From here you can go $outOfHere to [[$nexusWord-&gt;$exitPoint]]. Alternatively, you may go (link: $intoHere)[(goto:$startRoom)].]
	}]







</tw-passagedata><tw-passagedata pid="35" name="set secondary passage (for nexus)" tags="startup" position="215,2278" size="100,100">{
(set: $setSecondaryPassage to 
(macro: [
	(set: $secondaryPassage to (cond: 
		$floorInt is 0, &#39;tunnel&#39;,
		$floorInt is 1, &#39;alley&#39;,
		$floorInt is 2, &#39;avenue&#39;,
		$floorInt is 3, &#39;corridor&#39;,
		$floorInt is 4, &#39;way&#39;,
		$floorInt is 5, &#39;passage&#39;,
		$floorInt is 6, &#39;rooftop&#39;,
		$floorInt is 7, &#39;palace complex&#39;,
		$floorInt is 8, &#39;waterway&#39;,
		$floorInt is 9, &#39;Straße&#39;,
		$floorInt is 10, &#39;path&#39;,
		$floorInt is 11, &#39;trail&#39;,
		$floorInt is 12, &#39;trail&#39;,
		$floorInt is 13, &#39;path&#39;,
		$floorInt is 14, &#39;deck&#39;,
		$floorInt is 15, &#39;lane&#39;,
		$floorInt is 16, &#39;channel&#39;,
		$floorInt is 17, &#39;couloir&#39;,
		$floorInt is 18, &#39;wynd&#39;,
		$floorInt is 19, &#39;line&#39;,
		$floorInt is 20, &#39;back street&#39;,
		&quot;way&quot;))
	(output-data:&quot;&quot;)
	]))
}</tw-passagedata><tw-passagedata pid="36" name="set decade variables" tags="startup" position="23,2498" size="100,100">{
(set: $setDecadeVariables to 
(macro: [
	(set: $imageType to 1) 
	(set: $decadeNumber to $hundredNumber + $decadeNum)
	(set: $decadeString to (str: $decadeNum))
	(set: $decadeReference to $hundredNumber + $decadeNum + 1) 
	(set: $referenceString to (str: $decadeReference))
	(set: $seedIndex to 1)
	(set: $roomAdjective to &quot;a &quot;)
	(set: $randomSeed to (str: $decadeReference - 1) of $randomNums)
	($setMiscellaneousDecadeSettings:)
	(output-data:&quot;&quot;)
	]
	))

&lt;!--Dummy code to create arrows, in editor, to called functions --&gt;
[[ -&gt;random nums]]
[[ -&gt;set miscellaneous decade settings]]
}</tw-passagedata><tw-passagedata pid="37" name="refresh sentences" tags="startup" position="34,2020" size="100,100">{
&lt;!-- sets some basic terms for the sentences, calls the sentence builder setComplexSentences
Presupposes: the complexLanguage and generalLanguage databases are set up.  
Called By: called in individual passages to generate a new sentence on the spot. 
--&gt;
(set: $refreshSentences to
(macro: [
	(set: $complexLanguage to (str: $decadeReference) of $generalLanguage)
	(set: $complexName to 3rd of $complexLanguage)
	(set: $ladderTerm to 5th of $complexLanguage)
	(set: $stairTerm to 6th of $complexLanguage)
	(set: $roomNumber to $thisRoomsNumber)
	($setComplexSentences:)
	(output-data:&quot;&quot;)
	]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;general language]]
[[ -&gt;set complex sentences]]
}</tw-passagedata><tw-passagedata pid="38" name="general language" tags="startup" position="220,1887" size="100,100">{
(set: $generalLanguage to (dm: 
	&quot;1&quot;, (a: &quot;in an&quot;, &quot;&quot;, &quot;underground mushroom garden&quot;,&quot;&quot;, &quot;a mushroom stalk&quot;,&quot;a dirt slope&quot;),
	&quot;11&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;Hypogeum&quot;, &quot;beneath the colosseum&quot;,&quot;a crank elevator&quot;,&quot;some steps&quot;), 
	&quot;21&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;underground spy complex of the Frumentarii&quot;, &quot;beneath the Roman senate&quot;, &quot;some winding steps&quot;, &quot;some steps&quot;),
	&quot;31&quot;, (a: &quot;in the&quot;, &quot;lovers&#39;&quot;, &quot;caves&quot;, &quot;beneath the city&quot;,&quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;41&quot;, (a: &quot;in the&quot;, &quot;hidden&quot;, &quot;underground hideouts&quot;, &quot;of the persecuted Christians&quot;,&quot;some winding sandstone steps&quot;, &quot;some sandstone steps&quot;),
	&quot;51&quot;, (a: &quot;in a&quot;, &quot;hidden&quot;, &quot;armory&quot;, &quot;beneath the city&quot;,&quot;a ladder&quot;,&quot;some sandstone steps&quot;),
	&quot;61&quot;, (a: &quot;in an&quot;, &quot;&quot;, &quot;underground dungeon&quot;, &quot;where the convicted await execution&quot;,&quot;some winding sandstone steps&quot;, &quot;some sandstone steps&quot;),
	&quot;71&quot;, (a: &quot;in an&quot;, &quot;&quot;, &quot;underground chapel&quot;,&quot;where Christians worship their forbidden god&quot;,&quot;some winding sandstone steps&quot;, &quot;some sandstone steps&quot;),
	&quot;81&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;leper colony&quot;, &quot;in an abandoned part of the underground city&quot;, &quot;some winding sandstone steps&quot;, &quot;some sandstone steps&quot;),
	&quot;91&quot;, (a: &quot;in a&quot;, &quot;cobwebbed&quot;, &quot;crypt&quot;, &quot;in the catacombs of Santa Domitilla&quot;, &quot;some winding steps&quot;, &quot;some steps&quot;),
	&quot;101&quot;, (a: &quot;in the&quot;, &quot;tranquil&quot;, &quot;garden of Lucullus&quot;,&quot;&quot;, &quot;a steep, tangled slope&quot;, &quot;a gentle slope&quot;),
	&quot;111&quot;, (a: &quot;at the&quot;, &quot;dusty&quot;, &quot;ampitheatre&quot;, &quot;&quot;,&quot;some winding sandstone steps&quot;, &quot;some steps&quot;), 
	&quot;121&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;ludus&quot;, &quot;at which gladiators are trained&quot;,&quot;some winding sandstone steps&quot;, &quot;some steps&quot;),
	&quot;131&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;college of the Vestals&quot;, &quot;&quot;,&quot;a thinly carpeted, spiral staircase&quot;, &quot;some threadbare stairs&quot;),
	&quot;141&quot;, (a: &quot;to the&quot;, &quot;opulent&quot;, &quot;house of Augustus and Livia&quot;, &quot;&quot;,&quot;a spiral staircase&quot;, &quot;a magnificent wooden staircase&quot;),
	&quot;151&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;Roman barracks&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;161&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;slave market&quot;, &quot;where slaves are tethered like animals&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;171&quot;, (a: &quot;in the&quot;, &quot;sacred&quot;, &quot;temple of Jupiter&quot;, &quot;&quot;, &quot;a spiraling flight of marble steps&quot;, &quot;some ornate marble steps&quot;),
	&quot;181&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;surgery of Galen&quot;, &quot;&quot;, &quot;some winding sandstone steps&quot;, &quot;some steps&quot;),
	&quot;191&quot;, (a: &quot;in the&quot;, &quot;shadowy&quot;, &quot;necropolis&quot;, &quot;outside the walls of Rome&quot;, &quot;a steep, roughly gardened slope&quot;, &quot;a gentle, flowered slope&quot;),
	&quot;201&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;Garden of General Liang Ji&quot;, &quot;&quot;, &quot;a steep, flowered slope&quot;, &quot;a gently sloping path&quot;),
	&quot;211&quot;, (a: &quot;within the&quot;, &quot;exciting&quot;, &quot;carnival of a hundred shows,&quot;,&quot;amidst music, dance and demonstrations of cuju, wrestling and acrobatic prowess&quot;,&quot;a steep dirt bank&quot;, &quot;a muddy slope&quot;), 
	&quot;221&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;Imperial Academy&quot;, &quot;among the disputes of the scholars of Confucius&quot;,&quot;a stone stairwell&quot;, &quot;a flight of steps&quot;), 
	&quot;231&quot;, (a: &quot;in a&quot;, &quot;floating&quot;, &quot;brothel&quot;, &quot;on the Huangpu River, where the Shuyu attend to the needs of the city&#39;s elite&quot;,&quot;a ladder&quot;, &quot;some wooden steps&quot;),
	&quot;241&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;Siheyuan&quot;, &quot;courtyard-house&quot;,&quot;a stone stairwell&quot;, &quot;some slate steps&quot;),
	&quot;251&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;gate house&quot;, &quot;guarded by the Huben (虎賁) imperial guard&quot;, &quot;a stone stairwell&quot;, &quot;some slate steps&quot;),
	&quot;261&quot;, (a: &quot;among the&quot;, &quot;&quot;, &quot;huts of the ten eunuchs&quot;, &quot;&quot;, &quot;a climbable rock-brick wall&quot;, &quot;some dirt steps&quot;),
	&quot;271&quot;, (a: &quot;in the&quot;, &quot;sacred&quot;, &quot;White Horse buddhist temple&quot;, &quot;&quot;, &quot;an ornate stairwell&quot;, &quot;some humble clay steps&quot;),
	&quot;281&quot;, (a: &quot;in the&quot;, &quot;abandoned&quot;, &quot;surgery of Hua Tuo&quot;, &quot;&quot;, &quot;a stairwell&quot;, &quot;some clay steps&quot;),
	&quot;291&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;Dabaozi Cemetery&quot;, &quot;&quot;, &quot;a steep, roughly gardened slope&quot;, &quot;a gentle, flowered slope&quot;),
	&quot;301&quot;, (a: &quot;on the&quot;, &quot;pastoral&quot;, &quot;farms&quot;, &quot;surrounding ancient Byzantium&quot;, &quot;a steep soil bank&quot;, &quot;a gentle bank&quot;),
	&quot;311&quot;, (a: &quot;in the&quot;, &quot;many garish&quot;, &quot;theaters of the Hippódromos tēs Kōnstantinoupóleōs&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;321&quot;, (a: &quot;in the&quot;, &quot;echoey&quot;, &quot;halls of the Magnaura&quot;, &quot;where senators discuss and debate the issues of the day&quot;, &quot;a spiral staircase&quot;, &quot;stone steps&quot;),
	&quot;331&quot;, (a: &quot;in the&quot;, &quot;dim&quot;, &quot;Triclinium of the Nineteen Couches&quot;, &quot;where romantic couples lounge on sigmas&quot;, &quot;a winding wooden staircase&quot;, &quot;some oak steps&quot;),
	&quot;341&quot;, (a: &quot;in an&quot;, &quot;elaborate&quot;, &quot;home&quot;, &quot;in old Byzantium&quot;, &quot;a chimney&quot;, &quot;a staircase&quot;),
	&quot;351&quot;, (a: &quot;in the ditches of a&quot;, &quot;bloody&quot;, &quot;battleground&quot;, &quot;near ancient Byzantium&quot;, &quot;a ladder&quot;, &quot;an incline&quot;),
	&quot;361&quot;, (a: &quot;in the depths of a&quot;, &quot;forced labor&quot;, &quot;mine&quot;, &quot;under ancient Byzantium&quot;, &quot;a ladder&quot;, &quot;rickety wooden stairs&quot;),
	&quot;371&quot;, (a: &quot;in a&quot;, &quot;serpentine&quot;, &quot;labyrinth&quot;, &quot;in the gardens of ancient Byzantium&quot;, &quot;a ladder&quot;, &quot;mossy steps&quot;),
	&quot;381&quot;, (a: &quot;in the&quot;, &quot;mystical&quot;, &quot;basilica of St John the Forerunner&quot;, &quot;, where St Artemios is believed to cure the sick and cursed.&quot;, &quot;winding steps&quot;, &quot;sandstone stairs&quot;),
	&quot;391&quot;, (a: &quot;in the&quot;, &quot;watery&quot;, &quot;crypt of Constantine&quot;, &quot;, beneath the church of the twelve apostles.&quot;, &quot;a rotten ladder&quot;, &quot;slimy steps&quot;),
	&quot;401&quot;, (a: &quot;in a&quot;, &quot;lush&quot;, &quot;forest&quot;, &quot;that nature has reclaimed from the ruins of Rome&quot;, &quot;a rope ladder&quot;, &quot;broken, overgrown steps&quot;),
	&quot;411&quot;, (a: &quot;in the&quot;, &quot;remains of the&quot;, &quot;Circus Maximus,&quot;, &quot;amid the skeletons of show animals.&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;421&quot;, (a: &quot;in the&quot;, &quot;abandoned&quot;, &quot;Bibliotheca Octaviana&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;431&quot;, (a: &quot;in the&quot;, &quot;ruined&quot;, &quot;temple of Venus&quot;, &quot;&quot;, &quot;a broken, climbable wall&quot;, &quot;stone steps&quot;),
	&quot;441&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;block of abandoned insulae&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;451&quot;, (a: &quot;in a&quot;, &quot;looted&quot;, &quot;armory&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;461&quot;, (a: &quot;in a&quot;, &quot;derelict&quot;, &quot;jail&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;471&quot;, (a: &quot;in what used to be&quot;, &quot;&quot;, &quot;Emperor Nero&#39;s park&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;481&quot;, (a: &quot;in the&quot;, &quot;derelict&quot;, &quot;surgery of Asclepiades&quot;, &quot;&quot;, &quot;a copper ladder&quot;, &quot;tiled steps&quot;),
	&quot;491&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;mass burial pits&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;501&quot;, (a: &quot;in the&quot;, &quot;enchanted&quot;, &quot;forest of Brocéliande&quot;, &quot;&quot;, &quot;a steep dirt bank&quot;, &quot;a slope&quot;),
	&quot;511&quot;, (a: &quot;at a&quot;, &quot;&quot;, &quot;jousting tournament&quot;, &quot;&quot;, &quot;a steep dirt bank&quot;, &quot;a slope&quot;),
	&quot;521&quot;, (a: &quot;in the&quot;, &quot;hidden&quot;, &quot;coastal cave of Merlin the wizard,&quot;, &quot;beneath the castle at Tintagel&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;531&quot;, (a: &quot;by&quot;, &quot;&quot;, &quot;Llyn Ogwen,&quot;, &quot;where the lady of the lake keeps Excalibur&quot;, &quot;a steep dirt bank&quot;, &quot;a gentle slope&quot;),
	&quot;541&quot;, (a: &quot;within the keep of&quot;, &quot;&quot;, &quot;Camelot&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;551&quot;, (a: &quot;at the&quot;, &quot;bloody&quot;, &quot;battlefield at Camlann&quot;, &quot;where Arthur faced Mordredd&quot;, &quot;a dirt bank&quot;, &quot;a trampled slope&quot;),
	&quot;561&quot;, (a: &quot;under the&quot;, &quot;mysterious&quot;, &quot;Bryn Myrddin&quot;, &quot;where the bard Merlin was trapped.&quot;, &quot;a shaft&quot;, &quot;some boulders&quot;),
	&quot;571&quot;, (a: &quot;within the bailey of the&quot;, &quot;mystical&quot;, &quot;castle of Corbenic,&quot;, &quot;where the Holy Grail is rumored to be kept&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;581&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;walled up town&quot;, &quot;where sufferers of the plague are trapped&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;591&quot;, (a: &quot;among the&quot;, &quot;stinking&quot;, &quot;barrows&quot;, &quot;where the Justinian plague&#39;s victims are hurled to their final resting place.&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;601&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;hanging farms&quot;, &quot;where hashish grows abundantly over a thousand clay containers perched on tiered plots&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;611&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;hashish quarter&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;621&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;hashashin&#39;s library&quot;, &quot;where hashashin&#39;s gather and conspire&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;631&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;Sultan&#39;s palace&quot;, &quot;where exotic belly dancers entertain the Sultan&#39;s many guests&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;641&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;bustling souk of Al-Madina&quot;, &quot;where vendors from far and wide peddle their wares to the busy city&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;651&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;Citadel of Aleppo&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;661&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;Jewish quarter&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;671&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;great mosque of Aleppo&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;681&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;penal quarter of the ancient city of Aleppo&quot;, &quot;where sinners and criminals are righteously flogged, mutilated or executed beneath the shadow of the great citadel&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;691&quot;, (a: &quot;in an&quot;, &quot;&quot;, &quot;abandoned town&quot;, &quot;one of many forgotten cities that orbit great Aleppo&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;701&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;emperor&#39;s menagerie at Aachen&quot;, &quot;where strange beasts from far and wide are displayed&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;711&quot;, (a: &quot;in a&quot;, &quot;partly constructed&quot;, &quot;bath house&quot;, &quot;built around the hot springs at Aachen&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;721&quot;, (a: &quot;in the&quot;, &quot;great&quot;, &quot;library at Charlemagne&#39;s court&quot;, &quot;where Peter of Pisa, Paulinus of Aquileia, Paul the Deacon, Theodulf of Orléans, Alcuin of York and Joseph Scottus lead the Carolingian renaissance&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;731&quot;, (a: &quot;in the&quot;, &quot;private&quot;, &quot;gynaeceum&quot;, &quot;where women weave and spin&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;741&quot;, (a: &quot;in the&quot;, &quot;partly constructed&quot;, &quot;Palace of Aachen&quot;, &quot;at the center of the Holy Roman Empire&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;751&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;soldier&#39;s barracks&quot;, &quot;in the city of Aachen&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;761&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;dockside on the Wurm&quot;, (either: &quot;where Vikings bring captives from Venice and Byzantium to sell as casati servi&quot;, &quot;where captured Slavs, Avars, Saxons and Danes are sold into slavery&quot;,&quot;&quot;), &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;771&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;Palatine chapel&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;781&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;hospice&quot;, &quot;in the palatial complex at Aachen&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;791&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;crypt beneath the Palatine chapel&quot;, &quot;where Charlemagne will one day be buried&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;801&quot;, (a: &quot;in an&quot;, &quot;overgrown&quot;, &quot;part of the marsh near the Athelney abbey&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;811&quot;, (a: &quot;in the&quot;, &quot;swimming&quot;, &quot;wood&quot;, &quot;near the Athelney abbey&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;821&quot;, (a: &quot;in a&quot;, &quot;flooded&quot;, &quot;library&quot;, &quot;near the abbey at Athelney&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;831&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;hall of the enchantress Dame Brusen,&quot;, &quot;where potions of love are boiled and bottled.&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;841&quot;, (a: &quot;in&quot;, &quot;&quot;, &quot;Ethelingaeigge&quot;, &quot;, the fort at Athelney&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;851&quot;, (a: &quot;in a&quot;, &quot;partially submerged&quot;, &quot;tower&quot;, &quot;in the Bristol channel&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;861&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;trapper&#39;s wood&quot;, &quot;near the swamps at Athelney&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;871&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;abbey at Athelney&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;881&quot;, (a: &quot;in the&quot;, &quot;lower&quot;, &quot;marshes&quot;, &quot;near the Bristol Channel&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;891&quot;, (a: &quot;in the&quot;, &quot;lower&quot;, &quot;marshes&quot;, &quot;near the Bristol Channel&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;901&quot;, (a: &quot;in a&quot;, &quot;thorny&quot;, &quot;forest&quot;, &quot;in the First Reich&quot;, &quot;a dirt cliff&quot;, &quot;a slope&quot;),	
	&quot;911&quot;, (a: &quot;at a&quot;, &quot;&quot;, &quot;racing event&quot;, &quot;in the First Reich&quot;, &quot;a ladder&quot;, &quot;metal stairs&quot;),
	&quot;921&quot;, (a: &quot;at a&quot;, &quot;cold mountain&quot;, &quot;training exercise&quot;, &quot;for the German military&quot;, &quot;a ladder&quot;, &quot;a snowy slope&quot;),
	&quot;931&quot;, (a: &quot;at a&quot;, &quot;&quot;, &quot;nunnery&quot;, &quot;in the First Reich&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;941&quot;, (a: &quot;in a&quot;, &quot;luxury&quot;, &quot;skyscraper&quot;, &quot;in the First Reich&quot;, &quot;an elevator&quot;, &quot;some steps&quot;),
	&quot;951&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;courthouse&quot;, &quot;in the First Reich&quot;, &quot;an elevator&quot;, &quot;some steps&quot;),
	&quot;961&quot;, (a: &quot;in a&quot;, &quot;wintry&quot;, &quot;forced labor camp&quot;, &quot;in the First Reich&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;971&quot;, (a: &quot;in an&quot;, &quot;imposing&quot;, &quot;gothic cathedral&quot;, &quot;in the First Reich&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;981&quot;, (a: &quot;in a&quot;, &quot;white tile&quot;, &quot;clinic&quot;, &quot;where grim human experiments take place&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;991&quot;, (a: &quot;by the&quot;, &quot;horrifying&quot;, &quot;death pits&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;a slope&quot;),
	&quot;1001&quot;, (a: &quot;in the&quot;, &quot;glacial&quot;, &quot;cathedral of St Nicolas&quot;, &quot;, the patron saint of children&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1011&quot;, (a: &quot;in the&quot;, &quot;bewildering&quot;, &quot;rectory of Teresa of Ávila&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1021&quot;, (a: &quot;in the&quot;, &quot;ivory&quot;, &quot;towers of the Albertus Magnus basilica&quot;, &quot;, the church devoted to the patron of students and philosophers&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1031&quot;, (a: &quot;in the&quot;, &quot;austere&quot;, &quot;mountain convent&quot;, &quot;of the Magdalene&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1041&quot;, (a: &quot;in the&quot;, &quot;towering&quot;, &quot;city chapel of Homobonus&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1051&quot;, (a: &quot;in the&quot;, &quot;demanding&quot;, &quot;warrior&#39;s priory&quot;, &quot;of Adrian of Nicomedia&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1061&quot;, (a: &quot;in the&quot;, &quot;remote&quot;, &quot;cenobium of St Leonard the hermit&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1071&quot;, (a: &quot;in the&quot;, &quot;lush&quot;, &quot;abbey of Saint Phocas the gardener&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1081&quot;, (a: &quot;in the&quot;, &quot;rivered&quot;, &quot;ruin of Raphael the Archangel&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1091&quot;, (a: &quot;in the&quot;, &quot;eerie&quot;, &quot;grounds of St Joseph of Arimathea&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1101&quot;, (a: &quot;in the&quot;, &quot;same&quot;, &quot;New Forest&quot;, &quot;where the king lies dead&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1111&quot;, (a: &quot;at an&quot;, &quot;&quot;, &quot;archery tournament&quot;, &quot;near the New Forest&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1121&quot;, (a: &quot;in&quot;, &quot;&quot;, &quot;London&#39;s New Temple&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1131&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;Maubergeonne Tower in Poitiers&quot;, &quot;, where Eleanor of Aquitaine presides over matters of fidelity and marriage&quot;, &quot;some spiral steps&quot;, &quot;some steps&quot;),
	&quot;1141&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;camp of Robin Hood&quot;, &quot;in Sherwood forest&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1151&quot;, (a: &quot;at a&quot;, &quot;&quot;, &quot;garrison&quot;, &quot;of defeated knights, returning from the crusades&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1161&quot;, (a: &quot;in the&quot;, &quot;dingy&quot;, &quot;gaol of the Sheriff, beneath Nottingham castle&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1171&quot;, (a: &quot;in the&quot;, &quot;magnificent&quot;, &quot;cathedral at Canterbury, where Thomas Beckett was murdered by the king&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1181&quot;, (a: &quot;at the&quot;, &quot;abandoned&quot;, &quot;motte of Robert of Lockley&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1191&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;wreckage of the white ship&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1201&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;city of Yinchuan&quot;, &quot;, which is rebuilding after being flooded and conquered by the Mongol hordes&quot;, &quot;spiraling steps&quot;, &quot;some steps&quot;),
	&quot;1211&quot;, (a: &quot;in the&quot;, &quot;flourishing&quot;, &quot;middle eastern city of Damascus&quot;, &quot;, where no-one has yet heard of the murderous Mongol hordes that thunder beyond the horizon&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1221&quot;, (a: &quot;in the&quot;, &quot;grandiose&quot;, &quot;quarters of the Khan&#39;s emissary in Chennai&quot;, &quot;, where the shelves are filled with maps and books&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1231&quot;, (a: &quot;in the&quot;, &quot;sacked&quot;, &quot;city of Bukhara&quot;, &quot;, where only women remain after the males were slaughtered by the Mongols&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1241&quot;, (a: &quot;in the caravan of the&quot;, &quot;&quot;, &quot;Mongol hordes&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1251&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;city of Lahore&quot;, &quot;, where Persians and Mongols fight against the locals and one another for control&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1261&quot;, (a: &quot;in the&quot;, &quot;bitterly cold&quot;, &quot;city of Kiev&quot;, &quot;, where the Mongols have enslaved the local populace&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1271&quot;, (a: &quot;on the&quot;, &quot;&quot;, &quot;slopes of Khan Tengri&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1281&quot;, (a: &quot;amongst the&quot;, &quot;&quot;, &quot;storm tossed wreckage of the Mongol fleet off Japan&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1291&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;inferno of Merv&quot;, &quot;, which the Mongols have razed after slaughtering its inhabitants&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1301&quot;, (a: &quot;on a&quot;, &quot;bucolic&quot;, &quot;manor&quot;, &quot;in Northumbria&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1311&quot;, (a: &quot;in the&quot;, &quot;fairy&quot;, &quot;palace&quot;, &quot;of Piers Gaveston&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1321&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;devil&#39;s wood&quot;, &quot;, where witches tell the news of places far aflung&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1331&quot;, (a: &quot;at the&quot;, &quot;rebel&quot;, &quot;camp&quot;, &quot;of Isabella and her son the Prince Edward&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1341&quot;, (a: &quot;at a&quot;, &quot;peaceful&quot;, &quot;village&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1351&quot;, (a: &quot;at the&quot;, &quot;bloody&quot;, &quot;battle of Bannockburn&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1361&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;house of William de Leyrer&quot;, &quot;, where the infernal howling and banging of the imprisoned devil William Wallace thunders up from the basement, shuddering the house to its foundations&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1371&quot;, (a: &quot;in the&quot;, &quot;modest&quot;, &quot;St Mary the Virgin church at Ludgershall&quot;, &quot;, where the heretic John Wycliffe translates the bible into English&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1381&quot;, (a: &quot;in the&quot;, &quot;putrid&quot;, &quot;practice&quot;, &quot;of a plague doctor&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1391&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;cathedral city of Canterbury&quot;, &quot;where the peasant followers of Wat Tyler hang royal officals by their necks&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1401&quot;, (a: &quot;in the&quot;, &quot;humid, sticky&quot;, &quot;jungles of the new world&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1411&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;bear pits&quot;, &quot;of York&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1421&quot;, (a: &quot;in the&quot;, &quot;busy&quot;, &quot;city of Strasbourg&quot;, &quot;, where bibles printed on Guttenberg&#39;s press are sold for a penny at every street corner&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1431&quot;, (a: &quot;in the&quot;, &quot;pious&quot;, &quot;ranks of Joan of Arc&#39;s army&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1441&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;Aztec capital&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1451&quot;, (a: &quot;in the&quot;, &quot;besieged&quot;, &quot;city of Constantinople&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1461&quot;, (a: &quot;in&quot;, &quot;&quot;, &quot;Lambeth palace&quot;, &quot;, where the Lollards are held prisoner&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1471&quot;, (a: &quot;in&quot;, &quot;&quot;, &quot;St Peter&#39;s basilica&quot;, &quot;in the Vatican City&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1481&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;Carcel de la Inquisicion in Seville&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1491&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;forest of corpses surrounding Târgoviște, Wallachia&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1501&quot;, (a: &quot;on a&quot;, &quot;&quot;, &quot;potato farm&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1511&quot;, (a: &quot;at a&quot;, &quot;&quot;, &quot;bowling green&quot;, &quot;somewhere in an Elizabethan village&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1521&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;inns of chancery&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1531&quot;, (a: &quot;at a&quot;, &quot;&quot;, &quot;dockside&quot;, &quot;where catholic nuns and monks seek to flee to the continent&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1541&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;house of Thomas More&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1551&quot;, (a: &quot;on a&quot;, &quot;&quot;, &quot;ship&quot;, &quot;sailing against the Spanish Armada&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1561&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;tower&quot;, &quot;wherein a royal woman is held prisoner&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1571&quot;, (a: &quot;at&quot;, &quot;&quot;, &quot;Singleton Hall&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1581&quot;, (a: &quot;in an&quot;, &quot;abandoned&quot;, &quot;rectory&quot;, &quot;strewn with the remains of statues of the Virgin Mary and saints&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1591&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;public square&quot;, &quot;where heretics are put to the torch&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1601&quot;, (a: &quot;on a&quot;, &quot;&quot;, &quot;farm&quot;, &quot;blighted by the curse of witches&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1611&quot;, (a: &quot;at the&quot;, &quot;diabolical&quot;, &quot;festival of Beltane&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1621&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;college of skeptics&quot;, &quot;where acolytes study Scot&#39;s Discoverie of Witchcraft and Weyer&#39;s De Præstigiis Demonum&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1631&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;woods&quot;, &quot;where beautiful witches cavort&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1641&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;colonial house&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1651&quot;, (a: &quot;at a&quot;, &quot;&quot;, &quot;skirmish&quot;, &quot;between colonists and natives&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1661&quot;, (a: &quot;in a&quot;, &quot;&quot;, &quot;jail&quot;, &quot;where witches are held&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1671&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;temple of satanic worship&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1681&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;hall of the witchpricker&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1691&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;lake&quot;, &quot;where witches are drowned&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1701&quot;, (a: &quot;at a&quot;, &quot;failing farm&quot;, &quot;in northern France&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1711&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;Tuileries&quot;, &quot;where the children of royals and the aristocracy are imprisoned&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1721&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;Jacobin club&quot;, &quot;situated at a former convent of the Dominicans&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1731&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;prison of Marie Antoinette&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1741&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;Café Le Procope&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1751&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;center of the revolutionary turbulence in Paris&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1761&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;Tour du Temple&quot;, &quot;where Louis XVI is imprisoned&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1771&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;festival of the supreme being&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1781&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;Bastille&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1791&quot;, (a: &quot;at the&quot;, &quot;&quot;, &quot;Place de la Révolution&quot;, &quot;where the guillotine looms ominously&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1801&quot;, (a: &quot;in the&quot;, &quot;Endell Street&quot;, &quot;Lying-In hospital&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1811&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;work-house of Mrs Mann&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1821&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;Baker Street house of Sherlock Holmes&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1831&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;red lantern district in Spitalfields, Whitechapel&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1841&quot;, (a: &quot;at the&quot;, &quot;plush&quot;, &quot;town house&quot;, &quot;of Dorian Gray&quot;, &quot;some steps&quot;, &quot;some steps&quot;),
	&quot;1851&quot;, (a: &quot;at&quot;, &quot;Wannop&#39;s&quot;, &quot;gymnasium&quot;, &quot;at The Glass House on New Cross Road&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1861&quot;, (a: &quot;in&quot;, &quot;&quot;, &quot;Newgate prison&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1871&quot;, (a: &quot;in&quot;, &quot;&quot;, &quot;Aleister Crowley&#39;s temple&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1881&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;Bethlem madhouse&quot;, &quot;&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1891&quot;, (a: &quot;in the&quot;, &quot;&quot;, &quot;network of vaults beneath Charing Cross&quot;, &quot;where the resurrection men store their stolen bodies&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1901&quot;, (a: &quot;on a&quot;, &quot;&quot;, &quot;grain farm&quot;, &quot;in soviet Ukraine&quot;, &quot;a ladder&quot;, &quot;some steps&quot;),
	&quot;1911&quot;, (a: &quot;at the&quot;, &quot;entrance to the&quot;, &quot;Grand Arena of the Central Lenin Stadium&quot;, &quot;in Moscow&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;1921&quot;, (a: &quot;in the&quot;, &quot;dusty&quot;, &quot;KGB archive&quot;, &quot;&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;1931&quot;, (a: &quot;at the&quot;, &quot;entrance to the&quot;, &quot;Rabotnitsa&quot;, &quot;journalists&#39; office and printing press&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;1941&quot;, (a: &quot;at the&quot;, &quot;wall of the&quot;, &quot;Kremlin&quot;, &quot;in Soviet Moscow&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;1951&quot;, (a: &quot;on a&quot;, &quot;desert&quot;, &quot;battlefield&quot;, &quot;in Afghanistan&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;1961&quot;, (a: &quot;GENERAL LANGUAGE 1&quot;, &quot;GENERAL LANGUAGE 2&quot;, &quot;GENERAL LANGUAGE 3&quot;, &quot;GENERAL LANGUAGE 4&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;1971&quot;, (a: &quot;before&quot;, &quot;&quot;, &quot;St Basil&#39;s cathedral&quot;, &quot;in Moscow&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;1981&quot;, (a: &quot;at the&quot;, &quot;Berlin wall&quot;, &quot;&quot;, &quot;&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;1991&quot;, (a: &quot;in the&quot;, &quot;derelict&quot;, &quot;city of Pripyat&quot;, &quot;under the shadow of the Chernobyl reactor&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),	&quot;2001&quot;, (a: &quot;GENERAL LANGUAGE 1&quot;, &quot;GENERAL LANGUAGE 2&quot;, &quot;GENERAL LANGUAGE 3&quot;, &quot;GENERAL LANGUAGE 4&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;2011&quot;, (a: &quot;GENERAL LANGUAGE 1&quot;, &quot;GENERAL LANGUAGE 2&quot;, &quot;GENERAL LANGUAGE 3&quot;, &quot;GENERAL LANGUAGE 4&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;2021&quot;, (a: &quot;GENERAL LANGUAGE 1&quot;, &quot;GENERAL LANGUAGE 2&quot;, &quot;GENERAL LANGUAGE 3&quot;, &quot;GENERAL LANGUAGE 4&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;2031&quot;, (a: &quot;GENERAL LANGUAGE 1&quot;, &quot;GENERAL LANGUAGE 2&quot;, &quot;GENERAL LANGUAGE 3&quot;, &quot;GENERAL LANGUAGE 4&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;2041&quot;, (a: &quot;GENERAL LANGUAGE 1&quot;, &quot;GENERAL LANGUAGE 2&quot;, &quot;GENERAL LANGUAGE 3&quot;, &quot;GENERAL LANGUAGE 4&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;2051&quot;, (a: &quot;GENERAL LANGUAGE 1&quot;, &quot;GENERAL LANGUAGE 2&quot;, &quot;GENERAL LANGUAGE 3&quot;, &quot;GENERAL LANGUAGE 4&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;2061&quot;, (a: &quot;GENERAL LANGUAGE 1&quot;, &quot;GENERAL LANGUAGE 2&quot;, &quot;GENERAL LANGUAGE 3&quot;, &quot;GENERAL LANGUAGE 4&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;2071&quot;, (a: &quot;GENERAL LANGUAGE 1&quot;, &quot;GENERAL LANGUAGE 2&quot;, &quot;GENERAL LANGUAGE 3&quot;, &quot;GENERAL LANGUAGE 4&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;2081&quot;, (a: &quot;GENERAL LANGUAGE 1&quot;, &quot;GENERAL LANGUAGE 2&quot;, &quot;GENERAL LANGUAGE 3&quot;, &quot;GENERAL LANGUAGE 4&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;),
	&quot;2091&quot;, (a: &quot;GENERAL LANGUAGE 1&quot;, &quot;GENERAL LANGUAGE 2&quot;, &quot;GENERAL LANGUAGE 3&quot;, &quot;GENERAL LANGUAGE 4&quot;, &quot;GENERAL LANGUAGE 5&quot;, &quot;GENERAL LANGUAGE 6&quot;)
	))
	
	}</tw-passagedata><tw-passagedata pid="39" name="set complex sentences" tags="startup" position="219,1770" size="100,100">{
&lt;!-- builds the introductory sentences for each type of passage. 
Presupposes: roomPhrase and passagePhrase builders already produce part of the sentence. .  
Called By: refreshSentences
--&gt;
(set: $setComplexSentences to 
(macro: [
	(set: $complexSentence to 		
		&quot;You are &quot;
		+ ($setRoomPhrase:)
		+ ($somewhere:)
		+ &quot; &quot;
		+ (str: $decadeReference) of $second_clauses
		)
	(set: $complexSentence2 to 
		(str: $decadeReference) of $passage_1st_clauses + &quot; &quot;
		+ (str: $decadeReference) of $second_clauses)
	(set: $complexSentence3 to 
		(str: $decadeReference) of $entrance_room_1st_clauses
		+ &quot; &quot; 
		+ (str: $decadeReference) of $second_clauses
	)
	(output-data:&quot;&quot;)
	]))
&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;

[[ -&gt;set room phrase]]
[[ -&gt;passage 1st clauses]]
[[ -&gt;second clauses]]
[[ -&gt;entrance room 1st clauses]]
}</tw-passagedata><tw-passagedata pid="40" name="legacy passage terms database" tags="" position="740,4389" size="100,100">{
(set: $passageTerms to (dm: 
	&quot;0&quot;, (a: &quot;humid&quot;, &quot;tunnel&quot;),
	&quot;1&quot;, (a: &quot;earthy&quot;, &quot;path&quot;),
	&quot;11&quot;, (a: &quot;baking hot&quot;, &quot;corridor&quot;),
	&quot;21&quot;, (a: &quot;dim&quot;, &quot;passage&quot;),
	&quot;31&quot;, (a: &quot;cool&quot;, &quot;tunnel&quot;),
	&quot;41&quot;, (a: &quot;sandy&quot;, &quot;tunnel&quot;),
	&quot;51&quot;, (a: &quot;stone&quot;, &quot;corridor&quot;),
	&quot;61&quot;, (a: &quot;forbidding&quot;, &quot;corridor&quot;),
	&quot;71&quot;, (a: &quot;candlelit&quot;, &quot;tunnel&quot;),
	&quot;81&quot;, (a: &quot;neglected&quot;, &quot;tunnel&quot;),
	&quot;91&quot;, (a: &quot;cool&quot;, &quot;corridor&quot;),
	&quot;101&quot;, (a: &quot;rock brick&quot;, &quot;path&quot;),
	&quot;111&quot;, (a: &quot;sandy&quot;, &quot;passageway&quot;),
	&quot;121&quot;, (a: &quot;sandy&quot;, &quot;passageway&quot;),
	&quot;131&quot;, (a: &quot;curtained&quot;, &quot;hall&quot;),
	&quot;141&quot;, (a: &quot;sumptuous&quot;, &quot;corridor&quot;),
	&quot;151&quot;, (a: &quot;brick&quot;, &quot;alley&quot;),
	&quot;161&quot;, (a: &quot;bustling&quot;, &quot;aisle&quot;),
	&quot;171&quot;, (a: &quot;tranquil&quot;, &quot;aisle&quot;),
	&quot;181&quot;, (a: &quot;tiled&quot;, &quot;corridor&quot;),
	&quot;191&quot;, (a: &quot;cobbled&quot;, &quot;path&quot;),
	&quot;201&quot;, (a: &quot;raised wooden&quot;, &quot;path&quot;),
	&quot;211&quot;, (a: &quot;candlelit&quot;, &quot;path&quot;),
	&quot;221&quot;, (a: &quot;vaulted&quot;, &quot;corridor&quot;),
	&quot;231&quot;, (a: &quot;wooden&quot;, &quot;passage&quot;),
	&quot;241&quot;, (a: &quot;airy&quot;, &quot;corridor&quot;),
	&quot;251&quot;, (a: &quot;rock wall&quot;, &quot;passage&quot;),
	&quot;261&quot;, (a: &quot;dirt&quot;, &quot;roadway&quot;),
	&quot;271&quot;, (a: &quot;tiled&quot;, &quot;path&quot;),
	&quot;281&quot;, (a: &quot;ruined&quot;, &quot;corridor&quot;),
	&quot;291&quot;, (a: &quot;silent&quot;, &quot;path&quot;),
	&quot;301&quot;, (a: &quot;country&quot;, &quot;lane&quot;),
	&quot;311&quot;, (a: &quot;backstage&quot;, &quot;passage&quot;),
	&quot;321&quot;, (a: &quot;pillared&quot;, &quot;arcade&quot;),
	&quot;331&quot;, (a: &quot;moonlit&quot;, &quot;aisle&quot;),
	&quot;341&quot;, (a: &quot;paneled&quot;, &quot;passage&quot;),
	&quot;351&quot;, (a: &quot;muddy&quot;, &quot;trench&quot;),
	&quot;361&quot;, (a: &quot;wooden&quot;, &quot;walkway&quot;),
	&quot;371&quot;, (a: &quot;enclosed&quot;, &quot;path&quot;),
	&quot;381&quot;, (a: &quot;glassy&quot;, &quot;corridor&quot;),
	&quot;391&quot;, (a: &quot;damp&quot;, &quot;passage&quot;),
	&quot;401&quot;, (a: &quot;brambly&quot;, &quot;path&quot;),
	&quot;411&quot;, (a: &quot;dirt&quot;, &quot;thoroughfare&quot;),
	&quot;421&quot;, (a: &quot;&quot;, &quot;aisle of shelves&quot;),
	&quot;431&quot;, (a: &quot;draughty&quot;, &quot;corridor&quot;),
	&quot;441&quot;, (a: &quot;crumbling&quot;, &quot;hallway&quot;),
	&quot;451&quot;, (a: &quot;&quot;, &quot;passage&quot;),
	&quot;461&quot;, (a: &quot;&quot;, &quot;passage&quot;),
	&quot;471&quot;, (a: &quot;abundant and overgrown&quot;, &quot;path&quot;),
	&quot;481&quot;, (a: &quot;trash strewn&quot;, &quot;corridor&quot;),
	&quot;491&quot;, (a: &quot;bone lined&quot;, &quot;passage&quot;),
	&quot;501&quot;, (a: &quot;leafy&quot;, &quot;path&quot;),
	&quot;511&quot;, (a: &quot;muddy&quot;, &quot;thoroughfare&quot;),
	&quot;521&quot;, (a: &quot;cavernous&quot;, &quot;passage&quot;),
	&quot;531&quot;, (a: &quot;glimmering&quot;, &quot;path&quot;),
	&quot;541&quot;, (a: &quot;stone&quot;, &quot;corridor&quot;),
	&quot;551&quot;, (a: &quot;bloody&quot;, &quot;path&quot;),
	&quot;561&quot;, (a: &quot;cavernous&quot;, &quot;passage&quot;),
	&quot;571&quot;, (a: &quot;stone&quot;, &quot;walkway&quot;),
	&quot;581&quot;, (a: &quot;dirty&quot;, &quot;mud-street&quot;),
	&quot;591&quot;, (a: &quot;stinking&quot;, &quot;passage&quot;),
	&quot;601&quot;, (a: &quot;leafy&quot;, &quot;path&quot;),
	&quot;611&quot;, (a: &quot;pungent&quot;, &quot;alley&quot;),
	&quot;621&quot;, (a: &quot;whispering&quot;, &quot;aisle&quot;),
	&quot;631&quot;, (a: &quot;raucous&quot;, &quot;colonade&quot;),
	&quot;641&quot;, (a: &quot;teaming&quot;, &quot;arcade&quot;),
	&quot;651&quot;, (a: &quot;limestone&quot;, &quot;passageway&quot;),
	&quot;661&quot;, (a: &quot;narrow&quot;, &quot;street&quot;),
	&quot;671&quot;, (a: &quot;solemn&quot;, &quot;aisle&quot;),
	&quot;681&quot;, (a: &quot;shadowy&quot;, &quot;alley&quot;),
	&quot;691&quot;, (a: &quot;windy&quot;, &quot;street&quot;),
	&quot;701&quot;, (a: &quot;&quot;, &quot;passage&quot;),
	&quot;711&quot;, (a: &quot;puddled&quot;, &quot;walkway&quot;),
	&quot;721&quot;, (a: &quot;quiet&quot;, &quot;aisle&quot;),
	&quot;731&quot;, (a: &quot;wild&quot;, &quot;path&quot;),
	&quot;741&quot;, (a: &quot;marble&quot;, &quot;corridor&quot;),
	&quot;751&quot;, (a: &quot;functional&quot;, &quot;yard&quot;),
	&quot;761&quot;, (a: &quot;wooden&quot;, &quot;jetty&quot;),
	&quot;771&quot;, (a: &quot;&quot;, &quot;corridor&quot;),
	&quot;781&quot;, (a: &quot;well maintained&quot;, &quot;corridor&quot;),
	&quot;791&quot;, (a: &quot;dark&quot;, &quot;passage&quot;),
	&quot;801&quot;, (a: &quot;swamped&quot;, &quot;path&quot;),
	&quot;811&quot;, (a: &quot;mossy&quot;, &quot;path&quot;),
	&quot;821&quot;, (a: &quot;flooded&quot;, &quot;corridor&quot;),
	&quot;831&quot;, (a: &quot;crooked&quot;, &quot;hallway&quot;),
	&quot;841&quot;, (a: &quot;stone brick&quot;, &quot;passage&quot;),
	&quot;851&quot;, (a: &quot;salty&quot;, &quot;passage&quot;),
	&quot;861&quot;, (a: &quot;misty&quot;, &quot;trail&quot;),
	&quot;871&quot;, (a: &quot;chilly&quot;, &quot;passage&quot;),
	&quot;881&quot;, (a: &quot;brush&quot;, &quot;path&quot;),
	&quot;891&quot;, (a: &quot;putrid&quot;, &quot;canal&quot;),
	&quot;901&quot;, (a: &quot;tortuous&quot;, &quot;path&quot;),
	&quot;911&quot;, (a: &quot;skid marked&quot;, &quot;track&quot;),
	&quot;921&quot;, (a: &quot;snow packed&quot;, &quot;track&quot;),
	&quot;931&quot;, (a: &quot;well tended&quot;, &quot;path&quot;),
	&quot;941&quot;, (a: &quot;vacuumed&quot;, &quot;hallway&quot;),
	&quot;951&quot;, (a: &quot;polished&quot;, &quot;corridor&quot;),
	&quot;961&quot;, (a: &quot;dirt&quot;, &quot;thoroughfare&quot;),
	&quot;971&quot;, (a: &quot;towering&quot;, &quot;aisle&quot;),
	&quot;981&quot;, (a: &quot;striplight&quot;, &quot;corridor&quot;),
	&quot;991&quot;, (a: &quot;&quot;, &quot;ditch&quot;),
	&quot;1001&quot;, (a: &quot;wintry&quot;, &quot;cloister&quot;),
	&quot;1011&quot;, (a: &quot;checkered&quot;, &quot;aisle&quot;),
	&quot;1021&quot;, (a: &quot;ivory&quot;, &quot;corridor&quot;),
	&quot;1031&quot;, (a: &quot;simple&quot;, &quot;passage&quot;),
	&quot;1041&quot;, (a: &quot;vacuumed&quot;, &quot;corridor&quot;),
	&quot;1051&quot;, (a: &quot;clay tiled&quot;, &quot;passage&quot;),
	&quot;1061&quot;, (a: &quot;cold stone&quot;, &quot;passageway&quot;),
	&quot;1071&quot;, (a: &quot;gardened&quot;, &quot;cloister&quot;),
	&quot;1081&quot;, (a: &quot;ruined, overgrown&quot;, &quot;aisle&quot;),
	&quot;1091&quot;, (a: &quot;ominous&quot;, &quot;path&quot;),
	&quot;1101&quot;, (a: &quot;winding&quot;, &quot;path&quot;),
	&quot;1111&quot;, (a: &quot;temporary&quot;, &quot;thoroughfare&quot;),
	&quot;1121&quot;, (a: &quot;echoey&quot;, &quot;corridor&quot;),
	&quot;1131&quot;, (a: &quot;suffocating&quot;, &quot;passageway&quot;),
	&quot;1141&quot;, (a: &quot;temporary&quot;, &quot;thoroughfare&quot;),
	&quot;1151&quot;, (a: &quot;temporary&quot;, &quot;thoroughfare&quot;),
	&quot;1161&quot;, (a: &quot;damp&quot;, &quot;passage&quot;),
	&quot;1171&quot;, (a: &quot;silent&quot;, &quot;passage&quot;),
	&quot;1181&quot;, (a: &quot;forsaken&quot;, &quot;passageway&quot;),
	&quot;1191&quot;, (a: &quot;brittle&quot;, &quot;gangway&quot;),
	&quot;1201&quot;, (a: &quot;flooded&quot;, &quot;waterway&quot;),
	&quot;1211&quot;, (a: &quot;sunny&quot;, &quot;alley&quot;),
	&quot;1221&quot;, (a: &quot;dusty&quot;, &quot;passageway&quot;),
	&quot;1231&quot;, (a: &quot;rubbled&quot;, &quot;street&quot;),
	&quot;1241&quot;, (a: &quot;dirt&quot;, &quot;thoroughfare&quot;),
	&quot;1251&quot;, (a: &quot;anarchic&quot;, &quot;boulevard&quot;),
	&quot;1261&quot;, (a: &quot;defeated&quot;, &quot;vulitsa&quot;),
	&quot;1271&quot;, (a: &quot;snowy&quot;, &quot;pass&quot;),
	&quot;1281&quot;, (a: &quot;makeshift&quot;, &quot;raft&quot;),
	&quot;1291&quot;, (a: &quot;fiery&quot;, &quot;avenue&quot;),
	&quot;1301&quot;, (a: &quot;sunny&quot;, &quot;lane&quot;),
	&quot;1311&quot;, (a: &quot;opulent&quot;, &quot;passage&quot;),
	&quot;1321&quot;, (a: &quot;weathered&quot;, &quot;track&quot;),
	&quot;1331&quot;, (a: &quot;dirt&quot;, &quot;thoroughfare&quot;),
	&quot;1341&quot;, (a: &quot;bumpy&quot;, &quot;lane&quot;),
	&quot;1351&quot;, (a: &quot;grassy&quot;, &quot;opening&quot;),
	&quot;1361&quot;, (a: &quot;narrow&quot;, &quot;hallway&quot;),
	&quot;1371&quot;, (a: &quot;gloomy&quot;, &quot;passage&quot;),
	&quot;1381&quot;, (a: &quot;grimy&quot;, &quot;passage&quot;),
	&quot;1391&quot;, (a: &quot;bloody&quot;, &quot;street&quot;),
	&quot;1401&quot;, (a: &quot;humid&quot;, &quot;trail&quot;),
	&quot;1411&quot;, (a: &quot;rowdy&quot;, &quot;alley&quot;),
	&quot;1421&quot;, (a: &quot;busy&quot;, &quot;street&quot;),
	&quot;1431&quot;, (a: &quot;muddy&quot;, &quot;thoroughfare&quot;),
	&quot;1441&quot;, (a: &quot;angular&quot;, &quot;walkway&quot;),
	&quot;1451&quot;, (a: &quot;smoky&quot;, &quot;rampart&quot;),
	&quot;1461&quot;, (a: &quot;damp&quot;, &quot;corridor&quot;),
	&quot;1471&quot;, (a: &quot;bejeweled&quot;, &quot;hallway&quot;),
	&quot;1481&quot;, (a: &quot;dolorous&quot;, &quot;passage&quot;),
	&quot;1491&quot;, (a: &quot;macabre&quot;, &quot;path&quot;),
	&quot;1501&quot;, (a: &quot;muddy&quot;, &quot;trail&quot;),
	&quot;1511&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1521&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1531&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1541&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1551&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1561&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1571&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1581&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1591&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1601&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1611&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1621&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1631&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1641&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1651&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1661&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1671&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1681&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1691&quot;, (a: &quot;undefined&quot;, &quot;passage&quot;),
	&quot;1701&quot;, (a: &quot;dirt&quot;, &quot;path&quot;),
	&quot;1711&quot;, (a: &quot;wide&quot;, &quot;corridor&quot;),
	&quot;1721&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1731&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1741&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1751&quot;, (a: &quot;&quot;, &quot;street&quot;),
	&quot;1761&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1771&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1781&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1791&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1801&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1811&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1821&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1831&quot;, (a: &quot;dank&quot;, &quot;alley&quot;),
	&quot;1841&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1851&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1861&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1871&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1881&quot;, (a: &quot;dirty&quot;, &quot;corridor&quot;),
	&quot;1891&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1901&quot;, (a: &quot;muddy&quot;, &quot;patch of scrub land&quot;),
	&quot;1911&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1921&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1931&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1941&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1951&quot;, (a: &quot;dusty&quot;, &quot;path&quot;),
	&quot;1961&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1971&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1981&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;1991&quot;, (a: &quot;weed and concrete&quot;, &quot;road&quot;),
	&quot;2001&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;2011&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;2021&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;2031&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;2041&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;2051&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;2061&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;2071&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;2081&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;),
	&quot;2091&quot;, (a: &quot;PASSAGE TERMS DATABASE&quot;, &quot;PASSAGE TERMS DATABASE&quot;)
	)
	)
	}</tw-passagedata><tw-passagedata pid="41" name="set passage phrase" tags="startup" position="731,4266" size="100,100">{
(set: $setPassagePhrase to 
(macro: [
	(set: $pathAdj to 1st of (str: $decadeReference) of $passageTerms)
	(set: $pathNoun to 2nd of (str: $decadeReference) of $passageTerms)
	(if: $pathAdj is &quot;&quot;) 
		[(set: $pathArticle to (cond: 
			($firstLetterIsVowel:$pathNoun), &quot;an&quot;,
			&quot;a&quot;))]
	(else:)
		[(set: $pathArticle to (cond: 
			($firstLetterIsVowel:$pathNoun),&quot;an&quot;,
			&quot;a&quot;))]
	($setPathPrep:)
	(output-data: $pathPrep + &quot; &quot; + $pathArticle + &quot; &quot; + $pathAdj + &quot; &quot; + $pathNoun)
	]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;legacy passage terms database]]
[[ -&gt;legacy first letter is vowel]]
[[ -&gt;legacy set path prep]]
}</tw-passagedata><tw-passagedata pid="42" name="set room phrase" tags="startup" position="359,1922" size="100,100">{
(set: $setRoomPhrase to 
(macro: [
	(set: $prep to &quot;&quot;)
	($field:)
	($setRoomPhraseAC:)
	($setRoomPhraseDK:)
	($setRoomPhraseLR:)
	($setRoomPhraseSZ:)
	(output-data: $phrase) 
	]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;

[[ -&gt;set room phrase AC]]
[[ -&gt;set room phrase DK]]
[[ -&gt;set room phrase LR]]
[[ -&gt;set room phrase SZ]]



}</tw-passagedata><tw-passagedata pid="43" name="legacy first letter is vowel" tags="" position="908,4393" size="100,100">{
(set: $firstLetterIsVowel to
(macro: string-type _word, [
	(set: _firstLetter to (1) of _word)
	(set: _firstLetterIsVowel to (cond: 
		_firstLetter is &quot;a&quot;, true,
		_firstLetter is &quot;e&quot;, true,
		_firstLetter is &quot;i&quot;, true,
		_firstLetter is &quot;o&quot;, true,
		_firstLetter is &quot;u&quot;, true, false))
		(output-data: _firstLetterIsVowel)
		]))
}</tw-passagedata><tw-passagedata pid="44" name="legacy preps database" tags="" position="778,4022" size="100,100">{
(set: $lociPreps to (dm: 
	&quot;abode&quot;, &quot;in&quot;, 
	&quot;aisle&quot;, &quot;on&quot;,
	&quot;alley&quot;, &quot;in&quot;,
	&quot;apse&quot;, &quot;in&quot;,
	&quot;arcade&quot;, &quot;in&quot;,
	&quot;avenue&quot;, &quot;on&quot;,
	&quot;bank&quot;,&quot;on&quot;,
	&quot;battlement&quot;, &quot;on&quot;,
	&quot;bayou&quot;, &quot;on&quot;, 
	&quot;beach&quot;, &quot;on&quot;, 
	&quot;boudoir&quot;, &quot;in&quot;,
	&quot;bowl&quot;, &quot;in&quot;,
	&quot;building&quot;, &quot;in&quot;,
	&quot;canal&quot;, &quot;on&quot;,
	&quot;cell&quot;, &quot;in&quot;,	
	&quot;chamber&quot;, &quot;in&quot;,
	&quot;copse&quot;, &quot;in&quot;,
	&quot;corridor&quot;, &quot;on&quot;,
	&quot;cottage&quot;, &quot;in&quot;,
	&quot;courtyard&quot;, &quot;in&quot;,
	&quot;deck&quot;, &quot;on&quot;,
	&quot;depot&quot;, &quot;in&quot;,
	&quot;display&quot;, &quot;at&quot;,
	&quot;ditch full of bodies&quot;, &quot;by&quot;,
	&quot;door&quot;, &quot;to&quot;,
	&quot;dormitory&quot;, &quot;in&quot;,
	&quot;drawbridge&quot;,&quot;on&quot;,
	&quot;dungeon&quot;, &quot;in&quot;,
	&quot;elevator&quot;, &quot;in&quot;,
	&quot;entrance&quot;, &quot;at&quot;,
	&quot;field tower&quot;, &quot;at&quot;,
	&quot;gate&quot;, &quot;at&quot;,
	&quot;gazebo&quot;, &quot;under&quot;,
	&quot;gangway&quot;, &quot;on&quot;,
	&quot;garbage disposal&quot;, &quot;at&quot;,
	&quot;Gebetsraum&quot;, &quot;in&quot;,
	&quot;Gerichtssaal&quot;, &quot;in&quot;,
	&quot;hoist house&quot;, &quot;at&quot;,
	&quot;hall&quot;, &quot;in&quot;,
	&quot;hollow&quot;, &quot;in&quot;,
	&quot;lane&quot;, &quot;on&quot;,
	&quot;lab&quot;,&quot;in&quot;,
	&quot;lahad&quot;,&quot;by&quot;,
	&quot;lobby&quot;, &quot;in&quot;,
	&quot;marker&quot;, &quot;at&quot;,
	&quot;mausoleum&quot;,&quot;in&quot;,
	&quot;minbar&quot;, &quot;on&quot;,
	&quot;mine head&quot;,&quot;at&quot;,
	&quot;mine face&quot;, &quot;at&quot;,
	&quot;mineral face&quot;, &quot;at&quot;,
	&quot;mountainside&quot;,&quot;on&quot;,
	&quot;nave&quot;,&quot;in&quot;,
	&quot;opening&quot;, &quot;in&quot;,
	&quot;orchard&quot;, &quot;in&quot;,
	&quot;ossuary&quot;, &quot;in&quot;,
	&quot;parapet&quot;, &quot;on&quot;,
	&quot;pass&quot;, &quot;on&quot;,
	&quot;passage&quot;, &quot;in&quot;,
	&quot;passageway&quot;, &quot;in&quot;,
	&quot;patch of scrub land&quot;,&quot;on&quot;,
	&quot;path&quot;, &quot;on&quot;,
	&quot;path through the reeds&quot;, &quot;on&quot;,
	&quot;pathway&quot;, &quot;on&quot;,
	&quot;penthouse&quot;, &quot;in&quot;,
	&quot;pit garage&quot;, &quot;in&quot;,
	&quot;plateau&quot;, &quot;on&quot;, 
	&quot;platform&quot;, &quot;on&quot;,
	&quot;plaza&quot;, &quot;in&quot;,
	&quot;plot&quot;, &quot;on&quot;, 
	&quot;pond&quot;, &quot;by&quot;,
	&quot;porch of the maidens&quot;, &quot;on&quot;,
	&quot;post&quot;, &quot;at&quot;,
	&quot;pyramid&quot;, &quot;in&quot;,
	&quot;quayside&quot;, &quot;on&quot;,
	&quot;raft&quot;, &quot;on&quot;,
	&quot;rampart&quot;, &quot;on&quot;,
	&quot;rickety staircase&quot;, &quot;on&quot;,
	&quot;road&quot;, &quot;on&quot;,
	&quot;roadway&quot;, &quot;on&quot;,
	&quot;room&quot;, &quot;in&quot;,
	&quot;rue&quot;, &quot;on&quot;,
	&quot;sally port&quot;, &quot;at&quot;,
	&quot;sanctum&quot;, &quot;in&quot;,
	&quot;schiltron&quot;, &quot;in&quot;,
	&quot;septum&quot;, &quot;in&quot;,
	&quot;shelter&quot;,&quot;under&quot;,
	&quot;square&quot;, &quot;in&quot;,
	&quot;stage&quot;, &quot;by&quot;,
	&quot;stairwell&quot;, &quot;at&quot;,
	&quot;steps&quot;, &quot;on&quot;,
	&quot;street&quot;, &quot;on&quot;,
	&quot;tent&quot;, &quot;in&quot;,
	&quot;theater&quot;, &quot;in&quot;,
	&quot;tower&quot;, &quot;in&quot;,
	&quot;tower gate&quot;, &quot;within&quot;,
	&quot;tunnel&quot;, &quot;in&quot;,
	&quot;track&quot;, &quot;on&quot;,
	&quot;vault&quot;, &quot;in&quot;,
	&quot;vulitsa&quot;, &quot;on&quot;,
	&quot;wagon&quot;, &quot;in&quot;,
	&quot;walkway&quot;, &quot;on&quot;,
	&quot;Wohnblock&quot;, &quot;in&quot;,
	&quot;yard&quot;, &quot;in&quot;,
	))
}</tw-passagedata><tw-passagedata pid="45" name="environ database a - d" tags="startup" position="653,1406" size="100,100">{

(set: $afghanistan to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($field:)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;maternity hospital used by rebels&quot;)]
	(if: $roomNumber is 1) [(set: $roomAdjective to &quot;an &quot;)(set: $roomNoun to &quot;orphanage used by rebels&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;school used by rebels&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;women and children&#39;s refugee camp&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;military base&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;war zone&quot;)]	
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;military prison&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;mosque&quot;)]	
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;rubbled city &quot;)]		
	(if: $roomNumber is 9) [(set: $phrase to it + &quot;mass grave&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
		]
		))
		
(set: $arbor to 
(macro: [
	(set: $roomAdjective to &quot;a &quot;)
	(set: _prep to &quot;by &quot;)
	($park:)
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;shrine&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;monument and sarcophagus&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
		]
		))


(set: $arena to 
(macro: [	
	(set: _prep to &quot;at &quot;)
	(set: $roomAdjective to &quot;the &quot;)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;beginner&#39;s competition area&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;practice area&quot;)]
	(if: $roomNumber is 2) [(set: _prep to &quot;on &quot;)(set: $roomNoun to &quot;scorer&#39;s balustrade&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;ladies&#39; pavilion&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;dignitaries box&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;central arena&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;animal cages&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;prayer tent&quot;)]
	(if: $roomNumber is 8) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;injury tent&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;morgue&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	
	(output-data: &quot;&quot;)
		]
		))
		
(set: $armory to 
(macro: [	
	(set: $roomAdjective to &quot;a &quot;)
	(set: _prep to &quot;in &quot;)
	(if: $decadeNumber is 400)[(set: $roomAdjective to &quot;a looted &quot;)]
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;forge&quot;)]
	(if: $roomNumber is 1) [
		(if: $floorInt is 0)[(set: $roomAdjective to &quot;an &quot;)(set: $roomNoun to &quot;underground drill yard&quot;)]
		(else:)[(set: $roomNoun to &quot;practice yard&quot;)]
		]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;military library&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;sweethearts&#39; taphouse&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;heraldry room&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;heavy weaponry magazine&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;military jail&quot;)]
	(if: $roomNumber is 7) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;holy sword&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;repair shop&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;decommissioning room&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	
	(output-data: &quot;&quot;)
		]
		))
	
(set: $barrack to 
(macro: [	
	(set: $roomAdjective to &quot;a &quot;)
	(set: _prep to &quot;in &quot;)
	($quarter:)
	(if: $decadeNumber is 150)[($villa:)]
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;granary&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;warrior&#39;s mess&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;map room&quot;)]
	(if: $roomNumber is 2 and $decadeNumber is 120) [(set: $roomNoun to &quot;training yard&quot;)]
	(if: $roomNumber is 3 and $decadeNumber is 120) [(set: $roomNoun to &quot;women&#39;s consorting chamber&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;dormitory&quot;)]
	(if: $roomNumber is 5) [(set: $roomAdjective to &quot;an &quot;)(set: $roomNoun to &quot;armory&quot;)]
	(if: $roomNumber is 8) [(set: _prep to &quot;by &quot;)(set: $roomAdjective to &quot;a &quot;)(set: $roomNoun to &quot;broken chariot&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;morgue&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(set: $drawbridge to &quot;path&quot;)
	(set: $bailey to &quot;yard&quot;)
		(set: $battlements to &quot;centurion&#39;s balcony&quot;)
		(set: $domicile to &quot;barracks&quot;)
		(set: $castleword to &quot;barracks&quot;)
		(set: $castleKeep to &quot;inner block&quot;)
		(set: $keep to &quot;inner block&quot;)
		(set: $gatehouseWall to &quot;compound wall&quot;)
		(set: $trophyRoom to &quot;armory&quot;)
		(set: $turret to &quot;corner block&quot;)
	(output-data: &quot;&quot;)
		]
		))

(set: $barrow to 
(macro: [	
	(set: $roomAdjective to &quot;a &quot;)
	(set: _prep to &quot;by &quot;)
	($cemetery:)
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;wickerman&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;mound&quot;)]
	(if: $roomNumber is 3) [(set: _prep to &quot;on &quot;)(set: $roomNoun to &quot;bitter ground&quot;)]
	(if: $roomNumber is 4) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;gravedigger&#39;s hut&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;megalith&quot;)]
	(if: $roomNumber is 6) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;charnel&quot;)]
	(if: $roomNumber is 7) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;circle of stones&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;pillaged mound&quot;)]
	(if: $roomNumber is 9) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;burned down pyre&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	
	(output-data: &quot;&quot;)
		]
		))


(set: $battlefield to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a smoky, noisy &quot;)
	($field:)
	(if: $roomNumber is 2) [(set: $phrase to it + &quot;, where horsed generals decide on their next move&quot;)]
	(if: $roomNumber is 3) [(set: $phrase to it + &quot;, across which deserters are making their escape&quot;)]
	(if: $roomNumber is 5) [(set: $phrase to it + &quot;, in the thick of the fighting&quot;)]
	(if: $roomNumber is 7) [(set: $phrase to it + &quot;, where a priest comforts the dying&quot;)]
	(if: $roomNumber is 8) [(set: $phrase to it + &quot;, amongst the screaming and wounded&quot;)]
	(if: $roomNumber is 9) [(set: $phrase to it + &quot;, amongst the throngs of the glorious dead&quot;)]
	(output-data: &quot;&quot;)
		]
		))
		
(set: $brewery to 
(macro: [	
	(set: _prep to &quot;by &quot;)
	(set: $roomAdjective to &quot;the &quot;)
	($building:)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;stills&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;wine barrels&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;beer barrels&quot;)]
	(if: $roomNumber is 6) [(set: _prep to &quot;amongst &quot;)(set: $roomNoun to &quot;secret brew&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;slop bucket&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
		]
		))

(set: $brothel to 
(macro: [	
	($house:)
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;private lounge&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;boudoir&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;peeping closet&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;backyard&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;bondage room&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;changing room&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;medical room&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))

(set: $building to 
(macro: [	
	($quarter:)
	(output-data: &quot;&quot;)
		]
		))

(set: $cafe to 
(macro: [	
	($house:)
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;garden&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;billiard room&quot;)]

	(if: $roomNumber is 2) [(set: $roomNoun to &quot;reading room&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;drawing room&quot;)]

	(if: $roomNumber is 5) [(set: $roomNoun to &quot;bouncer&#39;s back room&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;priest&#39;s entrance&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;butcher&#39;s freezer&quot;)]

	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(set:  $armorRoom to &quot;bouncer&#39;s back room&quot;)
	(set:  $attic to &quot;attic&quot;)
	(set:  $atticStairs to &quot;attic stairs&quot;)
	(set:  $basementCorridor to &quot;basement corridor&quot;)
	(set:  $bathroom to &quot;bathroom&quot;)
	(set:  $bedchamber to &quot;terrace&quot;)
	(set:  $billiardRoom to &quot;billiard room&quot;)
	(set:  $boilerRoom to &quot;boiler room&quot;)
	(set:  $boudoir to &quot;guest room&quot;)
	(set:  $brickWall to &quot;[&quot; + &quot;[brick wall]&quot; + &quot;]&quot;)
	(set:  $buttery to &quot;buttery&quot;)
	(set:  $casketRoom to &quot;butcher&#39;s freezer&quot;)
	(set:  $cellar to &quot;cellar&quot;)
	(set:  $chapel to &quot;priest&#39;s entrance&quot;)
	(set:  $cold to &quot;cold&quot;)
	(set: $cool to &quot;cool&quot;)
	(set: $dark to &quot;dark&quot;)
	(set:  $dilapidated to &quot;stairs&quot;)
	(set:  $diningRoom to &quot;salon&quot;)
	(set:  $domicile to &quot;cafe&quot;)
	(set:  $elevator to &quot;stairs&quot;)
	(set:  $entranceHall to &quot;bar&quot;)
	(set:  $flooded to &quot;&quot;)
	(set:  $grandHouse to &quot;cafe&quot;)
	(set:  $hallway1 to &quot;hallway&quot;)
	(set:  $hallway2 to &quot;hallway&quot;)
	(set:  $inABrickWall to &quot;in a brick wall&quot;)
	(set:  $kennels to &quot;smoker&#39;s garden&quot;)
	(set:  $kitchen to &quot;kitchen&quot;)
	(set:  $landing to &quot;landing&quot;)
	(set:  $larder to &quot;larder&quot;)
	(set: $laundryCollectionArea to &quot;laundry collection area&quot;)
	(set:  $livingRoom to &quot;drawing room&quot;)
	(set:  $mainBasement to &quot;main basement&quot;)
	(set:  $mainLanding to &quot;main landing&quot;)
	(set:  $mainStaircase to &quot;main staircase&quot;)
	(set:  $masterBedroom to &quot;deluxe suite&quot;)
	(set: $narrow to &quot;narrow&quot;)
	(set:  $noisy to &quot;noisy&quot;)
	(set:  $nursery to &quot;nursery&quot;)
	(set:  $oratory to &quot;oratory&quot;)
	(set:  $partiallySubmerged to &quot;&quot;)
	(set: $roughHewn to &quot;rough-hewn &quot;)
	(set:  $servantsQuarters to &quot;waiter&#39;s office&quot;)
	(set:  $storageRoom to &quot;storage room&quot;)
	(set:  $study to &quot;reading room&quot;)
	(set: $suitsOfArmor to &quot;suits of armour&quot;)
	(set: $sumptuous to &quot;&quot;)
	(set: $submerged to &quot;&quot;)
	(set: $swim to &quot;go&quot;)
	(set:  $threadbare to &quot;&quot;)
	(set:  $underKitchenSteps to &quot;under-kitchen steps&quot;)
	(set: $underwater to &quot;&quot;)
	(set: $wade to &quot;go&quot;)
	(set:  $yard to &quot;garden&quot;)
	(output-data: &quot;&quot;)
		]
		))

(set: $camp to 
(macro: [
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($field:)
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;tent for playing dice&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;tent for putting on armor&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;tent for prisoners&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;tent for the wounded&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;tent for the dead&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
		]
		))
		
(set: $carnival to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;the &quot;)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;tent of the performing babies&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;pavillion of the clowns (chou)&quot;)]
		(if: $roomNumber is 2) [(set: $roomAdjective to &quot;the &quot;)(set: $roomNoun to &quot;pavillion of a thousand magnifications&quot;)]
		(if: $roomNumber is 3) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;stage on which there plays the “Stepping and Swaying Woman”&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;feasting area&quot;)]
		(if: $roomNumber is 5) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;stage on which performers enact the military play “Canqun”&quot;)]
		(if: $roomNumber is 6) [(set: _prep to &quot;amongst &quot;)(set: $roomNoun to &quot;caged beasts&quot;)]
		(if: $roomNumber is 7) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;stage on which performers enact a religious play&quot;)]
		(if: $roomNumber is 8) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;the marvel of the two headed man&quot;)]
		(if: $roomNumber is 9) [(set: _prep to &quot;by &quot;)(set: $roomAdjective to &quot;some &quot;)(set: $roomNoun to &quot;performers in death masks&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))
		
(set: $castle to 
(macro: [		
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($barrack:)
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;book room&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;dungeon&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;ruined sick hall&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(set: $castleword to &quot;castle&quot;)
	(set: $gatehouse to &quot;gatehouse&quot;)
	(set: $bailey to &quot;bailey&quot;)
	(set: $drawbridge to &quot;drawbridge&quot;)
	(set: $battlements to &quot;battlements&quot;)
	(set: $maidensTower to &quot;maiden&#39;s tower&quot;)
	(set: $castleKeep to &quot;castle keep&quot;)
	(set: $keep to &quot;keep&quot;)
	(set: $gatehouseWall to &quot;gatehouse wall&quot;)
	(set: $gate to &quot;gate&quot;)
	(set: $turret to &quot;turret&quot;)
	(set: $sickHall to &quot;sick hall&quot;)
	(set: $wall to &quot;wall&quot;)
	(output-data: &quot;&quot;)
		]
		))


(set: $cathedral to 
(macro: [	
	($church:)
	(set: $temple to &quot;cathedral&quot;)
	(output-data: &quot;&quot;)
	]
	))

(set: $cave to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $roomNumber is 0) [(set: _prep to &quot;beneath &quot;)(set: $roomNoun to &quot;tangle of tree roots&quot;)]
	(if: $roomNumber is 1) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;waterfall&quot;)]
	(if: $roomNumber is 2) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;rock wall encrusted with crystals&quot;)]
	(if: $roomNumber is 3) [(set: _prep to &quot;on &quot;)(set: $roomNoun to &quot;lair of a cave hag&quot;)]
	(if: $roomNumber is 4) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;grotto&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;cavern filled with bats&quot;)]
	(if: $roomNumber is 6) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;cavern with shackles dangling from the walls&quot;)]
	(if: $roomNumber is 7) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;slab of rock, which might be an altar&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;collapsed cavern&quot;)]
	(if: $roomNumber is 9) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;pile of human bones&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(set: $tinyStaircase to &quot;narrow climbable shaft&quot;)
	(set: $mainStairwell to &quot;great shaft&quot;)
	(set: $tower_ to &quot;cave&quot;)
	(set: $towerEntrance to &quot;subterranean pool&quot;)
	(set: $parapet to &quot;cave mouth&quot;)
	(set: $floors to &quot;parts&quot;)
	(set: $top to &quot;mouth&quot;)
	(set: $reaches to &quot;parts&quot;)
	(set: $chapel to &quot;chapel&quot;)
	(output-data: &quot;&quot;)
		]
		))
		
(set: $cemetery to 
(macro: [	
	($park:)	
	(set: _prep to &quot;by &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;willow&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;statue of a child&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;mausoleum&quot;)]
	(if: $roomNumber is 3) [(set: _prep to &quot;on &quot;)(set: $roomNoun to &quot;witch&#39;s graveyard&quot;)]
	(if: $roomNumber is 4) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;gravedigger&#39;s cottage&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;warrior&#39;s cenotaph&quot;)]
	(if: $roomNumber is 6) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;fenced enclosuree&quot;)]
	(if: $roomNumber is 7) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;chapel of rest&quot;)]
	(if: $roomNumber is 7 and $decadeNumber is 19) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;temple of rest&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;pillaged grave&quot;)]
	(if: $roomNumber is 9) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;columbarium&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	
	(output-data: &quot;&quot;)
		]
		))


(set: $christianCommune to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $roomNumber is 0) [(set: _prep to &quot;by &quot;)(set: $roomAdjective to &quot;the &quot;)(set: $roomNoun to &quot;baptism pool&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;sunday school&quot;)]
	(if: $roomNumber is 2) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;new testament on a plinth&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;matrimonial chapel&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;social hall&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;disputation hall&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;penance room&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;chapel&quot;)]
	(if: $roomNumber is 8) [(set: $roomAdjective to &quot;the &quot;)(set: $roomNoun to &quot;chamber of the stigmatic saint&quot;)]
	(if: $roomNumber is 9) [(set: $roomAdjective to &quot;the &quot;)(set: $roomNoun to &quot;catacombs of San Sebastiano&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	
	(output-data: &quot;&quot;)
		]
		))

		
(set: $church to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $roomNumber is 0) [(set: _prep to &quot;by &quot;)(set: $roomAdjective to &quot;an onyx &quot;)(set: $roomNoun to &quot;font&quot;)]
	(if: $roomNumber is 1) [(set: $roomAdjective to &quot;an &quot;)(set: $roomNoun to &quot;altarboys&#39; choir&quot;)]
	(if: $roomNumber is 2) [(set: $roomAdjective to &quot;an &quot;)(set: $roomNoun to &quot;vestry&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;matrimonial chapel&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;clergy house&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;vapenhus&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;priest&#39;s hole&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;altar&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;spire&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;crypt&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(set: $altar to &quot;altar&quot;)

	(set: $chapel to &quot;chapel&quot;)
	(set: $choirboysStalls to &quot;choirboys&#39; stalls&quot;)
	(set: $clergyHouse to &quot;clergy house&quot;)
	(set: $cloister to &quot;cloister&quot;)
	(set: $collonade to &quot;collonade&quot;)
	(set: $crossing to &quot;crossing&quot;)
	(set: $churchcrypt to &quot;crypt&quot;)
	
	(set: $font to &quot;font&quot;)

	(set: $hymnals to &quot;hymnals&quot;)
	(set: $leftTransept to $leftOnScreen + &quot; transept&quot;)
	(set: $liturgicalTexts to &quot;liturgical texts&quot;)
	(set: $matrimonialChapel to &quot;matrimonial chapel&quot;)
	
	(set: $missals to &quot;missals&quot;)
	(set: $narthex to &quot;narthex&quot;)
	(set: $nave to &quot;nave&quot;)

	(set: $organistsLoft to &quot;organist&#39;s loft&quot;)
	(set: $priestsHole to &quot;priest&#39;s hole&quot;)
	(set: $prophets to &quot;prophets&quot;)
	(set: $reliquary to &quot;reliquary&quot;)
	(set: $rightTransept to $rightOnScreen + &quot; transept&quot;)
	(set: $sacred to &quot;sacred&quot;)
	(set: $saints to &quot;saints&quot;)
	(set: $spire to &quot;spire&quot;)
	(set: $symbols to &quot;effects&quot;)
	(set: $temple to &quot;church&quot;)
	
	(set: $vapenhus to &quot;vapenhus&quot;)
	(set: $vestments to &quot;vestments&quot;)
	(set: $vestry to &quot;vestry&quot;)
	(output-data: &quot;&quot;)
	]
	))
		
(set: $courthouse to 
(macro: [	
	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;the &quot;)
	($jail:)
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;accused&#39;s cell&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;counsellor&#39;s library&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;judge&#39;s chambers&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;courtroom&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;scaffold&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))
		
(set: $crypt to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
		(if: $decadeNumber is 390)[(set: $roomAdjective to &quot;a lightly flooded &quot;)]
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;pitch black tomb&quot;)]
		(if: $roomNumber is 1) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;child&#39;s sarcophagus&quot;)]
		(if: $roomNumber is 2) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;wall of epitaphs&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;wives&#39; tomb&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;treasury&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;funereal weapons repository&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;skeleton-filled immurement chamber&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;shrine&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;partially collapsed chamber&quot;)]
		(if: $roomNumber is 9) [(set: $roomAdjective to &quot;the &quot;)(set: $roomNoun to &quot;chamber of bones&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(set: $upBlock to &quot;down&quot;)
		(set: $downBlock to &quot;up&quot;)
		(output-data: &quot;&quot;)
		]
		))	
		

(set: $dockside to 
(macro: [	
	(set: _prep to &quot;by &quot;)
	(set: $roomAdjective to &quot;a &quot;)
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;dockside bar&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;consignment of books&quot;)]
		(if: $roomNumber is 3) [(set: $roomAdjective to &quot;some &quot;)(set: $roomNoun to &quot;crates of saucy books&quot;)]
		(if: $roomNumber is 4) [(set: $roomAdjective to &quot;a &quot;)(set: $roomNoun to &quot;houseboat&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;warship&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;prison ship&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;dockside chapel&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;broken wharf&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;shore of dead fish&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))

}</tw-passagedata><tw-passagedata pid="46" name="bottom entrance" tags="" position="1349,552" size="100,100">{(set: $thisRoomsNumber to 12)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;17507&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19916&quot;)]


(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence2. 

From here you may go [[$rightHill_3 $rightOnScreen-&gt;room 1]] ($toThePhrase: 1) or [[$leftHill_2 $leftOnScreen-&gt;room 3]] ($toThePhrase: 3). 

(if: 9 is in $optionalPaths)[An alternative is to go (link: $upHill_2 + $upOnScreen)[(goto: &quot;passage 6&quot;)]]

(if: $startRoom is &quot;bottom entrance&quot;)[$returnText]
]</tw-passagedata><tw-passagedata pid="47" name="room 1" tags="" position="1496,555" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 1)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;1751&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19901&quot;)]

(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)

(border-color: white) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. 

From here you may go [[$upHill_2 $upOnScreen-&gt;passage 1]] or [[$leftHill_3 $leftOnScreen-&gt;bottom entrance]]. 

(if: 6 is in $optionalPaths)[You may also go (link: $rightHill_4 + $rightOnScreen)[(goto: &quot;passage 7&quot;)]]


[]]}</tw-passagedata><tw-passagedata pid="48" name="room 3" tags="" position="1197,551" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 3)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;1753&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19903&quot;)]



(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
(if: $place is &quot;Strasbourg&quot;)[&lt;script&gt;CustomScripts.updateBackground(1421);&lt;/script&gt;]
(if: $place is &quot;Orleans&quot;)[&lt;script&gt;CustomScripts.updateBackground(1431);&lt;/script&gt;]
(if: $place is &quot;Wallachia&quot;)[&lt;script&gt;CustomScripts.updateBackground(1491);&lt;/script&gt;]
($refreshSentences:)
}
(border-color: red) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. 

($room3content:)

From here you may go [[$rightHill_2 $rightOnScreen-&gt;bottom entrance]] or [[$leftHill_1 $leftOnScreen-&gt;room 5]] ($toThePhrase: 5). 

(if: 8 is in $optionalPaths)[An alternative is to go (link: $upHill_2 + $upOnScreen)[(goto: &quot;room 6&quot;)] (unless: $decadeNumber is 1750)[($toThePhrase: 6)].[]]



}]</tw-passagedata><tw-passagedata pid="49" name="passage 6" tags="" position="1347,397" size="100,100">{(set: $thisRoomsNumber to 16)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;17504&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19912&quot;)]


(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence2. 

From here you may go [[$upHill_1 $upOnScreen-&gt;top entrance]] or [[$rightOnScreen-&gt;passage 1]]. 

(if: 4 is in $optionalPaths)[You may also go (link: $leftHill_2 + $leftOnScreen)[(goto: &quot;room 6&quot;)] ($toThePhrase: 6).]

(if: 9 is in $optionalPaths)[An alternative is to go (link: $downHill_2 + $downOnScreen)[(goto: &quot;bottom entrance&quot;)]]



]</tw-passagedata><tw-passagedata pid="50" name="room 3 content" tags="startup" position="3912,54" size="100,100">{
(set: $room3content to
(macro: [
	(set: $content to &quot;&quot;)
	($debugger:) 
	(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
(if: $place is &quot;Strasbourg&quot;)[&lt;script&gt;CustomScripts.updateBackground(1421);&lt;/script&gt;]
(if: $place is &quot;Orleans&quot;)[&lt;script&gt;CustomScripts.updateBackground(1431);&lt;/script&gt;]
(if: $place is &quot;Wallachia&quot;)[&lt;script&gt;CustomScripts.updateBackground(1491);&lt;/script&gt;]
	(if: $thisYear is 1133 and $henrysDragon is not &quot;hatched&quot;)[(set: $content to &quot;In a pan on the stove is a huge red egg. Suddenly, cracks appear in it. Something is trying to hatch out! You may [[help it-&gt;Henry II birth]] if you wish.&quot;)]
	(if: $thisYear is 1133 and $henrysDragon is &quot;hatched&quot;)[(set: $content to &quot;There is a huge red egg in a pan on the stove. It appears that something recently hatched from it.&quot;)]
	(if: $thisYear is 1153 and $Eustace is not &quot;dead&quot;)[(set: $content to &quot;There is a young, fire haired nobleman here, gasping as the life leaves him. &#39;It is written in my blood!&#39; he croaks, holding out a piece of parchment. You can take the parchment and [[read it-&gt;Treaty of Wallingford]], or [[talk to the red nobleman-&gt;Eustace IV]].&quot;)]
	(if: $thisYear is 1153 and $Eustace is &quot;dead&quot;)[(set: $content to &quot;There is a dead nobleman here, with a parchment in his cold and bony grip. You can [[read it-&gt;Treaty of Wallingford]] if you like.&quot;)]
	(output-data: $content)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="51" name="Henry II birth" tags="" position="4087,58" size="100,100">{}</tw-passagedata><tw-passagedata pid="52" name="Treaty of Wallingford" tags="" position="3749,59" size="100,100">{}</tw-passagedata><tw-passagedata pid="53" name="Eustace IV" tags="" position="3917,211" size="100,100">{}</tw-passagedata><tw-passagedata pid="54" name="room 5" tags="" position="1041,555" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 5)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;1755&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19905&quot;)]


(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
(if: $place is &quot;York&quot;)[&lt;script&gt;CustomScripts.updateBackground(1411);&lt;/script&gt;]
(if: $place is &quot;Seville&quot;)[&lt;script&gt;CustomScripts.updateBackground(1481);&lt;/script&gt;]
($refreshSentences:)
}(border-color: blue) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. 

($room5content:)

From here you may go [[$rightHill_1 $rightOnScreen-&gt;room 3]] ($toThePhrase: 3) or [[$upHill_2 $upOnScreen-&gt;left entrance]]. 


}]</tw-passagedata><tw-passagedata pid="55" name="room 6" tags="" position="1195,401" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 6)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;17509&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19906&quot;)]



(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)

($refreshSentences:)}(border-color: (rgb: 0, 255, 255)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
(unless: $decadeNumber is 1750)[$complexSentence.] 
(else:) [You are in an area of calm amidst the turbulence of revolutionary Paris.] 
($room6content:)
From here you may go [[$upHill_1 $upOnScreen-&gt;room 9]] (unless: $floorInt is 17)[($toThePhrase: 9)].

(if: 4 is in $optionalPaths)[You may also go (link: $rightHill_2 + $rightOnScreen)[(goto: &quot;passage 6&quot;)]]

(if: 3 is in $optionalPaths)[You may also go (link: $leftHill_1 + $leftOnScreen)[(goto: &quot;left entrance&quot;)]]

(if: 8 is in $optionalPaths)[An alternative is to go (link: $downHill_2 + $downOnScreen)[(goto: &quot;room 3&quot;)] ($toThePhrase: 3).]



}]</tw-passagedata><tw-passagedata pid="56" name="left entrance" tags="" position="1037,397" size="100,100">{(set: $thisRoomsNumber to 15)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;17503&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19913&quot;)]


(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence2. 

From here you may go [[$downHill_2 $downOnScreen-&gt;room 5]] or [[$upHill_1 $upOnScreen-&gt;room 4]] ($toThePhrase: 4). 

(if: 3 is in $optionalPaths)[You may also go (link: $rightHill_1 + $rightOnScreen)[(goto: &quot;room 6&quot;)] ($toThePhrase: 6).]

(if: $startRoom is &quot;left entrance&quot;)[$returnText]
]</tw-passagedata><tw-passagedata pid="57" name="room 5 content" tags="startup" position="4602,61" size="100,100">{
(set: $room5content to
(macro: [
	(set: $content to &quot;&quot;)
	($debugger:) 
	(if: $thisYear is 1135)[(set: $content to &quot;There is a blue knight here [[to whom you may speak-&gt;Stephen of Blois]].&quot;)]
	(output-data: $content)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="58" name="Stephen of Blois" tags="" position="4602,211" size="100,100">{}</tw-passagedata><tw-passagedata pid="59" name="passage 1" tags="" position="1497,397" size="100,100">{(set: $thisRoomsNumber to 11)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;17505&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19911&quot;)]


(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence2. 

From here you may go [[$leftHill_3 $leftOnScreen-&gt;passage 6]] or [[$downHill_2 $downOnScreen-&gt;room 1]] ($toThePhrase: 1). 

(if: 5 is in $optionalPaths)[You may also go (link: $rightHill_4 + $rightOnScreen)[(goto: &quot;room 7&quot;)] ($toThePhrase: 7).] 

(if: 10 is in $optionalPaths)[An alternative is to go (link: $upHill_1 + $upOnScreen)[(goto: &quot;room 0&quot;)] ($toThePhrase: 0).]
]</tw-passagedata><tw-passagedata pid="60" name="passage 7" tags="" position="1670,552" size="100,100">{(set: $thisRoomsNumber to 17)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;17508&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19917&quot;)]


(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence2. You may rest here if you like. 

(if: 7 is in $optionalPaths)[You may also go (link: $rightHill_5 + $rightOnScreen)[(goto: &quot;room 2&quot;)] ($toThePhrase: 2).]

(if: 6 is in $optionalPaths)[You may also go (link: $leftHill_4 + $leftOnScreen)[(goto: &quot;room 1&quot;)] ($toThePhrase: 1).]

(if: 11 is in $optionalPaths)[An alternative is to go (link: $upHill_2 + $upOnScreen)[(goto: &quot;room 7&quot;)] ($toThePhrase: 7).]
]</tw-passagedata><tw-passagedata pid="61" name="room 2" tags="" position="1824,552" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 2)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;1752&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19902&quot;)]

(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)

}(border-color: (rgb: 255, 100, 100)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. 

From here you may go [[$upHill_2 $upOnScreen-&gt;right entrance]]. 

(if: 7 is in $optionalPaths)[You may also go (link: $leftHill_5 + $leftOnScreen)[(goto: &quot;passage 7&quot;)]]


]</tw-passagedata><tw-passagedata pid="62" name="passage 8" tags="" position="1664,251" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 18)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;17502&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19915&quot;)]



($refreshSentences:)
} (border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence2. 

From here you may go [[$downHill_1 $downOnScreen-&gt;room 7]] ($toThePhrase: 7) or [[$leftHill_4 $leftOnScreen-&gt;room 0]] ($toThePhrase: 0). 

(if: 2 is in $optionalPaths)[You may also go (link: $rightHill_5 + $rightOnScreen)[(goto: &quot;room 8&quot;)] ($toThePhrase: 8). ]


]</tw-passagedata><tw-passagedata pid="63" name="right entrance" tags="" position="1822,399" size="100,100">{(set: $thisRoomsNumber to 13)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;17506&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19918&quot;)]

(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{$complexSentence2. 

From here you may go [[$upHill_1 $upOnScreen-&gt;room 8]] ($toThePhrase: 8), [[$downHill_2 $downOnScreen-&gt;room 2]] ($toThePhrase: 2) or [[$leftHill_5 $leftOnScreen-&gt;room 7]] ($toThePhrase: 7). 

(if: $startRoom is &quot;right entrance&quot;)[$returnText]

}]</tw-passagedata><tw-passagedata pid="64" name="room 8" tags="" position="1815,254" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 8)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;1758&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19908&quot;)]


(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(if: $place is &quot;Merv&quot;)[&lt;script&gt;CustomScripts.updateBackground(1291);&lt;/script&gt;]
(if: $place is &quot;York&quot;)[&lt;script&gt;CustomScripts.updateBackground(1411);&lt;/script&gt;]
(if: $place is &quot;Istanbul&quot;)[&lt;script&gt;CustomScripts.updateBackground(1451);&lt;/script&gt;]
(if: $place is &quot;London&quot;)[&lt;script&gt;CustomScripts.updateBackground(1461);&lt;/script&gt;]
($refreshSentences:)
} 
(border-color: yellow)+(border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. 

From here you may go [[$downHill_1 $downOnScreen-&gt;right entrance]].

(if: 2 is in $optionalPaths)[You may also go (link: $leftHill_5 + $leftOnScreen)[(goto: &quot;passage 8&quot;)]]


]
</tw-passagedata><tw-passagedata pid="65" name="room 0" tags="" position="1499,254" size="100,100">{
($setImage:)
(set: $thisRoomsNumber to 0)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;17500&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19900&quot;)]


(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
(if: $floorInt is 12)[&lt;script&gt;CustomScripts.updateBackground(1291);&lt;/script&gt;]
(if: $place is &quot;Aztec&quot;)[&lt;script&gt;CustomScripts.updateBackground(1441);&lt;/script&gt;]
($refreshSentences:)
}
(border-color: black) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. 

($room0content:)

If you are not interested in lingering in this place, you may go  [[$rightHill_4 $rightOnScreen-&gt;passage 8]] or [[$leftHill_3 $leftOnScreen-&gt;top entrance]]. 

(if: 10 is in $optionalPaths)[An alternative is to go (link: $downHill_1 + $downOnScreen) [(goto: &quot;passage 1&quot;)]]
[]]</tw-passagedata><tw-passagedata pid="66" name="top entrance" tags="" position="1344,257" size="100,100">{(set: $thisRoomsNumber to 14)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;17501&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19914&quot;)]


(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence2. 

From here you may go [[$rightHill_3 $rightOnScreen-&gt;room 0]] ($toThePhrase: 0) or [[$downHill_1 $downOnScreen-&gt;passage 6]]. 

(if: 1 is in $optionalPaths)[You may also go (link: $leftHill_2 + $leftOnScreen)[(goto: &quot;room 9&quot;)] ($toThePhrase: 9).]


(if: $startRoom is &quot;top entrance&quot;)[$returnText]
]</tw-passagedata><tw-passagedata pid="67" name="room 9" tags="" position="1196,257" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 9)
($setRoomVariables:)
(if: $decadeNumber is 1990)[($overrideImage: &quot;19909&quot;)]


($refreshSentences:)}
(border-color: (rgb: 155, 100, 0)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(unless: $decadeNumber is 1750)[$complexSentence (if: $decadeNumber is 1990)[The reactor itself is to the [[$upOnScreen-&gt;reactor]].] 

($room9content:)](else:)[Your progress further is blocked by the river Seine.]
{
From here you may go (unless: $floorInt is 17)[[[$leftHill_1 $leftOnScreen-&gt;room 4]] ($toThePhrase: 4) or] [[$downHill_1 $downOnScreen-&gt;room 6]] (unless: $decadeNumber is 1750)[($toThePhrase: 6)]. 
(if: 1 is in $optionalPaths)[You may also go (link: $rightHill_2 + $rightOnScreen)[(goto: &quot;top entrance&quot;)]]

}
]</tw-passagedata><tw-passagedata pid="68" name="room 0 content" tags="startup" position="3218,54" size="100,100">{
(set: $room0content to
(macro: [
	(set: $content to &quot;&quot;)
	($debugger:) 
	(if: $thisYear is 1170)[(set: $content to &quot;There is a stained glass window here which (link: &#39;you may examine more closely.&#39;)[==[&lt;script&gt;CustomScripts.updateBackground(-9);&lt;/script&gt;]you lean in to examine more closely. The colored pieces of glass are arranged to depict a bishop, robed in black, looking paradoxically both sad and serene as a sword protrudes from his head. As you gaze upon it, the bishop&#39;s lips begin to move! Shocked, you stagger back. The stained glass window is speaking! 

After recovering your wits, [[you may lean in to listen to what it has to say-&gt;Becket murdered]].&quot;)]
(if: $thisYear is 1120)[(set: $content to &quot;There is a corpse here, shrouded in black, which using necromancy [[you may bring briefly back to life-&gt;William Adelin]].&quot;)]
	(output-data: $content)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="69" name="Becket murdered" tags="" position="3143,204" size="100,100">{}</tw-passagedata><tw-passagedata pid="70" name="William Adelin" tags="" position="3293,204" size="100,100">{}</tw-passagedata><tw-passagedata pid="71" name="room 4" tags="" position="1039,257" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 4)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;1754&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19904&quot;)]



(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)}(border-color: purple) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{

$complexSentence. 

($room4content:)

(unless: $decadeNumber is 1750) [From here you may go [[$downHill_1 $downOnScreen-&gt;left entrance]] or [[$rightHill_1 $rightOnScreen-&gt;room 9]] ($toThePhrase: 9).]
(else:) [From here you may go [[$downHill_1 $downOnScreen-&gt;left entrance]] or [[$leftHill_1 $leftOnScreen-&gt;room 90]] towards the storming of the Bastille.]


}]</tw-passagedata><tw-passagedata pid="72" name="King Stephen&#39;s death" tags="" position="4281,211" size="100,100">{}</tw-passagedata><tw-passagedata pid="73" name="Charlemagnes Death." tags="" position="4408,210" size="100,100">{}</tw-passagedata><tw-passagedata pid="74" name="room 4 content" tags="startup" position="4361,56" size="100,100">{
(set: $room4content to
(macro: [
	(set: $content to &quot;&quot;)
	($debugger:) 
	(if: $thisYear is 814)[(set: $content to &quot;There is a pond here in which there shimmers a bright light from above. If you wish you may [[look up at the light-&gt;Charlemagnes Death.]].&quot;)]
	(if: $thisYear is 1154 and $Stephen is not &quot;dead&quot;)[(set: $content to &quot;There is an old king here, about to die. [[You may hear his last words-&gt;King Stephen&#39;s death]].&quot;)]
	(if: $thisYear is 1154 and $Stephen is &quot;dead&quot;)[(set: $content to &quot;There is a dead king here. Even in death his face looks tired and sad.&quot;)]
	(output-data: $content)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="75" name="fix optional paths" tags="startup" position="22,689" size="100,100">{
(set: $fixOptionalPaths to 
(macro: [
	(set: $optionalPaths to (a:))
	($addPath:)($addPath:)($addPath:)($addPath:)($addPath:)($addPath:)($addPath:)($addPath:)($addPath:)($addPath:)($addPath:)($addPath:)
	(output-data:&quot;&quot;)
	]
	)
	)

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;add path]]
}</tw-passagedata><tw-passagedata pid="76" name="add path" tags="startup" position="186,453" size="100,100">{
(set: $addPath to 
(macro: [	
	(set: _x to ($srandom: 12)) 
	(set: $optionalPaths to it + (a:_x))
	(output-data:&quot;&quot;)
	]
	)
	)

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;srandom]]
}</tw-passagedata><tw-passagedata pid="77" name="srandom" tags="startup" position="344,452" size="100,100">{
&lt;!--returns a stable random value using the argument as a limit. essentially replaces the random function from Harlowe--&gt;	
	
(set: $srandom to 
(macro: num-type _limit, [
	(if: _limit &gt; 19)
		[(error:&quot;$srandom cannot accept argument &gt;19&quot;)]
	(set: _starter to (nth: $seedIndex, ...$randomSeed))
	(if: $seedIndex &gt; 40) [(set: $seedIndex to 1)]
	(else:) [(set: $seedIndex +=1)]
	(set: _x to _limit +1)
	($mod: _starter, _x)
	(output-data: $modulus)
	]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;mod]]
}</tw-passagedata><tw-passagedata pid="78" name="mod" tags="startup" position="486,448" size="100,100">{
(set: $mod to 
(macro: num-type _dividend, num-type _divisor, [
	(if: _divisor &lt; 0) [(error: &quot;divisor less than 0&quot;)]
	(if: _dividend &lt; 0) [(error: &quot;dividend less than 0&quot;)]
	(if: _divisor is 0) [(set: $modulus to 0)] 
	(else:)[
	(if: _divisor &gt; _dividend)[(set: $modulus to _dividend)]
	(else:) [($mod: _dividend - _divisor, _divisor)]
	]
	(output-data:&quot;&quot;) 
	]))
}</tw-passagedata><tw-passagedata pid="79" name="font" tags="" position="1503,3493" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 0)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: black) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{(if: $architecture is in (a: &quot;church&quot;, &quot;cathedral&quot;))[You are at the $font.] (else:)[$contentSentence2.] ($setRoomContent:) From here you may go $rightOnScreen to the main [[$narthex-&gt;narthex]]. (if: $optionalPaths contains 4) [Alternatively, you may head $upOnScreen to the [[matrimonial $chapel-&gt;matrimonial chapel]].] []}]}</tw-passagedata><tw-passagedata pid="80" name="narthex" tags="" position="1661,3493" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 19)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $narthex(unless: $decadeNumber is 1970)[ of the $temple]. ($setRoomContent:) From here you can go $leftOnScreen to the [[$font-&gt;font]], $rightOnScreen [[($toThePhrase:5)-&gt;vapenhus]] or [[$upOnScreen-&gt;nave]] to the $nave. If you do not wish to spend any more time in this $temple, you may (link: &quot;make your way out&quot;)[(goto: ($returnToComplex:))].}]}</tw-passagedata><tw-passagedata pid="81" name="matrimonial chapel" tags="" position="1481,3004" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 3)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: red) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You have entered the $matrimonialChapel of a $temple. ($setRoomContent:) From here you may head $rightOnScreen to the [[$nave-&gt;nave]]. (if: $optionalPaths contains 4) [Alternatively, you may head $downOnScreen to the [[font]].] }[]]}</tw-passagedata><tw-passagedata pid="82" name="vapenhus" tags="" position="1821,3491" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 5)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: blue) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $decadeNumber is in $temples)[$complexSentence.] (else:)[You are in the $vapenhus (unless: $decadeNumber is 1970)[of a $architecture, where worshippers must leave their weapons before entering.]] ($setRoomContent:) From here you can go back $leftOnScreen to the [[$narthex-&gt;narthex]]. (if: $architecture is &quot;cathedral&quot;) [Alternatively, slightly to the $rightOnScreen are some steps to the [[$organistsLoft-&gt;organist&#39;s loft]].]] }</tw-passagedata><tw-passagedata pid="83" name="nave" tags="" position="1664,2999" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 16)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $nave of the $temple. ($setRoomContent:) From here you can go [[$upOnScreen-&gt;crossing]] to the $crossing, (if: $optionalPaths contains 5) [$rightOnScreen and up some steps to the [[$choirboysStalls-&gt;altarboys&#39; choir]]] or [[$downOnScreen-&gt;narthex]] to the $narthex. You may also head $leftOnScreen to the [[$matrimonialChapel-&gt;matrimonial chapel]]. (if: $architecture is &quot;cathedral&quot;)[(if:$decadeNumber is in (a:1970))[Alternatively, you can head $rightOnScreen to the [[$cloister-&gt;cloister]].](else:)[Alternatively, you can head $rightOnScreen to where a small door leads [[outside-&gt;cloister]].]]}]}</tw-passagedata><tw-passagedata pid="84" name="organist&#39;s loft" tags="" position="1823,3334" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 18)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $organistsLoft of a cathedral, overlooking the $nave. ($setRoomContent:) From here you may go $upOnScreen to the [[altarboys&#39; choir]], or down some steps to the [[$vapenhus-&gt;vapenhus]].}[]] }</tw-passagedata><tw-passagedata pid="85" name="crossing" tags="" position="1659,2739" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 13)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are at the $crossing of the $temple. ($setRoomContent:) (if: $architecture is &quot;cathedral&quot;)[From here you may head [[$leftOnScreen-&gt;left transept]] to the $leftTransept or [[$rightOnScreen-&gt;right transept]] to the $rightTransept.] To the $upOnScreen is the [[$altar-&gt;altar]] and to the $downOnScreen is the [[$nave-&gt;nave]]. (unless: $decadeNumber is in (a:1770))[There are also steps leading up into the $temple&#39;s [[$spire-&gt;spire]].] (if: $architecture is &quot;church&quot;) [and steps leading down into the [[crypt]].] 
}]}</tw-passagedata><tw-passagedata pid="86" name="altarboys&#39; choir" tags="" position="1821,3183" size="100,100">{($setImage:)
(set: $god to &quot;Diana&quot;)
(set: $thisRoomsNumber to 1)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: white) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{(if: $architecture is in (a: &quot;church&quot;, &quot;cathedral&quot;))[You are in (if: $temple is &quot;temple&quot;)[$god&#39;s gallery](else:)[the $choirboysStalls of a $temple].](else:)[$contentSentence.] ($setRoomContent:) (if: $architecture is &quot;cathedral&quot;) [From here you can go $downOnScreen to the [[$organistsLoft-&gt;organist&#39;s loft]].] (if: $optionalPaths contains 5 or $architecture is &quot;church&quot;) [There are steps leading down and to the $leftOnScreen from here to the [[$nave-&gt;nave]].] }]}</tw-passagedata><tw-passagedata pid="87" name="cloister" tags="" position="1856,3004" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 17)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $cloister(unless: $decadeNumber is 1970)[ of a cathedral, which consists of a cental courtyard surrounded by a $collonade]. ($setRoomContent:) From here, you may head $leftOnScreen through a small door to the [[$nave-&gt;nave]]. (if: $optionalPaths contains 2) [There are also some steps leading down to the [[$crypt-&gt;crypt]].] }]}</tw-passagedata><tw-passagedata pid="88" name="crypt" tags="" position="1858,2869" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 9)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: (rgb: 155, 100, 0)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{(unless: $floorInt is 15)[You are in the $churchcrypt beneath the $temple. ($setRoomContent:)

(if: $architecture is &quot;cathedral&quot;)[From here you may go up some steps to the [[$rightOnScreen transept-&gt;right transept]]](if: $architecture is &quot;cathedral&quot; and $optionalPaths contains 2)[ or up some steps to the [[cloister]]]. (if: $architecture is in (a: &quot;cathedral&quot;) or $decadeNumber is in $temples)[A small doorway leads $leftOnScreen to the [[$reliquary-&gt;reliquary]].] (if: $architecture is &quot;church&quot;) [There are also steps leading up to the [[$crossing-&gt;crossing]].]](else:)[You are in the narrow entrance hall to Chingle Hall. From here you can go $leftOnScreen to the main hall.]}]}</tw-passagedata><tw-passagedata pid="89" name="right transept" tags="" position="1853,2739" size="100,100">($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 14)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $rightTransept of a cathedral. ($setRoomContent:) From here you can go [[$leftOnScreen-&gt;crossing]] to the crossing. There are also steps leading down from here to the [[crypt]].  }[]]</tw-passagedata><tw-passagedata pid="90" name="reliquary" tags="" position="1476,2870" size="100,100">($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 15)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $reliquary (unless: $decadeNumber is 1970)[of a $temple, where the $sacred $symbols of $prophets and $saints are stored]. ($setRoomContent:) From here you may head $rightOnScreen to the [[$churchcrypt-&gt;crypt]](if:$architecture is &quot;cathedral&quot;)[ or up some steps to the [[$leftOnScreen transept-&gt;left transept]]].[]}]</tw-passagedata><tw-passagedata pid="91" name="left transept" tags="" position="1361,2738" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 12)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $leftTransept of a cathedral. ($setRoomContent:) From here you can go $rightOnScreen to the [[crossing]] or down some steps to the [[reliquary]]. (if: $optionalPaths contains 1) [Alternatively, a small door leads to the [[vestry]].] }[]]}</tw-passagedata><tw-passagedata pid="92" name="vestry" tags="" position="1361,2574" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 2)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: (rgb: 255, 100, 100)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $vestry of a $temple, where the $vestments, $hymnals, $missals and other $liturgicalTexts are stored. ($setRoomContent:) From here you can head $rightOnScreen through a small door that leads to the [[$altar-&gt;altar]] or $upOnScreen to the [[$clergyHouse-&gt;clergy house]]. (if: $architecture is &quot;cathedral&quot; and $optionalPaths contains 1) [Alternatively, a small door leads to the [[$leftOnScreen transept-&gt;left transept]].] A tiny, barely visible door leads to the [[$priestsHole-&gt;priest&#39;s hole]]. []]}</tw-passagedata><tw-passagedata pid="93" name="altar" tags="" position="1654,2573" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 7)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
(if: $decadeNumber is 170)[(set: $god to &quot;Jupiter&quot;)]
($refreshSentences:)
(border-color: green) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are at the $altar (unless: $decadeNumber is 1970)[of the $temple](if: $decadeNumber is in $temples)[ at the foot of the gargantuan statue of $god]. ($setRoomContent:) From here you may go [[$downOnScreen-&gt;crossing]] to the $crossing of the $temple. A small door leads from here to the [[$vestry-&gt;vestry]]. }[]]}</tw-passagedata><tw-passagedata pid="94" name="spire" tags="" position="1786,2571" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 8)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: yellow) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(unless: $decadeNumber is 1970)[You are in the dilapidated $spire of a $temple.](else:)[You are in the church of saints Alexander, John and Paul in the cathedral of the intercession. ($setRoomContent:) From here you may head down to the [[$crossing-&gt;crossing]] of the $temple, or you may head $rightOnScreen to the [[church of St Vasily the Blessed-&gt;bell tower]].] (else:) [($room8content:) From here you may only head down to the $temple&#39;s [[$crossing-&gt;crossing]].]]}</tw-passagedata><tw-passagedata pid="95" name="clergy house" tags="" position="1200,2436" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 4)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: purple) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $clergyHouse of a $temple. ($setRoomContent:) From here you may head back to the [[$vestry-&gt;vestry]]. }[]]}</tw-passagedata><tw-passagedata pid="96" name="priest&#39;s hole" tags="" position="1356,2441" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 6)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: cyan) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in a tiny cramped hiding place in a $temple(if: $temple is in (a:&quot;church&quot;,&quot;cathedral&quot;))[ where priests can hide from persecutors]. ($setRoomContent:) From here you may only head back to the [[$vestry-&gt;vestry]]. []}]}</tw-passagedata><tw-passagedata pid="97" name="get complex map" tags="startup" position="29,1197" size="100,100">{
&lt;!-- generates a map and starting point from the templates  
Presupposes: architecture and directionIn have been assigned
Called by: in-game passages
--&gt;
(set: $getComplexMap to
(macro: [
	($setExceptionArchitectures:)
	($setDefaultStartRoom:)
	($setUpMapDebugging:)
	($adjustStartRoom:)
	($setDirections:)
	(output-data:&quot;&quot;)
	]
	))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;set default start room]]
[[ -&gt;set directions]]
[[ -&gt;adjust start room]]
[[ -&gt;set exception architectures]]
}</tw-passagedata><tw-passagedata pid="98" name="random flip left right" tags="startup" position="385,1119" size="100,100">{
&lt;!-- decides whether to flip the map left to right.--&gt;

(set: $randomFlipLR to 
(macro: [
	(set: _randomFlipLR to ($srandom: 1))
	(if: _randomFlipLR is 1) [
		(set: $transform to $transform + (a: &quot;flipLR&quot;))
		(set: $rightOnScreen to ($flipCompass: $rightOnScreen))
		(set: $leftOnScreen to ($flipCompass: $leftOnScreen))
		(set: $rightDirections to $rightDirections + (a: $rightOnScreen))
		(set: $upDirections to $upDirections + (a: $upOnScreen))
		($flipStartLR:)
		]
	(output-data:&quot;&quot;)
	]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;srandom]]
[[ -&gt;flip compass]]
[[ -&gt;flip start left right]]
}</tw-passagedata><tw-passagedata pid="99" name="random flip up down" tags="startup" position="382,1232" size="100,100">{
&lt;!-- decides whether to flip the map up to down.  
Presupposes: setScreenValuesForFlat has been called, fixing values for upScreen and downScreen etc
Called By: getComplexMap
--&gt;
(set: $randomFlipUD to 
(macro: [
	(set: _x to ($srandom: 1))
	(if: _x is 1) [
		(set: $transform to $transform + (a: &quot;flipUD&quot;))
		(set: $downOnScreen to ($flipCompass: $downOnScreen))
		(set: $upOnScreen to ($flipCompass: $upOnScreen))
		(set: $rightDirections to $rightDirections + (a: $rightOnScreen))
		(set: $upDirections to $upDirections + (a: $upOnScreen))
		($flipStartUD:)
		]
	(output-data:&quot;&quot;)
	]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;srandom]]
[[ -&gt;flip compass]]
[[ -&gt;flip start up down]]
}</tw-passagedata><tw-passagedata pid="100" name="rotate map by random" tags="startup" position="383,1012" size="100,100">{
&lt;!-- rotates flat by random amount, 90 degree increments. Calls random number and does a series of &lt; tests on it, rotating the flat by 90 degrees for each one it passes. 
Called By: getComplexMap
--&gt;
(set: $rotateMapByRandom90 to 
(macro: [
	(set: $rotation to 0)
	(set: _x to ($srandom: 3))
	(if: _x &lt; 1) [($rotateMap90:)
					(set: $rotation to $rotation + 90)]
	(if: _x &lt; 2) [($rotateMap90:)
					(set: $rotation to $rotation + 90)]
	(if: _x &lt; 3) [($rotateMap90:)
					(set: $rotation to $rotation + 90)]
	(set: $transform to $transform + (a: &quot;rotate &quot; + (str: $rotation)))
	(output-data:_x)
	]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;srandom]]
[[ -&gt;rotate map 90]]

}</tw-passagedata><tw-passagedata pid="101" name="flip compass" tags="startup" position="590,1149" size="100,100">{
&lt;!-- flips a given compass point, turning north to south, etc.  
Presupposes: it receives a compass point as argument
Called By: flipFlatIfRandom
--&gt;
(set: $flipCompass to 
(macro: str-type _direction, [
	(set: _x to (cond: 
		_direction is &quot;north&quot;,&quot;south&quot;,
		_direction is &quot;northeast&quot;,&quot;southwest&quot;,
		_direction is &quot;east&quot;,&quot;west&quot;,
		_direction is &quot;southeast&quot;,&quot;northwest&quot;,
		_direction is &quot;south&quot;,&quot;north&quot;,
		_direction is &quot;southwest&quot;,&quot;northeast&quot;,
		_direction is &quot;west&quot;,&quot;east&quot;,
		_direction is &quot;northwest&quot;,&quot;southeast&quot;,
		&quot;error: flipCompass not given a compass direction&quot;))
	(output-data:_x)
	]))
}</tw-passagedata><tw-passagedata pid="102" name="flip start left right" tags="startup" position="589,1041" size="100,100">{
&lt;!-- maps a start room onto its nearest opposite start room at the other side of the map.  
Presupposes: startRoom has been assigned. The entrances listed are opposite.  
Called By: randomFlipLR
--&gt;
(set: $flipStartLR to 
(macro: [
	(set: _x to (cond: 
		$startRoom is &quot;left entrance&quot;, &quot;right entrance&quot;,
		$startRoom is &quot;right entrance&quot;, &quot;left entrance&quot;,
		$startRoom is &quot;tower entrance&quot;, &quot;tower entrance 2&quot;,
		$startRoom is &quot;tower entrance 2&quot;, &quot;tower entrance&quot;,
		$startRoom is &quot;block entrance 2&quot;, &quot;block entrance 4&quot;,
		$startRoom is &quot;block entrance 4&quot;, &quot;block entrance 2&quot;,
		$startRoom))
	(set: $startRoom to _x)
	(set: $strtRoomz to $strtRoomz + (a:$startRoom))
	(output-data:&quot;&quot;)
	]))
}</tw-passagedata><tw-passagedata pid="103" name="room 7" tags="" position="1662,398" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 7)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;1757&quot;)]
(if: $decadeNumber is 1990)[($overrideImage: &quot;19907&quot;)]



(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)}(border-color: green) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.

From here you may go [[$rightHill_5 $rightOnScreen-&gt;right entrance]] or [[$upHill_1 $upOnScreen-&gt;passage 8]]. 

(if: 5 is in $optionalPaths)[You may also go (link: $leftHill_4 + $leftOnScreen)[(goto: &quot;passage 1&quot;)]]

(if: 11 is in $optionalPaths)[An alternative is to go (link: $downHill_2 + $downOnScreen)[(goto: &quot;passage 7&quot;)].]
]</tw-passagedata><tw-passagedata pid="104" name="rotate map 90" tags="startup" position="588,931" size="100,100">{
&lt;!-- rotates flat by 90 degrees, turning north to east, etc. Rotates the startRoom in the opposite direction to compensate.   
Presupposes: values have been assigned
Called By: rotateMapByRandom90
--&gt;
(set: $rotateMap90 to 
(macro: [
	(set: $downOnScreen to ($rotateCompass90: $downOnScreen))
	(set: $upOnScreen to ($rotateCompass90: $upOnScreen))
	(set: $rightOnScreen to ($rotateCompass90: $rightOnScreen))
	(set: $leftOnScreen to ($rotateCompass90: $leftOnScreen))
	(set: $rightDirections to $rightDirections + (a: $rightOnScreen))
	(set: $upDirections to $upDirections + (a: $upOnScreen))
	($rotateStartBy270:)
	(output-data:&quot;&quot;)
	]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;rotate compass 90]]
[[ -&gt;rotate start by 270]]
}</tw-passagedata><tw-passagedata pid="105" name="rotate compass 90" tags="startup" position="721,868" size="100,100">{
&lt;!-- further rotation functions.  
Presupposes: they receive a compass point as argument
Called By: various
--&gt;
(set: $rotateCompass90 to 
(macro: str-type _direction, [
	(set: _rotate90 to ($rotateCompass45: ($rotateCompass45: _direction)))
	(output-data:_rotate90)
	]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;rotate compass 45]]
}</tw-passagedata><tw-passagedata pid="106" name="rotate compass 45" tags="startup" position="853,868" size="100,100">{
&lt;!-- rotates a given compass point by 45 degrees, turning north to northeast, etc.  
Called By: various
--&gt;
(set: $rotateCompass45 to 
(macro: str-type _direction, [
	(set: _x to (cond: 
		_direction is &quot;north&quot;,&quot;northeast&quot;,
		_direction is &quot;northeast&quot;,&quot;east&quot;,
		_direction is &quot;east&quot;,&quot;southeast&quot;,
		_direction is &quot;southeast&quot;,&quot;south&quot;,
		_direction is &quot;south&quot;,&quot;southwest&quot;,
		_direction is &quot;southwest&quot;,&quot;west&quot;,
		_direction is &quot;west&quot;,&quot;northwest&quot;,
		_direction is &quot;northwest&quot;,&quot;north&quot;,
		&quot;error: rotatecompass45 not given a compass direction&quot;))
	(output-data:_x)
	]))
}</tw-passagedata><tw-passagedata pid="107" name="rotate start by 270" tags="startup" position="717,982" size="100,100">{
&lt;!-- reassigns startRoom to one that is on the CW perpendicular side of the map. When there are two entrances on that side, decides at random. Note that the startRoom cannot be higher than ground level, so the startRoom is later used to determined ground level.   
Presupposes: setScreenValuesForFlat has been called, fixing values for upScreen downScreen etc
Presupposes: startRoom has been assigned. 
Called By: rotateFlatByRandom45 (not used), rotateFlatByRandom90
--&gt;
(set: $rotateStartBy270 to 
(macro: [
	(set: _x to (cond: 
		$startRoom is &quot;top entrance&quot;, &quot;left entrance&quot;,
		$startRoom is &quot;left entrance&quot;, &quot;bottom entrance&quot;,
		$startRoom is &quot;bottom entrance&quot;, &quot;right entrance&quot;,
		$startRoom is &quot;right entrance&quot;, &quot;top entrance&quot;,
		$startRoom is &quot;block entrance 1&quot;, &quot;block entrance 2&quot;,
		$startRoom is &quot;block entrance 2&quot;, &quot;block entrance 3&quot;,
		$startRoom is &quot;block entrance 3&quot;, &quot;block entrance 4&quot;,
		$startRoom is &quot;block entrance 4&quot;, &quot;block entrance 1&quot;,
		$startRoom))
	(set: $startRoom to _x)
	(set: $strtRoomz to $strtRoomz + (a:$startRoom))
	(output-data:&quot;&quot;)
	]))
}</tw-passagedata><tw-passagedata pid="108" name="choose architecture" tags="startup" position="22,342" size="100,100">{
(set: $chooseArchitecture to
(macro: [
	(set: $architecture to $referenceString of $architectureDataBase)
	(output-data:&quot;&quot;)
	]
	))
	
[[ -&gt;architecture Database]]
}</tw-passagedata><tw-passagedata pid="109" name="architecture Database" tags="startup" position="180,344" size="100,100">{
(set: $architectureDataBase to (dm: 
	&quot;1&quot;,&quot;default&quot;,
	&quot;11&quot;,&quot;default&quot;,
	&quot;21&quot;,&quot;block&quot;,
	&quot;31&quot;,&quot;default&quot;,
	&quot;41&quot;,&quot;default&quot;,
	&quot;51&quot;,&quot;block&quot;,
	&quot;61&quot;,&quot;block&quot;,
	&quot;71&quot;,&quot;default&quot;,
	&quot;81&quot;,&quot;default&quot;,
	&quot;91&quot;,&quot;block&quot;,
	&quot;101&quot;,&quot;default&quot;,
	&quot;111&quot;,&quot;arena&quot;,
	&quot;121&quot;,&quot;courtyard house&quot;,
	&quot;131&quot;,&quot;castle&quot;,
	&quot;141&quot;,&quot;villa&quot;,
	&quot;151&quot;,&quot;villa&quot;,
	&quot;161&quot;,&quot;default&quot;,
	&quot;171&quot;,&quot;church&quot;,
	&quot;181&quot;,&quot;house&quot;,
	&quot;191&quot;,&quot;default&quot;,
	&quot;201&quot;,&quot;default&quot;,
	&quot;211&quot;,&quot;default&quot;,
	&quot;221&quot;,&quot;academy&quot;,
	&quot;231&quot;,&quot;house&quot;,
	&quot;241&quot;,&quot;courtyard house&quot;,
	&quot;251&quot;,&quot;castle&quot;,
	&quot;261&quot;,&quot;default&quot;,
	&quot;271&quot;,&quot;church&quot;,
	&quot;281&quot;,&quot;house&quot;,
	&quot;291&quot;,&quot;default&quot;,
	&quot;301&quot;,&quot;default&quot;,
	&quot;311&quot;,&quot;arena&quot;,
	&quot;321&quot;,&quot;academy&quot;,
	&quot;331&quot;,&quot;default&quot;,
	&quot;341&quot;,&quot;mansion&quot;,
	&quot;351&quot;,&quot;default&quot;,
	&quot;361&quot;,&quot;pit&quot;,
	&quot;371&quot;,&quot;default&quot;,
	&quot;381&quot;,&quot;cathedral&quot;,
	&quot;391&quot;,&quot;block&quot;,
	&quot;401&quot;,&quot;default&quot;,
	&quot;411&quot;,&quot;default&quot;,
	&quot;421&quot;,&quot;mansion&quot;,
	&quot;431&quot;,&quot;church&quot;,
	&quot;441&quot;,&quot;default&quot;,
	&quot;451&quot;,&quot;block&quot;,
	&quot;461&quot;,&quot;block&quot;,
	&quot;471&quot;,&quot;default&quot;,
	&quot;481&quot;,&quot;house&quot;,
	&quot;491&quot;,&quot;block&quot;,
	&quot;501&quot;,&quot;default&quot;,
	&quot;511&quot;,&quot;default&quot;,
	&quot;521&quot;,&quot;pit&quot;,
	&quot;531&quot;,&quot;lakeside&quot;,
	&quot;541&quot;,&quot;castle&quot;,
	&quot;551&quot;,&quot;default&quot;,
	&quot;561&quot;,&quot;pit&quot;,
	&quot;571&quot;,&quot;castle&quot;,
	&quot;581&quot;,&quot;default&quot;,
	&quot;591&quot;,&quot;block&quot;,
	&quot;601&quot;,&quot;default&quot;,
	&quot;611&quot;,&quot;default&quot;,
	&quot;621&quot;,&quot;mansion&quot;,
	&quot;631&quot;,&quot;palace&quot;,
	&quot;641&quot;,&quot;souk&quot;,
	&quot;651&quot;,&quot;castle&quot;,
	&quot;661&quot;,&quot;default&quot;,
	&quot;671&quot;,&quot;mosque&quot;,
	&quot;681&quot;,&quot;default&quot;,
	&quot;691&quot;,&quot;default&quot;,
	&quot;701&quot;,&quot;default&quot;,
	&quot;711&quot;,&quot;default&quot;,
	&quot;721&quot;,&quot;mansion&quot;,
	&quot;731&quot;,&quot;default&quot;,
	&quot;741&quot;,&quot;palace&quot;,
	&quot;751&quot;,&quot;castle&quot;,
	&quot;761&quot;,&quot;lakeside&quot;,
	&quot;771&quot;,&quot;church&quot;,
	&quot;781&quot;,&quot;mansion&quot;,
	&quot;791&quot;,&quot;block&quot;,
	&quot;801&quot;,&quot;default&quot;,
	&quot;811&quot;,&quot;lakeside&quot;,
	&quot;821&quot;,&quot;mansion&quot;,
	&quot;831&quot;,&quot;house&quot;,
	&quot;841&quot;,&quot;castle&quot;,
	&quot;851&quot;,&quot;tower&quot;,
	&quot;861&quot;,&quot;default&quot;,
	&quot;871&quot;,&quot;cathedral&quot;,
	&quot;881&quot;,&quot;default&quot;,
	&quot;891&quot;,&quot;default&quot;,
	&quot;901&quot;,&quot;default&quot;,
	&quot;911&quot;,&quot;arena&quot;,
	&quot;921&quot;,&quot;mountainside&quot;,
	&quot;931&quot;,&quot;castle&quot;,
	&quot;941&quot;,&quot;tower&quot;,
	&quot;951&quot;,&quot;courtyard house&quot;,
	&quot;961&quot;,&quot;default&quot;,
	&quot;971&quot;,&quot;cathedral&quot;,
	&quot;981&quot;,&quot;block&quot;,
	&quot;991&quot;,&quot;block&quot;,
	&quot;1001&quot;,&quot;cathedral&quot;,
	&quot;1011&quot;,&quot;cathedral&quot;,
	&quot;1021&quot;,&quot;tower&quot;,
	&quot;1031&quot;,&quot;castle&quot;,
	&quot;1041&quot;,&quot;tower&quot;,
	&quot;1051&quot;,&quot;courtyard house&quot;,
	&quot;1061&quot;,&quot;church&quot;,
	&quot;1071&quot;,&quot;cathedral&quot;,
	&quot;1081&quot;,&quot;cathedral&quot;,
	&quot;1091&quot;,&quot;default&quot;,
	&quot;1101&quot;,&quot;default&quot;,
	&quot;1111&quot;,&quot;default&quot;,
	&quot;1121&quot;,&quot;church&quot;,
	&quot;1131&quot;,&quot;tower&quot;,
	&quot;1141&quot;,&quot;default&quot;,
	&quot;1151&quot;,&quot;default&quot;,
	&quot;1161&quot;,&quot;block&quot;,
	&quot;1171&quot;,&quot;cathedral&quot;,
	&quot;1181&quot;,&quot;castle&quot;,
	&quot;1191&quot;,&quot;ship&quot;,
	&quot;1201&quot;,&quot;castle&quot;,
	&quot;1211&quot;,&quot;default&quot;,
	&quot;1221&quot;,&quot;house&quot;,
	&quot;1231&quot;,&quot;default&quot;,
	&quot;1241&quot;,&quot;default&quot;,
	&quot;1251&quot;,&quot;default&quot;,
	&quot;1261&quot;,&quot;default&quot;,
	&quot;1271&quot;,&quot;mountainside&quot;,
	&quot;1281&quot;,&quot;ship&quot;,
	&quot;1291&quot;,&quot;default&quot;,
	&quot;1301&quot;,&quot;default&quot;,
	&quot;1311&quot;,&quot;palace&quot;,
	&quot;1321&quot;,&quot;default&quot;,
	&quot;1331&quot;,&quot;default&quot;,
	&quot;1341&quot;,&quot;default&quot;,
	&quot;1351&quot;,&quot;default&quot;,
	&quot;1361&quot;,&quot;mansion&quot;,
	&quot;1371&quot;,&quot;church&quot;,
	&quot;1381&quot;,&quot;house&quot;,
	&quot;1391&quot;,&quot;default&quot;,
	&quot;1401&quot;,&quot;default&quot;,
	&quot;1411&quot;,&quot;default&quot;,
	&quot;1421&quot;,&quot;default&quot;,
	&quot;1431&quot;,&quot;default&quot;,
	&quot;1441&quot;,&quot;default&quot;,
	&quot;1451&quot;,&quot;default&quot;,
	&quot;1461&quot;,&quot;block&quot;,
	&quot;1471&quot;,&quot;cathedral&quot;,
	&quot;1481&quot;,&quot;block&quot;,
	&quot;1491&quot;,&quot;default&quot;,
	&quot;1501&quot;,&quot;default&quot;,
	&quot;1511&quot;,&quot;default&quot;,
	&quot;1521&quot;,&quot;block&quot;,
	&quot;1531&quot;,&quot;default&quot;,
	&quot;1541&quot;,&quot;default&quot;,
	&quot;1551&quot;,&quot;ship&quot;,
	&quot;1561&quot;,&quot;tower&quot;,
	&quot;1571&quot;,&quot;chingle&quot;,
	&quot;1581&quot;,&quot;house&quot;,
	&quot;1591&quot;,&quot;default&quot;,
	&quot;1601&quot;,&quot;default&quot;,
	&quot;1611&quot;,&quot;default&quot;,
	&quot;1621&quot;,&quot;tower&quot;,
	&quot;1631&quot;,&quot;default&quot;,
	&quot;1641&quot;,&quot;house&quot;,
	&quot;1651&quot;,&quot;default&quot;,
	&quot;1661&quot;,&quot;block&quot;,
	&quot;1671&quot;,&quot;house&quot;,
	&quot;1681&quot;,&quot;house&quot;,
	&quot;1691&quot;,&quot;default&quot;,
	&quot;1701&quot;,&quot;default&quot;,
	&quot;1711&quot;,&quot;block&quot;,
	&quot;1721&quot;,&quot;castle&quot;,
	&quot;1731&quot;,&quot;block&quot;,
	&quot;1741&quot;,&quot;house&quot;,
	&quot;1751&quot;,&quot;default&quot;,
	&quot;1761&quot;,&quot;tower&quot;,
	&quot;1771&quot;,&quot;cathedral&quot;,
	&quot;1781&quot;,&quot;castle&quot;,
	&quot;1791&quot;,&quot;square&quot;,
	&quot;1801&quot;,&quot;block&quot;,
	&quot;1811&quot;,&quot;block&quot;,
	&quot;1821&quot;,&quot;house&quot;,
	&quot;1831&quot;,&quot;default&quot;,
	&quot;1841&quot;,&quot;mansion&quot;,
	&quot;1851&quot;,&quot;block&quot;,
	&quot;1861&quot;,&quot;castle&quot;,
	&quot;1871&quot;,&quot;house&quot;,
	&quot;1881&quot;,&quot;block&quot;,
	&quot;1891&quot;,&quot;block&quot;,
	&quot;1901&quot;,&quot;default&quot;,
	&quot;1911&quot;,&quot;arena&quot;,
	&quot;1921&quot;,&quot;block&quot;,
	&quot;1931&quot;,&quot;block&quot;,
	&quot;1941&quot;,&quot;castle&quot;,
	&quot;1951&quot;,&quot;default&quot;,
	&quot;1961&quot;,&quot;castle&quot;,
	&quot;1971&quot;,&quot;cathedral&quot;,
	&quot;1981&quot;,&quot;souk&quot;,
	&quot;1991&quot;,&quot;default&quot;,
	&quot;2001&quot;,&quot;default&quot;,
	&quot;2011&quot;,&quot;default&quot;,
	&quot;2021&quot;,&quot;default&quot;,
	&quot;2031&quot;,&quot;default&quot;,
	&quot;2041&quot;,&quot;default&quot;,
	))
}</tw-passagedata><tw-passagedata pid="110" name="random nums" tags="startup" position="193,2411" size="100,100">{
&lt;!--Because we need the system to generate the same random palace every time, the random values from one initial run must be stored in a database. This is that database.   --&gt;

(set: $randomNums to (dm: 
&quot;0&quot;,	(a:13,0,25,22,21,17,0,9,10,19,3,9,16,7,15,14,17,7,4,13,25,12,4,17,4),
&quot;10&quot;,	(a:8,5,24,22,4,8,12,2,0,15,5,0,20,14,8,25,12,19,2,8,11,3,5,21,7),
&quot;20&quot;,	(a:14,20,23,7,22,21,0,0,21,1,15,0,8,24,12,20,0,22,25,7,24,16,24,3,2),
&quot;30&quot;,	(a:17,23,22,23,23,4,19,12,0,4,10,11,21,11,16,1,8,7,4,24,11,4,12,13,15),
&quot;40&quot;,	(a:16,10,7,22,7,23,21,24,21,14,10,0,2,17,23,24,19,20,2,8,11,9,25,16,2),
&quot;50&quot;,	(a:23,2,21,23,9,8,0,17,4,15,17,9,13,24,14,17,20,11,17,15,6,22,2,7,22),
&quot;60&quot;,	(a:14,23,15,0,4,6,15,10,8,11,9,22,15,20,12,21,4,7,10,21,20,7,24,0,12),
&quot;70&quot;,	(a:4,1,17,15,16,24,9,6,23,1,5,16,19,16,12,17,4,10,16,15,1,17,13,18,1),
&quot;80&quot;,	(a:5,18,6,23,4,1,4,11,3,1,15,9,3,20,18,7,13,2,18,16,9,21,12,11,16),
&quot;90&quot;,	(a:3,8,13,7,7,21,3,0,15,5,19,3,16,20,10,17,24,18,24,22,22,13,4,6,25),
&quot;100&quot;,	(a:20,8,10,8,18,2,22,9,11,4,20,3,12,17,20,13,3,5,20,10,8,25,17,22,1),
&quot;110&quot;,	(a:18,16,11,24,15,3,19,5,19,20,20,18,4,16,13,11,2,9,13,22,1,14,25,20,11),
&quot;120&quot;,	(a:6,21,5,15,1,15,7,4,1,17,20,18,12,1,4,3,0,9,12,14,13,22,15,6,11),
&quot;130&quot;,	(a:25,19,19,16,8,20,21,11,3,11,21,20,25,3,6,7,20,5,16,22,21,3,2,13,12),
&quot;140&quot;,	(a:12,25,2,0,1,11,14,22,10,22,17,11,3,17,1,24,21,6,8,17,17,21,19,18,22),
&quot;150&quot;,	(a:17,0,9,14,0,16,15,6,1,23,7,6,24,25,5,6,13,10,14,6,18,23,15,12,5),
&quot;160&quot;,	(a:5,15,10,15,14,2,18,0,14,25,20,17,23,8,11,10,2,14,24,8,1,22,1,22,23),
&quot;170&quot;,	(a:6,13,4,1,6,12,22,22,5,8,6,4,19,16,19,10,13,17,23,19,1,25,1,22,10),
&quot;180&quot;,	(a:13,11,17,0,12,7,24,17,9,4,8,3,13,20,20,10,19,21,5,6,14,18,6,5,19),
&quot;190&quot;,	(a:16,18,25,21,17,15,9,6,16,22,15,21,25,8,7,6,8,23,17,23,7,0,20,15,12),&quot;200&quot;,	(a:20,10,21,6,10,12,14,11,10,23,7,15,22,7,13,11,13,1,0,15,16,1,23,16,6),
&quot;210&quot;,	(a:23,4,4,22,21,1,16,16,19,10,7,24,9,13,7,25,22,16,10,3,18,9,19,18,25),
&quot;220&quot;,	(a:6,1,25,22,0,17,21,18,24,14,14,11,12,17,19,13,6,21,7,15,15,3,21,13,14),
&quot;230&quot;,	(a:23,25,21,23,12,8,2,16,23,4,0,24,21,13,8,16,18,4,2,24,0,1,13,18,6),
&quot;240&quot;,	(a:16,1,9,2,12,23,24,8,14,25,24,14,2,7,2,21,18,11,19,12,8,8,5,19,21),
&quot;250&quot;,	(a:2,6,19,14,21,0,5,17,15,13,13,1,8,25,13,23,4,10,11,11,2,5,2,15,14),
&quot;260&quot;,	(a:3,25,16,22,0,19,13,20,14,12,16,19,23,23,16,0,17,13,12,9,8,16,25,1,25),
&quot;270&quot;,	(a:12,16,16,13,2,13,10,11,21,7,24,2,21,7,15,12,16,3,4,11,5,20,6,2,24),
&quot;280&quot;,	(a:4,21,15,0,9,19,9,25,20,4,3,3,10,3,14,16,22,17,3,13,7,8,22,21,4),
&quot;290&quot;,	(a:9,10,3,15,19,17,24,0,6,13,25,12,3,18,20,3,9,10,21,25,23,22,1,24,9),
&quot;300&quot;,	(a:18,17,21,16,0,25,10,7,0,15,19,20,4,25,8,2,1,10,12,1,21,6,2,21,2),
&quot;310&quot;,	(a:14,24,9,9,7,18,23,21,5,19,20,6,0,21,3,12,15,0,0,20,20,13,10,21,0),
&quot;320&quot;,	(a:10,24,10,14,22,2,17,4,22,2,8,23,24,10,8,3,17,24,19,6,15,9,17,2,6),
&quot;330&quot;,	(a:8,0,1,11,4,12,9,1,3,2,17,11,7,11,18,13,23,2,11,19,18,12,16,20,22),
&quot;340&quot;,	(a:2,2,6,22,13,21,3,12,22,11,25,4,11,2,1,23,14,9,6,0,16,1,16,9,2),
&quot;350&quot;,	(a:5,23,23,16,1,12,24,20,5,18,7,18,6,14,2,6,10,2,4,24,9,7,8,18,0),
&quot;360&quot;,	(a:12,1,25,1,11,0,4,7,3,20,18,7,23,3,5,15,20,9,7,12,22,15,16,11,18),
&quot;370&quot;,	(a:24,14,8,19,11,16,20,13,23,13,3,9,5,21,5,17,22,19,20,9,25,2,23,18,11),
&quot;380&quot;,	(a:18,21,3,25,14,25,20,13,5,1,11,2,3,25,19,2,10,11,17,1,21,1,8,1,11),
&quot;390&quot;,	(a:18,9,24,19,13,0,20,9,25,3,13,0,7,16,0,1,19,12,4,8,12,12,10,18,10),&quot;400&quot;,	(a:15,4,19,17,9,3,5,22,2,2,13,9,8,6,14,19,8,14,3,5,16,19,25,10,2),
&quot;410&quot;,	(a:15,6,22,20,25,23,12,2,4,15,11,11,13,1,8,14,18,16,24,25,13,19,6,21,20),
&quot;420&quot;,	(a:22,23,12,9,9,25,12,9,22,19,23,3,8,25,16,24,24,5,2,23,21,5,20,8,2),
&quot;430&quot;,	(a:14,18,15,8,20,13,1,23,4,3,18,22,12,19,23,12,11,14,1,5,9,22,21,6,17),
&quot;440&quot;,	(a:8,19,7,25,19,21,12,9,12,9,18,23,16,10,17,5,17,2,11,4,12,4,7,23,15),
&quot;450&quot;,	(a:18,5,12,3,22,2,6,23,18,21,24,2,9,25,16,2,13,15,17,22,22,10,10,14,6),
&quot;460&quot;,	(a:5,9,5,23,1,18,22,0,10,1,8,24,17,11,13,25,8,13,14,12,1,21,10,13,24),
&quot;470&quot;,	(a:3,21,24,10,12,3,12,12,1,22,14,17,1,18,23,6,10,10,20,21,4,23,4,18,15),
&quot;480&quot;,	(a:12,7,22,10,17,21,22,18,8,4,6,8,16,3,0,12,5,19,0,6,2,2,3,19,8),
&quot;490&quot;,	(a:5,22,18,8,5,5,7,18,14,2,13,17,22,14,11,21,25,10,1,21,9,7,24,9,21),
&quot;500&quot;,	(a:19,15,7,14,7,12,17,14,20,15,24,4,5,10,3,18,5,7,4,22,20,12,11,12,21),
&quot;510&quot;,	(a:19,14,18,11,10,2,11,11,19,22,3,19,23,6,0,12,9,4,9,20,22,10,5,13,20),
&quot;520&quot;,	(a:23,25,7,5,17,8,0,3,3,17,1,7,14,13,11,17,17,21,18,20,13,20,10,2,15),
&quot;530&quot;,	(a:6,18,25,16,5,24,21,12,21,12,0,4,8,3,15,11,9,14,12,6,14,9,20,14,23),
&quot;540&quot;,	(a:9,25,17,25,1,3,12,20,8,0,1,1,14,8,2,9,18,2,2,19,7,0,6,6,16),
&quot;550&quot;,	(a:11,1,23,25,19,18,1,3,25,12,24,8,24,8,18,20,14,10,17,23,15,6,23,18,24),
&quot;560&quot;,	(a:1,6,22,14,23,1,12,5,13,14,16,4,14,6,25,23,21,20,19,12,2,4,21,15,25),
&quot;570&quot;,	(a:23,13,18,9,16,3,25,13,18,15,13,5,8,6,22,7,9,16,24,1,12,3,7,2,11),
&quot;580&quot;,	(a:18,17,3,5,12,4,25,15,7,24,1,2,0,11,11,9,15,18,9,15,22,20,10,1,5),
&quot;590&quot;,	(a:2,14,8,19,17,23,4,8,4,9,14,24,5,7,4,3,7,2,25,8,13,25,0,5,0),&quot;600&quot;,	(a:3,1,15,22,16,20,2,4,20,25,1,11,9,0,9,3,25,7,11,14,13,8,17,6,0),
&quot;610&quot;,	(a:19,12,25,17,21,16,11,23,14,11,1,5,6,19,19,3,12,10,17,0,15,7,24,9,21),
&quot;620&quot;,	(a:5,15,20,5,19,2,25,20,13,11,25,3,11,13,9,21,2,0,8,19,18,12,19,5,25),
&quot;630&quot;,	(a:20,18,25,18,1,1,6,22,22,20,21,6,15,22,10,18,3,14,13,20,17,15,3,4,25),
&quot;640&quot;,	(a:22,8,12,2,0,18,8,6,23,22,9,18,3,10,17,7,10,1,6,14,0,15,18,20,18),
&quot;650&quot;,	(a:16,20,2,7,6,8,11,2,15,18,16,24,24,7,23,21,25,18,25,17,3,9,23,5,4),
&quot;660&quot;,	(a:21,4,8,25,17,16,14,8,14,5,15,11,9,4,25,1,2,4,9,13,14,5,22,2,16),
&quot;670&quot;,	(a:21,20,15,15,21,2,19,22,13,1,7,2,25,0,7,4,2,22,6,22,16,6,16,13,1),
&quot;680&quot;,	(a:7,24,13,19,25,21,5,9,22,6,10,0,1,20,22,0,20,24,11,11,13,5,13,9,25),
&quot;690&quot;,	(a:6,24,20,11,14,7,21,25,24,15,20,20,15,19,20,1,2,7,18,13,8,14,7,5,22),
&quot;700&quot;,	(a:1,19,21,8,9,23,18,2,13,18,13,21,7,6,25,11,13,4,21,22,6,4,2,20,2),
&quot;710&quot;,	(a:8,22,12,4,1,24,7,15,5,8,10,11,21,17,18,17,1,23,14,21,12,15,21,22,4),
&quot;720&quot;,	(a:7,5,18,24,10,0,25,18,3,2,21,10,22,15,21,25,23,0,8,7,17,22,15,6,7),
&quot;730&quot;,	(a:3,6,12,1,10,2,13,23,14,16,10,11,19,7,0,10,24,10,0,9,0,17,1,20,15),
&quot;740&quot;,	(a:17,19,21,17,4,8,5,19,4,20,3,1,2,6,1,19,11,18,22,22,7,7,18,20,17),
&quot;750&quot;,	(a:4,15,14,23,11,0,0,19,22,7,15,18,0,8,25,4,6,25,8,4,12,1,4,4,23),
&quot;760&quot;,	(a:25,2,2,12,4,5,3,11,1,25,2,3,23,6,25,5,19,12,15,7,9,21,3,1,4),
&quot;770&quot;,	(a:19,12,4,5,22,17,24,18,22,16,2,7,11,3,9,2,1,9,22,10,17,10,23,10,1),
&quot;780&quot;,	(a:4,0,5,13,6,18,2,22,6,12,0,4,13,25,24,0,6,9,2,2,5,19,5,17,16),
&quot;790&quot;,	(a:23,15,24,6,22,1,6,12,7,20,16,24,2,14,14,2,24,25,25,9,24,11,25,3,4),&quot;800&quot;,	(a:24,20,12,11,22,24,12,23,23,0,19,19,21,1,21,11,3,19,17,7,12,21,19,18,23),
&quot;810&quot;,	(a:2,14,16,24,0,21,2,8,23,10,16,17,5,15,7,5,1,12,16,14,9,24,19,11,15),
&quot;820&quot;,	(a:9,17,25,20,0,21,15,9,3,25,19,8,22,19,0,20,2,1,16,20,16,5,23,9,10),
&quot;830&quot;,	(a:19,13,15,13,15,7,15,14,3,19,11,2,22,0,17,10,9,22,17,11,25,18,25,23,24),
&quot;840&quot;,	(a:1,25,3,22,5,15,17,2,12,14,13,13,9,22,13,12,11,17,23,0,24,6,21,8,25),
&quot;850&quot;,	(a:1,14,7,18,10,6,11,20,15,22,20,11,10,18,2,19,11,12,11,14,0,6,17,25,9),
&quot;860&quot;,	(a:5,12,10,19,12,4,6,20,20,18,22,6,14,21,16,9,1,1,16,4,14,10,6,11,15),
&quot;870&quot;,	(a:20,0,6,18,9,24,1,23,9,15,20,9,15,16,19,21,21,8,17,18,25,1,22,1,16),
&quot;880&quot;,	(a:23,16,4,23,4,20,12,16,3,22,12,2,1,18,16,14,8,1,1,0,12,22,25,11,15),
&quot;890&quot;,	(a:5,6,2,11,22,2,6,1,12,16,0,10,11,24,8,3,12,13,3,25,4,21,11,6,1),
&quot;900&quot;,	(a:2,11,11,16,9,20,7,10,3,4,15,5,24,20,5,8,10,18,8,6,12,8,21,9,3),
&quot;910&quot;,	(a:22,6,20,21,22,4,19,11,22,18,19,11,25,10,9,0,9,22,24,14,23,14,23,16,13),
&quot;920&quot;,	(a:7,5,21,6,7,13,19,8,13,12,13,5,13,21,7,11,2,25,12,0,14,23,7,3,11),
&quot;930&quot;,	(a:11,24,16,23,18,20,4,13,5,17,22,18,25,13,2,5,14,25,2,22,2,19,9,21,4),
&quot;940&quot;,	(a:7,8,4,24,24,0,9,24,6,24,18,16,7,5,10,14,23,15,16,5,24,15,5,1,10),
&quot;950&quot;,	(a:22,25,5,20,18,20,12,17,16,5,0,0,18,13,23,18,2,5,6,9,19,24,17,12,25),
&quot;960&quot;,	(a:5,16,13,0,7,8,1,13,9,16,8,22,22,2,17,21,18,24,9,10,2,2,14,18,18),
&quot;970&quot;,	(a:1,24,23,15,21,21,18,8,23,5,18,1,22,24,25,10,20,20,25,23,8,6,21,20,13),
&quot;980&quot;,	(a:9,1,4,3,0,15,6,14,17,5,8,18,3,16,6,7,22,9,20,22,25,19,18,9,9),
&quot;990&quot;,	(a:25,5,23,11,7,7,23,22,12,12,13,3,13,2,10,13,22,7,16,0,21,19,3,9,5),&quot;1000&quot;,	(a:21,19,20,14,8,0,25,15,15,10,22,24,12,20,7,16,3,14,18,24,1,9,17,17,5),
&quot;1010&quot;,	(a:8,18,22,16,11,13,1,12,0,4,25,13,12,8,4,21,15,16,15,0,5,12,22,17,22),
&quot;1020&quot;,	(a:17,13,21,21,8,11,17,3,9,23,4,10,22,19,4,7,21,3,0,18,7,24,16,5,12),
&quot;1030&quot;,	(a:21,16,6,17,21,8,10,23,6,7,20,13,8,11,0,24,6,2,12,9,17,7,7,7,22),
&quot;1040&quot;,	(a:13,2,8,3,22,15,5,1,5,25,1,11,5,23,6,24,11,17,15,7,19,7,17,20,9),
&quot;1050&quot;,	(a:7,6,5,22,5,7,5,25,5,6,4,8,2,9,22,21,16,15,2,19,0,5,25,4,2),
&quot;1060&quot;,	(a:14,23,18,9,21,17,25,13,15,17,17,3,5,3,23,24,23,23,5,18,23,11,21,4,10),
&quot;1070&quot;,	(a:19,17,10,11,22,7,16,15,9,24,24,17,12,20,5,14,8,7,12,7,5,20,13,2,16),
&quot;1080&quot;,	(a:13,21,20,16,11,17,10,0,20,0,5,17,7,23,1,11,20,9,11,12,8,3,18,4,19),
&quot;1090&quot;,	(a:25,14,0,7,8,14,11,18,25,3,24,8,18,0,11,7,20,10,5,6,1,11,2,12,17),
&quot;1100&quot;,	(a:22,15,7,12,1,7,9,2,2,19,20,22,20,11,22,11,12,24,3,6,23,10,9,10,17),
&quot;1110&quot;,	(a:0,6,12,12,14,4,23,23,2,23,1,10,20,0,6,17,4,22,9,3,1,18,16,4,6),
&quot;1120&quot;,	(a:7,0,0,14,10,22,3,20,11,11,6,25,17,25,8,20,18,17,2,14,2,15,25,23,19),
&quot;1130&quot;,	(a:9,6,6,15,17,14,10,12,18,4,4,24,12,8,25,5,18,6,1,19,18,24,0,19,11),
&quot;1140&quot;,	(a:23,7,1,23,18,17,20,23,12,19,3,9,24,13,15,14,14,4,14,1,8,23,20,5,6),
&quot;1150&quot;,	(a:14,13,5,19,12,5,10,25,9,5,8,9,7,12,11,6,0,25,12,25,4,14,24,6,8),
&quot;1160&quot;,	(a:14,18,14,23,21,15,16,1,24,16,16,4,21,6,22,15,14,14,5,1,24,10,5,16,4),
&quot;1170&quot;,	(a:13,8,18,11,21,11,11,23,17,22,25,20,10,8,17,12,5,1,10,4,10,21,9,1,5),
&quot;1180&quot;,	(a:12,8,3,19,0,0,5,3,16,12,24,1,13,4,7,4,16,9,13,11,18,8,3,8,17),
&quot;1190&quot;,	(a:18,18,10,20,13,25,8,8,12,16,20,21,21,13,17,6,11,13,12,13,2,11,22,7,0),&quot;1200&quot;,	(a:3,23,3,19,13,2,11,14,12,2,9,17,16,22,13,17,10,4,4,7,4,20,9,15,14),
&quot;1210&quot;,	(a:0,6,4,14,21,6,24,23,5,6,15,8,4,9,6,9,22,19,17,21,10,4,7,11,5),
&quot;1220&quot;,	(a:3,7,13,4,23,16,13,20,6,2,8,6,1,21,10,15,11,10,11,24,15,16,5,5,13),
&quot;1230&quot;,	(a:11,23,24,20,10,15,3,21,6,11,3,15,16,16,20,0,20,15,15,10,24,14,16,17,17),
&quot;1240&quot;,	(a:22,7,17,13,19,0,11,3,22,5,22,19,24,14,20,17,22,15,24,21,6,5,19,19,23),
&quot;1250&quot;,	(a:0,5,17,5,23,8,19,4,13,22,21,3,18,23,14,18,25,2,15,6,16,20,18,23,8),
&quot;1260&quot;,	(a:20,14,16,10,16,11,14,3,16,15,3,25,0,6,0,8,18,3,4,15,14,12,1,5,9),
&quot;1270&quot;,	(a:14,6,24,5,14,9,12,3,19,17,6,23,7,9,21,18,22,3,5,21,25,20,24,21,25),
&quot;1280&quot;,	(a:9,10,9,6,18,4,12,23,5,3,14,3,9,0,4,2,6,1,9,3,24,5,14,23,22),
&quot;1290&quot;,	(a:9,13,19,23,20,5,5,8,18,19,1,8,2,8,8,4,7,17,18,10,9,25,24,1,13),
&quot;1300&quot;,	(a:15,0,5,22,17,9,12,3,9,0,23,8,4,6,2,7,25,15,15,4,19,8,3,3,5),
&quot;1310&quot;,	(a:7,15,5,25,1,12,2,15,1,7,19,7,14,1,22,17,2,15,14,23,7,23,19,21,14),
&quot;1320&quot;,	(a:16,8,5,5,15,0,8,16,14,23,20,23,12,1,1,7,21,11,22,14,16,14,10,17,18),
&quot;1330&quot;,	(a:13,16,19,21,8,6,25,14,8,1,22,9,5,6,10,20,7,10,23,5,25,15,10,19,24),
&quot;1340&quot;,	(a:10,17,20,6,15,25,3,14,21,8,3,5,15,18,16,16,17,6,16,3,13,25,8,5,4),
&quot;1350&quot;,	(a:4,6,8,10,18,15,17,5,2,21,16,14,12,3,12,10,2,4,4,7,7,12,9,5,20),
&quot;1360&quot;,	(a:0,0,9,23,8,8,17,17,2,3,25,18,15,18,19,22,14,0,0,21,3,16,7,1,15),
&quot;1370&quot;,	(a:12,11,25,6,16,2,1,13,11,4,2,22,23,4,11,12,21,25,23,11,12,24,19,10,22),
&quot;1380&quot;,	(a:18,15,17,0,24,15,23,22,8,20,25,17,3,1,15,14,9,9,25,11,7,17,18,23,7),
&quot;1390&quot;,	(a:13,22,11,17,21,21,8,11,22,12,15,2,19,9,23,7,3,1,12,13,19,9,0,18,10),&quot;1400&quot;,	(a:15,20,16,23,6,5,2,5,1,8,24,1,23,24,15,1,17,14,0,6,1,6,0,24,11),
&quot;1410&quot;,	(a:6,16,25,1,11,8,19,18,24,24,14,20,2,18,20,23,8,23,3,16,23,11,23,21,13),
&quot;1420&quot;,	(a:0,5,21,16,16,25,25,22,25,13,1,13,3,6,8,11,13,24,12,9,18,16,21,17,18),
&quot;1430&quot;,	(a:19,14,19,18,24,19,21,9,13,20,17,16,22,0,6,23,11,9,8,9,17,21,5,9,12),
&quot;1440&quot;,	(a:10,1,22,24,12,5,12,19,25,17,14,4,9,0,21,5,8,1,0,8,21,22,24,6,3),
&quot;1450&quot;,	(a:0,25,17,24,21,16,21,5,13,4,5,15,8,17,4,10,10,24,15,5,10,4,6,14,1),
&quot;1460&quot;,	(a:25,7,16,8,17,9,4,20,11,25,3,10,10,20,21,22,8,5,13,2,19,1,23,18,25),
&quot;1470&quot;,	(a:19,15,16,6,1,4,10,22,9,16,8,8,10,20,11,6,24,14,19,15,9,25,12,3,6),
&quot;1480&quot;,	(a:3,2,21,14,19,19,10,9,3,10,16,23,17,20,24,3,14,19,1,24,1,12,4,13,7),
&quot;1490&quot;,	(a:23,19,24,21,14,18,21,17,6,4,3,14,16,19,19,21,19,13,23,1,5,13,2,20,5),
&quot;1500&quot;,	(a:9,2,9,9,1,13,1,7,1,18,15,7,6,0,3,13,14,3,1,2,7,0,12,9,15),
&quot;1510&quot;,	(a:13,10,16,16,20,0,16,0,3,14,5,17,22,16,12,17,14,0,25,12,10,14,11,21,10),
&quot;1520&quot;,	(a:9,10,7,19,1,17,12,10,10,19,19,8,5,25,19,21,13,1,12,18,1,17,2,15,25),
&quot;1530&quot;,	(a:11,12,11,17,8,16,9,19,1,25,9,12,1,24,3,12,1,24,6,9,7,22,25,17,23),
&quot;1540&quot;,	(a:7,19,25,2,24,12,11,1,16,7,18,11,12,16,17,24,22,0,2,6,25,22,2,11,4),
&quot;1550&quot;,	(a:20,15,12,20,15,5,10,17,13,25,13,18,22,25,5,12,4,19,11,6,7,22,11,13,23),
&quot;1560&quot;,	(a:19,11,13,13,12,23,21,10,24,23,4,6,16,13,16,10,7,19,0,21,15,4,23,8,0),
&quot;1570&quot;,	(a:22,0,14,16,24,22,23,3,17,17,16,13,19,24,0,7,10,10,25,2,22,14,3,6,7),
&quot;1580&quot;,	(a:4,6,12,25,24,12,1,24,1,9,1,9,12,15,16,9,0,0,8,9,18,11,17,5,22),
&quot;1590&quot;,	(a:7,22,14,8,4,17,21,0,9,1,23,13,17,9,22,14,24,9,3,15,8,5,5,2,0),&quot;1600&quot;,	(a:2,20,20,22,11,17,5,2,11,22,0,12,18,6,7,12,7,16,19,2,23,9,24,17,23),
&quot;1610&quot;,	(a:15,24,25,3,15,11,21,15,10,23,21,25,13,24,2,13,17,3,7,18,4,15,13,12,11),
&quot;1620&quot;,	(a:18,24,6,11,25,4,19,4,13,9,4,20,2,22,18,6,22,19,12,12,2,14,5,16,0),
&quot;1630&quot;,	(a:18,24,20,4,16,3,22,13,8,17,6,16,12,23,15,13,3,10,10,7,14,4,13,25,7),
&quot;1640&quot;,	(a:2,9,23,10,12,2,21,16,20,14,14,13,8,19,18,16,2,5,22,16,17,22,9,16,0),
&quot;1650&quot;,	(a:9,19,12,4,6,20,21,20,18,13,11,15,20,23,23,15,15,20,3,0,17,3,20,9,0),
&quot;1660&quot;,	(a:7,15,7,15,7,5,0,19,24,6,10,22,23,5,12,9,0,8,7,18,19,22,7,22,13),
&quot;1670&quot;,	(a:8,25,7,17,24,18,22,17,3,5,6,5,19,8,16,24,12,12,2,24,24,25,20,10,25),
&quot;1680&quot;,	(a:18,2,6,23,0,18,21,23,18,15,22,16,7,25,4,1,20,24,20,7,8,18,1,16,25),
&quot;1690&quot;,	(a:23,23,19,7,18,19,15,7,2,21,17,2,24,7,19,7,23,0,20,1,12,18,22,19,4),
&quot;1700&quot;,	(a:22,0,21,24,1,3,3,18,23,23,24,18,13,3,14,11,1,20,5,20,7,19,19,12,2),
&quot;1710&quot;,	(a:1,2,22,16,9,7,7,8,8,10,17,17,8,1,17,20,6,11,12,25,4,23,21,13,23),
&quot;1720&quot;,	(a:25,5,24,14,5,3,19,6,22,1,16,6,14,24,8,24,0,14,19,12,1,19,3,8,12),
&quot;1730&quot;,	(a:17,4,1,7,20,11,15,1,13,15,21,14,10,10,0,2,9,17,0,17,10,6,22,23,10),
&quot;1740&quot;,	(a:0,14,15,15,20,7,19,15,10,24,2,10,0,13,24,24,7,5,2,13,20,0,1,7,20),
&quot;1750&quot;,	(a:16,4,2,7,14,14,17,25,21,16,10,9,24,8,5,0,7,17,2,0,0,25,1,5,4),
&quot;1760&quot;,	(a:16,14,16,16,1,4,19,12,19,15,2,18,0,3,17,7,0,5,1,7,7,19,1,21,24),
&quot;1770&quot;,	(a:2,17,14,12,25,1,20,21,4,13,9,24,12,25,10,24,7,14,6,15,20,11,7,2,16),
&quot;1780&quot;,	(a:16,12,4,17,12,24,9,17,15,16,5,1,19,3,20,1,24,25,14,1,1,13,20,5,7),
&quot;1790&quot;,	(a:2,22,19,24,24,16,0,16,10,10,19,2,18,19,25,4,12,10,5,3,7,14,17,10,7),
&quot;1800&quot;,	(a:20,25,21,8,13,0,23,1,17,9,20,11,1,23,9,20,15,16,13,15,20,15,11,12,5),
&quot;1810&quot;,	(a:17,9,19,14,15,5,13,0,4,6,14,13,23,9,23,3,7,11,11,8,6,11,25,18,15),
&quot;1820&quot;,	(a:25,18,11,12,25,13,8,14,13,4,23,25,16,25,0,0,19,22,17,6,21,14,9,10,4),
&quot;1830&quot;,	(a:11,14,6,0,17,4,2,21,18,25,15,8,10,14,0,21,23,8,7,21,22,24,23,6,24),
&quot;1840&quot;,	(a:16,9,19,11,23,3,18,11,2,2,25,8,4,12,1,17,25,21,6,13,5,15,13,19,18),
&quot;1850&quot;,	(a:23,23,9,20,14,4,16,9,10,8,24,20,10,3,3,19,20,22,23,9,6,12,16,12,21),
&quot;1860&quot;,	(a:3,2,5,15,6,17,23,7,12,12,18,16,13,14,19,13,1,11,1,8,5,7,4,20,9),
&quot;1870&quot;,	(a:21,19,8,1,5,22,20,7,11,11,14,8,15,13,9,3,18,20,13,13,1,20,10,0,6),
&quot;1880&quot;,	(a:18,4,5,5,6,11,16,22,6,11,8,7,17,19,18,3,1,5,22,12,2,14,25,9,17),
&quot;1890&quot;,	(a:18,16,0,7,25,0,20,5,15,9,24,2,9,4,17,22,15,1,24,13,0,11,10,12,21),
&quot;1900&quot;,	(a:16,18,18,7,1,15,1,24,14,25,10,3,5,8,23,22,23,4,11,22,9,21,13,6,19),
&quot;1910&quot;,	(a:19,1,23,17,21,21,16,3,22,24,21,11,24,8,17,7,14,17,6,20,18,23,16,8,6),
&quot;1920&quot;,	(a:2,11,2,15,3,2,12,8,22,22,13,4,5,25,3,1,3,6,11,6,5,17,11,17,11),
&quot;1930&quot;,	(a:7,17,6,7,13,0,21,14,6,6,17,10,13,20,13,10,21,10,4,16,22,8,0,25,5),
&quot;1940&quot;,	(a:11,17,2,21,9,16,7,2,24,17,18,21,16,11,13,21,12,2,22,0,3,25,13,1,3),
&quot;1950&quot;,	(a:16,22,20,3,18,14,4,12,9,3,0,11,9,4,3,24,21,18,24,15,14,15,17,8,21),
&quot;1960&quot;,	(a:15,2,0,4,14,9,16,3,22,4,15,11,14,15,13,18,15,22,17,12,10,25,5,0,20),
&quot;1970&quot;,	(a:4,5,11,3,23,4,23,20,9,7,13,25,9,5,10,18,14,12,21,19,0,7,19,20,9),
&quot;1980&quot;,	(a:20,12,24,20,9,11,21,11,15,15,23,1,11,23,2,20,9,13,21,6,12,8,0,15,0),
&quot;1990&quot;,	(a:20,13,5,7,6,21,9,25,4,17,13,23,0,2,18,13,20,24,5,0,24,20,7,20,0),&quot;2000&quot;,	(a:10,15,15,9,17,15,14,23,19,25,13,1,22,14,4,13,18,1,25,6,4,2,13,24,20),
&quot;2010&quot;,	(a:14,19,7,24,19,0,0,0,22,24,10,20,19,18,16,5,8,14,18,18,21,3,6,10,19),
&quot;2020&quot;,	(a:23,8,24,10,13,0,9,13,24,11,11,16,10,14,13,2,14,21,2,23,10,17,12,0,7),
&quot;2030&quot;,	(a:17,4,4,10,14,13,9,22,5,25,14,5,23,12,19,9,14,10,17,2,11,4,11,4,23),
&quot;2040&quot;,	(a:10,15,17,0,4,23,18,9,25,13,0,20,20,22,4,9,14,0,11,13,21,1,23,4,6),
&quot;2050&quot;,	(a:10,2,9,16,9,12,17,11,1,9,3,1,22,2,2,21,11,21,14,23,10,12,0,8,12),
&quot;2060&quot;,	(a:19,24,8,4,2,20,7,19,18,9,4,10,16,0,21,25,5,22,4,19,18,25,3,11,21),
&quot;2070&quot;,	(a:24,9,18,19,2,11,25,3,8,4,23,1,8,23,22,9,2,18,4,23,12,16,3,14,21),
&quot;2080&quot;,	(a:17,15,11,6,9,14,0,1,8,10,10,24,5,9,24,25,11,3,15,5,16,9,5,15,2),
&quot;2090&quot;,	(a:22,20,18,6,12,6,15,1,7,2,1,1,22,10,14,3,15,3,22,19,1,7,20,3,24)
))

}</tw-passagedata><tw-passagedata pid="111" name="set default directions" tags="startup" position="337,1345" size="100,100">{
(set: $setDefaultDirections to
(macro: [
	(set: $upOnScreen to &quot;north&quot;)
	(set: $downOnScreen to &quot;south&quot;)
	(set: $leftOnScreen to &quot;west&quot;)
	(set: $rightOnScreen to &quot;east&quot;)
	(output-data:&quot;&quot;)
	]
	))
}</tw-passagedata><tw-passagedata pid="112" name="flip start up down" tags="startup" position="638,1258" size="100,100">{
&lt;!-- maps a start room onto its nearest opposite start room at the otherr side of the map.  
Presupposes: startRoom has been assigned. The entrances listed are opposite.  
Called By: randomFlipUD
--&gt;

(set: $flipStartUD to 
(macro: [
	(set: _x to (cond: 
		$startRoom is &quot;top entrance&quot;, &quot;bottom entrance&quot;,
		$startRoom is &quot;bottom entrance&quot;, &quot;top entrance&quot;,
		$startRoom is &quot;tower entrance&quot;, &quot;tower entrance 2&quot;,
		$startRoom is &quot;tower entrance 2&quot;, &quot;tower entrance&quot;,
		$startRoom is &quot;block entrance 1&quot;, &quot;block entrance 3&quot;,
		$startRoom is &quot;block entrance 3&quot;, &quot;block entrance 1&quot;,
		$startRoom))
	(set: $startRoom to _x)
	(set: $strtRoomz to $strtRoomz + (a:$startRoom))
	(output-data:&quot;&quot;)
	]))
}</tw-passagedata><tw-passagedata pid="113" name="environ assign" tags="startup" position="656,2014" size="100,100">{

		
(set: $roomAdjective to &quot;a &quot;)

(set: $afghanistans to (a:1950))
(set: $arbors to (a:1090))
(set: $arenas to (a:110,310,910,1110,1410,1850,1910))

(set: $armories to (a: 50,450))

(set: $barracks to (a: 120,150,250,750,1050,1120))
(set: $barrows to (a:590))
(set: $battlefields to (a: 350,550,1350,1450,1650))
(set: $breweries to (a:))

(set: $brothels to (a:230))
(set: $buildings to (a:80,240,340,440,520,730,1220,1360))

(set: $cafes to (a:1740))
(set: $camps to (a:410, 510, 960, 990, 1110, 1140, 1150, 1240, 1330, 1430, 1510, 1610, 1770))
(set: $carnivals to (a:210))
(set: $castles to (a:540,650,840,1180,1780))
(set: $cathedrals to (a: 380,870,970,1000,1010,1070,1080,1170,1470,1770))
(set: $caves to (a: 560))
(set: $cemeteries to (a: 190,290))
(set: $christianCommunes to (a: 40))
(set: $churches to (a: 770,1020,1030,1040,1060,1370))
(set: $crypts to (a:90,390,490,790))
(set: $courthouses to (a:950, 1520))

(set: $docksides to (a:1530))

(set: $farms to (a:300,600,1300,1500,1600,1700,1900)) 
(set: $fruments to (a:20))

(set: $forests to (a:400,500,860,900,1100,1320,1490,1630))
(set: $hashishQuarters to (a:610))
(set: $houses to (a:1540,1640,1820,1870))
(set: $hypogea to (a:10))

(set: $inquisitors to (a:1480))
(set: $jails to (a:60,460,1160,1460,1560,1660,1680,1710,1730,1760,1860,1960))
(set: $jungles to (a:1400))
(set: $kremlins to (a:1940))

(set: $lakesides to (a:530,1690))
(set: $libraries to (a:420,620,720,820,1920))
(set: $loverscaves to (a:30))

(set: $mansions to (a:1840))
(set: $markets to (a:640))
(set: $menageries to (a:700))
(set: $mines to(a:360))


(set: $mushrooms to (a:0))
(set: $monasteries to (a:930,1030,1720))
(set: $mosques to (a:670))
(set: $mountainsides to (a: 920,1270))

(set: $newsPresses to (a:1930))

(set: $palaces to (a:570,630,740,850,1130,1310))
(set: $parks to (a: 100,200,370,470))
(set: $penalQuarters to (a: 680,1790))
(set: $plaguePits to(a:490))
(set: $rectories to (a:1580))
(set: $revolutions to (a:1750))

(set: $schools to (a:220,320))
(set: $ships to (a: 1190,1280,1550))
(set: $skyscrapers to (a:940))
(set: $slaveMarkets to (a:160,760))
(set: $stBasils to (a:1970))

(set: $surgeries to (a:180,280,480,780,980,1380,1800,1880))
(set: $swamps to (a:800,810,880,890))
(set: $temples to (a:170,270,430,1670))
(set: $towers to (a:830,1620))
(set: $towns to (a:1990))

(set: $triclinia to (a:330))

(set: $undergroundChapels to (a:70))
(set: $vaults to (a:1890))
(set: $vestals to (a:130))
(set: $villas to (a:140))

(set: $villages to (a: 260, 580, 660, 690, 1200, 1210, 1230, 1250, 1260, 1290, 1340, 1390, 1420, 1440, 1590, 1830))
(set: $walls to (a:1980))
(set: $workhouses to (a: 1801))


	

}</tw-passagedata><tw-passagedata pid="114" name="legacy room terms database" tags="" position="1129,4263" size="100,100">{
(set: $roomTerms to (dm: 
	&quot;1&quot;, (a: &quot;fecund&quot;, &quot;plot&quot;),
	&quot;11&quot;, (a: &quot;busy&quot;, &quot;chamber&quot;),
	&quot;21&quot;, (a: &quot;quiet&quot;, &quot;entrance hall&quot;),
	&quot;31&quot;, (a: &quot;barrel filled&quot;, &quot;vault&quot;),
	&quot;41&quot;, (a: &quot;sparsely furnished&quot;, &quot;abode&quot;),
	&quot;51&quot;, (a: &quot;well stocked&quot;, &quot;depot&quot;),
	&quot;61&quot;, (a: &quot;uncomfortable&quot;, &quot;cell&quot;),
	&quot;71&quot;, (a: &quot;tranquil&quot;, &quot;sanctum&quot;),
	&quot;81&quot;, (a: &quot;scruffy&quot;, &quot;abode&quot;),
	&quot;91&quot;, (a: &quot;ancient&quot;, &quot;ossuary&quot;),
	&quot;101&quot;, (a: &quot;quiet&quot;, &quot;orchard&quot;),
	&quot;111&quot;, (a: &quot;towering&quot;, &quot;entrance&quot;),
	&quot;121&quot;, (a: &quot;dusty&quot;, &quot;courtyard&quot;),
	&quot;131&quot;, (a: &quot;lush&quot;, &quot;boudoir&quot;),
	&quot;141&quot;, (a: &quot;red shale&quot;, &quot;path&quot;),
	&quot;151&quot;, (a: &quot;training&quot;, &quot;yard&quot;),
	&quot;161&quot;, (a: &quot;noisy&quot;, &quot;square&quot;),
	&quot;171&quot;, (a: &quot;sandy&quot;, &quot;courtyard&quot;),
	&quot;181&quot;, (a: &quot;operating&quot;, &quot;theater&quot;),
	&quot;191&quot;, (a: &quot;stone&quot;, &quot;mausoleum&quot;),
	&quot;201&quot;, (a: &quot;serene&quot;, &quot;pond&quot;),
	&quot;211&quot;, (a: &quot;babbling&quot;, &quot;square&quot;),
	&quot;221&quot;, (a: &quot;debating&quot;, &quot;hall&quot;),
	&quot;231&quot;, (a: &quot;dancing&quot;, &quot;deck&quot;),
	&quot;241&quot;, (a: &quot;shady&quot;, &quot;entrance hall&quot;),
	&quot;251&quot;, (a: &quot;rock brick&quot;, &quot;post&quot;),
	&quot;261&quot;, (a: &quot;dirt&quot;, &quot;square&quot;),
	&quot;271&quot;, (a: &quot;draughty&quot;, &quot;gazebo&quot;),
	&quot;281&quot;, (a: &quot;dilapidated&quot;, &quot;dormitory&quot;),
	&quot;291&quot;, (a: &quot;noiseless&quot;, &quot;plot&quot;),
	&quot;301&quot;, (a: &quot;&quot;, &quot;field tower&quot;),
	&quot;311&quot;, (a: &quot;rehearsal&quot;, &quot;stage&quot;),
	&quot;321&quot;, (a: &quot;marble&quot;, &quot;hall&quot;),
	&quot;331&quot;, (a: &quot;discreet&quot;, &quot;apse&quot;),
	&quot;341&quot;, (a: &quot;musty&quot;, &quot;entrance hall&quot;),
	&quot;351&quot;, (a: &quot;blood soaked&quot;, &quot;clearing&quot;),
	&quot;361&quot;, (a: &quot;raised&quot;, &quot;platform&quot;),
	&quot;371&quot;, (a: &quot;hedged&quot;, &quot;yard&quot;),
	&quot;381&quot;, (a: &quot;domed, polished stone&quot;, &quot;shrine&quot;),
	&quot;391&quot;, (a: &quot;half submerged&quot;, &quot;vault&quot;),
	&quot;401&quot;, (a: &quot;verdant&quot;, &quot;clearing&quot;),
	&quot;411&quot;, (a: &quot;ragged&quot;, &quot;tent&quot;),
	&quot;421&quot;, (a: &quot;dilapidated&quot;, &quot;reading entrance hall&quot;),
	&quot;431&quot;, (a: &quot;derelict&quot;, &quot;hall&quot;),
	&quot;441&quot;, (a: &quot;dusty&quot;, &quot;entrance hall&quot;),
	&quot;451&quot;, (a: &quot;abandoned&quot;, &quot;magazine&quot;),
	&quot;461&quot;, (a: &quot;ruined&quot;, &quot;cell&quot;),
	&quot;471&quot;, (a: &quot;lush and fecund&quot;, &quot;grove&quot;),
	&quot;481&quot;, (a: &quot;disintegrating&quot;, &quot;ward&quot;),
	&quot;491&quot;, (a: &quot;deep&quot;, &quot;shaft&quot;),
	&quot;501&quot;, (a: &quot;shady&quot;, &quot;clearing&quot;),
	&quot;511&quot;, (a: &quot;&quot;, &quot;knight&#39;s tent&quot;),
	&quot;521&quot;, (a: &quot;odorous&quot;, &quot;cavern&quot;),
	&quot;531&quot;, (a: &quot;misty&quot;, &quot;bank&quot;),
	&quot;541&quot;, (a: &quot;stone&quot;, &quot;hall&quot;),
	&quot;551&quot;, (a: &quot;&quot;, &quot;clearing&quot;),
	&quot;561&quot;, (a: &quot;claustrophobic&quot;, &quot;cavern&quot;),
	&quot;571&quot;, (a: &quot;solemn&quot;, &quot;hall&quot;),
	&quot;581&quot;, (a: &quot;dirty&quot;, &quot;square&quot;),
	&quot;591&quot;, (a: &quot;deathly&quot;, &quot;pit&quot;),
	&quot;601&quot;, (a: &quot;aromatic&quot;, &quot;garden&quot;),
	&quot;611&quot;, (a: &quot;smoky&quot;, &quot;bar&quot;),
	&quot;621&quot;, (a: &quot;hidden&quot;, &quot;meeting entrance hall&quot;),
	&quot;631&quot;, (a: &quot;rowdy&quot;, &quot;salon&quot;),
	&quot;641&quot;, (a: &quot;bounteous&quot;, &quot;market stall&quot;),
	&quot;651&quot;, (a: &quot;limestone&quot;, &quot;entrance hall&quot;),
	&quot;661&quot;, (a: &quot;small&quot;, &quot;shop&quot;),
	&quot;671&quot;, (a: &quot;private&quot;, &quot;musalla&quot;),
	&quot;681&quot;, (a: &quot;silent&quot;, &quot;square&quot;),
	&quot;691&quot;, (a: &quot;crumbling&quot;, &quot;building&quot;),
	&quot;701&quot;, (a: &quot;fearsome&quot;, &quot;display&quot;),
	&quot;711&quot;, (a: &quot;&quot;, &quot;bathing entrance hall&quot;),
	&quot;721&quot;, (a: &quot;&quot;, &quot;hall&quot;),
	&quot;731&quot;, (a: &quot;gardened&quot;, &quot;courtyard&quot;),
	&quot;741&quot;, (a: &quot;high&quot;, &quot;chamber&quot;),
	&quot;751&quot;, (a: &quot;basic&quot;, &quot;dormitorium&quot;),
	&quot;761&quot;, (a: &quot;carpented&quot;, &quot;wharf&quot;),
	&quot;771&quot;, (a: &quot;&quot;, &quot;prayer chamber&quot;),
	&quot;781&quot;, (a: &quot;small&quot;, &quot;ward&quot;),
	&quot;791&quot;, (a: &quot;dim&quot;, &quot;chamber&quot;),
	&quot;801&quot;, (a: &quot;&quot;, &quot;clearing in the reeds&quot;),
	&quot;811&quot;, (a: &quot;&quot;, &quot;pond&quot;),
	&quot;821&quot;, (a: &quot;sodden&quot;, &quot;study&quot;),
	&quot;831&quot;, (a: &quot;mysterious&quot;, &quot;study&quot;),
	&quot;841&quot;, (a: &quot;firelit&quot;, &quot;hall&quot;),
	&quot;851&quot;, (a: &quot;draughty&quot;, &quot;hall&quot;),
	&quot;861&quot;, (a: &quot;wild&quot;, &quot;clearing&quot;),
	&quot;871&quot;, (a: &quot;shivery&quot;, &quot;chapel&quot;),
	&quot;881&quot;, (a: &quot;dry&quot;, &quot;island&quot;),
	&quot;891&quot;, (a: &quot;fetid&quot;, &quot;lagoon&quot;),
	&quot;901&quot;, (a: &quot;jagged&quot;, &quot;clearing&quot;),
	&quot;911&quot;, (a: &quot;oily&quot;, &quot;pit garage&quot;),
	&quot;921&quot;, (a: &quot;snowy&quot;, &quot;mountainside&quot;),
	&quot;931&quot;, (a: &quot;flowery&quot;, &quot;courtyard&quot;),
	&quot;941&quot;, (a: &quot;plush&quot;, &quot;lobby&quot;),
	&quot;951&quot;, (a: &quot;ominous&quot;, &quot;Gerichtssaal&quot;),
	&quot;961&quot;, (a: &quot;spartan&quot;, &quot;Wohnblock&quot;),
	&quot;971&quot;, (a: &quot;tranquil&quot;, &quot;Gebetsraum&quot;),
	&quot;981&quot;, (a: &quot;&quot;, &quot;lab&quot;),
	&quot;991&quot;, (a: &quot;&quot;, &quot;ditch full of bodies&quot;),
	&quot;1001&quot;, (a: &quot;frosty&quot;, &quot;hall&quot;),
	&quot;1011&quot;, (a: &quot;geometrical&quot;, &quot;tower&quot;),
	&quot;1021&quot;, (a: &quot;isolated&quot;, &quot;study&quot;),
	&quot;1031&quot;, (a: &quot;spartan&quot;, &quot;cell&quot;),
	&quot;1041&quot;, (a: &quot;plush&quot;, &quot;prayer entrance hall&quot;),
	&quot;1051&quot;, (a: &quot;kata&quot;, &quot;yard&quot;),
	&quot;1061&quot;, (a: &quot;ascetic&quot;, &quot;cell&quot;),
	&quot;1071&quot;, (a: &quot;grassed and flowered&quot;, &quot;courtyard&quot;),
	&quot;1081&quot;, (a: &quot;ruined&quot;, &quot;chapel&quot;),
	&quot;1091&quot;, (a: &quot;baleful&quot;, &quot;arbor&quot;),
	&quot;1101&quot;, (a: &quot;verdant&quot;, &quot;hollow&quot;),
	&quot;1111&quot;, (a: &quot;grassy&quot;, &quot;opening&quot;),
	&quot;1121&quot;, (a: &quot;musty&quot;, &quot;entrance hall&quot;),
	&quot;1131&quot;, (a: &quot;small&quot;, &quot;entrance hall&quot;),
	&quot;1141&quot;, (a: &quot;makeshift&quot;, &quot;shelter&quot;),
	&quot;1151&quot;, (a: &quot;battered&quot;, &quot;tent&quot;),
	&quot;1161&quot;, (a: &quot;dirty&quot;, &quot;cell&quot;),
	&quot;1171&quot;, (a: &quot;arched&quot;, &quot;entrance&quot;),
	&quot;1181&quot;, (a: &quot;rotting&quot;, &quot;drawbridge&quot;),
	&quot;1191&quot;, (a: &quot;flotsam strewn&quot;, &quot;beach&quot;),
	&quot;1201&quot;, (a: &quot;waterlogged&quot;, &quot;hall&quot;),
	&quot;1211&quot;, (a: &quot;bustling&quot;, &quot;square&quot;),
	&quot;1221&quot;, (a: &quot;dim&quot;, &quot;entrance hall&quot;),
	&quot;1231&quot;, (a: &quot;quiet&quot;, &quot;plaza&quot;),
	&quot;1241&quot;, (a: &quot;&quot;, &quot;wagon&quot;),
	&quot;1251&quot;, (a: &quot;warring&quot;, &quot;square&quot;),
	&quot;1261&quot;, (a: &quot;frost kissed&quot;, &quot;square&quot;),
	&quot;1271&quot;, (a: &quot;blizzardy&quot;, &quot;plateau&quot;),
	&quot;1281&quot;, (a: &quot;sinking&quot;, &quot;ship&quot;),
	&quot;1291&quot;, (a: &quot;blazing&quot;, &quot;building&quot;),
	&quot;1301&quot;, (a: &quot;small market&quot;, &quot;square&quot;),
	&quot;1311&quot;, (a: &quot;fabulous&quot;, &quot;hall&quot;),
	&quot;1321&quot;, (a: &quot;misty&quot;, &quot;hollow&quot;),
	&quot;1331&quot;, (a: &quot;draughty&quot;, &quot;tent&quot;),
	&quot;1341&quot;, (a: &quot;small&quot;, &quot;cottage&quot;),
	&quot;1351&quot;, (a: &quot;Scottish&quot;, &quot;schiltron&quot;),
	&quot;1361&quot;, (a: &quot;modest&quot;, &quot;entrance hall&quot;),
	&quot;1371&quot;, (a: &quot;simple&quot;, &quot;prayer entrance hall&quot;),
	&quot;1381&quot;, (a: &quot;examination&quot;, &quot;entrance hall&quot;),
	&quot;1391&quot;, (a: &quot;rowdy&quot;, &quot;square&quot;),
	&quot;1401&quot;, (a: &quot;densely overgrown&quot;, &quot;pond&quot;),
	&quot;1411&quot;, (a: &quot;betting&quot;, &quot;pit&quot;),
	&quot;1421&quot;, (a: &quot;printing&quot;, &quot;entrance hall&quot;),
	&quot;1431&quot;, (a: &quot;&quot;, &quot;tent&quot;),
	&quot;1441&quot;, (a: &quot;stepped&quot;, &quot;pyramid&quot;),
	&quot;1451&quot;, (a: &quot;battered&quot;, &quot;tower&quot;),
	&quot;1461&quot;, (a: &quot;cramped&quot;, &quot;cell&quot;),
	&quot;1471&quot;, (a: &quot;opulent&quot;, &quot;nave&quot;),
	&quot;1481&quot;, (a: &quot;dank&quot;, &quot;dungeon&quot;),
	&quot;1491&quot;, (a: &quot;grisly&quot;, &quot;copse&quot;),
	&quot;1501&quot;, (a: &quot;country&quot;, &quot;path&quot;),
	&quot;1511&quot;, (a: &quot;country&quot;, &quot;lane&quot;),
	&quot;1521&quot;, (a: &quot;cloistered&quot;, &quot;yard&quot;),
	&quot;1531&quot;, (a: &quot;stinking&quot;, &quot;wharf&quot;),
	&quot;1541&quot;, (a: &quot;&quot;, &quot;gardens&quot;),
	&quot;1551&quot;, (a: &quot;&quot;, &quot;entrance hall&quot;),
	&quot;1561&quot;, (a: &quot;&quot;, &quot;gatehouse&quot;),
	&quot;1571&quot;, (a: &quot;&quot;, &quot;entrance hall&quot;),
	&quot;1581&quot;, (a: &quot;neglected&quot;, &quot;path&quot;),
	&quot;1591&quot;, (a: &quot;smoky&quot;, &quot;lane&quot;),
	&quot;1601&quot;, (a: &quot;stinking&quot;, &quot;path&quot;),
	&quot;1611&quot;, (a: &quot;misty&quot;, &quot;path&quot;),
	&quot;1621&quot;, (a: &quot;wood beam&quot;, &quot;corridor&quot;),
	&quot;1631&quot;, (a: &quot;bleak&quot;, &quot;path&quot;),
	&quot;1641&quot;, (a: &quot;&quot;, &quot;hall&quot;),
	&quot;1651&quot;, (a: &quot;&quot;, &quot;battlefield&quot;),
	&quot;1661&quot;, (a: &quot;&quot;, &quot;corridor&quot;),
	&quot;1671&quot;, (a: &quot;&quot;, &quot;hall&quot;),
	&quot;1681&quot;, (a: &quot;&quot;, &quot;passage&quot;),
	&quot;1691&quot;, (a: &quot;&quot;, &quot;lane&quot;),
	&quot;1701&quot;, (a: &quot;&quot;, &quot;path&quot;),
	&quot;1711&quot;, (a: &quot;&quot;, &quot;corridor&quot;),
	&quot;1721&quot;, (a: &quot;&quot;, &quot;corridor&quot;),
	&quot;1731&quot;, (a: &quot;&quot;, &quot;passage&quot;),
	&quot;1741&quot;, (a: &quot;&quot;, &quot;rue&quot;),
	&quot;1751&quot;, (a: &quot;&quot;, &quot;rue&quot;),
	&quot;1761&quot;, (a: &quot;&quot;, &quot;passage&quot;),
	&quot;1771&quot;, (a: &quot;&quot;, &quot;thoroughfare&quot;),
	&quot;1781&quot;, (a: &quot;&quot;, &quot;passage&quot;),
	&quot;1791&quot;, (a: &quot;&quot;, &quot;rue&quot;),
	&quot;1801&quot;, (a: &quot;&quot;, &quot;corridor&quot;),
	&quot;1811&quot;, (a: &quot;&quot;, &quot;passage&quot;),
	&quot;1821&quot;, (a: &quot;&quot;, &quot;alley&quot;),
	&quot;1831&quot;, (a: &quot;&quot;, &quot;alley&quot;),
	&quot;1841&quot;, (a: &quot;&quot;, &quot;gate&quot;),
	&quot;1851&quot;, (a: &quot;&quot;, &quot;passage&quot;),
	&quot;1861&quot;, (a: &quot;&quot;, &quot;passage&quot;),
	&quot;1871&quot;, (a: &quot;&quot;, &quot;hall&quot;),
	&quot;1881&quot;, (a: &quot;&quot;, &quot;corridor&quot;),
	&quot;1891&quot;, (a: &quot;vaulted&quot;, &quot;passage&quot;),
	&quot;1901&quot;, (a: &quot;pungent&quot;, &quot;country field&quot;),
	&quot;1911&quot;, (a: &quot;excited&quot;, &quot;queue&quot;),
	&quot;1921&quot;, (a: &quot;wooden&quot;, &quot;double door&quot;),
	&quot;1931&quot;, (a: &quot;chilly&quot;, &quot;vestibule&quot;),
	&quot;1941&quot;, (a: &quot;small&quot;, &quot;crowd&quot;),
	&quot;1951&quot;, (a: &quot;&quot;, &quot;ROOM TERMS DATABASE&quot;),
	&quot;1961&quot;, (a: &quot;&quot;, &quot;ROOM TERMS DATABASE&quot;),
	&quot;1971&quot;, (a: &quot;&quot;, &quot;garden&quot;),
	&quot;1981&quot;, (a: &quot;&quot;, &quot;marker&quot;),
	&quot;1991&quot;, (a: &quot;weed-cracked&quot;, &quot;road&quot;),
	&quot;2001&quot;, (a: &quot;&quot;, &quot;ROOM TERMS DATABASE&quot;),
	&quot;2011&quot;, (a: &quot;&quot;, &quot;ROOM TERMS DATABASE&quot;),
	&quot;2021&quot;, (a: &quot;&quot;, &quot;ROOM TERMS DATABASE&quot;),
	&quot;2031&quot;, (a: &quot;&quot;, &quot;ROOM TERMS DATABASE&quot;),
	&quot;2041&quot;, (a: &quot;&quot;, &quot;ROOM TERMS DATABASE&quot;),
	&quot;2051&quot;, (a: &quot;&quot;, &quot;ROOM TERMS DATABASE&quot;),
	&quot;2061&quot;, (a: &quot;&quot;, &quot;ROOM TERMS DATABASE&quot;),
	&quot;2071&quot;, (a: &quot;&quot;, &quot;ROOM TERMS DATABASE&quot;),
	&quot;2081&quot;, (a: &quot;&quot;, &quot;ROOM TERMS DATABASE&quot;),
	&quot;2091&quot;, (a: &quot;&quot;, &quot;ROOM TERMS DATABASE&quot;)
	)
	)
}</tw-passagedata><tw-passagedata pid="115" name="to-the phrase" tags="startup" position="492,2345" size="100,100">{
&lt;!-- tells the player during game time what a direction link leads to. E.g. instead of just &quot;east&quot;, the game prints out &quot;east to an armory&quot;. Works by temporarily changing the roomNumber to the roomNumber of the distal location, then evaluatinig for vocab. &quot;prep&quot; will normally be blank text, but may be &quot;where &quot; in particular cases. 
Presupposes: receives distal room number as argument
Called By: Either called directly in passages or by setToTheWords. 
--&gt;
(set: $toThePhrase to 
(macro: num-type _roomNumber, [	
	(set: _originalNumber to $roomNumber)
	(set: $roomNumber to _roomNumber)
	($setRoomPhrase:)
	(set: _phrase to &quot; to &quot; +
		$prep +
		$roomAdjective +
		$roomNoun)
	(set: $roomNumber to _originalNumber)
	(output-data: _phrase)
		]
		))

[[ -&gt;set room phrase]]
}</tw-passagedata><tw-passagedata pid="116" name="nexus word database" tags="startup" position="38,1547" size="100,100">{
(set: $setNexusWord to
(macro:[ 
	(set: $nexusWord to (cond: 
		$floorInt is 0, &quot;the central tunnels&quot;,
		$floorInt is 1, &quot;the forum&quot;,
		$floorInt is 2, &quot;the forbidden city&quot;,
		$floorInt is 3, &quot;the Byzantine palace&quot;,
		$floorInt is 4, &quot;the ruins of the Caput Mundi&quot;,
		$floorInt is 5, &quot;the olde pyke&quot;,
		$floorInt is 6, &quot;the rooftops of Aleppo&quot;,
		$floorInt is 7, &quot;the palace complex at Charlemagne&#39;s court&quot;,
		$floorInt is 8, &quot;the sulphurous waters of the Somerset levels&quot;,
		$floorInt is 9, &quot;die zentrale Stadt &quot;,
		$floorInt is 10, &quot;the pilgrim&#39;s path&quot;,
		$floorInt is 11, &quot;Sherwood Forest&quot;,
		$floorInt is 11 and $homeCity is &quot;La Rochelle&quot;, &quot;the exit to the tower&quot;,
		$floorInt is 12, &quot;the Asian steppes&quot;,
		$floorInt is 13, &quot;the slutchy wynds&quot;,
		$floorInt is 14, &quot;the sea&quot;,
		$floorInt is 15, &quot;the main highway&quot;,
		$floorInt is 16, &quot;the tranquil waterways of Amsterdam&quot;,
		$floorInt is 17, &quot;the central avenues of revolutionary Paris&quot;,
		$floorInt is 18, &quot;the foggy streets of London&quot;,
		$floorInt is 19, &quot;the nearest rail station&quot;,
		$floorInt is 20, &quot;NEXUS WORD DATABASE&quot;))
	(output-data:&quot;&quot;)
	]))
}</tw-passagedata><tw-passagedata pid="117" name="set default start room" tags="startup" position="197,1327" size="100,100">{
(set: $setDefaultStartRoom to
(macro: [
	(set: $startRoom to 
		(cond: 
			$directionIn is &quot;south&quot;, &quot;top entrance&quot;,
			$directionIn is &quot;west&quot;, &quot;right entrance&quot;,
			$directionIn is &quot;north&quot;, &quot;bottom entrance&quot;,
			$directionIn is &quot;east&quot;, &quot;left entrance&quot;,
			&quot;Error: directionIn not properly set for setDefaultStartRoom&quot;
		))
	(output-data:&quot;&quot;)
	]
	))
}</tw-passagedata><tw-passagedata pid="118" name="room 1 content" tags="startup" position="3393,55" size="100,100">{
(set: $room1content to
(macro: [
	(set: $content to &quot;&quot;)
	($debugger:) 
	(output-data: $content)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="119" name="room 2 content" tags="startup" position="3567,56" size="100,100">{
(set: $room2content to
(macro: [
	(set: $content to &quot;&quot;)
	($debugger:) 
	(output-data: $content)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="120" name="room 6 content" tags="startup" position="4834,64" size="100,100">{
(set: $room6content to
(macro: [
	(set: $content to &quot;&quot; + ($debugger:))
	(output-data: $content)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="121" name="room 7 content" tags="startup" position="5053,64" size="100,100">{
(set: $room7content to
(macro: [
	(set: $content to &quot;&quot;)
	($debugger:) 
	(output-data: $content)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="122" name="room 8 content" tags="startup" position="5263,64" size="100,100">{
(set: $room8content to
(macro: [
	(set: $content to &quot;&quot;)
	($debugger:) 
	(output-data: $content)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="123" name="room 9 content" tags="startup" position="5474,65" size="100,100">{
(set: $room9content to
(macro: [
	(set: $content to &quot;&quot;)
	($debugger:) 
	(output-data: $content)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="124" name="choose hilliness" tags="startup" position="388,646" size="100,100">{
(set: $chooseHilliness to
(macro: [
	(set: $hilliness to $referenceString of $hillinessDataBase)
	(output-data:&quot;&quot;)
	]
	))
	
[[ -&gt;hilliness Database]]
}</tw-passagedata><tw-passagedata pid="125" name="hilliness Database" tags="startup" position="540,646" size="100,100">{
(set: $hillinessDataBase to (dm: 
	&quot;1&quot;,&quot;mushroom&quot;,
	&quot;11&quot;,&quot;hypogeum&quot;,
	&quot;21&quot;,&quot;frument&quot;,
	&quot;31&quot;,&quot;hilly&quot;,
	&quot;41&quot;,&quot;apartment&quot;,
	&quot;51&quot;,&quot;armory&quot;,
	&quot;61&quot;,&quot;steppy&quot;,
	&quot;71&quot;,&quot;steppy&quot;,
	&quot;81&quot;,&quot;apartment&quot;,
	&quot;91&quot;,&quot;crypt&quot;,
	&quot;101&quot;,&quot;steppy&quot;,
	&quot;111&quot;,&quot;arena&quot;,
	&quot;121&quot;,&quot;courtyard house&quot;,
	&quot;131&quot;,&quot;brothel&quot;,
	&quot;141&quot;,&quot;house&quot;,
	&quot;151&quot;,&quot;barrack&quot;,
	&quot;161&quot;,&quot;steppy&quot;,
	&quot;171&quot;,&quot;temple&quot;,
	&quot;181&quot;,&quot;surgery&quot;,
	&quot;191&quot;,&quot;hilly&quot;,
	&quot;201&quot;,&quot;steppy&quot;,
	&quot;211&quot;,&quot;camp&quot;,
	&quot;221&quot;,&quot;academy&quot;,
	&quot;231&quot;,&quot;brothel&quot;,
	&quot;241&quot;,&quot;courtyard house&quot;,
	&quot;251&quot;,&quot;barrack&quot;,
	&quot;261&quot;,&quot;steppy&quot;,
	&quot;271&quot;,&quot;temple&quot;,
	&quot;281&quot;,&quot;surgery&quot;,
	&quot;291&quot;,&quot;hilly&quot;,
	&quot;301&quot;,&quot;farm&quot;,
	&quot;311&quot;,&quot;arena&quot;,
	&quot;321&quot;,&quot;academy&quot;,
	&quot;331&quot;,&quot;camp&quot;,
	&quot;341&quot;,&quot;mansion&quot;,
	&quot;351&quot;,&quot;hilly&quot;,
	&quot;361&quot;,&quot;mine&quot;,
	&quot;371&quot;,&quot;steppy&quot;,
	&quot;381&quot;,&quot;cathedral&quot;,
	&quot;391&quot;,&quot;crypt&quot;,
	&quot;401&quot;,&quot;hilly&quot;,
	&quot;411&quot;,&quot;camp&quot;,
	&quot;421&quot;,&quot;library&quot;,
	&quot;431&quot;,&quot;temple&quot;,
	&quot;441&quot;,&quot;apartment&quot;,
	&quot;451&quot;,&quot;armory&quot;,
	&quot;461&quot;,&quot;steppy&quot;,
	&quot;471&quot;,&quot;steppy&quot;,
	&quot;481&quot;,&quot;surgery&quot;,
	&quot;491&quot;,&quot;crypt&quot;,
	&quot;501&quot;,&quot;hilly&quot;,
	&quot;511&quot;,&quot;camp&quot;,
	&quot;521&quot;,&quot;cave&quot;,
	&quot;531&quot;,&quot;lakeside&quot;,
	&quot;541&quot;,&quot;castle&quot;,
	&quot;551&quot;,&quot;hilly&quot;,
	&quot;561&quot;,&quot;cave&quot;,
	&quot;571&quot;,&quot;castle&quot;,
	&quot;581&quot;,&quot;steppy&quot;,
	&quot;591&quot;,&quot;crypt&quot;,
	&quot;601&quot;,&quot;farm&quot;,
	&quot;611&quot;,&quot;steppy&quot;,
	&quot;621&quot;,&quot;library&quot;,
	&quot;631&quot;,&quot;palace&quot;,
	&quot;641&quot;,&quot;arcade&quot;,
	&quot;651&quot;,&quot;castle&quot;,
	&quot;661&quot;,&quot;steppy&quot;,
	&quot;671&quot;,&quot;mosque&quot;,
	&quot;681&quot;,&quot;steppy&quot;,
	&quot;691&quot;,&quot;steppy&quot;,
	&quot;701&quot;,&quot;steppy&quot;,
	&quot;711&quot;,&quot;lagoon&quot;,
	&quot;721&quot;,&quot;library&quot;,
	&quot;731&quot;,&quot;steppy&quot;,
	&quot;741&quot;,&quot;palace&quot;,
	&quot;751&quot;,&quot;barrack&quot;,
	&quot;761&quot;,&quot;docks&quot;,
	&quot;771&quot;,&quot;church&quot;,
	&quot;781&quot;,&quot;hospice&quot;,
	&quot;791&quot;,&quot;crypt&quot;,
	&quot;801&quot;,&quot;swamp&quot;,
	&quot;811&quot;,&quot;lagoon&quot;,
	&quot;821&quot;,&quot;library&quot;,
	&quot;831&quot;,&quot;house&quot;,
	&quot;841&quot;,&quot;castle&quot;,
	&quot;851&quot;,&quot;tower&quot;,
	&quot;861&quot;,&quot;hilly&quot;,
	&quot;871&quot;,&quot;cathedral&quot;,
	&quot;881&quot;,&quot;camp&quot;,
	&quot;891&quot;,&quot;swamp&quot;,
	&quot;901&quot;,&quot;hilly&quot;,
	&quot;911&quot;,&quot;arena&quot;,
	&quot;921&quot;,&quot;mountainside&quot;,
	&quot;931&quot;,&quot;monastery&quot;,
	&quot;941&quot;,&quot;tower&quot;,
	&quot;951&quot;,&quot;courtyard house&quot;,
	&quot;961&quot;,&quot;camp&quot;,
	&quot;971&quot;,&quot;cathedral&quot;,
	&quot;981&quot;,&quot;laboratory&quot;,
	&quot;991&quot;,&quot;crypt&quot;,
	&quot;1001&quot;,&quot;cathedral&quot;,
	&quot;1011&quot;,&quot;cathedral&quot;,
	&quot;1021&quot;,&quot;tower&quot;,
	&quot;1031&quot;,&quot;monastery&quot;,
	&quot;1041&quot;,&quot;tower&quot;,
	&quot;1051&quot;,&quot;courtyard house&quot;,
	&quot;1061&quot;,&quot;church&quot;,
	&quot;1071&quot;,&quot;cathedral&quot;,
	&quot;1081&quot;,&quot;cathedral&quot;,
	&quot;1091&quot;,&quot;steppy&quot;,
	&quot;1101&quot;,&quot;hilly&quot;,
	&quot;1111&quot;,&quot;camp&quot;,
	&quot;1121&quot;,&quot;temple&quot;,
	&quot;1131&quot;,&quot;tower&quot;,
	&quot;1141&quot;,&quot;camp&quot;,
	&quot;1151&quot;,&quot;camp&quot;,
	&quot;1161&quot;,&quot;steppy&quot;,
	&quot;1171&quot;,&quot;cathedral&quot;,
	&quot;1181&quot;,&quot;castle&quot;,
	&quot;1191&quot;,&quot;ship&quot;,
	&quot;1201&quot;,&quot;castle&quot;,
	&quot;1211&quot;,&quot;steppy&quot;,
	&quot;1221&quot;,&quot;house&quot;,
	&quot;1231&quot;,&quot;steppy&quot;,
	&quot;1241&quot;,&quot;camp&quot;,
	&quot;1251&quot;,&quot;steppy&quot;,
	&quot;1261&quot;,&quot;steppy&quot;,
	&quot;1271&quot;,&quot;mountainside&quot;,
	&quot;1281&quot;,&quot;ship&quot;,
	&quot;1291&quot;,&quot;steppy&quot;,
	&quot;1301&quot;,&quot;farm&quot;,
	&quot;1311&quot;,&quot;elaborate palace&quot;,
	&quot;1321&quot;,&quot;hilly&quot;,
	&quot;1331&quot;,&quot;camp&quot;,
	&quot;1341&quot;,&quot;steppy&quot;,
	&quot;1351&quot;,&quot;hilly&quot;,
	&quot;1361&quot;,&quot;mansion&quot;,
	&quot;1371&quot;,&quot;church&quot;,
	&quot;1381&quot;,&quot;surgery&quot;,
	&quot;1391&quot;,&quot;steppy&quot;,
	&quot;1401&quot;,&quot;hilly&quot;,
	&quot;1411&quot;,&quot;bear pits&quot;,
	&quot;1421&quot;,&quot;steppy&quot;,
	&quot;1431&quot;,&quot;camp&quot;,
	&quot;1441&quot;,&quot;steppy&quot;,
	&quot;1451&quot;,&quot;steppy&quot;,
	&quot;1461&quot;,&quot;steppy&quot;,
	&quot;1471&quot;,&quot;cathedral&quot;,
	&quot;1481&quot;,&quot;steppy&quot;,
	&quot;1491&quot;,&quot;hilly&quot;,
	&quot;1501&quot;,&quot;camp&quot;,
	&quot;1511&quot;,&quot;camp&quot;,
	&quot;1521&quot;,&quot;steppy&quot;,
	&quot;1531&quot;,&quot;steppy&quot;,
	&quot;1541&quot;,&quot;house&quot;,
	&quot;1551&quot;,&quot;ship&quot;,
	&quot;1561&quot;,&quot;steppy&quot;,
	&quot;1571&quot;,&quot;house&quot;,
	&quot;1581&quot;,&quot;block&quot;,
	&quot;1591&quot;,&quot;steppy&quot;,
	&quot;1601&quot;,&quot;camp&quot;,
	&quot;1611&quot;,&quot;camp&quot;,
	&quot;1621&quot;,&quot;hilly&quot;,
	&quot;1631&quot;,&quot;hilly&quot;,
	&quot;1641&quot;,&quot;house&quot;,
	&quot;1651&quot;,&quot;camp&quot;,
	&quot;1661&quot;,&quot;block&quot;,
	&quot;1671&quot;,&quot;house&quot;,
	&quot;1681&quot;,&quot;house&quot;,
	&quot;1691&quot;,&quot;camp&quot;,
	&quot;1701&quot;,&quot;camp&quot;,
	&quot;1711&quot;,&quot;block&quot;,
	&quot;1721&quot;,&quot;house&quot;,
	&quot;1731&quot;,&quot;na&quot;,
	&quot;1741&quot;,&quot;na&quot;,
	&quot;1751&quot;,&quot;steppy&quot;,
	&quot;1761&quot;,&quot;na&quot;,
	&quot;1771&quot;,&quot;camp&quot;,
	&quot;1781&quot;,&quot;na&quot;,
	&quot;1791&quot;,&quot;camp&quot;,
	&quot;1801&quot;,&quot;na&quot;,
	&quot;1811&quot;,&quot;na&quot;,
	&quot;1821&quot;,&quot;na&quot;,
	&quot;1831&quot;,&quot;steppy&quot;,
	&quot;1841&quot;,&quot;na&quot;,
	&quot;1851&quot;,&quot;na&quot;,
	&quot;1861&quot;,&quot;na&quot;,
	&quot;1871&quot;,&quot;na&quot;,
	&quot;1881&quot;,&quot;na&quot;,
	&quot;1891&quot;,&quot;na&quot;,
	&quot;1901&quot;,&quot;hilly&quot;,
	&quot;1911&quot;,&quot;hilly&quot;,
	&quot;1921&quot;,&quot;steppy&quot;,
	&quot;1931&quot;,&quot;hilly&quot;,
	&quot;1941&quot;,&quot;hilly&quot;,
	&quot;1951&quot;,&quot;hilly&quot;,
	&quot;1961&quot;,&quot;hilly&quot;,
	&quot;1971&quot;,&quot;hilly&quot;,
	&quot;1981&quot;,&quot;hilly&quot;,
	&quot;1991&quot;,&quot;steppy&quot;,
	&quot;2001&quot;,&quot;hilly&quot;,
	&quot;2011&quot;,&quot;hilly&quot;,
	&quot;2021&quot;,&quot;hilly&quot;,
	&quot;2031&quot;,&quot;hilly&quot;,
	&quot;2041&quot;,&quot;hilly&quot;,
	))
}</tw-passagedata><tw-passagedata pid="126" name="set hilliness" tags="startup" position="152,741" size="100,100">{
(set: $setHilliness to 
(macro: [
	($chooseHilliness:) 
	(set: $upHill_1 to &quot;&quot;) 
	(set: $downHill_1 to &quot;&quot;)
	(set: $upHill_2 to &quot;&quot;) 
	(set: $downHill_2 to &quot;&quot;)
	(set: $rightHill_1 to &quot;&quot;) 
	(set: $leftHill_1 to &quot;&quot;)
	(set: $rightHill_2 to &quot;&quot;) 
	(set: $leftHill_2 to &quot;&quot;)
	(set: $rightHill_3 to &quot;&quot;) 
	(set: $leftHill_3 to &quot;&quot;)
	(set: $rightHill_4 to &quot;&quot;) 
	(set: $leftHill_4 to &quot;&quot;)
	(set: $rightHill_5 to &quot;&quot;) 
	(set: $leftHill_5 to &quot;&quot;)
	(if: $hilliness is in (a: &quot;hilly&quot;, &quot;steppy&quot;))[
		($randomSlope:)
		(set: $upHill_1 to $slope) 
		(set: $downHill_1 to ($oppositeSlope: $upHill_1))
		($randomSlope:)
		(set: $upHill_2 to $slope) 
		(set: $downHill_2 to ($oppositeSlope: $upHill_2))
		($randomSlope:)
		(set: $rightHill_1 to $slope) 
		(set: $leftHill_1 to ($oppositeSlope: $rightHill_1))
		($randomSlope:)
		(set: $rightHill_2 to $slope) 
		(set: $leftHill_2 to ($oppositeSlope: $rightHill_2))
		($randomSlope:)
		(set: $rightHill_3 to $slope) 
		(set: $leftHill_3 to ($oppositeSlope: $rightHill_3))
		($randomSlope:)
		(set: $rightHill_4 to $slope) 
		(set: $leftHill_4 to ($oppositeSlope: $rightHill_4))
		($randomSlope:)
		(set: $rightHill_5 to $slope) 
		(set: $leftHill_5 to ($oppositeSlope: $rightHill_5))
		]
	(if: $hilliness is in (a: &quot;mountainside&quot;))[
		(set: $upHill_1 to &quot;down and to the &quot;) 
		(set: $downHill_1 to &quot;up and to the &quot;)
		(set: $upHill_2 to &quot;up and to the &quot;) 
		(set: $downHill_2 to &quot;down and to the &quot;)
		(set: $rightHill_1 to &quot;up and to the &quot;) 
		(set: $leftHill_1 to &quot;down and to the &quot;)
		(set: $rightHill_2 to &quot;up and to the &quot;) 
		(set: $leftHill_2 to &quot;down and to the &quot;)
		(set: $rightHill_3 to &quot;up and to the &quot;) 
		(set: $leftHill_3 to &quot;down and to the &quot;)
		(set: $rightHill_4 to &quot;up and to the &quot;) 
		(set: $leftHill_4 to &quot;down and to the &quot;)
		(set: $rightHill_5 to &quot;up and to the &quot;) 
		(set: $leftHill_5 to &quot;down and to the &quot;)
		]
	(output-data:&quot;&quot;)
	]
	))
	

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;random slope]]
[[ -&gt;opposite slope]]
[[ -&gt;choose hilliness]]
}</tw-passagedata><tw-passagedata pid="127" name="opposite slope" tags="startup" position="389,880" size="100,100">{
(set: $oppositeSlope to 
(macro: string-type _slopePhrase , [
	(if: _slopePhrase is &quot;&quot;)[(set: $slope to &quot;&quot;)]
	(else:)[
		(if: _slopePhrase&#39;s 1st is &quot;u&quot;)
			[(set: $slope to &quot;down &quot; + $slopeTerm + &quot; to the &quot;)]
		(if: _slopePhrase&#39;s 1st is &quot;d&quot;)
			[(set: $slope to &quot;up &quot; + $slopeTerm + &quot; to the &quot;)]
		]
	(output-data:$slope)
	]
	))
	
[[ -&gt;slope language]]

}</tw-passagedata><tw-passagedata pid="128" name="slope language" tags="startup" position="541,761" size="100,100">{
(set: $slopeLanguage to 
(macro: [
	(set: $slopeTerm to &quot;&quot;)
	(if: $hilliness is &quot;hilly&quot;)[(set: $slopeTerm to &quot;a slope&quot;)]
	(if: $hilliness is &quot;steppy&quot;)[(set: $slopeTerm to &quot;some steps&quot;)]
	(output-data:&quot;&quot;)
	]
	))

}</tw-passagedata><tw-passagedata pid="129" name="random slope" tags="startup" position="388,761" size="100,100">{

(set: $randomSlope to 
(macro: [
	($slopeLanguage:)
	(set: _x to ($srandom: 3))
	(set: $slope to (cond: 
		_x is 1, &quot;up &quot; + $slopeTerm + &quot; to the &quot;,
		_x is 2, &quot;down &quot; + $slopeTerm + &quot; to the &quot;,
		&quot;&quot;))
	(output-data:&quot;&quot;)
	]))


[[ -&gt;slope language]]
[[ -&gt;srandom]] 
}</tw-passagedata><tw-passagedata pid="130" name="legacy set room phrase 2" tags="startup" position="1001,4260" size="100,100">{
(set: $setRoomPhrase2 to 
(macro: [
	(set: $roomNoun to 2nd of (str: $decadeReference) of $roomTerms)
	(set: $roomAdj to 1st of (str: $decadeReference) of $roomTerms)
	(if: $roomAdj is &quot;&quot;) [(set: $roomArticle to 
		(cond: 
			($firstLetterIsVowel:$roomNoun), &quot;an&quot;,
			&quot;a&quot;))]
	(else:)[(set: $roomArticle to 
		(cond: 
			($firstLetterIsVowel:$roomAdj),&quot;an&quot;,
			&quot;a&quot;))]
	($setRoomPrep:)
	(output-data: $roomPrep + &quot; &quot; + $roomArticle + &quot; &quot; + $roomAdj + &quot; &quot; + $roomNoun)
	]))
	
&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;legacy room terms database]]
[[ -&gt;legacy first letter is vowel]]
[[ -&gt;legacy set room prep]]

}</tw-passagedata><tw-passagedata pid="131" name="add s" tags="startup" position="21,6" size="100,100">{
(set: $add_s to (macro: str-type _singular, [
	(set: _output to (cond:
		_singular&#39;s last is &#39;s&#39;, _singular,
		_singular + &#39;s&#39;))
	(output-data: _output)
	]
	)
	)
}</tw-passagedata><tw-passagedata pid="132" name="opposite compass" tags="startup" position="41,1690" size="100,100">{
(set: $oppositeCompass to 
(macro: string-type _direction, [
	(set: _oppositeCompass to (cond: 
		_direction is &quot;north&quot;, &quot;south&quot;,
		_direction is &quot;south&quot;, &quot;north&quot;,
		_direction is &quot;east&quot;, &quot;west&quot;,
		_direction is &quot;west&quot;, &quot;east&quot;,
		&quot;Error: oppositeCompass needs compass direction as input&quot;))
	(output-data:_oppositeCompass)
	]
	))
}</tw-passagedata><tw-passagedata pid="133" name="legacy set room prep" tags="startup" position="855,4261" size="100,100">{
&lt;!--encases the locipreps dm to give it a default value of &quot;in&quot; if nothing is specified --&gt; 

(set: $setRoomPrep to
(macro: [
	(if: $lociPreps contains $roomNoun)
		[(set: $roomPrep to $roomNoun of $lociPreps)]
	(else:)[(set: $roomPrep to &quot;in&quot;)]
	(output-data: &quot;&quot;)
	]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;legacy preps database]]
}</tw-passagedata><tw-passagedata pid="134" name="port1" tags="" position="1526,1326" size="100,100">{(set: $elizabethanDock to &quot;outbound&quot;)
(if: $floorInt is 11)[($overrideImage:&quot;1132&quot;)]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[(if: $floorInt is 11) [You are at the dockside at the murky port of Bishop&#39;s Lynn. It is late. The fishermen and merchants have long since unloaded their boats and only thieves prowl the streets beside the wharf. You may climb aboard [[a lonely ship-&gt;atSea]] that has been unexpectedly delayed and which soon sets sail for La Rochelle. Alternatively, you may head inland towards [[Sherwood Forest-&gt;complex three]].]
(if: $floorInt is 15) [($overrideImage: &quot;1507&quot;)You are at the docks on the River Thames in Elizabethan London (if: $homeCity is &quot;London&quot;)[where a group of catholic nuns are attempting to flee to the continent. If you wish, you can [[sneak aboard the ship-&gt;atSea]]](else:)[(set: $homeCity to &quot;London&quot;)(set: $foreignCity to &quot;Antwerp&quot;)]. From here you can head [[$leftOnNexusMap-&gt;complex three]] into the city or [[$downOnNexusMap-&gt;middle right]] to a different part of the dockside.]
]}</tw-passagedata><tw-passagedata pid="135" name="wreckStory" tags="" position="1201,2320" size="100,100">{(set: $japanBattle to &quot;inbound&quot;)
(if: $floorInt is 12)[&lt;script&gt;CustomScripts.updateBackground(1281);&lt;/script&gt;]}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[The battle off the coast of Japan is going well for the Mongols when, unexpectedly, a typhoon sweeps in. Tempest tossed, your ship is breaking into pieces! You can [[swim for another boat-&gt;$startRoom]] or [[swim back to the coast-&gt;complex eight]]. []
]</tw-passagedata><tw-passagedata pid="136" name="burning merv" tags="" position="958,1998" size="100,100">{(set: $mervDirection to &quot;outbound&quot;)
(if: $floorInt is 12)[&lt;script&gt;CustomScripts.updateBackground(1293);&lt;/script&gt;]
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[You enter the city. At first it seems deserted, but then you see a dead body, and another, and another. A moment later you smell burning. Turning, you see several buildings on fire, and more fiery arrows tracing arcs through the sky. You may turn to [[hurry back-&gt;complex nine]] the way you came, or you can [[continue to explore-&gt;$startRoom]] despite the fires.  []
]</tw-passagedata><tw-passagedata pid="137" name="Berold of Rouen" tags="" position="1078,1998" size="100,100">{[&lt;script&gt;CustomScripts.updateBackground(-2);&lt;/script&gt;]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[&quot;Bonjour,&quot; says the butcher, &quot;I am Berold of Rouen, the only survivor of the wreck of the white ship. But that was a long time ago, when I was much younger. (link: &#39;Shall we cast our minds back to when it happened?&quot;&#39;)[==&quot;The year was 1120. The passengers included King Henry I&#39;s son and heir, William Adelin, Duke of Normandy, as well as the King&#39;s bastard son Richard of Lincoln and his bastard daughter Matilda FitzRoy, Countess of Perche. I was only there to collect debts owed to me by the passengers.&quot;] 

When you are done speaking with the butcher, you may [[go back to exploring the ship-&gt;complex nine]]. 
]}</tw-passagedata><tw-passagedata pid="138" name="port2" tags="" position="1841,1321" size="100,100">{
(if: $floorInt is 11)[($overrideImage:&quot;1133&quot;)]
(if: $floorInt is 15)[($overrideImage: &quot;1533&quot;)]
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[
(if: $floorInt is 11)[You arrive at the buzzing port of La Rochelle, where merchants sail to England and points south. Fishermen carry teeming baskets of fish from the ocean and the sea air is skewered by the shrieks of hungry gulls. (if: $homeCity is &quot;Bishop&#39;s Lynn&quot;)[Before you can even find your bearings, rough men bundle you into a prison carriage. You learn you have been summoned to the court of Eleanor of Aquitaine at [[Poitiers-&gt;Poitiers]].(set: $homeCity to &quot;La Rochelle&quot;)(set: $foreignCity to &quot;Bishop&#39;s Lynn&quot;)] (else:) [A ship is sailing for Bishop&#39;s Lynn in The Wash. You may [[take it-&gt;atSea]] if you wish, or head back to [[Poitiers-&gt;Poitiers]].]]
(if: $floorInt is 15)[You arrive at the freezing cold port of Antwerp, where anchored ships rock and creak in the north sea breeze. (if: $homeCity is &quot;London&quot;)[You and the rest of the nuns are met at the port by a Monsignor, who introduces you to a cart driver. You are transported by cart to the [[nunnery-&gt;Poitiers]].(set: $homeCity to &quot;Antwerp&quot;)(set:$foreignCity to &quot;London&quot;)](else:)[You pay for passage on a ship to [[London-&gt;atSea]].]
]
]</tw-passagedata><tw-passagedata pid="139" name="atSea" tags="" position="1683,1326" size="100,100">{(if: $floorInt is 11)[($overrideImage:&quot;1134&quot;)]
(if: $floorInt is 15)[($overrideImage: &quot;1532&quot;)]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[(if: $floorInt is 11) [You are sailing the rough seas from $homeCity to $foreignCity. At last, after three days of travel, you weigh anchor at (if: $foreignCity is &quot;La Rochelle&quot;)[[[La Rochelle-&gt;port2]].](else:)[[[Bishop&#39;s Lynn-&gt;port1]](set: $homeCity to &quot;Bishop&#39;s Lynn&quot;)(set: $foreignCity to &quot;La Rochelle&quot;).]]
(if: $floorInt is 15) [You are sailing the wintry seas from $homeCity to $foreignCity(if:$homeCity is &quot;London&quot;)[ disguised as a nun and secreted among the nuns of the Dartford and Syon Abbeys]. At last, after three days of travel, you weigh anchor at (if: $foreignCity is &quot;Antwerp&quot;)[[[Antwerp-&gt;port2]].](else:)[[[London-&gt;port1]].]]
]}</tw-passagedata><tw-passagedata pid="140" name="Poitiers" tags="" position="1993,1322" size="100,100">{(if: $floorInt is 11)[($overrideImage:&quot;1131&quot;)]
(if: $floorInt is 15)[($overrideImage: &quot;1534&quot;)]
(if: $downOnScreen is $leftOnNexusMap)[(set: $startRoom to &quot;room 3&quot;)]
(if: $upOnScreen is $leftOnNexusMap)[(set: $startRoom to &quot;room 0&quot;)]
(if: $rightOnScreen is $leftOnNexusMap)[(set: $startRoom to &quot;room 8&quot;)]
(if: $leftOnScreen is $leftOnNexusMap)[(set: $startRoom to &quot;room 5&quot;)]
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[(if: $floorInt is 11)[You are somewhere in the Maubergeonne Tower in Poitiers, where Eleanor of Aquitaine presides over matters of fidelity and marriage. To [[explore the tower-&gt;$startRoom]] you must go $rightOnNexusMap. Or you may head [[back to La Rochelle-&gt;port2]] to seek a ship back to England.]
(if: $floorInt is 15)[You are at the poor Dutch Dominican nunnery at wintry Leliendal on the western shore of the bleak island of Schouwen. To [[explore the nunnery-&gt;$startRoom]] you must go $rightOnNexusMap. Or you may head [[back to Antwerp-&gt;port2]] to seek a ship back to England.]
]
</tw-passagedata><tw-passagedata pid="141" name="cabin of the captain&#39;s maid" tags="" position="2081,1745" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 3)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: red) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the cramped cabin of the captain&#39;s maid. ($room3content:) From here you may head $downOnScreen to the [[captain&#39;s cabin]], or $rightOnScreen to the [[the navigation room]]. }[]]}</tw-passagedata><tw-passagedata pid="142" name="captain&#39;s cabin" tags="" position="2220,1749" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 4)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: purple) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the captain&#39;s cabin of a ship. ($room4content:) From here you may head $upOnScreen to the [[cabin of the captain&#39;s maid]] or $rightOnScreen to the [[the bridge]]. }[]]}</tw-passagedata><tw-passagedata pid="143" name="the navigation room" tags="" position="2073,1894" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 2)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: (rgb: 255, 100, 100)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the navigation room, surrounded by maps and compasses, sextants and other tools of the ship&#39;s navigator. $room2content From here you may go $leftOnScreen to the [[cabin of the captain&#39;s maid]] or $downOnScreen to [[the bridge]]. }[]]}</tw-passagedata><tw-passagedata pid="144" name="the bridge" tags="" position="2223,1890" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 12)
($refreshSentences:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are on the bridge of a ship. From here there are three doors. One goes $rightOnScreen onto the [[deck]]. Another goes $upOnScreen into [[the navigation room]]. And a third goes $leftOnScreen into the [[captain&#39;s cabin]]. You may also descend a ladder to [[below deck]].  }[]]}</tw-passagedata><tw-passagedata pid="145" name="deck" tags="" position="2375,1892" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 13)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are on the deck of a ship(if: $floorInt is 15)[, way out at sea, having been pressed into defending England from the Spanish Armada. Ahead of you, looming dangerously, are the thousand ships of the Spanish fleet]. From here you can go to [[the bow]], to [[the stern]], step through a door into [[the bridge]] or [[climb a ladder up into the crow&#39;s nest-&gt;crow&#39;s nest]]. 
(if: $floorInt is 11)[If you do not wish to spend any more time on this broken hulk, you may (link: &quot;climb down to the beach&quot;)[(goto: $thisRoom)].]
(if: $floorInt is 12)[If you do not wish to remain for the rest of this fight, you may (link: &quot;jump ship and swim back to shore&quot;)[(goto: $thisRoom)].]
(if: $floorInt is 15)[If you do not wish to take part in this battle, you may (link: &quot;steal a raft and sail back to shore&quot;)[(goto: &quot;middle right&quot;)].]
}] 


(if: $floorInt is 15)[($overrideImage: &quot;1551&quot;)]
</tw-passagedata><tw-passagedata pid="146" name="below deck" tags="" position="2216,2040" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 16)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are below deck. A ladder ascends from here to [[the bridge]]. You may also go $rightOnScreen [[towards the ship&#39;s bow-&gt;below deck bow]], $downOnScreen to a [[magazine]], or $leftOnScreen [[towards the ship&#39;s stern-&gt;below deck stern]]. }[]]}</tw-passagedata><tw-passagedata pid="147" name="below deck bow" tags="" position="2510,2027" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 17)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are below deck, towards the bow. From here you may go $downOnScreen to [[a store room]] for salted goods, $leftOnScreen towards the [[ladder up to the deck-&gt;below deck]], or $rightOnScreen to [[the brig]]. You may also ascend a ladder to [[the ship&#39;s forecastle-&gt;the bow]]. }[]]}</tw-passagedata><tw-passagedata pid="148" name="the stern" tags="" position="1928,1892" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 11)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are at the aft of the ship. From here a ladder descends [[below deck-&gt;below deck stern]]. You may also head [[back towards the bow-&gt;deck]]. }[]]}</tw-passagedata><tw-passagedata pid="149" name="crow&#39;s nest" tags="" position="2363,1609" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 1)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: white) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are up in the crow&#39;s nest. ($room1content:) From here you can go [[down-&gt;deck]] to the deck.}[]]} </tw-passagedata><tw-passagedata pid="150" name="below deck stern" tags="" position="1928,2039" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 15)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are below deck, towards the stern. From here you may go $downOnScreen to the [[Chaplain&#39;s cabin]], $leftOnScreen to [[the sick bay]], or $rightOnScreen towards the [[ladder up to the deck-&gt;below deck]]. You may also ascend a ladder to [[the main deck-&gt;the stern]]. }[]]}</tw-passagedata><tw-passagedata pid="151" name="Chaplain&#39;s cabin" tags="" position="1928,2184" size="100,100">($setImage:)
(set: $thisRoomsNumber to 7)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: green) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the chaplain&#39;s cabin. ($room7content:) From here you may go $upOnScreen to [[the lower deck-&gt;below deck stern]] or $leftOnScreen to the [[ship&#39;s morgue]]. }[]]</tw-passagedata><tw-passagedata pid="152" name="the sick bay" tags="" position="1775,2042" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 8)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: yellow) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the sick bay of the ship, surrounded by the accoutrements of medical practice. ($room8content:) From here you may head $rightOnScreen to [[the lower deck-&gt;below deck stern]] or $downOnScreen to the [[ship&#39;s morgue]]. }[]]}</tw-passagedata><tw-passagedata pid="153" name="ship&#39;s morgue" tags="" position="1768,2184" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 9)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}
(border-color: (rgb: 155, 100, 0)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the ship&#39;s morgue. ($room9content:) From here you may go $rightOnScreen to the [[Chaplain&#39;s cabin]] or $upOnScreen to [[the sick bay]]. []]</tw-passagedata><tw-passagedata pid="154" name="magazine" tags="" position="2208,2192" size="100,100">($setImage:)
(set: $thisRoomsNumber to 5)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: blue) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the magazine of a ship. ($room5content:) From here you can go $upOnScreen to [[the lower deck-&gt;below deck]].  }[]]</tw-passagedata><tw-passagedata pid="155" name="a store room" tags="" position="2511,2195" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 0)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: black) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in a store room for salted goods, beneath the deck of a ship. $room0content From here you can go $upOnScreen to [[the lower deck-&gt;below deck bow]].}[]] }</tw-passagedata><tw-passagedata pid="156" name="the brig" tags="" position="2676,2024" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 6)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}(border-color: (rgb: 0, 255, 255)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the brig of a ship. $room6content From here you can go $leftOnScreen to [[a passage below deck-&gt;below deck bow]].}[]] </tw-passagedata><tw-passagedata pid="157" name="the bow" tags="" position="2506,1894" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 14)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are at the ship&#39;s forecastle. From here a ladder descends [[below deck-&gt;below deck bow]]. You may also head [[back towards the bridge-&gt;deck]]. }[]]}</tw-passagedata><tw-passagedata pid="158" name="kitchen" tags="" position="2216,3033" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 18)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18718&quot;)]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $kitchen of the $domicile. (if: $architecture is &quot;mansion&quot;)[You can leave here to the $rightOnScreen, through a door that leads into the [[$hallway1-&gt;left hallway]]. Alternatively, you may $wade $downOnScreen to the [[$buttery-&gt;buttery]], $leftOnScreen to the [[$larder-&gt;larder]] or $upOnScreen to the [[$yard-&gt;yard]].] (if: $architecture is &quot;house&quot;) [You can leave here to the $downOnScreen through a door that takes you into the [[$diningRoom-&gt;dining room]]. (unless: $decadeNumber is 1870)[Alternatively, you may $wade through a door to the $upOnScreen that takes you out into the [[yard]].]]}[]]}</tw-passagedata><tw-passagedata pid="159" name="dining room" tags="" position="2342,3186" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 25)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18725&quot;)]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $diningRoom of the $domicile. (if: $architecture is &quot;mansion&quot;)[A $partiallySubmerged door leads $upOnScreen to a [[$hallway1-&gt;left hallway]].] (if: $architecture is &quot;house&quot;)[From here, a door leads $upOnScreen to a [[$kitchen-&gt;kitchen]] while a second door leads $rightOnScreen to the [[$entranceHall-&gt;entrance hall]].[]]]}</tw-passagedata><tw-passagedata pid="160" name="living room" tags="" position="2913,3177" size="100,100">($setImage:)
(set: $thisRoomsNumber to 4)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18704&quot;)]
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: purple) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{$complexSentence. ($room4content:) (if: $architecture is &quot;mansion&quot;)[A door leads $upOnScreen to a [[$hallway2-&gt;right hallway]].] (if: $architecture is &quot;house&quot;)[From here, a door leads $upOnScreen to a [[$study-&gt;study]], a second door leads $leftOnScreen to the [[$entranceHall-&gt;entrance hall]], while a third leads $rightOnScreen to the [[$chapel-&gt;chapel]].]}[]]</tw-passagedata><tw-passagedata pid="161" name="billiard room" tags="" position="3016,2891" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 1)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18701&quot;)]
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
(set:$entryPointFromElevator to &quot;null&quot;)
($refreshSentences:)
(border-color: white) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. ($room1content:) A door from here leads $leftOnScreen to a [[$study-&gt;study]]. []]}</tw-passagedata><tw-passagedata pid="162" name="main staircase" tags="" position="2711,2950" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 16)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18716&quot;)]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are on the $partiallySubmerged $mainStaircase of a $domicile. You can head up to the (link: $landing)[(goto: &quot;main landing&quot;)] or down and to the $downOnScreen to the [[$entranceHall-&gt;entrance hall]].}[]]}</tw-passagedata><tw-passagedata pid="163" name="entrance hall" tags="" position="2640,3090" size="100,100">{($setImage:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18720&quot;)]
($refreshSentences:)
(set: $thisRoomsNumber to 36)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $flooded $entranceHall of a $domicile. (if: $architecture is in (a:&quot;mansion&quot;, &quot;library&quot;)) [To the $upOnScreen two side halls branch off to the [[$leftOnScreen-&gt;left hallway]] and [[$rightOnScreen-&gt;right hallway]].] (if: 2 is in $optionalPaths)[To the $upOnScreen is the $partiallySubmerged [[$mainStaircase-&gt;main staircase]].](else:)[To the $upOnScreen the hall [[turns to the $leftOnScreen-&gt;rear hall]].] (if: $architecture is &quot;house&quot;)[Doors to the $leftOnScreen and $rightOnScreen go to a [[$diningRoom-&gt;dining room]] and a [[$livingRoom-&gt;living room]] respectively.] 

(if: true) [$returnText] []]}</tw-passagedata><tw-passagedata pid="164" name="left hallway" tags="" position="2340,3033" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 19)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $flooded $hallway1 that cuts through the $leftOnScreen of the $domicile. A door from here leads $downOnScreen into a [[$diningRoom-&gt;dining room]] while another door leads $leftOnScreen to a [[$kitchen-&gt;kitchen]]. A panel in the wall has opened slightly, revealing a $partiallySubmerged chute that leads down to the (link-goto: &quot;main basement&quot;). Or you may head $rightOnScreen to the main [[$entranceHall-&gt;entrance hall]].}.[]]}</tw-passagedata><tw-passagedata pid="165" name="right hallway" tags="" position="2918,3034" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 21)
($setRoomVariables:)
(set:$entryPointFromElevator to &quot;null&quot;)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in a $flooded $hallway2 that cuts through the $rightOnScreen of the $domicile. A door from here leads $downOnScreen into a [[$livingRoom-&gt;living room]], while another door leads $upOnScreen to a [[$study-&gt;study]]. You may also go $leftOnScreen to the [[$entranceHall-&gt;entrance hall]] or you may [[head through an egress to the $rightOnScreen-&gt;gallery]]. []]}</tw-passagedata><tw-passagedata pid="166" name="bathroom" tags="" position="3496,2369" size="100,100">{($setImage:)
($refreshSentences:) 
(set: $thisRoomsNumber to 26)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18728&quot;)]
(if: $decadeNumber is 1870)[($overrideImage: &quot;18728&quot;)]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in a $bathroom on the upstairs floor of a $domicile. A door from here leads $rightOnScreen to the [[$leftOnScreen landing-&gt;left landing]].}[]]}</tw-passagedata><tw-passagedata pid="167" name="buttery" tags="" position="2211,3186" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 24)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $flooded $buttery of a large $domicile. The only proper exit is to the $upOnScreen, into the [[$kitchen-&gt;kitchen]]. However, there also appears to be some $underwater (link: $narrow + &quot;, &quot; + $roughHewn + &quot;steps heading down&quot;)[(goto: &quot;under-kitchen steps&quot;)] into the gloom.[]]}</tw-passagedata><tw-passagedata pid="168" name="larder" tags="" position="2074,3033" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 17)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $flooded $larder. You can leave here via a door to the $rightOnScreen, which leads to the [[$kitchen-&gt;kitchen]].}[]]}</tw-passagedata><tw-passagedata pid="169" name="chapel" tags="" position="3289,3169" size="100,100">($setImage:)
(set: $thisRoomsNumber to 7)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18707&quot;)]
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: green) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{$complexSentence.($room7content:) (if: $architecture is &quot;mansion&quot;)[A door leads $upOnScreen to an [[$oratory-&gt;oratory]].](if: $architecture is &quot;house&quot;)[A door leads $leftOnScreen to a [[$livingRoom-&gt;living room]].] (if: $domicile is &quot;mansion&quot;)[There is also something strange about the altar, which (link:&quot;you can investigate...&quot;)[=(text-colour:orange)[you investigate, pushing on the altar until it scrapes open and reveals a (link:&quot;secret passage beneath&quot;)[(goto:&quot;priesthole&quot;)]].]}]</tw-passagedata><tw-passagedata pid="170" name="oratory" tags="" position="3292,3018" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 23)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $flooded $oratory of a $grandHouse. From here you may go [[$leftOnScreen-&gt;gallery]] or $downOnScreen to the [[$chapel-&gt;chapel]].}[]]}</tw-passagedata><tw-passagedata pid="171" name="main landing" tags="" position="3904,2510" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 33)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18733&quot;)]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are on the $mainLanding of a $domicile, at the top of a (if: $domicile is &quot;mansion&quot;)[ grand] staircase. (if: 2 is in $optionalPaths) [You can (link: &quot;proceed down the staircase if you wish&quot;)[(goto:&quot;main staircase&quot;)]](else:) [You can (link: &quot;proceed down the staircase if you wish&quot;)[(goto:&quot;alt staircase&quot;)]], or you can head (link: $leftOnScreen)[(set: $heading to $leftOnScreen)(goto:&quot;midleft landing&quot;)] or (link: $rightOnScreen)[(set: $heading to $rightOnScreen)(goto:&quot;midright landing&quot;)] along the landing. (if: $decadeNumber is 1870)[There is also a door in front of you which you can [[step through-&gt;séance room]].]}[]]}</tw-passagedata><tw-passagedata pid="172" name="left landing" tags="" position="3637,2367" size="100,100">{($setImage:)
($refreshSentences:) 
(set: $thisRoomsNumber to 29)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18729&quot;)]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are at the $leftOnScreen end of the $mainLanding. A door from here leads $leftOnScreen to the [[$bathroom-&gt;bathroom]], while a door to the $downOnScreen leads to a [[$boudoir-&gt;boudoir]]. 
(if: $architecture is &quot;house&quot;)[Finally, by going [[$rightOnScreen-&gt;uplanding]] you may head back towards the main landing.]
(if: $architecture is &quot;mansion&quot;)[Another door leads $upOnScreen to the [[$atticStairs-&gt;attic stairs]].
	(if: 3 is in $optionalPaths) [You may also go (link: $rightOnScreen + &quot;along the landing&quot;)[(set: $heading to $rightOnScreen)(goto:&quot;midleft landing&quot;)].]
	(else:)[Finally, by going [[$rightOnScreen-&gt;uplanding]] you may head back towards the main landing.]]}[]]}</tw-passagedata><tw-passagedata pid="173" name="right landing" tags="" position="4176,2502" size="100,100">{($setImage:)
($refreshSentences:) 
(set:$entryPointFromElevator to &quot;null&quot;)
(set: $thisRoomsNumber to 35)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18735&quot;)]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are at the $rightOnScreen end of the main landing. A door from here leads $upOnScreen to the [[$armorRoom-&gt;armor room]], while a door to the $rightOnScreen leads to a [[$nursery-&gt;nursery]]. (if: $architecture is &quot;mansion&quot;)[Another door leads to a [[$threadbare $bedchamber-&gt;second bedchamber]] to the $downOnScreen. You may also [[go $leftOnScreen along the landing-&gt;midright landing]].](else:)[You may also [[go $leftOnScreen along the landing-&gt;main landing]]][]]}</tw-passagedata><tw-passagedata pid="174" name="casket room" tags="" position="3813,3147" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 9)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: (rgb: 155, 100, 0)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. ($room9content:) 

From here you may $swim $upOnScreen to the [[$mainBasement-&gt;main basement]].]}</tw-passagedata><tw-passagedata pid="175" name="yard" tags="" position="2222,2881" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 12)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $flooded $yard of a large $domicile. (if: 1 is in $optionalPaths) [The yard extends via [[a path to the $rightOnScreen-&gt;secondYard]].](else:)[To the $upOnScreen is the [[$kennels-&gt;kennels]].] (if: $domicile is in (a:&quot;house&quot;,&quot;mansion&quot;))[If you wish to $wade into the house, a](else:)[A] door leads into the [[$kitchen-&gt;kitchen]].[]]}</tw-passagedata><tw-passagedata pid="176" name="second bedchamber" tags="" position="4177,2643" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 37)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in a $threadbare $bedchamber. You can [[exit here to the $upOnScreen-&gt;right landing]].}[]]}</tw-passagedata><tw-passagedata pid="177" name="boudoir" tags="" position="3644,2512" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 3)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18703&quot;)]
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: red) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. ($room3content:) You can [[exit here to the $upOnScreen-&gt;left landing]].[]]}</tw-passagedata><tw-passagedata pid="178" name="attic stairs" tags="" position="3632,2222" size="100,100">{($setImage:)
($refreshSentences:) 
(set: $thisRoomsNumber to 28)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are on the $atticStairs. You can either go up into the [[$attic-&gt;attic]] or down onto the [[$mainLanding-&gt;left landing]].}[]]}</tw-passagedata><tw-passagedata pid="179" name="study" tags="" position="2865,2892" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 2)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18702&quot;)]
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: (rgb: 255, 100, 100)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $entryPointFromElevator is &quot;from elevator&quot;)[You exit the secret room through a door disguised as a bookcase.] $complexSentence. ($room2content:) (if: $architecture is &quot;house&quot;)[A door from here leads $downOnScreen to the [[$livingRoom-&gt;living room]].] From here you can $wade $rightOnScreen to a [[$billiardRoom-&gt;billiard room]].(if: $architecture is &quot;mansion&quot;)[ A door from here leads $downOnScreen and out onto a [[$hallway2-&gt;right hallway]]. (if: $entryPointFromElevator is &quot;null&quot;)[There is also something strange about the bookcase on the $upOnScreen wall, which (link:&quot;you can investigate...&quot;)[=(text-colour:orange)[you investigate, pressing on the bookcase until it clicks open and reveals a passage to a [[secret room]].]](else:)[You can also go [[back through the secret door-&gt;secret room]] if you wish.]][]]}</tw-passagedata><tw-passagedata pid="180" name="nursery" tags="" position="4318,2502" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 0)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18700&quot;)]
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: black) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. ($room0content:) To exit this place, you must [[take a door-&gt;right landing]] to the $leftOnScreen.[]]}</tw-passagedata><tw-passagedata pid="181" name="servant&#39;s quarters" tags="" position="3813,2850" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 38)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $underwater $servantsQuarters of the $domicile. From here you may $swim $downOnScreen to the [[main basement]].[]]}</tw-passagedata><tw-passagedata pid="182" name="armor room" tags="" position="4181,2357" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 5)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18705&quot;)]
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
(if: $architecture is &quot;mansion&quot;) [(set: $dilapidated to &quot;elevator&quot;)]
(if: $architecture is &quot;house&quot;) [(set: $dilapidated to &quot;stairs&quot;)]

($refreshSentences:)
(border-color: blue) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $entryPointFromElevator is &quot;from elevator&quot;)[You exit the elevator through what turns out to be a secret door, disguised as a $secretDoor. $complexSentence. The room is lined on every side by $suitsOfArmor. ($room5content:) You can only exit this room to the $downOnScreen, via a door that leads to the [[($ern: $rightOnScreen) end of the landing-&gt;right landing]], or go back through the $secretDoor to the (link: &quot;neglected, run-down &quot; + $dilapidated)[(goto:&quot;dilapidated stair or elevator&quot;).]][] (else:)[$complexSentence. The room is lined on every side by $suitsOfArmor. ($room5content:) You can only exit this room to the $downOnScreen, via a door that leads to the [[($ern: $rightOnScreen) end of the landing-&gt;right landing]]. There is also something strange about the $secretDoor directly opposite, on the $upOnScreen wall, which (link:&quot;you can investigate...&quot;)[=(text-colour:orange)[you investigate, pulling the $secretDoorShort aside to reveal a secret entrance to a (link: &quot;neglected, run-down &quot; + $dilapidated)[(goto:&quot;dilapidated stair or elevator&quot;).]][]]]}

</tw-passagedata><tw-passagedata pid="183" name="kennels" tags="" position="2224,2731" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 6)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: cyan) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence(if:$domicile is in (a:&quot;house&quot;,&quot;mansion&quot;))[, surrounded by the baying of hounds.](else:)[.] ($room6content:) To leave here you must head $downOnScreen to the [[$yard-&gt;yard]]. []]}</tw-passagedata><tw-passagedata pid="184" name="main basement" tags="" position="3813,2995" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 42)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18742&quot;)]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are at a $laundryCollectionArea in the $underwater basement of the $domicile. From here you may $swim (if: $seance is &quot;no&quot;)[$downOnScreen to the [[$casketRoom-&gt;casket room]] or] $rightOnScreen along a [[$basementCorridor-&gt;basement corridor]]. (if: $architecture is &quot;mansion&quot;) [Alternatively, a door to the $upOnScreen leads to the [[$servantsQuarters-&gt;servant&#39;s quarters]], and stairs to the $leftOnScreen lead down into the [[$cellar-&gt;cellar]].]}.[]]}</tw-passagedata><tw-passagedata pid="185" name="cellar" tags="" position="3666,2995" size="100,100">($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 41)
($setRoomVariables:)

(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $underwater $cool $dark $cellar beneath the $domicile. From here, a passage leads up and to the $rightOnScreen to the [[$mainBasement-&gt;main basement]] area. Alternatively, you may head $leftOnScreen to the [[$underKitchenSteps-&gt;under-kitchen steps]]. }[]]</tw-passagedata><tw-passagedata pid="186" name="attic" tags="" position="3631,2080" size="100,100">{($setImage:)
($refreshSentences:) 
(set: $thisRoomsNumber to 27)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the $attic of a $domicile. At one end of the $attic, stairs lead down to the [[upstairs floor-&gt;attic stairs]]. At the other is a dilapidated $dilapidated. You can (link: &quot;investigate the &quot; + $dilapidated)[(goto: &quot;dilapidated stair or elevator&quot;)] if you like.}[]]}</tw-passagedata><tw-passagedata pid="187" name="boiler room" tags="" position="3960,2856" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 39)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18739&quot;)]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $underwater $noisy $boilerRoom beneath the $domicile (if: $domicile is in (a:&quot;house&quot;,&quot;mansion&quot;) and $hundredNumber &gt; 1700)[filled with the banging and clanging of the barely functional boiler]. From here you may $swim $upOnScreen to the (link: $dilapidated)[(goto: &quot;dilapidated stair or elevator&quot;)] or $downOnScreen to a [[basementCorridor-&gt;basement corridor]].[]]}</tw-passagedata><tw-passagedata pid="188" name="storage room" tags="" position="3952,3148" size="100,100">{($setImage:)
($refreshSentences:)
(unless: $decadeNumber is 1870)[
(set: $thisRoomsNumber to 45)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in a storage room in the $underwater basement.From here you may $swim $upOnScreen to a [[$basementCorridor-&gt;basement corridor]].[]]]

(else:)[(set: $thisRoomsNumber to 6)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18706&quot;)]
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)(border-color: cyan) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are at a cage in the basement. From here you may $swim $upOnScreen to a [[$basementCorridor-&gt;basement corridor]].[]]]}

</tw-passagedata><tw-passagedata pid="189" name="under-kitchen steps" tags="" position="3518,2995" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 52)
($setRoomVariables:)

(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the darkness of a $submerged rough-hewn landing beneath the $buttery of the $domicile. You may $swim up to the (link: $buttery)[(goto:&quot;buttery&quot;)] if you wish. Alternatively, a doorway leads $rightOnScreen into a $cold [[$cellar-&gt;cellar]]. (if: $domicile is &quot;mansion&quot;)[There are also steps leading (link: &quot;further down into the darkness&quot;)[(goto: &quot;caverns&quot;)].[]]]}</tw-passagedata><tw-passagedata pid="190" name="caverns" tags="" position="3641,3410" size="100,100">($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 48)
($setRoomVariables:)

(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the dark caverns beneath the house. From here, you can go (link: &quot;up some steps&quot;)[(goto: &quot;under-kitchen steps&quot;)] or head down a long tunnel that goes [[deeper into the caverns-&gt;caverns2]] to the $rightOnScreen. }[]]  </tw-passagedata><tw-passagedata pid="191" name="caverns2" tags="" position="3971,3407" size="100,100">($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 49)
($setRoomVariables:)

(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are at the ($ern: $rightOnScreen) end of a long, cavernous tunnel that heads ($compassTo: $leftOnScreen, $rightOnScreen) through utter darkness beneath the house. There are steps here, leading up, which [[you may take-&gt;priesthole]]. Or you may head down the long tunnel to the [[$leftOnScreen-&gt;caverns]]. An alternative is to head into the gloom to the [[($directionJoined: $upOnScreen, $leftOnScreen) -&gt;caverns3]]. }[]]</tw-passagedata><tw-passagedata pid="192" name="priesthole" tags="" position="4097,3255" size="100,100">($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 47)
($setRoomVariables:)

(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in a cramped hidey hole beneath the chapel of the $architecture. Through the wall to the $leftOnScreen, you can hear some banging and clanging. From here, you can climb down into the [[caverns-&gt;caverns2]] or climb up into the (link-goto:&quot;chapel&quot;). If you wish to know more about the noise, however, there is a small hole in the wall through which (link: &#39;you can peep.&#39;)[==(textcolor: orange)[you see what appears to be a basement corridor running ($compassTo: $leftOnScreen, $rightOnScreen) past the boiler room.]}[]]</tw-passagedata><tw-passagedata pid="193" name="caverns3" tags="" position="3829,3270" size="100,100">($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 46)
($setRoomVariables:)

(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the dark caverns beneath the house. There is a broken elevator here, which you may (link: &quot;attempt to operate&quot;)[(goto: &quot;dilapidated stair or elevator&quot;)]. If you don&#39;t wish to try the elevator, your only option is to head ($directionJoined: $downOnScreen, $rightOnScreen) into the darkness of the [[caverns-&gt;caverns2]].}[]]</tw-passagedata><tw-passagedata pid="194" name="master bedroom" tags="" position="3773,2644" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 31)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $masterBedroom. A door leads from here back onto the [[$mainLanding-&gt;midleft landing]].[]]}</tw-passagedata><tw-passagedata pid="195" name="dilapidated stair or elevator" tags="" position="4138,2765" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 8)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18708&quot;)]
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
(if: $architecture is &quot;mansion&quot;) [(set: $dilapidated to &quot;elevator&quot;)]
(if: $architecture is &quot;house&quot;) [(set: $dilapidated to &quot;stairs&quot;)]
(set:$entryPointFromElevator to &quot;from elevator&quot;)
($refreshSentences:)}
(border-color: yellow) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{$complexSentence. (if: $domicile is &quot;library&quot;)[Ladders and ballustrades scaffold the towering collection of broken books and scrolls, leading to every level of the library.](if: $domicile is &quot;mansion&quot;)[Despite its broken down state, the elevator appears to be functional.] Choose a floor to go to: }
(if: $domicile is &quot;mansion&quot;)[(link: &quot;The caverns&quot;)[(goto: &quot;caverns3&quot;)]]
(link: &quot;The basement&quot;)[(goto: &quot;boiler room&quot;)]
(if: $domicile is &quot;mansion&quot;)[(link: &quot;The ground floor&quot;)[(goto: &quot;secret room&quot;)]]
(link: &quot;Upstairs&quot;)[(goto: &quot;armor room&quot;)]
(if: $architecture is &quot;mansion&quot;)[(link: &quot;The attic&quot;)[(goto: &quot;attic&quot;)]]

[]]</tw-passagedata><tw-passagedata pid="196" name="direction joined" tags="startup" position="4,472" size="100,100">{
&lt;!--This joins compass directions, e.g. east and north to form northeast (not eastnorth)--&gt;

(set: $directionJoined to
(macro: str-type _firstDir, str-type _secondDir, [
	(if: _firstDir is in (a: &quot;north&quot;, &quot;south&quot;))
		[(output-data: (joined: &quot;&quot;,_firstDir,_secondDir))]
	(else:) [(output-data: (joined: &quot;&quot;,_secondDir,_firstDir))]
	(output-data: &quot;&quot;)
	]))
	

}</tw-passagedata><tw-passagedata pid="197" name="basement corridor" tags="" position="3959,2995" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 43)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;18743&quot;)]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on the $underwater $basementCorridor running ($compassTo: $leftOnScreen, $rightOnScreen) beneath the $domicile. From here you may $swim (if: $architecture is &quot;mansion&quot;)[$downOnScreen to the [[$storageRoom-&gt;storage room]],](elseif: $decadeNumber is 1870)[$downOnScreen towards a [[cage-&gt;storage room]],] $upOnScreen to the [[$boilerRoom-&gt;boiler room]] or $leftOnScreen to the [[$mainBasement-&gt;main basement]]. To the $rightOnScreen, the corridor ends in a [[$brickWall-&gt;brick wall]].[]]}</tw-passagedata><tw-passagedata pid="198" name="brick wall" tags="" position="4123,2990" size="100,100">($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 44)
($setRoomVariables:)

(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are at the far $rightOnScreen end of the$underwater basement corridor, which dead-ends $inABrickWall. (if: $domicile is &quot;mansion&quot;)[There is a small hole in the wall through which (link: &#39;you can peep.&#39;)[==(text-colour:orange)[you see what appears to be a hiding hole illuminated by light from the chapel above.]] From here you may $swim $leftOnScreen along the [[$basementCorridor-&gt;basement corridor]].}[]]</tw-passagedata><tw-passagedata pid="199" name="compass to" tags="startup" position="22,229" size="100,100">{
&lt;!--This joins opposite compass directions in the phrases &quot;north to south&quot; and  &quot;east to west&quot; (not &quot;south to north&quot; or &quot;west to east&quot;)--&gt;
	
(set: $compassTo to 
(macro: str-type _firstDir, str-type _secondDir, [
	(if: _firstDir is in (a: &quot;north&quot;, &quot;east&quot;))
		[(output-data: _firstDir + &quot; to &quot; + _secondDir)]
	(else:) [(output-data: _secondDir + &quot; to &quot; + _firstDir)]
	(output-data: &quot;&quot;)
	])) 
	}</tw-passagedata><tw-passagedata pid="200" name="ern" tags="startup" position="4,579" size="100,100">{
&lt;!--Changes &quot;north&quot; into &quot;northern&quot; etc.--&gt;

(set: $ern to 
(macro: string-type _direction, [
	(set: _ern to _direction+&quot;ern&quot;)
	(output-data: _ern)
	]))
}</tw-passagedata><tw-passagedata pid="201" name="secret room" tags="" position="2866,2746" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 11)
($setRoomVariables:)
(set:$entryPointFromElevator to &quot;from elevator&quot;)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in a $flooded secret room behind the bookcase of the $study. There is a dilapidated $elevator here, which you (link:&quot;can take&quot;)[(goto:&quot;dilapidated stair or elevator&quot;)]. Otherwise, you can exit to the [[$study-&gt;study]] via the bookcase.[]]}</tw-passagedata><tw-passagedata pid="202" name="gatehouse" tags="" position="5807,3017" size="100,100">{
(set: $thisRoomsNumber to 25)
($setRoomVariables:)
(set: $castleLevel to (cond:
	$castleLevel is 1,1,
	$castleLevel is -1,-1,
	1)
	)
	
(set: $castleLevel to $castleLevel * -1)
(if: $architecture is &quot;castle&quot;)[
	(set: $inOrOnBattlements to (cond: 
		$castleLevel is -1, &quot;in&quot;,
		$castleLevel is 1, &quot;on the battlements of&quot;,
		&quot;&quot;
		))	
		]
(set: $onOrUnder to (cond:
		$castleLevel is -1, &quot;under&quot;,
		$castleLevel is 1, &quot;on&quot;,
		&quot;&quot;
		))
(set: $turretDirection to (cond: 
		$castleLevel is -1, &quot;up&quot;,
		$castleLevel is 1, &quot;down&quot;,
		&quot;&quot;
		))
(set: _castleLevel to (cond: 	
		$castleLevel is -1, &quot;ground&quot;,
		$castleLevel is 1, &quot;upper&quot;,
		&quot;&quot;
		))
(set: _alongOrThrough to (cond:
		$decadeNumber is 1960, &quot;along&quot;,
		$castleLevel is -1, &quot;within&quot;,
		$castleLevel is 1, &quot;along&quot;,
		&quot;&quot;
		))
(set: _exit to ($returnToComplex:))
}	
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $architecture is &quot;castle&quot;)[You are $inOrOnBattlements the $gatehouse. ($setRoomContent:) From here you can go $rightOnScreen _alongOrThrough the [[$gatehouseWall-&gt;gatehouse wall]] or $leftOnScreen _alongOrThrough the [[front $wall-&gt;front wall]]. (if: $decadeNumber is in $castles)[You can also go [[$turretDirection some steps-&gt;gatehouse]].] (if: _castleLevel is &quot;ground&quot;)[Or you may (if: $decadeNumber is in (a:1030))[ascend the slope from ](else:)[exit] the $gatehouse to the $upOnScreen into the [[(either: $baileyAdj1, $baileyAdj2, $baileyAdj3) $bailey-&gt;main courtyard]](unless: $decadeNumber is 1960)[, or head (if: $decadeNumber is in (a:1030))[down and to the] $downOnScreen to the (link: $drawbridge)[(set:$castleLevel to 1) (goto: ($returnToComplex:))]].]]{


}(if:$architecture is &quot;arena&quot;)[You are in the entry tower, in the center of the $downOnScreen stand. ($setRoomContent:) From here you can climb some steps either to the $rightOnScreen onto the [[($ern: $rightOnScreen) half of the $downOnScreen stand-&gt;gatehouse wall]] or to the $leftOnScreen onto the [[($ern: $leftOnScreen) half-&gt;front wall]]. Alternatively, you can exit the stand to the $upOnScreen into the [[central arena-&gt;main courtyard]], or by heading $downOnScreen to the (link: &quot;exit&quot;)[(set:$castleLevel to 1) (goto: ($returnToComplex:))].]{


}(if: $architecture is &quot;mosque&quot;)[You are in the portal to the great mosque. ($setRoomContent:) From here you can go $rightOnScreen through the [[($directionJoined: $rightOnScreen, $downOnScreen) riwaq-&gt;gatehouse wall]] or $leftOnScreen through the [[($directionJoined: $leftOnScreen, $downOnScreen) riwaq-&gt;front wall]]. Or you may exit the musalla to the $upOnScreen into the [[sahn-&gt;main courtyard]], or by heading $downOnScreen to the (link: &quot;exit&quot;)[(set:$castleLevel to 1) (goto: ($returnToComplex:))].]{

}(if: $decadeNumber is 1960)[
	(if: $gulag is &quot;escaped&quot;)[($setRoomContent:) You see a chance to escape to the train station, which you can [[take-&gt;complex six]].](else:)[(set: $gulag to &quot;escaped&quot;)]]{
	
	
}(if: $architecture is &quot;villa&quot;)[You are at the entrance to the $domicile. ($setRoomContent:) From here you can go $upOnScreen into the [[$bailey-&gt;main courtyard]] or head $downOnScreen to the (link: $drawbridge)[(set:$castleLevel to 1) (goto: ($returnToComplex:))]].]
</tw-passagedata><tw-passagedata pid="203" name="front wall" tags="" position="5546,3017" size="100,100">{
(set: $thisRoomsNumber to 24)
($setRoomVariables:)
(set: $castleLevel to $castleLevel * -1)
(if: $architecture is &quot;castle&quot;)[
	(if: $castleLevel is 1)[
		(set: _castleLevel to &quot;ground&quot;)
		(set: $inOrOn to &quot;in&quot;)]
	(if: $castleLevel is -1)[
		(set: _castleLevel to &quot;upper&quot;)
		(set: $inOrOn to &quot;on&quot;)]
		]
(set: $onOrUnder to (cond:
		$castleLevel is 1, &quot;under&quot;,
		$castleLevel is -1, &quot;on&quot;,
		&quot;&quot;
		))
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $architecture is &quot;castle&quot;)[You are $inOrOn the front $wall. ($setRoomContent:) From here you can (if: $decadeNumber is in $monasteries)[step out into the [[(either: $baileyAdj1, $baileyAdj2, $baileyAdj3) garth-&gt;main courtyard]],] head [[$leftOnScreen-&gt;castle room 3]] ($toThePhrase:3), or [[$rightOnScreen-&gt;gatehouse]] to the $gatehouse.]{


}(if: $architecture is &quot;arena&quot;)[You are on the $leftOnScreen half of the $downOnScreen stand. ($setRoomContent:) From here you can go [[$leftOnScreen-&gt;castle room 3]] and down some steps ($toThePhrase:3), or [[$rightOnScreen-&gt;gatehouse]] to the entry tower.]{

}(if: $architecture is &quot;mosque&quot;)[You are walking through the ($ern:$downOnScreen) riwaq at the ($directionJoined: $leftOnScreen, $downOnScreen) corner of the sahn. ($setRoomContent:) From here you can go [[$leftOnScreen-&gt;castle room 3]] to the ($directionJoined: $leftOnScreen, $downOnScreen) minaret, or [[$rightOnScreen-&gt;gatehouse]] to the portal. You can also simply step out from the shade of the riwaq into the [[open courtyard-&gt;main courtyard]]]
]

</tw-passagedata><tw-passagedata pid="204" name="castle room 3" tags="" position="5322,3020" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 3)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)
(set: $corner to ($directionJoined: $rightOnScreen, $downOnScreen))

(set: $castleLevel to $castleLevel * -1)
(set: $inOrOnBattlements to (cond: 
	$castleLevel is -1, &quot;in&quot;,
	$castleLevel is 1, &quot;on the battlements of&quot;,
	&quot;&quot;))

(set: $inOrAtopMinaret to (cond: 
	$castleLevel is -1, &quot;in&quot;,
	$castleLevel is 1, &quot;at the top of&quot;,
	&quot;&quot;
	))	
	
(set: $turretDirection to (cond: 
		$castleLevel is -1, &quot;up&quot;,
		$castleLevel is 1, &quot;down&quot;,
		&quot;&quot;
		))
(set: _castleLevel to (cond: 	
		$castleLevel is -1, &quot;ground&quot;,
		$castleLevel is 1, &quot;upper&quot;,
		&quot;&quot;
		))
(set: _alongOrThrough to (cond:
		$decadeNumber is 1960, &quot;along&quot;,
		$castleLevel is -1, &quot;within&quot;,
		$castleLevel is 1, &quot;along&quot;,
		&quot;&quot;
		))
}
(border-color: red) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $architecture is &quot;castle&quot;)[(if:$castleLevel is -1)[$complexSentence.](else:)[You are on the $battlements of the $maidensTower.] ($setRoomContent:) From here you can go $rightOnScreen _alongOrThrough the [[front $wall-&gt;front wall]] or (if: $decadeNumber is in (a:1030))[[[up the sloping cloister-&gt;left wall]] to the $upOnScreen.](else:) [$upOnScreen _alongOrThrough the [[$leftOnScreen $wall-&gt;left wall]].] (if: $decadeNumber is in $castles)[You can also go [[$turretDirection some steps-&gt;castle room 3]].] (if: _castleLevel is &quot;ground&quot;)[Or you may exit (if: $decadeNumber is in (a:1030))[up and] to the ($directionJoined: $rightOnScreen, $upOnScreen) into the [[(either: $baileyAdj1, $baileyAdj2, $baileyAdj3) $bailey-&gt;main courtyard]].]]{


}(if: $architecture is &quot;arena&quot;)[$complexSentence. ($setRoomContent:) From here you can go up some steps to the $rightOnScreen to the top of the [[$downOnScreen stand-&gt;front wall]] or $upOnScreen [[($toThePhrase: 7)-&gt;left wall]]. You can also go ($directionJoined: $rightOnScreen, $upOnScreen) into the [[central arena-&gt;main courtyard]].]{


}(if: $architecture is &quot;mosque&quot;)[You are $inOrAtopMinaret the $corner minaret. ($setRoomContent:) (if: _castleLevel is &quot;ground&quot;) [From here you can go $rightOnScreen through the [[($ern:$downOnScreen) riwaq-&gt;front wall]] or $upOnScreen through the [[($ern: $leftOnScreen) riwaq-&gt;left wall]] that run along the sides of the sahn.] You can (if: _castleLevel is &quot;ground&quot;)[also](else:)[only] go [[$turretDirection some steps-&gt;castle room 3]].]{

}(if: $architecture is &quot;villa&quot;)[$complexSentence.($setRoomContent:) From here you may exit to the ($directionJoined: $rightOnScreen, $upOnScreen) into the [[$bailey-&gt;main courtyard]].]]</tw-passagedata><tw-passagedata pid="205" name="left wall" tags="" position="5301,2671" size="100,100">{
($setImage:)
(set: $thisRoomsNumber to 18)
(if: $architecture is &quot;arena&quot;)[(set: $thisRoomsNumber to 7)]
($setRoomVariables:)
(set: $corner to ($directionJoined: $leftOnScreen, $upOnScreen))

(set: $castleLevel to $castleLevel * -1)
(if: $architecture is &quot;castle&quot;)[
	(if: $castleLevel is 1)[
		(set: _castleLevel to &quot;ground&quot;)
		(set: $inOrOn to &quot;in&quot;)]
	(if: $castleLevel is -1)[
		(set: _castleLevel to &quot;upper&quot;)
		(set: $inOrOn to &quot;on&quot;)]
		]
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $architecture is &quot;castle&quot;)[You are $inOrOn the ($ern: $leftOnScreen) $wall. ($setRoomContent:) From here you can (if: $decadeNumber is in $monasteries)[step out into the [[(either:$baileyAdj1, $baileyAdj2, $baileyAdj3) garth-&gt;side walk]],] head (if: $decadeNumber is in (a:1030))[up and to the] [[$upOnScreen-&gt;rear turret]] to the ($directionJoined: $leftOnScreen, $upOnScreen) $turret, or (if: $decadeNumber is in (a:1030))[down and to the][[$downOnScreen-&gt;castle room 3]] ($toThePhrase:3).]{


}(if: $architecture is &quot;arena&quot;)[You are in the prayer tent. ($setRoomContent:) From here you can go up some steps to the $upOnScreen to the top of the [[$corner stand-&gt;rear turret]] or $downOnScreen [[($toThePhrase: 3)-&gt;castle room 3]]. You can also go $rightOnScreen into the [[central arena-&gt;main courtyard]].]{
}]</tw-passagedata><tw-passagedata pid="206" name="castle room 8" tags="" position="6274,2666" size="100,100">{
($setImage:)
(set: $thisRoomsNumber to 8)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)
(set:$corner to ($directionJoined: $rightOnScreen, $downOnScreen))

(set: $castleLevel to $castleLevel * -1)
(if: $architecture is &quot;castle&quot;)[
	(if: $castleLevel is 1)[
		(set: _castleLevel to &quot;ground&quot;)
		(set: $inOrOn to &quot;in&quot;)]
	(if: $castleLevel is -1)[
		(set: _castleLevel to &quot;upper&quot;)
		(set: $inOrOn to &quot;on&quot;)]
		]
}
(border-color: yellow) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{


}(if: $architecture is &quot;arena&quot;)[$complexSentence. ($setRoomContent:) From here you can go up some steps to the $upOnScreen [[to the top of the ($directionJoined: $rightOnScreen, $upOnScreen) corner stand-&gt;castle room 5]] or up some steps to the $downOnScreen to the [[top of the $corner stand-&gt;turret]]. You can also go $leftOnScreen into the [[central arena-&gt;main courtyard]].]{


}(if: $architecture is &quot;mosque&quot;)[$complexSentence. ($setRoomContent:) From here you can go $upOnScreen [[to the ($directionJoined: $rightOnScreen, $upOnScreen) minaret-&gt;castle room 5]] or $downOnScreen to the [[($directionJoined: $rightOnScreen, $downOnScreen) minaret-&gt;turret]]. You can also step out from the shade into the [[sahn-&gt;main courtyard]] to the $leftOnScreen.]{

}(if: $architecture is &quot;villa&quot;)[$complexSentence. ($setRoomContent:) From here you can go [[$leftOnScreen-&gt;flank walk]].]{

}(else:)[(if:$castleLevel is 1)[$complexSentence. ($setRoomContent:)](else:)[You are on the $battlements of the $castleword wall. ($setRoomContent:)] From here you can go (if: $decadeNumber is in (a:1030))[up and to the] [[$upOnScreen-&gt;castle room 5]] to the ($directionJoined: $rightOnScreen, $upOnScreen) $turret, or (if: $decadeNumber is in (a:1030))[down and to the] [[$downOnScreen-&gt;turret]] to the ($directionJoined: $rightOnScreen, $downOnScreen) $turret.]
]</tw-passagedata><tw-passagedata pid="207" name="turret" tags="" position="6252,3026" size="100,100">{
(set: $castleLevel to $castleLevel * -1)
(set: $thisRoomsNumber to 27)
($setRoomVariables:)
(set: $corner to ($directionJoined: $rightOnScreen, $downOnScreen))


(set: $inOrOnBattlements to (cond: 
	$castleLevel is -1, &quot;in&quot;,
	$castleLevel is 1, &quot;on the battlements of&quot;,
	&quot;&quot;
	))
	
(set: $inOrAtopMinaret to (cond: 
	$castleLevel is -1, &quot;in&quot;,
	$castleLevel is 1, &quot;at the top of&quot;,
	&quot;&quot;
	))	
		
(set: $turretDirection to (cond: 
		$castleLevel is -1, &quot;up&quot;,
		$castleLevel is 1, &quot;down&quot;,
		&quot;&quot;
		))
(set: _castleLevel to (cond: 	
		$castleLevel is -1, &quot;ground&quot;,
		$castleLevel is 1, &quot;upper&quot;,
		&quot;&quot;
		))
(set: _alongOrThrough to (cond:
		$decadeNumber is 1960, &quot;along&quot;,
		$castleLevel is -1, &quot;within&quot;,
		$castleLevel is 1, &quot;along&quot;,
		&quot;&quot;
		))
}	
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $architecture is &quot;castle&quot;)[You are $inOrOnBattlements the $corner $turret. ($setRoomContent:) From here you can go $leftOnScreen _alongOrThrough the [[$gatehouse $wall-&gt;gatehouse wall]] or (if: $decadeNumber is in (a:1030))[[[up the sloping cloister-&gt;left wall]] to the $upOnScreen.](else:) [[[$upOnScreen-&gt;castle room 8]] ($toThePhrase:8).] (if: $decadeNumber is in $castles)[You can also go [[$turretDirection some steps-&gt;turret]].] (if: _castleLevel is &quot;ground&quot;)[Or you may exit the $turret (if: $decadeNumber is in (a:1030))[up and ]to the ($directionJoined: $leftOnScreen, $upOnScreen) into the [[(either: $baileyAdj1, $baileyAdj2, $baileyAdj3) $bailey-&gt;main courtyard]].]]{



}(if: $architecture is &quot;arena&quot;)[You are on the $corner stand. ($setRoomContent:) From here you can go $leftOnScreen to the [[$downOnScreen stand-&gt;gatehouse wall]] or $upOnScreen [[($toThePhrase:8)-&gt;castle room 8]]. (if: _castleLevel is &quot;ground&quot;)[Or you may exit the stand to the ($directionJoined: $leftOnScreen, $upOnScreen) into the [[central arena-&gt;main courtyard]].]]{


}(if: $architecture is &quot;mosque&quot;)[You are $inOrAtopMinaret the $corner minaret. ($setRoomContent:) (if: _castleLevel is &quot;ground&quot;) [From here you can go $leftOnScreen through the [[($ern:$downOnScreen) riwaq-&gt;gatehouse wall]] or $upOnScreen through the [[($ern: $rightOnScreen) riwaq-&gt;castle room 8]] that run along the sides of the sahn.] You can (if: _castleLevel is &quot;ground&quot;)[also](else:)[only] go [[$turretDirection some steps-&gt;turret]].]{

}]

</tw-passagedata><tw-passagedata pid="208" name="castle room 5" tags="" position="6271,2084" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 5)
(if: $architecture is &quot;arena&quot;)[(set: $thisRoomsNumber to 28)]
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)
(set: $corner to ($directionJoined: $rightOnScreen, $upOnScreen))

(set: $castleLevel to $castleLevel * -1)

(set: $inOrOnBattlements to (cond: 
	$castleLevel is -1, &quot;in&quot;,
	$castleLevel is 1, &quot;on the battlements of&quot;,
	&quot;&quot;))
	
(set: $inOrAtopMinaret to (cond: 
	$castleLevel is -1, &quot;in&quot;,
	$castleLevel is 1, &quot;at the top of&quot;,
	&quot;&quot;
	))	
	
(set: $turretDirection to (cond: 
		$castleLevel is -1, &quot;up&quot;,
		$castleLevel is 1, &quot;down&quot;,
		&quot;&quot;
		))
(set: _castleLevel to (cond: 	
		$castleLevel is -1, &quot;ground&quot;,
		$castleLevel is 1, &quot;upper&quot;,
		&quot;&quot;
		))
(set: _alongOrThrough to (cond:
		$decadeNumber is 1960, &quot;along&quot;,
		$castleLevel is -1, &quot;within&quot;,
		$castleLevel is 1, &quot;along&quot;,
		&quot;&quot;
		))
}
(if: $architecture is &quot;castle&quot;)[(border-color: blue) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if:$castleLevel is -1)[$complexSentence.](else:)[You are on the $battlements of the $corner $turret.] ($setRoomContent:)From here you can go $leftOnScreen _alongOrThrough the [[$upOnScreen $wall-&gt;rear wall]] or (if: $decadeNumber is in (a:1030))[down and to the] [[$downOnScreen-&gt;castle room 8]] ($toThePhrase:8). (if: $decadeNumber is in $castles)[You can also go [[$turretDirection some steps-&gt;castle room 5]].] (if: _castleLevel is &quot;ground&quot;)[Or you may exit the $turret to the ($directionJoined: $rightOnScreen, $downOnScreen) $forceSpace into the [[flank walk]].]]]



(if: $architecture is &quot;arena&quot;)[(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are atop the $corner stand. ($setRoomContent:)From here you can go $downOnScreen [[($toThePhrase: 8)-&gt;castle room 8]] or head $leftOnScreen behind the [[main stand-&gt;rear wall]]. You can also go ($directionJoined: $leftOnScreen, $downOnScreen) into the [[central arena-&gt;main courtyard]].[]]]{


}(if: $architecture is &quot;mosque&quot;)[You are $inOrAtopMinaret the $corner minaret. ($setRoomContent:)(if: _castleLevel is &quot;ground&quot;) [From here you can go $downOnScreen through the [[($ern: $rightOnScreen) riwaq-&gt;castle room 8]] that runs along the sides of the sahn.] You can (if: _castleLevel is &quot;ground&quot;)[also](else:)[only] go [[$turretDirection some steps-&gt;castle room 5]].]{



}(if: $architecture is &quot;villa&quot;)[(border-color: blue) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $trophyRoom(if: $trophyRoom is &quot;trophy room&quot;)[, where memorabilia from famous Roman conquests are kept and displayed].[]($setRoomContent:)From here you may only exit to the ($directionJoined: $rightOnScreen, $downOnScreen) $forceSpace into the [[wooded path-&gt;flank walk]].[]]]{



}</tw-passagedata><tw-passagedata pid="209" name="rear turret" tags="" position="5302,2089" size="100,100">{
(set: $thisRoomsNumber to 31)
($setRoomVariables:)
(set: $corner to ($directionJoined: $leftOnScreen, $upOnScreen))

(set: $castleLevel to $castleLevel * -1)

(set: $inOrOnBattlements to (cond: 
	$castleLevel is -1, &quot;in&quot;,
	$castleLevel is 1, &quot;on the battlements of&quot;,
	&quot;&quot;
	))	

(set: $inOrAtopMinaret to (cond: 
	$castleLevel is -1, &quot;in&quot;,
	$castleLevel is 1, &quot;at the top of&quot;,
	&quot;&quot;
	))	
	
(set: $turretDirection to (cond: 
		$castleLevel is -1, &quot;up&quot;,
		$castleLevel is 1, &quot;down&quot;,
		&quot;&quot;
		))
(set: _castleLevel to (cond: 	
		$castleLevel is -1, &quot;ground&quot;,
		$castleLevel is 1, &quot;upper&quot;,
		&quot;&quot;
		))
(set: _alongOrThrough to (cond:
		$decadeNumber is 1960, &quot;along&quot;,
		$castleLevel is -1, &quot;within&quot;,
		$castleLevel is 1, &quot;along&quot;,
		&quot;&quot;
		))
}	
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $architecture is &quot;castle&quot;)[You are $inOrOnBattlements the $corner $turret. ($setRoomContent:)From here you can go $rightOnScreen _alongOrThrough the [[$upOnScreen $wall-&gt;rear wall]] or (if: $decadeNumber is in (a:1030))[down and to the] $downOnScreen _alongOrThrough the [[$leftOnScreen $wall-&gt;left wall]]. (if: $decadeNumber is in $castles)[You can also go [[$turretDirection some steps-&gt;rear turret]].] (if: _castleLevel is &quot;ground&quot;)[Or you may exit the $turret to the ($directionJoined: $rightOnScreen, $downOnScreen) into the [[side walk]].]]{


}(if: $architecture is &quot;arena&quot;)[You are on the $corner stand of the arena. ($setRoomContent:)From here you can go down some steps to the $downOnScreen [[($toThePhrase: 7)-&gt;left wall]] or head $rightOnScreen [[behind the main stand-&gt;rear wall]]. You can also go ($directionJoined: $rightOnScreen, $downOnScreen) into the [[central arena-&gt;main courtyard]].]{


}(if: $architecture is &quot;mosque&quot;)[You are $inOrAtopMinaret the $corner minaret. ($setRoomContent:)(if: _castleLevel is &quot;ground&quot;) [From here you can go $downOnScreen through the [[($ern: $leftOnScreen) riwaq-&gt;left wall]] that run along the sides of the sahn.] You can (if: _castleLevel is &quot;ground&quot;)[also](else:)[only] go [[$turretDirection some steps-&gt;rear turret]].]{

}]</tw-passagedata><tw-passagedata pid="210" name="rear wall" tags="" position="5774,2086" size="100,100">{
(set: $thisRoomsNumber to 11)
($setRoomVariables:)
(set: $castleLevel to $castleLevel * -1)
(if: $architecture is &quot;castle&quot;)[
	(if: $castleLevel is 1)[
		(set: _castleLevel to &quot;ground&quot;)
		(set: $inOrOn to &quot;in&quot;)]
	(if: $castleLevel is -1)[
		(set: _castleLevel to &quot;upper&quot;)
		(set: $inOrOn to &quot;on&quot;)]
		]

(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $architecture is &quot;castle&quot;)[You are $inOrOn the ($ern: $upOnScreen) $wall. ($setRoomContent:)From here you can (if: $decadeNumber is in $monasteries)[step out (if: $decadeNumber is in (a:1030))[and down the slope ]into the [[(either: $baileyAdj1, $baileyAdj2,$baileyAdj3) garth-&gt;rear walk]],] head  [[$leftOnScreen-&gt;rear turret]] to the ($directionJoined: $leftOnScreen, $upOnScreen) $turret, or [[$rightOnScreen-&gt;castle room 5]] to the ($directionJoined: $rightOnScreen, $upOnScreen) $turret.]

(if: $architecture is &quot;arena&quot;)[You are behind and beneath the main stand. ($setRoomContent:)From here you can go up some steps to the [[$leftOnScreen-&gt;rear turret]] to the top of the ($directionJoined: $leftOnScreen, $upOnScreen) stand or [[$rightOnScreen-&gt;castle room 5]] to the top of the ($directionJoined: $rightOnScreen, $upOnScreen) corner stand. ]
]}

</tw-passagedata><tw-passagedata pid="211" name="main courtyard" tags="" position="5824,2879" size="100,100">{(set: $thisRoomsNumber to 23)
(if: $architecture is &quot;arena&quot;)[(set: $thisRoomsNumber to 5)]
($setRoomVariables:)
(if: $architecture is &quot;castle&quot;)[(set: $castleLevel to 1)]

(if: $architecture is &quot;castle&quot; and $decadeNumber is not 130)[(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $castleword $bailey. ($setRoomContent:) Before you, (if: $decadeNumber is in (a:1020))[up a slope] to the $upOnScreen, looms the [[$castleKeep-&gt;castle keep]]. To the $downOnScreen(if: $decadeNumber is in (a:1030))[, down an icy slope] is the [[$gatehouse-&gt;gatehouse]]. ($setRoomContent:) From here you may also walk (if: $decadeNumber is in (a:1030))[up and ]around the $keep to the [[$leftOnScreen-&gt;side walk]] or to the [[$rightOnScreen-&gt;flank walk]]. Or you may head (if: $decadeNumber is in (a:1030))[downhill] to the [[($directionJoined: $rightOnScreen, $downOnScreen) $turret-&gt;turret]] , or  (if: $decadeNumber is in (a:1030))[descend a slope to the] [[($directionJoined: $leftOnScreen, $downOnScreen) ($toThePhrase: 3)-&gt;castle room 3]]. []][]]

(else-if: $architecture is &quot;castle&quot;)[(set: $thisRoomsNumber to 0)($setRoomVariables:)(border-color: black) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $castleword $bailey. ($setRoomContent:) Before you, (if: $decadeNumber is in (a:1020))[up a slope] to the $upOnScreen, looms the [[$castleKeep-&gt;castle keep]]. To the $downOnScreen(if: $decadeNumber is in (a:1030))[, down an icy slope] is the [[$gatehouse-&gt;gatehouse]]. ($setRoomContent:) From here you may also walk (if: $decadeNumber is in (a:1030))[up and ]around the $keep to the [[$leftOnScreen-&gt;side walk]] or to the [[$rightOnScreen-&gt;flank walk]]. Or you may head (if: $decadeNumber is in (a:1030))[downhill] to the [[($directionJoined: $rightOnScreen, $downOnScreen) $turret-&gt;turret]] , or  (if: $decadeNumber is in (a:1030))[descend a slope to the] [[($directionJoined: $leftOnScreen, $downOnScreen) ($toThePhrase: 3)-&gt;castle room 3]]. []][]]

(if: $architecture is &quot;arena&quot;)[(border-color: blue) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(set: $thisRoomsNumber to 5)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)
$complexSentence. ($setRoomContent:) From here, you can climb up upon the stands to the [[($directionJoined: $leftOnScreen, $upOnScreen)-&gt;rear turret]], [[$upOnScreen-&gt;castle keep]], [[($directionJoined: $rightOnScreen, $upOnScreen)-&gt;castle room 5]] or [[($directionJoined: $rightOnScreen, $downOnScreen)-&gt;turret]]. Alternatively, you may go $rightOnScreen [[($toThePhrase:8)-&gt;castle room 8]], $leftOnScreen [[($toThePhrase:7)-&gt;left wall]], or ($directionJoined: $leftOnScreen, $downOnScreen) [[($toThePhrase:3)-&gt;castle room 3]]. Lastly, you have the option of heading $downOnScreen to the [[entry tower-&gt;gatehouse]].][]]


(if: $architecture is &quot;mosque&quot;)[(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the sahn of the great mosque, surrounded on three sides by columned riwaqs and to the $upOnScreen by the great domed mosque itself.($setRoomContent:) From here, you can go [[$rightOnScreen-&gt;castle room 8]] or [[$leftOnScreen -&gt;left wall]] to the shade of the riwaqs, [[$downOnScreen-&gt;gatehouse]] to the entrance, or enter the great mosque to the [[$upOnScreen-&gt;castle keep]].[]]

]

(if: $architecture is &quot;villa&quot;)[(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $bailey of the $castleword. ($setRoomContent:) Before you, to the $upOnScreen, is the [[$castleKeep-&gt;castle keep]]. To the $downOnScreen is the [[$gatehouse-&gt;gatehouse]]. ($setRoomContent:) From here you may also walk [[($directionJoined: $leftOnScreen, $downOnScreen) ($toThePhrase: 3)-&gt;castle room 3]] or [[($directionJoined: $rightOnScreen, $upOnScreen)-&gt;flank walk]] to a path up the side of the $castleKeep. []][]]

}</tw-passagedata><tw-passagedata pid="212" name="side walk" tags="" position="5391,2486" size="100,100">{
(set: $thisRoomsNumber to 15)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $architecture is &quot;castle&quot;)[(set: $castleLevel to 1) You are in the $castleword $bailey, on a grassy walk between the $keep and the ($ern: $leftOnScreen) wall. ($setRoomContent:) From here you may go (if: $decadeNumber is in (a:1030))[down and to the ]($directionJoined: $rightOnScreen, $downOnScreen) to the [[main part of the $bailey-&gt;main courtyard]] or (if: $decadeNumber is in (a:1030))[up and to the] ($directionJoined: $rightOnScreen, $upOnScreen) to [[the rear $bailey behind the $keep-&gt;rear walk]]. Alternatively, you may go (if: $decadeNumber is in (a:1030))[up a slope to the] ($directionJoined: $leftOnScreen, $upOnScreen) to the [[($directionJoined: $leftOnScreen, $upOnScreen) $turret-&gt;rear turret]]. 
]
]
}</tw-passagedata><tw-passagedata pid="213" name="flank walk" tags="" position="6074,2406" size="100,100">{(set: $thisRoomsNumber to 17)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $architecture is &quot;castle&quot;)[(set: $castleLevel to 1) You are in the $castleword $bailey, on a pebbled walk between the $keep and the ($ern: $rightOnScreen) wall. ($setRoomContent:)From here you may go (if: $decadeNumber is in (a:1030))[down a slope to the]($directionJoined: $leftOnScreen, $downOnScreen) to the [[main part of the $bailey-&gt;main courtyard]] or (if: $decadeNumber is in (a:1030))[up a little to the]($directionJoined: $leftOnScreen, $upOnScreen) to [[the rear $bailey behind the $keep-&gt;rear walk]]. Alternatively, you may go (if: $decadeNumber is in (a:1030))[up and to the] ($directionJoined: $rightOnScreen, $upOnScreen) to the [[($directionJoined: $rightOnScreen, $upOnScreen) $turret-&gt;castle room 5]]. 
]
(if: $architecture is &quot;villa&quot;)[(set: $castleLevel to 1) You are on a path between the $keep and the ($ern: $rightOnScreen) wall. ($setRoomContent:)From here you may go ($directionJoined: $leftOnScreen, $downOnScreen) to the [[main part of the $bailey-&gt;main courtyard]] or ($directionJoined: $rightOnScreen, $upOnScreen) to the [[($directionJoined: $rightOnScreen, $upOnScreen) $turret-&gt;castle room 5]] You may also go [[$rightOnScreen-&gt;castle room 8]] ($toThePhrase:8). 
]]
}</tw-passagedata><tw-passagedata pid="214" name="rear walk" tags="" position="5758,2225" size="100,100">{
(set: $thisRoomsNumber to 12)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $architecture is &quot;castle&quot;)[(set: $castleLevel to 1) You are on a grassy walk behind the $keep, within the shadow of the ($ern: $upOnScreen) wall. ($setRoomContent:)From here you may go (a:1030))[down a little to the] ($directionJoined: $leftOnScreen, $downOnScreen) to a [[grassy walk running down the side of the $keep-&gt;side walk]]  or (a:1030))[down and to the] ($directionJoined: $rightOnScreen, $downOnScreen) to [[a pebbled walk-&gt;flank walk]]. 
]
]
}</tw-passagedata><tw-passagedata pid="215" name="castle room 0" tags="" position="6018,2610" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 0)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)

(border-color: black) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. ($setRoomContent:) From here you may go [[$leftOnScreen-&gt;castle keep]].
[]]}</tw-passagedata><tw-passagedata pid="216" name="castle room 4" tags="" position="5577,2482" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 4)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)
}
(border-color: purple) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. ($setRoomContent:) From here you may go [[$rightOnScreen-&gt;main stairwell 1]].[] ]</tw-passagedata><tw-passagedata pid="217" name="castle room 1" tags="" position="5843,2482" size="100,100">{
($setImage:)
(set: $thisRoomsNumber to 1)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)
}
(border-color: white) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. ($setRoomContent:)From here you may go [[$leftOnScreen-&gt;main stairwell 1]] to the main stairwell.[]]</tw-passagedata><tw-passagedata pid="218" name="castle room 2" tags="" position="5576,2359" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 2)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)
}
(border-color: (rgb: 255, 100, 100)) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. ($setRoomContent:)From here you may go [[$rightOnScreen-&gt;main stairwell 2]].

]</tw-passagedata><tw-passagedata pid="219" name="attic right" tags="" position="5826,2357" size="100,100">{(set: $thisRoomsNumber to 14)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[

(if: $architecture is &quot;arena&quot;)[You are in the high cheap seats at the top of the ampitheatre. ($setRoomContent:)From here you may go $leftOnScreen to the [[ampitheatre steps-&gt;main stairwell 2]].] 


(if: $architecture is &quot;mosque&quot;)[You are high up on a cool Mashrabiya by the great Mosque of Aleppo. ($setRoomContent:)Through the latticework you can see the city. From here you may go $leftOnScreen to the [[auxiliary steps-&gt;main stairwell 2]].] 


(else:)[You are on the high $battlements at the top of the $castleKeep. ($setRoomContent:)From here you may go $leftOnScreen into the [[stairhouse-&gt;main stairwell 2]].] 
]
}</tw-passagedata><tw-passagedata pid="220" name="castle room 6" tags="" position="5843,2749" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 6)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)
}
(border-color: cyan) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. 

($setRoomContent:) From here you may go [[$leftOnScreen-&gt;main stairwell -1]]. ]</tw-passagedata><tw-passagedata pid="221" name="castle room 9" tags="" position="5558,2744" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 9)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)
}
(border-color: (rgb: 155, 100, 0)) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. ($setRoomContent:) From here you may go [[$upOnScreen-&gt;main stairwell -1]]. []]</tw-passagedata><tw-passagedata pid="222" name="gatehouse wall" tags="" position="6034,3022" size="100,100">{(set: $thisRoomsNumber to 26)
($setRoomVariables:)

(set: $castleLevel to $castleLevel * -1)
(if: $architecture is &quot;castle&quot;)[
	(if: $castleLevel is 1)[
		(set: _castleLevel to &quot;ground&quot;)
		(set: $inOrOn to &quot;in&quot;)]
	(if: $castleLevel is -1)[
		(set: _castleLevel to &quot;upper&quot;)
		(set: $inOrOn to &quot;on&quot;)]
		]
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $architecture is &quot;castle&quot;)[You are $inOrOn the $gatehouse $wall. ($setRoomContent:) From here you can (if: $decadeNumber is in $monasteries)[step out into the [[(either: $baileyAdj1, $baileyAdj2, $baileyAdj3) garth-&gt;main courtyard]],] head [[$rightOnScreen-&gt;turret]] to the ($directionJoined: $rightOnScreen, $downOnScreen) $turret, or [[$leftOnScreen-&gt;gatehouse]] to the $gatehouse.]{


}(if: $architecture is &quot;arena&quot;)[You are on the $rightOnScreen half of the $downOnScreen stand. ($setRoomContent:) From here you can go [[$rightOnScreen-&gt;turret]] to the ($directionJoined: $rightOnScreen, $downOnScreen) corner stand, or [[$leftOnScreen-&gt;gatehouse]] to the entry tower.]{


}(if: $architecture is &quot;mosque&quot;)[You are walking through the ($ern:$downOnScreen) riwaq at the ($directionJoined: $rightOnScreen, $downOnScreen) corner of the sahn. ($setRoomContent:) From here you can go [[$rightOnScreen-&gt;turret]] to the ($directionJoined: $rightOnScreen, $downOnScreen) minaret, or [[$leftOnScreen-&gt;gatehouse]] to the portal. You can also simply step out from the shade of the riwaq into the [[open courtyard-&gt;main courtyard]]]

]

</tw-passagedata><tw-passagedata pid="223" name="castle keep" tags="" position="5852,2617" size="100,100">{(set: $thisRoomsNumber to 32)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[


(if: $architecture is &quot;arena&quot;)[Pic string is $picString. You are in the seating area of the main stand of the ampitheatre, to the $upOnScreen of the central arena. ($setRoomContent:) From here you may go [[$rightOnScreen-&gt;castle room 0]] ($toThePhrase: 0), [[$leftOnScreen-&gt;main stairwell 0]] to the main stepway, or [[$downOnScreen-&gt;main courtyard]] to the central arena.]


(elseif: $architecture is &quot;mosque&quot;)[You are in the masjid of the great mosque, beneath its enormous and splendid dome. From here you may go [[$rightOnScreen-&gt;castle room 0]] ($toThePhrase: 0), [[$leftOnScreen-&gt;main stairwell 0]] to a discrete staircase, [[$upOnScreen-&gt;castle room 7]] ($toThePhrase: 7) or exit the mosque to the [[$downOnScreen-&gt;main courtyard]].]

(else:)[You are in the entrance to the $castleKeep. ($setRoomContent:) From here you may go (unless: $decadeNumber is 130)[[[$rightOnScreen-&gt;castle room 0]] ($toThePhrase: 0),][[$leftOnScreen-&gt;castle room 7]] ($toThePhrase: 7), [[$upOnScreen-&gt;main stairwell 0]] to a stairwell or [[$downOnScreen-&gt;main courtyard]] to the $castleword $bailey.]
]
}</tw-passagedata><tw-passagedata pid="224" name="main stairwell 1" tags="" position="5707,2482" size="100,100">{(set: $thisRoomsNumber to 16)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[

(if: $architecture is &quot;arena&quot;)[You are on a flight of steps leading back and up towards the top of the main stand. ($setRoomContent:)From here you can go [[$leftOnScreen-&gt;castle room 4]] ($toThePhrase:4) or [[$rightOnScreen-&gt;castle room 1]] ($toThePhrase:1). Or you can go [[up-&gt;main stairwell 2]] or [[down-&gt;main stairwell 0]] the ampitheatre steps.]

(elseif: $architecture is &quot;mosque&quot;)[You are on a flight of steps through the auxiliary rooms that support the mosque. ($setRoomContent:)From here you can go [[$leftOnScreen-&gt;castle room 4]] ($toThePhrase:4) or [[$rightOnScreen-&gt;castle room 1]] ($toThePhrase:1). Or you can go [[up-&gt;main stairwell 2]] or [[down-&gt;main stairwell 0]] the steps.]

(elseif:$architecture is &quot;villa&quot;)[You are on the first floor of the $castleKeep. ($setRoomContent:)From here you can go [[$leftOnScreen-&gt;castle room 4]] ($toThePhrase:4) or [[$rightOnScreen-&gt;castle room 1]] ($toThePhrase:1). Or you can go [[up-&gt;main stairwell 2]] or [[down-&gt;main stairwell 0]] the stairwell.]

(else:)[You are on a stairwell that rises through the $castleKeep. ($setRoomContent:)From here you can go [[$leftOnScreen-&gt;castle room 4]] ($toThePhrase:4) or [[$rightOnScreen-&gt;castle room 1]] ($toThePhrase:1) . Or you can go [[up-&gt;main stairwell 2]] or [[down-&gt;main stairwell 0]] the stairwell.]
]}</tw-passagedata><tw-passagedata pid="225" name="main stairwell 2" tags="" position="5702,2357" size="100,100">{(set: $thisRoomsNumber to 13)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[


(if: $architecture is &quot;arena&quot;)[You are at the top of a flight of steps in the main stand of the ampitheatre. ($setRoomContent:)From here you can go [[$leftOnScreen-&gt;castle room 2]] ($toThePhrase:2) or [[$rightOnScreen-&gt;attic right]] to the cheap seats. Or you can head [[down the steps-&gt;main stairwell 1]].]

(elseif: $architecture is &quot;mosque&quot;)[You are at the top of a flight of steps. ($setRoomContent:)From here you can go [[$leftOnScreen-&gt;castle room 2]] ($toThePhrase:2) or [[$rightOnScreen-&gt;attic right]]. Or you can head [[down the steps-&gt;main stairwell 1]].]

(elseif: $architecture is &quot;villa&quot;)[You are on the uppermost floor of the $castleKeep. ($setRoomContent:)From here you can go [[$leftOnScreen-&gt;castle room 2]] ($toThePhrase:2) or [[$rightOnScreen-&gt;attic right]] to the high $battlements. Or you can head [[down the stairwell-&gt;main stairwell 1]].]


(else:)[You are at the top of a stairwell that rises through the $castleKeep. ($setRoomContent:)From here you can go [[$leftOnScreen-&gt;castle room 2]] ($toThePhrase:2) or [[$rightOnScreen-&gt;attic right]] to the high $battlements. Or you can head [[down the stairwell-&gt;main stairwell 1]].]
]
}</tw-passagedata><tw-passagedata pid="226" name="main stairwell -1" tags="" position="5703,2745" size="100,100">{(set: $thisRoomsNumber to 21)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[

(if: $architecture is &quot;arena&quot;)[You are in the underground hypogeum of the ampitheatre, at the foot of the main stairwell. ($setRoomContent:) From here you can go [[$downOnScreen-&gt;castle room 9]] ($toThePhrase:9) or [[$rightOnScreen-&gt;castle room 6]] ($toThePhrase:6). Alternatively, you may go [[up the steps-&gt;main stairwell 0]] to the ampitheatre.]

(elseif: $architecture is &quot;mosque&quot;)[You are in the darkness beneath the mosque, protected from the heat of the day. ($setRoomContent:) From here you can go [[$downOnScreen-&gt;castle room 9]] ($toThePhrase:9) or [[$rightOnScreen-&gt;castle room 6]] ($toThePhrase:6). Alternatively, you may go [[up the steps-&gt;main stairwell 0]] to the mosque.]

(else:)[You are in the basement of the $castleKeep, at the foot of the main stairwell. ($setRoomContent:) From here you can go [[$downOnScreen-&gt;castle room 9]] ($toThePhrase:9) or [[$rightOnScreen $outTheBack-&gt;castle room 6]] ($toThePhrase:6). Alternatively, you may go [[up the stairwell-&gt;main stairwell 0]].]
]}</tw-passagedata><tw-passagedata pid="227" name="main stairwell 0" tags="" position="5706,2618" size="100,100">{(set: $thisRoomsNumber to 19)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[

(if: $architecture is &quot;arena&quot;)[You are on a flight of steps leading back and [[up-&gt;main stairwell 1]] towards the top of the main stand. ($setRoomContent:) There is also an alternative flight of steps that heads down [[underground into the hypogeum-&gt;main stairwell -1]]. Or you can exit the steps to the [[main seating area-&gt;castle keep]].]

(elseif: $architecture is &quot;mosque&quot;)[You are on a discreet flight of steps which you can take [[up-&gt;main stairwell 1]] to a mezzanine or down [[beneath the mosque-&gt;main stairwell -1]]. Or you can exit the steps to the [[masjid-&gt;castle keep]].($setRoomContent:)]

(else:)[You are on a stairwell that rises through the $castleKeep. ($setRoomContent:) From here you can go [[up the stairwell-&gt;main stairwell 1]] or [[down the stairwell-&gt;main stairwell -1]]. Or you can exit the stairwell to the [[$keep&#39;s $gate-&gt;castle keep]].]
]
}</tw-passagedata><tw-passagedata pid="228" name="adjust start room" tags="startup" position="171,1463" size="100,100">{
(set: $adjustStartRoom to
(macro: [
	(if: $architecture is in (a:&quot;block&quot;))
		[(set: $startRoom to 
		(cond: 
			$directionIn is &quot;south&quot;, &quot;block entrance 1&quot;,
			$directionIn is &quot;west&quot;, &quot;block entrance 4&quot;,
			$directionIn is &quot;north&quot;, &quot;block entrance 3&quot;,
			$directionIn is &quot;east&quot;, &quot;block entrance 2&quot;,
			&quot;Error: directionIn not properly set for setStartRoom: block&quot;
		))
		]
	(if: $architecture is in (a: &quot;church&quot;, &quot;cathedral&quot;))
		[
		(set: $startRoom to &quot;narthex&quot;)
		]
	(if: $architecture is in (a: &quot;chingle&quot;))
		[
		(set: $startRoom to &quot;bridge over the moat&quot;)
		]		
	(if: $architecture is in (a: &quot;boat&quot;, &quot;ship&quot;))
		[
		(set: $startRoom to &quot;deck&quot;)
		]
	(if: $architecture is in (a: &quot;pit&quot;))
		[
		(set: $startRoom to &quot;pit entrance&quot;)
		]
	(if: $architecture is in (a: &quot;house&quot;, &quot;mansion&quot;))
		[
		(set: $startRoom to &quot;entrance hall&quot;)
		]
	(if: $architecture is in (a: &quot;castle&quot;, &quot;arena&quot;, &quot;mosque&quot;, &quot;villa&quot;))
		[
		(set: $startRoom to &quot;gatehouse&quot;)
		]
	(if: $architecture is in (a:&quot;souk&quot;, &quot;lakeside&quot;))
		[
		($setSoukStart:)
		]
	(if: $architecture is in (a:&quot;square&quot;))
		[
		(set: $startRoom to &quot;guillotined heads&quot;)
		]
	(if: $architecture is in (a:&quot;tower&quot;))
		[(set: $startRoom to 
		(cond: 
			$directionIn is &quot;south&quot;, &quot;tower entrance 2&quot;,
			$directionIn is &quot;west&quot;, &quot;tower entrance 2&quot;,
			$directionIn is &quot;north&quot;, &quot;tower entrance&quot;,
			$directionIn is &quot;east&quot;, &quot;tower entrance&quot;,
			&quot;Error: directionIn not properly set for setStartRoom: tower&quot;
		))
		]
		(output-data:&quot;&quot;)
		]
		))
	

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;set souk start]]
}</tw-passagedata><tw-passagedata pid="229" name="set directions" tags="startup" position="198,1098" size="100,100">{
(set: $setDirections to
(macro: 
	[
	($setHilliness:)
	($setDefaultDirections:) 
	(if: $architecture is in (a: &quot;square&quot;))
		[
		(set: $upOnScreen to &quot;south&quot;)
		(set: $downOnScreen to &quot;north&quot;)
		(set: $leftOnScreen to &quot;east&quot;)
		(set: $rightOnScreen to &quot;west&quot;)
		]
	(if: $architecture is in (a: &quot;pit&quot;))
		[
		($rotateMapByRandom90:)
		($randomFlipLR:)
		($randomFlipUD:)
		]
	(if: $architecture is in (a: &quot;church&quot;, &quot;cathedral&quot;))
		[
		($setDirectionsForFixedEntry:)
		($randomFlipLR:)
		]
	(if: $architecture is in (a: &quot;boat&quot;, &quot;ship&quot;))
		[
		($setDirectionsForFixedEntry:)
		]
	(if: $architecture is in (a: &quot;house&quot;, &quot;mansion&quot;))
		[
		($setDirectionsForFixedEntry:)
		($randomFlipLR:)
		]
	(if: $architecture is in (a: &quot;castle&quot;, &quot;arena&quot;, &quot;mosque&quot;))
		[
		($setDirectionsForFixedEntry:)
		($randomFlipLR:)
		]
	(if: $architecture is in (a: &quot;tower&quot;))
		[
		($randomFlipLR:)
		($randomFlipUD:)
		]
	(if: $architecture is in (a: &quot;souk&quot;, &quot;lakeside&quot;))
		[
		(set: $rightOnScreen to ($rotateCompass90:$directionIn))
		(set: $leftOnScreen to ($oppositeCompass:$rightOnScreen))
		($randomFlipLR:)
		]
	(unless: $architecture is in $exceptionArchitectures)
		[
		(set: $roomTracker to (a:$startRoom, $rightOnScreen))
		($rotateMapByRandom90:)
		(set: $roomTracker to $roomTracker + (a:$startRoom, $rightOnScreen))
		($randomFlipLR:)
		(set: $roomTracker to $roomTracker + (a:$startRoom, $rightOnScreen))
		($randomFlipUD:)
		(set: $roomTracker to $roomTracker + (a:$startRoom, $rightOnScreen))
		]
	(output-data:&quot;&quot;)
	]
	))
	
&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;random flip left right]]
[[ -&gt;random flip up down]]
[[ -&gt;rotate map by random]]
[[ -&gt;set default directions]]
[[ -&gt;set hilliness]]
[[ -&gt;set directions for fixed entry]]
}</tw-passagedata><tw-passagedata pid="230" name="set exception architectures" tags="startup" position="195,1207" size="100,100">{
(set: $setExceptionArchitectures to
(macro: [
	(set: $exceptionArchitectures to 
		(a: &quot;arena&quot;,
		&quot;block&quot;,
		&quot;boat&quot;,
		&quot;castle&quot;, 
		&quot;cathedral&quot;,
		&quot;church&quot;, 
		&quot;house&quot;,
		&quot;lakeside&quot;,
		&quot;mansion&quot;,
		&quot;mosque&quot;,
		&quot;pit&quot;,
		 &quot;ship&quot;,
		 &quot;square&quot;,
		 &quot;souk&quot;,
		 &quot;tower&quot;,
		 &quot;villa&quot;))
	(output-data:&quot;&quot;)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="231" name="set directions for fixed entry" tags="startup" position="261,926" size="100,100">{
(set: $setDirectionsForFixedEntry to
(macro: [
	(if: $directionIn is &quot;east&quot;)[
		(set: $upOnScreen to &quot;east&quot;)
		(set: $rightOnScreen to &quot;south&quot;)
		(set: $downOnScreen to &quot;west&quot;)
		(set: $leftOnScreen to &quot;north&quot;)]
	(if: $directionIn is &quot;south&quot;)[
		(set: $upOnScreen to &quot;south&quot;)
		(set: $rightOnScreen to &quot;west&quot;)
		(set: $downOnScreen to &quot;north&quot;)
		(set: $leftOnScreen to &quot;east&quot;)]
	(if: $directionIn is &quot;west&quot;)[
		(set: $upOnScreen to &quot;west&quot;)
		(set: $rightOnScreen to &quot;north&quot;)
		(set: $downOnScreen to &quot;east&quot;)
		(set: $leftOnScreen to &quot;south&quot;)]
	(output-data:&quot;&quot;)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="232" name="return to complex" tags="startup" position="39,2276" size="100,100">{
(set: $returnToComplex to
(macro:[
	(set: _returnToComplex to (cond:
		$decadeNum is 0, &quot;complex zero&quot;,
		$decadeNum is 10, &quot;complex one&quot;,
		$decadeNum is 20, &quot;complex two&quot;,
		$decadeNum is 30, &quot;complex three&quot;,
		$decadeNum is 40, &quot;complex four&quot;,
		$decadeNum is 50, &quot;complex five&quot;,
		$decadeNum is 60, &quot;complex six&quot;,
		$decadeNum is 70, &quot;complex seven&quot;,
		$decadeNum is 80, &quot;complex eight&quot;,
		$decadeNum is 90, &quot;complex nine&quot;,
		&quot;Error: bad number in returnToComplex&quot;))
	(output-data:_returnToComplex)
	]
	))
}</tw-passagedata><tw-passagedata pid="233" name="force space" tags="startup" position="13,798" size="100,100">{
(set: $forceSpace to &quot; &quot;)

}</tw-passagedata><tw-passagedata pid="234" name="tower entrance" tags="" position="6638,2948" size="100,100">{

(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are (print: $towerEntrance of $lociPreps) the $towerEntrance. From here you can go $upOnScreen to the [[$mainStairwell-&gt;tower stairwell 1]]. []
]
}</tw-passagedata><tw-passagedata pid="235" name="tower stairwell 1" tags="" position="6639,2805" size="100,100">{(if: $startRoom is &quot;tower stairwell&quot;)[
	(set: $backToTowerEntrance to $downOnScreen + &quot; to the [[$towerEntrance-&gt;tower entrance]]&quot;)]
(else:) 
	[(set: $backToTowerEntrance to $rightOnScreen + &quot; to the [[$towerEntrance-&gt;tower entrance 2]]&quot;)]
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are at the $mainStairwell. From here you can go ($directionJoined: $rightOnScreen, $downOnScreen) [[($toThePhrase: 8)-&gt;tower latrine]] or $backToTowerEntrance. You may also go [[up-&gt;tower stairwell 2]] or [[down-&gt;tower stairwell -1]] the $steps. []
]</tw-passagedata><tw-passagedata pid="236" name="tower morgue" tags="" position="6641,3246" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 9)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)}(border-color: $brown) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.

From here you may go [[$upOnScreen-&gt;tower stairwell -1]] to the $mainStairwell. 

]</tw-passagedata><tw-passagedata pid="237" name="tower stairwell 2" tags="" position="6624,2511" size="100,100">{(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are at the $mainStairwell. From here you can go $rightOnScreen [[($toThePhrase: 0)-&gt;tower mess]]. You may also go [[up-&gt;tower stairwell 3]] or [[down-&gt;tower stairwell 1]] the $steps. []
]}</tw-passagedata><tw-passagedata pid="238" name="tower mess" tags="" position="6756,2506" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 0)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)}(border-color: black) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.

From here you may go [[$leftOnScreen-&gt;tower stairwell 2]] to the $mainStairwell or [[$downOnScreen-&gt;tower kitchen]] ($toThePhrase: 3). 

]</tw-passagedata><tw-passagedata pid="239" name="tower stairwell 3" tags="" position="6634,2235" size="100,100">{(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are at the $mainStairwell, which only goes [[down-&gt;tower stairwell 2]] from here. From here you can go $rightOnScreen [[($toThePhrase: 4)-&gt;tower lounge]] or $downOnScreen [[($toThePhrase:5)-&gt;tower armory]]. []
]}</tw-passagedata><tw-passagedata pid="240" name="tower kitchen" tags="" position="6758,2643" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 3)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)}(border-color: red) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.

From here you may go [[$upOnScreen-&gt;tower mess]]. 

]</tw-passagedata><tw-passagedata pid="241" name="tower latrine" tags="" position="6783,2948" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 8)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)}(border-color: yellow) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.

From here you may go [[($directionJoined: $leftOnScreen, $upOnScreen)-&gt;tower stairwell 1]] to the $mainStairwell. 

]</tw-passagedata><tw-passagedata pid="242" name="tower armory" tags="" position="6627,2370" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 5)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)}(border-color: blue) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.

From here you may go [[$upOnScreen-&gt;tower stairwell 3]] to the $mainStairwell or [[$rightOnScreen-&gt;tiny stairs]] to a $tinyStaircase. 

]</tw-passagedata><tw-passagedata pid="243" name="tower dungeon" tags="" position="6784,3111" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 6)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)}(border-color: cyan) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.

From here you may go [[$leftOnScreen-&gt;tower stairwell -1]] to the $mainStairwell. 

]</tw-passagedata><tw-passagedata pid="244" name="tower stairwell -1" tags="" position="6639,3113" size="100,100">{(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are at the $mainStairwell, which only goes [[up-&gt;tower stairwell 1]] from here. From here you can go $rightOnScreen [[($toThePhrase: 6)-&gt;tower dungeon]] or $downOnScreen [[($toThePhrase: 9)-&gt;tower morgue]]. []
]}</tw-passagedata><tw-passagedata pid="245" name="tower lounge" tags="" position="6774,2231" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 4)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)}(border-color: purple) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.

From here you may go [[$leftOnScreen-&gt;tower stairwell 3]] to the $mainStairwell or [[$downOnScreen-&gt;tiny stairs]] to a $tinyStaircase. 

]</tw-passagedata><tw-passagedata pid="246" name="tiny stairs 2" tags="" position="6771,1973" size="100,100">{(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on a $tinyStaircase  at the higher $reaches of the $tower. From here you can go $leftOnScreen [[($toThePhrase: 2)-&gt;tower library]]. You may also go [[up-&gt;tower parapet]] or [[down-&gt;tiny stairs]] the $tinyStaircase. []
]}</tw-passagedata><tw-passagedata pid="247" name="tower library" tags="" position="6638,1966" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 2)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)}(border-color: $pink) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.

From here you may go [[$downOnScreen-&gt;tower nursery]] ($toThePhrase: 1) or [[$rightOnScreen-&gt;tiny stairs 2]] to a $tinyStaircase. 

]</tw-passagedata><tw-passagedata pid="248" name="tower chapel" tags="" position="6639,1801" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 7)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)}(border-color: green) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.

From here you may go [[$rightOnScreen-&gt;tower parapet]]. 

]</tw-passagedata><tw-passagedata pid="249" name="tower nursery" tags="" position="6643,2095" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 1)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)}(border-color: white) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.

From here you may go [[$upOnScreen-&gt;tower library]] ($toThePhrase: 2). 

]</tw-passagedata><tw-passagedata pid="250" name="tiny stairs" tags="" position="6774,2368" size="100,100">{(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on a $tinyStaircase at the higher $reaches of the $tower_. From here you can go $leftOnScreen [[($toThePhrase: 5)-&gt;tower armory]] or $upOnScreen [[($toThePhrase: 4)-&gt;tower lounge]]. You may also go [[up-&gt;tiny stairs 2]] the $tinyStaircase. []
]}</tw-passagedata><tw-passagedata pid="251" name="tower parapet" tags="" position="6773,1799" size="100,100">{(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are (print: $parapet of $lociPreps) a $parapet at the top of the $tower. You may go through a door here [[($toThePhrase: 7)-&gt;tower chapel]]. Or you can go [[down-&gt;tiny stairs 2]] the $tinyStaircase to the lower $floors of the $tower_. (if: $architecture is &quot;pit&quot;)[An alternative is to head [[up-&gt;pit entrance]] to where the $tower emerges into daylight.]  []
]}</tw-passagedata><tw-passagedata pid="252" name="brown" tags="startup" position="19,117" size="100,100">{
(set: $brown to (rgb: 155, 100, 0))
}</tw-passagedata><tw-passagedata pid="253" name="pink" tags="startup" position="25,1911" size="100,100">{
(set: $pink to (rgb: 255, 100, 100))
}</tw-passagedata><tw-passagedata pid="254" name="tower entrance 2" tags="" position="6779,2805" size="100,100">{(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are (print: $towerEntrance of $lociPreps) the $towerEntrance. From here you can go $leftOnScreen to the [[$mainStairwell-&gt;tower stairwell 1]]. []
]}</tw-passagedata><tw-passagedata pid="255" name="block room 3" tags="" position="2148,71" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 3)
($setRoomVariables:)
($refreshSentences:)
}
(border-color: red) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. 

($room3content:)

From here you may go [[$rightOnScreen-&gt;block entrance 1]] or [[$downOnScreen-&gt;block entrance 2]]. 


}]</tw-passagedata><tw-passagedata pid="256" name="block entrance 1" tags="" position="2286,70" size="100,100">{(set: $thisRoomsNumber to 11)
($setRoomVariables:)
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $startRoom is &quot;block entrance 1&quot;)[You are in the entrance area of the $complexName.] (else:)[$complexSentence2.] 

From here you may go [[$leftOnScreen-&gt;block room 3]] ($toThePhrase:3) or [[$rightOnScreen-&gt;block staircase]] to the $staircase. 

(if: 9 is in $optionalPaths)[An alternative is to go (link: $downHill_2 + $downOnScreen)[(goto: &quot;block room 6&quot;)]]


(if: $startRoom is &quot;block entrance 1&quot;)[$returnText]
]</tw-passagedata><tw-passagedata pid="257" name="block room 6" tags="" position="2286,206" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 6)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}(border-color: (rgb: 0, 255, 255)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. 

From here you may go [[$leftOnScreen-&gt;block entrance 2]], [[$rightOnScreen-&gt;block entrance 4]] or [[$downOnScreen-&gt;block entrance 3]].

(if: 9 is in $optionalPaths)[An alternative is to go (link: $upHill_2 + $upOnScreen)[(goto: &quot;block entrance 1&quot;)]]


}[]]</tw-passagedata><tw-passagedata pid="258" name="block room 9" tags="" position="2425,345" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 9)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}
(border-color: (rgb: 155, 100, 0)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.
($room9content:)
{
From here you may go [[$leftOnScreen-&gt;block entrance 3]]. 
(if: 2 is in $optionalPaths)[You may also go (link: $upOnScreen)[(goto: &quot;block entrance 4&quot;)]]

}
]</tw-passagedata><tw-passagedata pid="259" name="block entrance 2" tags="" position="2145,218" size="100,100">{(set: $thisRoomsNumber to 12)
($setRoomVariables:)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $startRoom is &quot;block entrance 2&quot;)[You are in the entrance area of the $complexName.] (else:)[$complexSentence2.] 

From here you may go [[$upOnScreen-&gt;block room 3]] ($toThePhrase:3) or [[$rightOnScreen-&gt;block room 6]] ($toThePhrase:6). (if: 1 is in $optionalPaths)[You may also go (link: $downOnScreen)[(goto: &quot;block passage 1&quot;)]]


(if: $startRoom is &quot;block entrance 2&quot;)[$returnText]
]</tw-passagedata><tw-passagedata pid="260" name="block entrance 3" tags="" position="2288,346" size="100,100">{(set: $thisRoomsNumber to 14)
($setRoomVariables:)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $startRoom is &quot;block entrance 3&quot;)[You are in the entrance area of the $complexName.] (else:)[$complexSentence2.] 

From here you may go [[$upOnScreen-&gt;block room 6]] ($toThePhrase:6) or [[$rightOnScreen-&gt;block room 9]] ($toThePhrase:9). (if: 1 is in $optionalPaths)[You may also go (link: $leftOnScreen)[(goto: &quot;block passage 1&quot;)]]

(if: $startRoom is &quot;block entrance 3&quot;)[$returnText]
]</tw-passagedata><tw-passagedata pid="261" name="block entrance 4" tags="" position="2423,215" size="100,100">{(set: $thisRoomsNumber to 13)
($setRoomVariables:)
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $startRoom is &quot;block entrance 4&quot;)[You are in the entrance area of the $complexName.] (else:)[$complexSentence2.] 

From here you may go [[$upOnScreen-&gt;block staircase]] or [[$leftOnScreen-&gt;block room 6]] ($toThePhrase:6). (if: 2 is in $optionalPaths)[You may also go (link: $downOnScreen)[(goto: &quot;block room 9&quot;)] ($toThePhrase:9)]

(if: $startRoom is &quot;block entrance 4&quot;)[$returnText]
]</tw-passagedata><tw-passagedata pid="262" name="block passage 1" tags="" position="2145,348" size="100,100">{(set: $thisRoomsNumber to 15)
($setRoomVariables:)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $startRoom is &quot;building entrance 2&quot;)[You are in the entrance area.] (else:)[$complexSentence2.] 

From here you may go (link: $upOnScreen)[(goto: &quot;block entrance 2&quot;)] or (link: $rightOnScreen)[(goto: &quot;block entrance 3&quot;)]. 

]</tw-passagedata><tw-passagedata pid="263" name="block staircase" tags="" position="2420,73" size="100,100">{(set: $thisRoomsNumber to 16)
($setRoomVariables:)
}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence2, at a staircase which leads (link:&quot;up&quot;)[(goto:&quot;block staircase upstairs&quot;)].  
If you do not wish to go up the staircase, you may instead go [[$leftOnScreen-&gt;block entrance 1]] or [[$downOnScreen-&gt;block entrance 4]]. 
]</tw-passagedata><tw-passagedata pid="264" name="block staircase upstairs" tags="" position="2910,71" size="100,100">{(set: $thisRoomsNumber to 17)
($setRoomVariables:)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence2, at a staircase which leads (link:&quot;down&quot;)[(goto:&quot;block staircase&quot;)].  

If you do not wish to go down the staircase, you may instead go [[$leftOnScreen-&gt;block room 0]] ($toThePhrase:0) or [[$downOnScreen-&gt;block room 1]] ($toThePhrase:1). 
]</tw-passagedata><tw-passagedata pid="265" name="block room 0" tags="" position="2768,73" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 0)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}(border-color: black) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. 

From here you may go [[$leftOnScreen-&gt;block room 2]] ($toThePhrase:2), [[$rightOnScreen-&gt;block staircase upstairs]] or [[$downOnScreen-&gt;block room 4]] ($toThePhrase:4). 





}[]]</tw-passagedata><tw-passagedata pid="266" name="block room 1" tags="" position="2913,218" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 1)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}(border-color: white) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. 

From here you may go [[$upOnScreen-&gt;block staircase upstairs]], [[$leftOnScreen-&gt;block room 4]] or [[$downOnScreen-&gt;block room 7]]. 





}[]]</tw-passagedata><tw-passagedata pid="267" name="block room 2" tags="" position="2616,73" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 2)
($setRoomVariables:)
($refreshSentences:)
}
(border-color: $pink) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. 

($room2content:)

From here you may go [[$rightOnScreen-&gt;block room 0]] ($toThePhrase:0) or [[$downOnScreen-&gt;block room 5]] ($toThePhrase:5). []


}]</tw-passagedata><tw-passagedata pid="268" name="block room 4" tags="" position="2770,216" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 4)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}(border-color: purple) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. 

From here you may go (if: 3 is in $optionalPaths)[(link: $leftOnScreen)[(goto: &quot;block room 4&quot;)] ($toThePhrase:5), ][[$rightOnScreen-&gt;block room 1]] ($toThePhrase:1) or [[$upOnScreen-&gt;block room 0]] ($toThePhrase:0). (unless: 4 is in $optionalPaths)[An alternative is to go (link: $downOnScreen)[(goto: &quot;block room 8&quot;)] ($toThePhrase:8).]





}]</tw-passagedata><tw-passagedata pid="269" name="block room 5" tags="" position="2615,219" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 5)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}
(border-color: blue) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.
($room9content:)
{
From here you may go [[$upOnScreen-&gt;block room 2]] ($toThePhrase:2). 
(if: 3 is in $optionalPaths)[You may also go (link: $rightOnScreen)[(goto: &quot;block room 4&quot;)] ($toThePhrase:4).](if: 4 is in $optionalPaths)[An alternative is to go (link: $downOnScreen)[(goto: &quot;block passage 2&quot;)].]


}
]</tw-passagedata><tw-passagedata pid="270" name="block room 7" tags="" position="2915,356" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 7)
($setRoomVariables:)
($refreshSentences:)
}
(border-color: green) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. 

($room7content:)

From here you may go [[$upOnScreen-&gt;block room 1]] ($toThePhrase:1) or [[$leftOnScreen-&gt;block room 8]] ($toThePhrase:8). 


}]</tw-passagedata><tw-passagedata pid="271" name="block room 8" tags="" position="2773,356" size="100,100">{(set: $thisRoomsNumber to 8)
($setRoomVariables:)
($refreshSentences:)}
(border-color: yellow) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. 

From here you may go [[$rightOnScreen-&gt;block room 7]] ($toThePhrase:7). (unless: 4 is in $optionalPaths)[An alternative is to go (link: $upOnScreen)[(goto: &quot;block room 4&quot;)] ($toThePhrase:4).](if: 4 is in $optionalPaths)[An alternative is to go (link: $leftOnScreen)[(goto: &quot;block passage 2&quot;)].]
]</tw-passagedata><tw-passagedata pid="272" name="block passage 2" tags="" position="2621,355" size="100,100">{(set: $thisRoomsNumber to 18)
($setRoomVariables:)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[(if: $startRoom is &quot;building entrance 2&quot;)[You are in the entrance area.] (else:)[$complexSentence2.] 

From here you may go (link: $upOnScreen)[(goto: &quot;block room 5&quot;)] ($toThePhrase:5) or (link: $rightOnScreen)[(goto: &quot;block room 8&quot;)] ($toThePhrase:8).

]</tw-passagedata><tw-passagedata pid="273" name="pit entrance" tags="" position="6768,1661" size="100,100">{(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are at the entrance to a $tower_. From here you may head [[down-&gt;tower parapet]]. []
]
}</tw-passagedata><tw-passagedata pid="274" name="Crowley&#39;s temple" tags="" position="1366,1900" size="100,100">{($overrideImage:&quot;1873&quot;)
(set:$crowleyDirection to &quot;outbound&quot;)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are at 36 Blythe Road, at the address of Aleister Crowley&#39;s temple. It looks like an ordinary house! If you wish, you can [[go in-&gt;$startRoom]]. Alternatively you can head back to the [[$nexusWord-&gt;complex seven]].[]]}</tw-passagedata><tw-passagedata pid="275" name="castle room 7" tags="" position="5951,2447" size="100,100">{
(set: $thisRoomsNumber to 7)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)
(border-color: green) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence. ($setRoomContent:)From here you can only go [[back-&gt;castle keep]].[]]
}</tw-passagedata><tw-passagedata pid="276" name="souk 1" tags="" position="2318,3871" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 1)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(set: $waterway to (cond: 
	$decadeNumber is 760, &quot;Wurm&quot;,
	$decadeNumber is 530, &quot;lake&quot;,
	&quot;lake&quot;)
	)
(if: $decadeNumber is 1980)[($overrideImage: &quot;19801&quot;)]

($refreshSentences:)}(border-color: white) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. (if: $architecture is &quot;lakeside&quot;)[The waters of the $waterway lap up upon the bank to the $directionIn.] 

($room1content:)

From here you may go [[($soukLeft:)-&gt;souk 0]] ($toThePhrase:0) or [[($soukRight:)-&gt;souk 2]] ($toThePhrase:2). (if: $startRoom is &quot;souk 1&quot;)[$returnText]
[]
}]</tw-passagedata><tw-passagedata pid="277" name="souk 2" tags="" position="2447,3874" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 2)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(set: $waterway to (cond: 
	$decadeNumber is 760, &quot;Wurm&quot;,
	$decadeNumber is 530, &quot;lake&quot;,
	&quot;lake&quot;)
	)
(if: $decadeNumber is 1980)[($overrideImage: &quot;19802&quot;)]

($refreshSentences:)}(border-color: $pink) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. (if: $architecture is &quot;lakeside&quot;)[The waters of the $waterway lap up upon the bank to the $directionIn.] 

($room2content:)

From here you may go [[($soukLeft:)-&gt;souk 1]] ($toThePhrase:1) or [[($soukRight:)-&gt;souk 3]] ($toThePhrase:3). (if: $startRoom is &quot;souk 2&quot;)[$returnText]
[]
}]</tw-passagedata><tw-passagedata pid="278" name="souk 3" tags="" position="2578,3871" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 3)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(set: $waterway to (cond: 
	$decadeNumber is 760, &quot;Wurm&quot;,
	$decadeNumber is 530, &quot;lake&quot;,
	&quot;lake&quot;)
	)
(if: $decadeNumber is 1980)[($overrideImage: &quot;19803&quot;)]

($refreshSentences:)}(border-color: red) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. (if: $architecture is &quot;lakeside&quot;)[The waters of the $waterway lap up upon the bank to the $directionIn.] 

($room3content:)

From here you may go [[($soukLeft:)-&gt;souk 2]] ($toThePhrase:2) or [[($soukRight:)-&gt;souk 4]] ($toThePhrase:4). (if: $startRoom is &quot;souk 3&quot;)[$returnText]
[]
}]</tw-passagedata><tw-passagedata pid="279" name="souk 4" tags="" position="2715,3867" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 4)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(set: $waterway to (cond: 
	$decadeNumber is 760, &quot;Wurm&quot;,
	$decadeNumber is 530, &quot;lake&quot;,
	&quot;lake&quot;)
	)
(if: $decadeNumber is 1980)[($overrideImage: &quot;19804&quot;)]

($refreshSentences:)}(border-color: purple) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
(unless: $decadeNumber is 1980)[$complexSentence.](else:)[You are at the entrance to a bunker by the Berlin wall, which you may access by [[heading down-&gt;bunker]].] (if: $architecture is &quot;lakeside&quot;)[The waters of the $waterway lap up upon the bank to the $directionIn.] 

($room4content:)

From here you may go [[($soukLeft:)-&gt;souk 3]] ($toThePhrase:3) or [[($soukRight:)-&gt;souk 5]] ($toThePhrase:5). (if: $startRoom is &quot;souk 4&quot;)[$returnText] 
[]
}]</tw-passagedata><tw-passagedata pid="280" name="souk 5" tags="" position="2853,3869" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 5)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(set: $waterway to (cond: 
	$decadeNumber is 760, &quot;Wurm&quot;,
	$decadeNumber is 530, &quot;lake&quot;,
	&quot;lake&quot;)
	)
(if: $decadeNumber is 1980)[($overrideImage: &quot;19805&quot;)]

($refreshSentences:)}(border-color: blue) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
(unless: $decadeNumber is 1980)[$complexSentence.](else:)[You are at the base of a guard tower overlooking the &quot;death patch&quot; between the east and west sections of the Berlin wall. To enter the tower, you must [[climb up-&gt;guard tower]].] (if: $architecture is &quot;lakeside&quot;)[The waters of the $waterway lap up upon the bank to the $directionIn.] 

($room5content:)

From here you may go [[($soukLeft:)-&gt;souk 4]] ($toThePhrase:4) or [[($soukRight:)-&gt;souk 6]] ($toThePhrase:6). (if: $startRoom is &quot;souk 5&quot;)[$returnText] 
[]
}]</tw-passagedata><tw-passagedata pid="281" name="souk 6" tags="" position="3002,3869" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 6)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(set: $waterway to (cond: 
	$decadeNumber is 760, &quot;Wurm&quot;,
	$decadeNumber is 530, &quot;lake&quot;,
	&quot;lake&quot;)
	)
(if: $decadeNumber is 1980)[($overrideImage: &quot;19806&quot;)]

($refreshSentences:)}(border-color: cyan) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence.(if: $architecture is &quot;lakeside&quot;)[The waters of the $waterway lap up upon the bank to the $directionIn.] 

($room6content:)

From here you may go [[($soukLeft:)-&gt;souk 5]] ($toThePhrase:5) or [[($soukRight:)-&gt;souk 7]] ($toThePhrase:7). (if: $startRoom is &quot;souk 6&quot;)[$returnText] 
[]
}]</tw-passagedata><tw-passagedata pid="282" name="souk 7" tags="" position="3135,3871" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 7)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(set: $waterway to (cond: 
	$decadeNumber is 760, &quot;Wurm&quot;,
	$decadeNumber is 530, &quot;lake&quot;,
	&quot;lake&quot;)
	)
(if: $decadeNumber is 1980)[($overrideImage: &quot;19807&quot;)]

($refreshSentences:)}(border-color: green) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. (if: $architecture is &quot;lakeside&quot;)[The waters of the $waterway lap up upon the bank to the $directionIn.] 

($room7content:)

From here you may go [[($soukLeft:)-&gt;souk 6]] ($toThePhrase:6) or [[($soukRight:)-&gt;souk 8]] ($toThePhrase:8). (if: $startRoom is &quot;souk 7&quot;)[$returnText] 
[]
}]</tw-passagedata><tw-passagedata pid="283" name="souk 8" tags="" position="3277,3869" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 8)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(set: $waterway to (cond: 
	$decadeNumber is 760, &quot;Wurm&quot;,
	$decadeNumber is 530, &quot;lake&quot;,
	&quot;lake&quot;)
	)
(if: $decadeNumber is 1980)[($overrideImage: &quot;19808&quot;)]

($refreshSentences:)}(border-color: yellow) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. (if: $architecture is &quot;lakeside&quot;)[The waters of the $waterway lap up upon the bank to the $directionIn.] 

($room8content:)

From here you may go [[($soukLeft:)-&gt;souk 7]] ($toThePhrase:7) or [[($soukRight:)-&gt;souk 9]] ($toThePhrase:9). (if: $startRoom is &quot;souk 8&quot;)[$returnText] 
[]
}]</tw-passagedata><tw-passagedata pid="284" name="souk 9" tags="" position="3433,3872" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 9)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(set: $waterway to (cond: 
	$decadeNumber is 760, &quot;Wurm&quot;,
	$decadeNumber is 530, &quot;lake&quot;,
	&quot;lake&quot;)
	)
(if: $decadeNumber is 1980)[($overrideImage: &quot;19809&quot;)]

($refreshSentences:)}(border-color: $brown) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
$complexSentence. (if: $architecture is &quot;lakeside&quot;)[The waters of the $waterway lap up upon the bank to the $directionIn.] 

($room9content:)

From here you may go [[($soukLeft:)-&gt;souk 8]] ($toThePhrase:8). (if: $startRoom is &quot;souk 9&quot;)[$returnText] 
[]
}]</tw-passagedata><tw-passagedata pid="285" name="souk 0" tags="" position="2178,3871" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 0)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(set: $waterway to (cond: 
	$decadeNumber is 760, &quot;Wurm&quot;,
	$decadeNumber is 530, &quot;lake&quot;,
	&quot;lake&quot;)
	)
(if: $decadeNumber is 1980)[($overrideImage: &quot;19800&quot;)]
($refreshSentences:)(border-color: black) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[
$complexSentence. (if: $architecture is &quot;lakeside&quot;)[The waters of the $waterway lap up upon the bank to the $directionIn.] 

($room0content:)

From here you may go [[($soukRight:)-&gt;souk 1]] ($toThePhrase:1). (if: $startRoom is &quot;souk 0&quot;)[$returnText]




[]
]}</tw-passagedata><tw-passagedata pid="286" name="set souk directions" tags="startup" position="10,3284" size="100,100">{
(set: $soukRight to 
(macro: [
	(set: _soukRight to (cond:
		$thisRoomsNumber &gt;= $soukThreshold, 
			($rotateCompass90: $rightOnScreen),
		$rightOnScreen))
	(output-data: _soukRight)
	]
	))
	
(set: $soukLeft to 
(macro: [
	(set: _soukLeft to (cond:
		$thisRoomsNumber &gt; $soukThreshold, 
			($rotateCompass90: $leftOnScreen),
		$leftOnScreen))
	(output-data: _soukLeft)
	]
	))



}</tw-passagedata><tw-passagedata pid="287" name="set souk start" tags="startup" position="180,1593" size="100,100">{
(set: $setSoukStart to
(macro: [
	(set: _x to ($srandom: 9))
	(set: _soukStart to (str: _x))
	(set: _soukStart to &quot;souk &quot; + _soukStart)
	(set: _y to ($srandom: 3))
	(set: $soukThreshold to _x + 1 + _y)
	(set: $startRoom to _soukStart)
	(output-data: &quot;&quot;)
	]
	))
}</tw-passagedata><tw-passagedata pid="288" name="chingle great hall" tags="" position="2876,1458" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 4)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}(border-color: purple) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the great hall of the Chingle manor. From here you can go $rightOnScreen, through a doorway to the $downOnScreen of the fireplace, into [[the chapel-&gt;chingle chapel]]. Beside that, heading $downOnScreen, is a door to the [[porch-&gt;chingle entrance hall]]. To the $leftOnScreen, at the $downOnScreen end of the wall, is a door to the [[foot of the stairs-&gt;foot of stairs]]. You can also go through a door in the same wall but to the $upOnScreen which leads [[under the stairs-&gt;under stairs]].}[]]</tw-passagedata><tw-passagedata pid="289" name="chingle chapel" tags="" position="3019,1458" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 7)
($refreshSentences:)
}
(border-color: green) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the chapel of Chingle Hall. From here you can go $upOnScreen [[through a door-&gt;chingle laundry room]], or [[enter the priesthole-&gt;chingle priest&#39;s hole]]. Alternatively, you can go $leftOnScreen to the [[great hall-&gt;chingle great hall]]. }[]] </tw-passagedata><tw-passagedata pid="290" name="chingle kitchen" tags="" position="2885,1273" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 3)
($refreshSentences:)
}
(border-color: red) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the kitchen of Chingle Hall. From here you can take a door to the $rightOnScreen to [[another room-&gt;chingle laundry room]]. A door to the $upOnScreen leads [[outside]].}

(event: when time &gt; 5s)[==A pan flies from where it was hanging and crashes into the wall opposite.

(event: when time &gt; 15s)[==A woman appears, a nun, leaning over the stove as if she is busy cooking.

(event: when time &gt; 20s)[==The nun disappears and you are left in the eerie silence of the kitchen.[]]</tw-passagedata><tw-passagedata pid="291" name="chingle priest&#39;s hole" tags="" position="3164,1458" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 6)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}(border-color: (rgb: 0, 255, 255)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the priest&#39;s hole in Chingle Hall. From here you can climb up into the [[chapel-&gt;chingle chapel]].}[]]</tw-passagedata><tw-passagedata pid="292" name="chingle entrance hall" tags="" position="2881,1581" size="100,100">{(set: $thisRoomsNumber to 11)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the porch of Chingle Hall. From here you can $downOnScreen to the [[bridge over the moat]], or $upOnScreen into the [[great hall-&gt;chingle great hall]].[]]</tw-passagedata><tw-passagedata pid="293" name="foot of stairs" tags="" position="2746,1456" size="100,100">{(set: $thisRoomsNumber to 13)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are at the foot of the stairs in Chingle Hall. You may go [[up the stairs-&gt;chingle top of stairs]], $rightOnScreen into the [[great hall-&gt;chingle great hall]], or $leftOnScreen into the [[owner&#39;s parlour]].[]]</tw-passagedata><tw-passagedata pid="294" name="under stairs" tags="" position="2750,1335" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 1)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}(border-color: white) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are under the stairs in Chingle Hall. The area opens up to the $leftOnScreen into the [[owner&#39;s parlour]]. Alternatively, to the $rightOnScreen is a wooden door which leads into the [[great hall-&gt;chingle great hall]].}

(event: when time &gt; 5s)[==You hear the sobbing of children, and look down to see them clamouring around your feet. Frightened, they have been locked beneath the stairs as punishment.

(event: when time &gt; 5s)[==A moment later, the children are gone, evaporated like shadows with a change in the light. []]</tw-passagedata><tw-passagedata pid="295" name="chingle top of stairs" tags="" position="3478,1113" size="100,100">{(set: $thisRoomsNumber to 22)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are at the top of the stairs in Chingle Hall. From here the landing extends a little way to the [[$leftOnScreen-&gt;left end of chingle landing]] or you can go [[$rightOnScreen-&gt;chingle landing turn]] to where the landing turns to the $downOnScreen. Alternatively, you may go [[down the stairs-&gt;foot of stairs]].[]]</tw-passagedata><tw-passagedata pid="296" name="chingle landing" tags="" position="3611,1251" size="100,100">{(set: $thisRoomsNumber to 18)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on the upstairs landing in Chingle Hall. From here you can go $upOnScreen to where [[the landing turns $leftOnScreen-&gt;chingle landing turn]], $downOnScreen into the [[study-&gt;chingle room 3]], or walk $rightOnScreen to proceed [[further along the landing-&gt;chingle landing 2]].[]]</tw-passagedata><tw-passagedata pid="297" name="chingle room 3" tags="" position="3610,1393" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 2)
($refreshSentences:)
}
(border-color: $pink) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the study of Chingle Hall. You can exit to the [[main landing-&gt;chingle landing]]. A monk sits at a desk, writing with a quill. You speak to him, but he seems not to hear.}[]] </tw-passagedata><tw-passagedata pid="298" name="chingle landing 2" tags="" position="3739,1254" size="100,100">{(set: $thisRoomsNumber to 19)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on the upstairs landing of Chingle Hall. The landing branches here, one direction heading $downOnScreen [[towards the John Wall room-&gt;chingle landing 3]] and the other heading $rightOnScreen to [[Eleanor Singleton&#39;s room]]. You can also go [[through a door to the $upOnScreen-&gt;chingle room 4]] or $leftOnScreen [[along the landing-&gt;chingle landing]] in the direction of the stairs.[]]  </tw-passagedata><tw-passagedata pid="299" name="owner&#39;s room" tags="" position="3349,1253" size="100,100">{(set: $thisRoomsNumber to 17)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the owner&#39;s bedroom in Chingle Hall. From here you may go $upOnScreen to the [[top of the stairs-&gt;left end of chingle landing]].[]]</tw-passagedata><tw-passagedata pid="300" name="Eleanor Singleton&#39;s room" tags="" position="3871,1255" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 0)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}(border-color: black) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in Eleanor Singleton&#39;s room in Chingle Hall. From here you may go $leftOnScreen to the [[main landing-&gt;chingle landing 2]]. }

(event: when time &gt; 5s)[==You hear the sounds of a woman sobbing.

(event: when time &gt; 15s)[==In the corner of the room, you see a woman giving birth. She screams in pain, and the carpet is drenched in her blood.

(event: when time &gt; 20s)[==The apparition disappears, and all is silent once again.[]]</tw-passagedata><tw-passagedata pid="301" name="chingle landing 3" tags="" position="3744,1390" size="100,100">{(set: $thisRoomsNumber to 16)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on a narrow landing off the main landing upstairs in Chingle Hall. From here you can go back to the [[main landing-&gt;chingle landing 2]] or $downOnScreen to [[St John Wall&#39;s room]].[]]</tw-passagedata><tw-passagedata pid="302" name="St John Wall&#39;s room" tags="" position="3746,1539" size="100,100">{(set: $thisRoomsNumber to 8)
(set: $thisYear to 10000)}
(border-color: yellow) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in St John Wall&#39;s room in Chingle Hall. From here you can head $upOnScreen to [[a narrow landing-&gt;chingle landing 3]].}

(event: when time &gt; 10s)[==You turn to see a man standing motionless in the corner of the room.

(event: when time &gt; 15s)[==As you watch, the man&#39;s arms and legs fall away. Then his head falls from his shoulders and rolls across the floor to your feet. You scream and jump back, but there is nothing and no-one in this room but you. []]</tw-passagedata><tw-passagedata pid="303" name="chingle room 4" tags="" position="3737,1009" size="100,100">{(set: $thisRoomsNumber to 24)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the guest bedroom, upstairs in Chingle Hall. From here you may go [[$downOnScreen-&gt;chingle landing 2]] through a door to the landing.[]]</tw-passagedata><tw-passagedata pid="304" name="left end of chingle landing" tags="" position="3349,1111" size="100,100">{(set: $thisRoomsNumber to 21)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are at the ($ern: $leftOnScreen) most end of the landing, upstairs in Chingle Hall. There are two doors here. You may take the one to the [[$downOnScreen-&gt;owner&#39;s room]] or the one to the [[$leftOnScreen-&gt;chingle room 2]]. Or you may [[head back along the landing-&gt;chingle top of stairs]].[]] </tw-passagedata><tw-passagedata pid="305" name="chingle landing turn" tags="" position="3611,1113" size="100,100">{(set: $thisRoomsNumber to 23)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are at a turn in the landing of Chingle Hall. From here you may go [[$leftOnScreen-&gt;chingle top of stairs]] to the top of the stairs, or proceed [[$downOnScreen-&gt;chingle landing]] along the landing.[]]</tw-passagedata><tw-passagedata pid="306" name="chingle room 2" tags="" position="3212,1114" size="100,100">{(set: $thisRoomsNumber to 20)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in a bathroom, upstairs in Chingle Hall. From here you may go [[$rightOnScreen-&gt;left end of chingle landing]] through a door to the landing.[]]</tw-passagedata><tw-passagedata pid="307" name="owner&#39;s parlour" tags="" position="2595,1455" size="100,100">{(set: $thisRoomsNumber to 12)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the owner&#39;s parlor in Chingle Hall. From here there are two exits in the $rightOnScreen wall. At the $upOnScreen end of the wall you can go [[under the stairs-&gt;under stairs]], and at the $downOnScreen end you can go to the [[foot of the stairs-&gt;foot of stairs]].[]]</tw-passagedata><tw-passagedata pid="308" name="bridge over the moat" tags="" position="2881,1731" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 5)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}
(border-color: blue) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are on the bridge over the moat at Chingle Hall. From here you can enter the building [[through the door-&gt;chingle entrance hall]] to the $upOnScreen, or head [[back to the roads of Elizabethan Britain-&gt;two fifths up]].}

(event: when time &gt; 5s)[==You hear a bang, and turn to see soldiers fighting on the bridge.

(event: when time &gt; 15s)[==With a sudden gust of wind the soldiers disappear, lost among the spiraling leaves.[]]</tw-passagedata><tw-passagedata pid="309" name="chingle laundry room" tags="" position="3017,1333" size="100,100">{(set: $thisRoomsNumber to 14)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in a small empty room off the kitchen of Chingle Hall. You can go through a door to the $leftOnScreen into the [[kitchen-&gt;chingle kitchen]], or you can head $downOnScreen to the [[chapel-&gt;chingle chapel]].[]]</tw-passagedata><tw-passagedata pid="310" name="outside" tags="" position="2880,1124" size="100,100">{(set: $thisRoomsNumber to 15)
(set: $thisYear to 10000)}
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on the island surrounded by the Chingle moat, behind the manor. To the $upOnScreen is a [[barn]]. To the $downOnScreen is a door leading into a [[kitchen-&gt;chingle kitchen]].[]]</tw-passagedata><tw-passagedata pid="311" name="barn" tags="" position="2877,990" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 9)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}
(border-color: (rgb: 155, 100, 0)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the barn behind Chingle Hall. From here you can see [[an exit-&gt;outside]] leading to the $downOnScreen.}

(event: when time &gt; 5s)[==You turn to see a man, no a boy, hanging by his neck from the rafters. You recoil in horror.

(event: when time &gt; 10s)[==As quickly as it appeared, the hanging boy disappears, and you realize it was but an apparition.
[]]</tw-passagedata><tw-passagedata pid="312" name="toy vendor" tags="" position="4125,811" size="100,100">{($overrideImage:&quot;1791&quot;)
(set: $thisRoomsNumber to 1)}
(border-color: white) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in a market at the ($directionJoined: $upOnScreen, $leftOnScreen) corner of a square in revolutionary Paris, beneath the shadow of the legendary cathedral of Notre Dame. In the center of the square, a crowd has gathered beside the guillotine while, beside you, a vendor sells grisly execution-themed memorabilia, including a toy guillotine and faux decapitated heads. From here you may [[go $downOnScreen-&gt;prisoner about to die]] to where a prisoner is being prepared for execution, or $rightOnScreen to (link:&quot;the front of the cathedral&quot;)[(goto:&quot;complex nine&quot;)]. []] </tw-passagedata><tw-passagedata pid="313" name="college downstairs" tags="" position="4680,953" size="100,100">{(set: $thisRoomsNumber to 2)
($overrideImage:&quot;17920&quot;)
(border-color: $pink) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in an arched corridor beneath the college at the ($ern: $leftOnScreen) end of the square. To the $rightOnScreen, [[a crowd gathers-&gt;guillotine right up]] around the guillotine for the day&#39;s executions. Alternatively, you may cut across the square to the ($directionJoined: $downOnScreen, $leftOnScreen) to a [[prominent house-&gt;view from house]]. One other possibility is to [[investigate a flight of spiral steps leading up-&gt;college upstairs]].[] ]}</tw-passagedata><tw-passagedata pid="314" name="college upstairs" tags="" position="4821,951" size="100,100">{($overrideImage:&quot;17903&quot;)
(set: $thisRoomsNumber to 13)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on the roof of the college, looking down over the square where the guillotine does its deadly work. 

From here, you may [[head down a flight of spiral steps-&gt;college downstairs]], [[hop $downOnScreen to another rooftop-&gt;corner rooftop]], or climb across a wire to the ($directionJoined: $upOnScreen, $leftOnScreen) to [[the roof of Notre Dame cathedral-&gt;notre dame roof]].[]] }</tw-passagedata><tw-passagedata pid="315" name="carmelites" tags="" position="4260,1084" size="100,100">{($overrideImage:&quot;1793&quot;)
(set: $thisRoomsNumber to 3)
(border-color: red) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in a public square in Paris, beneath the shadow of Notre Dame cathedral. In the center of the square is the guillotine, and beside you a group of terrified Carmelite nuns await execution. From here you can go $upOnScreen towards [[the scaffold itself-&gt;guillotined heads]], or $rightOnScreen towards [[a prominent house-&gt;view from house]]. You may also head $leftOnScreen to where there seems to be [[a commotion-&gt;guards defend guillotine]].[]]  }</tw-passagedata><tw-passagedata pid="316" name="view from house" tags="" position="4526,1085" size="100,100">{($overrideImage:&quot;1794&quot;)
(set: $thisRoomsNumber to 4)
(border-color: purple) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the porchway of a prominent house, looking out onto a square in revolutionary Paris. In the center of the square to the $upOnScreen, raised high upon a wooden plinth, looms the forbidding guillotine. Further to the $upOnScreen, at the other side, is the great cathedral of Notre Dame. 

There is no way into the house but, if you like, you can [[try to climb up upon the roof-&gt;guillotine house upstairs]]. Otherwise you may head into the square to [[join the crowd beneath the guillotine-&gt;guillotine right up]], or head $leftOnScreen to where some [[terrified nuns await execution-&gt;carmelites]]. You may also cut ($directionJoined: $upOnScreen, $rightOnScreen) across the corner of the square to [[a college building-&gt;college downstairs]].[]]}</tw-passagedata><tw-passagedata pid="317" name="guards defend guillotine" tags="" position="4136,1086" size="100,100">{($overrideImage:&quot;1795&quot;)
(set: $thisRoomsNumber to 5)
(border-color: blue) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in a public square in Paris, beneath the shadow of Notre Dame cathedral. A group of guards is attempting to defend the guillotine from a gang of rowdy revolutionaries. From here you can go $upOnScreen towards [[where a prisoner is beng prepared for execution-&gt;prisoner about to die]], or $rightOnScreen towards [[a group of shackled nuns-&gt;carmelites]].[] ]}</tw-passagedata><tw-passagedata pid="318" name="prisoner about to die" tags="" position="4131,953" size="100,100">{($overrideImage:&quot;1796&quot;)
(set: $thisRoomsNumber to 6)}
(border-color: cyan) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in a public square in Paris, beneath the shadow of Notre Dame cathedral. You are at the foot of the guillotine, where a prisoner is being prepared for execution. From here you can go $downOnScreen to [[where there seems to be a fight going on-&gt;guards defend guillotine]], or you can [[climb up onto the scaffold-&gt;guillotined heads]] You may also head $upOnScreen to [[a market-&gt;toy vendor]] selling execution toys and memorabilia. []] </tw-passagedata><tw-passagedata pid="319" name="guillotined heads" tags="" position="4256,951" size="100,100">{(set: $thisRoomsNumber to 9)
($overrideImage:&quot;1798&quot;) 
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(border-color: yellow) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on the scaffold platform, by a basket of severed heads. From here you can go $rightOnScreen across the platform to where [[a headless body-&gt;guillotined body]] is being picked up by guards. Or you can step down from the platform and go $upOnScreen to (link:&quot;Notre Dame cathedral&quot;)[(goto:&quot;complex nine&quot;)], $leftOnScreen to [[where a prisoner is being prepared for the scaffold-&gt;prisoner about to die]], or $downOnScreen to [[where a group of terrified nuns await execution-&gt;carmelites]]. []]}</tw-passagedata><tw-passagedata pid="320" name="guillotined body" tags="" position="4398,950" size="100,100">{($overrideImage: &quot;1799&quot;)
(set: $thisRoomsNumber to 11)
(border-color: $brown) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on the scaffold platform, by a headless corpse being picked up by guards. You can step down from the scaffold to go $upOnScreen into (link:&quot;Notre Dame cathedral&quot;)[(goto:&quot;complex nine&quot;)] or head $leftOnScreen across the platform towards [[a basket of heads-&gt;guillotined heads]]. You may also go $rightOnScreen towards a [[college-&gt;guillotine right up]]. []]}</tw-passagedata><tw-passagedata pid="321" name="guillotine right up" tags="" position="4521,948" size="100,100">{($overrideImage:&quot;17901&quot;)
(set: $thisRoomsNumber to 12)
(border-color: gray) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in a square in revolutionary Paris, beneath the shadow of the ominous guillotine. From here you may [[climb up onto the scaffold-&gt;guillotined body]], where guards get ready to carry away the headless corpse of a political criminal. Alternatively, you may head $rightOnScreen into [[an archway beneath the college-&gt;college downstairs]], or $downOnScreen to [[a prominent house-&gt;view from house]].[]]}</tw-passagedata><tw-passagedata pid="322" name="corner rooftop" tags="" position="4681,1088" size="100,100">{($overrideImage:&quot;1792&quot;)
(set: $thisRoomsNumber to 14)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on a rooftop at the corner of the square, looking down to where the guillotine does its deadly work, and across to the magnificent cathedral of Notre Dame.  

From here, you may head $upOnScreen to the [[roof of the college-&gt;college upstairs]], or $leftOnScreen to the [[roof of a prominent house-&gt;guillotine house upstairs]].[] ]}</tw-passagedata><tw-passagedata pid="323" name="guillotine house upstairs" tags="" position="4531,1220" size="100,100">{($overrideImage:&quot;17902&quot;)
(set: $thisRoomsNumber to 15)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on the roof of a prominent house with a magnificent view of the cathedral of Notre Dame. Down in the square below, a crowd has gathered to watch the guillotine do her work. You may [[climb down the front of the house-&gt;view from house]] to join them, or head $rightOnScreen to [[another rooftop-&gt;corner rooftop]].[]] }</tw-passagedata><tw-passagedata pid="324" name="bell tower" tags="" position="1945,2571" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 11)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{(if: $decadeNumber is 1970)[You are in the church of St Vasily the Blessed in Pokrovsky cathedral. ($setRoomContent:) From here you may head back to the [[$leftOnScreen-&gt;spire]] or down some steps into the [[crypt]].]}]}</tw-passagedata><tw-passagedata pid="325" name="notre dame roof" tags="" position="4255,813" size="100,100">{($overrideImage:&quot;1797&quot;)
(set: $thisRoomsNumber to 7)}
(border-color: green) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on the roof of Notre Dame cathedral, overlooking the square where the guillotine does its work. From here you can (link:&quot;climb down to the foot of Notre Dame&quot;)[(goto:&quot;complex nine&quot;)], or climb across a wire to the ($directionJoined: $rightOnScreen, $downOnScreen) to [[the college roof-&gt;college upstairs]].[] ]</tw-passagedata><tw-passagedata pid="326" name="set bailey adj" tags="startup" position="11,2388" size="100,100">{(set: $setBaileyAdj to
(macro: [
	(if: $decadeNumber is in (a: 930))
		[
		(set: $baileyAdj1 to &quot;flowered&quot;)
		(set: $baileyAdj2 to &quot;picturesque&quot;)
		(set: $baileyAdj3 to &quot;beautiful&quot;)
		]
	(else-if: $decadeNumber is in (a: 1030))
		[
		(set: $baileyAdj1 to &quot;sloping, snow covered&quot;)
		(set: $baileyAdj2 to &quot;icy, inclined&quot;)
		(set: $baileyAdj3 to &quot;wintry, sloping&quot;)
		]
	(else-if: $decadeNumber is in (a: 1380))
		[
		(set: $baileyAdj1 to &quot;overgrown&quot;)
		(set: $baileyAdj2 to &quot;wild and weedgrown&quot;)
		(set: $baileyAdj3 to &quot;long untended&quot;)
		]
	(else-if: $decadeNumber is in (a: 1720))
		[
		(set: $baileyAdj1 to &quot;former&quot;)
		(set: $baileyAdj2 to &quot;erstwhile&quot;)
		(set: $baileyAdj3 to &quot;bygone&quot;)
		]
	(else-if: $decadeNumber is in (a: 1780))
		[(if: $bastille is &quot;unstormed&quot;)
			[
			(set: $baileyAdj1 to &quot;&quot;)
			(set: $baileyAdj2 to &quot;&quot;)
			(set: $baileyAdj3 to &quot;&quot;)
			]
		(else:)
			[
			(set: $baileyAdj1 to &quot;ruined&quot;)
			(set: $baileyAdj2 to &quot;rubbled&quot;)
			(set: $baileyAdj3 to &quot;wrecked&quot;)
			]
		]
	(else-if: $decadeNumber is in (a: 1940))
		[
		(set: $baileyAdj1 to &quot;snow covered&quot;)
		(set: $baileyAdj2 to &quot;icy&quot;)
		(set: $baileyAdj3 to &quot;wintry&quot;)
		]
	(else:)[
		(set: $baileyAdj1 to &quot;&quot;)
		(set: $baileyAdj2 to &quot;&quot;)
		(set: $baileyAdj3 to &quot;&quot;)
		]
	(output-data:&quot;&quot;)
		]
		))
		
}</tw-passagedata><tw-passagedata pid="327" name="environ database e - j" tags="startup" position="652,1523" size="100,100">{
		
(set: $farm to 
(macro: [	
	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;vegetable field&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;paddock, where white stallions graze&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;pig pen&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;rooster&#39;s yard&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;farm house&quot;)]
		(if: $roomNumber is 5) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;water trough&quot;)]
		(if: $roomNumber is 6) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;fox trap&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;grazing pasture&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;field of yellow corn&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;freshly ploughed field&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))

(set: $field to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;blackened, burned field&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;meadow of white flowers&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;pasture of pink carnations&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;red poppy field&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;field of purple lilacs&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;bluebell field&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;field of cyan lotus flowers&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;meadow of green grass&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;yellow field of wheat&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;muddy field&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	
	(output-data: &quot;&quot;)
		]
		))
		
(set: $forest to 
(macro: [	
	(set: _prep to &quot;by &quot;)
	(set: $roomAdjective to &quot;a &quot;)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;gnarly oak&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;rope swing&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;brook&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;tree, around which nymph lights shine&quot;)]
		(if: $roomNumber is 4) [(set: $roomAdjective to &quot;some &quot;)(set: $roomNoun to &quot;cliffs&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;mine shaft&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;burned out campfire&quot;)]
		(if: $roomNumber is 7) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;sacred grove&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;fallen tree&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;carcass&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))
		
(set: $frument to 
(macro: [	
	($quarter:)
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;chess room&quot;)]
		(if: $roomNumber is 2) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;spy hole&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;interrogation room&quot;)]

		(if: $roomNumber is 6) [(set: $roomNoun to &quot;detainee cell&quot;)]
		(if: $roomNumber is 7) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;prayer mat&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))
		
(set: $greekTemple to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $decadeNumber is 1870)[
		($house:)
		(set: $domicile to &quot;temple&quot;)]
	($church:)
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;bema&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;forum&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;sanctum of Mars&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;tower&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(set: $narthex to &quot;pronaos&quot;)
		(set: $altar to &quot;adyton&quot;)
		(set: $crossing to &quot;cella&quot;)
		(set: $nave to &quot;naos&quot;)
		(set: $temple to &quot;temple&quot;)
		(set: $spire to &quot;oraculum&quot;)
		(set: $vestry to &quot;opisthodomos&quot;)
		(set: $priestsHole to &quot;priestess&#39;s sanctum&quot;)
		(set: $vapenhus to &quot;vapenhus&quot;)
		(set: $organistsLoft to &quot;organists&#39;s loft&quot;)
		(set: $vapenhus to &quot;weapons sheath&quot;)
		(set: $matrimonialChapel to &quot;porch of the maidens&quot;)
		(set: $reliquary to &quot;snake room&quot;)
		(set: $choirboysStalls to &quot;gallery&quot;)
		(set: $symbols to &quot;symbols&quot;)
		(set: $sacred to &quot;sacred&quot;)
		(set: $saints to &quot;gods&quot;)
		(set: $prophets to &quot;oracles&quot;)
		(set: $vestments to &quot;robes&quot;)
		(set: $hymnals to &quot;sacrificial daggers&quot;)
		(set: $missals to &quot;chants&quot;)
		(set: $liturgicalTexts to &quot;sacred papyri&quot;)
		(set: $clergyHouse to &quot;high priestess&#39;s cell&quot;)
		(output-data: &quot;&quot;)
		]
		))

(set: $hashishQuarter to 
(macro: [	
	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($village:)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;hashish grower&#39;s&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;hashish bar&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;grower&#39;s bookshop&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;gang den&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun
		(output-data: &quot;&quot;)
		]
		))

(set: $house to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($mansion:)
		(if: $roomNumber is 1) [(unless: $decadeNumber is 1870)[(set: $roomNoun to &quot;chess room&quot;)](else:)[(set: $roomNoun to &quot;ouija room&quot;)]]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;study&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;doghouse&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;prayer room&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;rickety staircase&quot;)]
		
		(set: $billiardRoom to &quot;chess room&quot;)
		(set:  $boilerRoom to &quot;furnace room&quot;)
		(set:  $brickWall to &quot;brick wall&quot;)
		(set:  $chapel to &quot;prayer room&quot;)
		(set:  $dilapidated to &quot;musty wooden staircase&quot;)
		(set:  $domicile to &quot;house&quot;)
		(set:  $elevator to &quot;shaky steps&quot;)
		(set:  $grandHouse to &quot;house&quot;)
		(set:  $kennels to &quot;doghouse&quot;)
		(set:  $inABrickWall to &quot;in a brick wall&quot;)
		(set: $diningRoom to &quot;dining room&quot;)
		(set: $noisy to &quot;&quot;)
		(set:  $study to &quot;study&quot;)
		(set: $suitsOfArmor to &quot;ornamental weapons and shields&quot;)
		(if: $decadeNumber is 1870)[
			(set: $domicile to &quot;temple&quot;)
			(set: $billiardRoom to &quot;ouija room&quot;)
			(set: $stables to &quot;doghouse&quot;)
			(if: $roomNumber is 5) [(set: $roomNoun to &quot;trophy room&quot;)]
			(set: $suitsOfArmor to &quot;the mounted heads of game animals&quot;)
			(set: $secretDoor to &quot;giant rhinoceros head&quot;)
			(set: $secretDoorShort to &quot;head&quot;)
			(set: $armorRoom to &quot;trophy room&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))
		
(set: $hypogeum to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;the &quot;)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;winch room&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;chamber of the balatrones&quot;)]
		(if: $roomNumber is 2) [(set: $roomAdjective to &quot;the &quot;)(set: $roomNoun to &quot;chamber of the master of ceremonies&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;chamber of the Pantomimi&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;feasting area&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;gladiator&#39;s chamber&quot;)]
		(if: $roomNumber is 6) [(set: _prep to &quot;amongst &quot;)(set: $roomNoun to &quot;caged beasts&quot;)]
		(if: $roomNumber is 7) [(set: _prep to &quot;amongst &quot;)(set: $roomNoun to &quot;shackled Christians&quot;)]
		(if: $roomNumber is 8) [(set: _prep to &quot;amongst &quot;)(set: $roomNoun to &quot;wounded gladiators&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;morgue&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))

(set: $industrialCampus to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;the &quot;)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;generator room&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;engineer&#39;s lounge&quot;)]
		(if: $roomNumber is 2) [(set: $roomAdjective to &quot;the &quot;)(set: $roomNoun to &quot;engineer&#39;s library&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;wives&#39; society&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;apartment block&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;fire station&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;quarantine zone&quot;)]
		(if: $roomNumber is 7) [(set: _prep to &quot;amongst &quot;)(set: $roomNoun to &quot;Soviet council hall&quot;)]
		(if: $roomNumber is 8) [(set: _prep to &quot;at &quot;)(set: $roomNoun to &quot;hole in the reactor&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;concrete tombs&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))


(set: $inquisitor to 
(macro: [	
	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($jail:)
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;torture chamber&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))

(set: $jail to 
(macro: [	
	($building:)
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
		(if: $roomNumber is 0) [(set: $roomAdjective to &quot;a pitch black &quot;)(set: $roomNoun to &quot;cell&quot;)]
		(if: $roomNumber is 1) [(set: $roomAdjective to &quot;a well lit &quot;)(set: $roomNoun to &quot;cell&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;library&quot;)]

		(if: $roomNumber is 4) [(set: $roomAdjective to &quot;a purple curtained &quot;)(set: $roomNoun to &quot;cell&quot;)]
		(if: $roomNumber is 5) [(set: $roomAdjective to &quot;a &quot;)(set: $roomNoun to &quot;fighting pit&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;prison yard&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(set: $staircase to &quot;stairwell&quot;)
		(set: $towerEntrance to &quot;sally port&quot;)
		(set: $mainStairwell to &quot;stairwell&quot;)
		(set: $tinyStaircase to &quot;narrow staircase&quot;)
		(set: $mainStairwell to &quot;great iron stairwell&quot;)
		(set: $tower_ to &quot;tower&quot;)
		(set: $parapet to &quot;parapet&quot;)
		(set: $floors to &quot;floors&quot;)
		(set: $top to &quot;top&quot;)
		(set: $reaches to &quot;reaches&quot;)
		(set: $chapel to &quot;chapel&quot;)
		(set: $steps to &quot;steps&quot;)
		
		(set: $castleword to &quot;gulag&quot;)
		(set: $gatehouse to &quot;entry gate&quot;)
		(set: $bailey to &quot;camp grounds&quot;)
		(set: $drawbridge to &quot;approach road&quot;)
		(set: $battlements to &quot;guard walk&quot;)
		(set: $maidensTower to &quot;kitchens&quot;)
		(set: $castleKeep to &quot;main block&quot;)
		(set: $keep to &quot;central block&quot;)
		(set: $gatehouseWall to &quot;front fence&quot;)
		(set: $turret to &quot;watchtower&quot;)
		(set: $sickHall to &quot;infirmary&quot;)
		(set: $wall to &quot;fence&quot;)
		
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))	


(set: $jungle to 
(macro: [	
	
	(set: _prep to &quot;by &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($forest:)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;twisting vine&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;river&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;a golden statue of some naked goddess&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;clearing filled with snakes&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;pit trap&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))

}</tw-passagedata><tw-passagedata pid="328" name="environ database k - q" tags="startup" position="651,1639" size="100,100">{
(set: $kremlin to 
(macro: [		
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($barrack:)
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;book room&quot;)]
	(if: $roomNumber is 3) [(set: $roomAdjective to &quot;&quot;)(set: $roomNoun to &quot;Catherine Hall&quot;)]

	(if: $roomNumber is 4) [(set: $roomNoun to &quot;Soviet premier&#39;s residence&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;arsenal&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;Blagoveschenskaya prison tower&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;Arkhangelskiy Cathedral&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;sick hall&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;mausoleum of Lenin&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(set: $castleword to &quot;citadel&quot;)
	(set: $gatehouse to &quot;gatehouse&quot;)
	(set: $bailey to &quot;cathedral square&quot;)
	(set: $drawbridge to &quot;drawbridge&quot;)
	(set: $battlements to &quot;battlements&quot;)
	(set: $maidensTower to &quot;Catherine Hall&quot;)
	(set: $castleKeep to &quot;Grand Kremlin Palace&quot;)
	(set: $keep to &quot;Grand Kremlin Palace&quot;)
	(set: $gatehouseWall to &quot;gatehouse wall&quot;)
	(set: $turret to &quot;tower&quot;)
	(set: $sickHall to &quot;sick hall&quot;)
	(set: $wall to &quot;wall&quot;)
	(output-data: &quot;&quot;)
		]
		))
		
(set: $lakeside to 
(macro: [	
	(set: _prep to &quot;by &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($forest:)
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;rope swing&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;warning sign&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;nymph&#39;s lagoon&quot;)]
		(if: $roomNumber is 4) [(set: $roomAdjective to &quot;a &quot;)(set: $roomNoun to &quot;boat&quot;)]
		(if: $roomNumber is 5) [(set: $roomAdjective to &quot;&quot;)(set: $roomNoun to &quot;marshes&quot;)]
		(if: $roomNumber is 7) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;ruined chapel&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;shore of dead fish&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))

(set: $library to 
(macro: [	
	($mansion:)
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;the &quot;)
	(if: $decadeNumber is 820)[(set: $roomAdjective to &quot;the flooded &quot;)]
	(if: $decadeNumber is 420)[(set: $roomAdjective to &quot;the ruins of the &quot;)]
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;cosmology section&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;children&#39;s section&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;science section&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;women&#39;s section&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;reading room&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;military section&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;locked collection&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;theology section&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;book restoration tower&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;necromancy section&quot;)]
		(set:  $armorRoom to &quot;heraldry collection&quot;)
		(set:  $attic to &quot;attic&quot;)
		(set:  $atticStairs to &quot;attic stairs&quot;)
		(set:  $basementCorridor to &quot;basement corridor&quot;)
		(set:  $bathroom to &quot;bathroom&quot;)
		(set:  $bedchamber to &quot;reference room&quot;)
		(set:  $billiardRoom to &quot;children&#39;s section&quot;)
		(set:  $boilerRoom to &quot;furnace room&quot;)
		(set:  $boudoir to &quot;women&#39;s section&quot;)
		(set:  $brickWall to &quot;laddered bookshelf&quot;)
		(set:  $buttery to &quot;pharmacology section&quot;)
		(set:  $casketRoom to &quot;necromancy section&quot;)
		(set:  $cellar to &quot;vinology section&quot;)
		(set:  $chapel to &quot;theology section&quot;)
		(set:  $cold to &quot;&quot;)
		(set: $cool to &quot;&quot;)
		(set: $dark to &quot;&quot;)
		(set:  $dilapidated to &quot;staircase&quot;)
		(set:  $diningRoom to &quot;gastronomy section&quot;)
		(set:  $domicile to &quot;library&quot;)
		(set:  $elevator to &quot;staircase&quot;)
		(set:  $entranceHall to &quot;atrium&quot;)
		(set:  $flooded to &quot;&quot;)
		(set:  $grandHouse to &quot;library&quot;)
		(set:  $hallway1 to &quot;travel section&quot;)
		(set:  $hallway2 to &quot;geography section&quot;)
		(set:  $inABrickWall to &quot;in a laddered bookshelf&quot;)
		(set:  $kennels to &quot;locked collection&quot;)
		(set:  $kitchen to &quot;cookbook collection&quot;)
		(set:  $landing to &quot;landing&quot;)
		(set: $laundryCollectionArea to &quot;book collection point&quot;)
		(set:  $larder to &quot;herbal reference section&quot;)
		(set:  $livingRoom to &quot;reading room&quot;)
		(set:  $mainBasement to &quot;main basement&quot;)
		(set:  $mainLanding to &quot;main landing&quot;)
		(set:  $mainStaircase to &quot;main staircase&quot;)
		(set:  $masterBedroom to &quot;auditorium&quot;)
		(set: $noisy to &quot;&quot;)
		(set:  $nursery to &quot;cosmology section&quot;)
		(set:  $oratory to &quot;mysticism section&quot;)
		(set:  $servantsQuarters to &quot;librarian&#39;s office&quot;)
		(set:  $storageRoom to &quot;storage room&quot;)
		(set:  $study to &quot;science section&quot;)
		(set: $sumptuous to &quot;&quot;)
		(set: $submerged to &quot;&quot;)
		(set: $suitsOfArmor to &quot;shelves and shelves of books on heraldry, the history of warfare and military theory&quot;)
		(set: $swim to &quot;go&quot;)
		(set:  $threadbare to &quot;dusty&quot;)
		(set:  $underKitchenSteps to &quot;basement steps&quot;)
		(set: $underwater to &quot;&quot;)
		(set:  $yard to &quot;outdoors section&quot;)
		(if: $decadeNumber is 820) [
			(set: $flooded to &quot;flooded&quot;)
			(set: $underwater to &quot;underwater&quot;)
			(set: $partiallySubmerged to &quot;partially submerged&quot;)
			(set: $submerged to &quot;submerged&quot;)
			(set: $roomAdjective to &quot;a waterlogged &quot;)
			(set: $wade to &quot;wade&quot;)
			(set: $swim to &quot;swim&quot;)
			]
		(if: $decadeNumber is 420) [
			(set: $flooded to &quot;&quot;)
			(set: $underwater to &quot;partially submerged&quot;)
			(set: $partiallySubmerged to &quot;&quot;)
			(set: $submerged to &quot;waterlogged&quot;)
			(set: $roomAdjective to &quot;a damp &quot;)
			(set: $wade to &quot;go&quot;)
			(set: $swim to &quot;wade&quot;)
			]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
		]
		))
		
(set: $loverscave to 
(macro: [	
	
	(set: _prep to &quot;by &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($forest:)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;young woman giving birth&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;bacchanalian orgy&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;detective pursuing an adulterer&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;two star crossed lovers&quot;)]
		(if: $roomNumber is 4) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;lounge area&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;two fighting lovers&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;woman bound and gagged for her lover&#39;s enjoyment&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;Christian priest, calling sinners to repent&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;broken hearted man&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;woman getting an abortion&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))

(set: $mansion to 
(macro: [
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;the &quot;)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;nursery&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;billiard room&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;library&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;boudoir&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;living room&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;armor room&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;kennels&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;chapel&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;dilapidated elevator&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;casket room&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(set:  $armorRoom to &quot;armor room&quot;)
		(set:  $attic to &quot;attic&quot;)
		(set:  $atticStairs to &quot;attic stairs&quot;)
		(set:  $basementCorridor to &quot;basement corridor&quot;)
		(set:  $bathroom to &quot;bathroom&quot;)
		(set:  $bedchamber to &quot;bedchamber&quot;)
		(set:  $billiardRoom to &quot;billiard room&quot;)
		(set:  $boilerRoom to &quot;boiler room&quot;)
		(set:  $boudoir to &quot;boudoir&quot;)
		(set:  $brickWall to &quot;[&quot; + &quot;[brick wall]&quot; + &quot;]&quot;)
		(set:  $buttery to &quot;buttery&quot;)
		(set:  $casketRoom to &quot;casket room&quot;)
		(set:  $cellar to &quot;cellar&quot;)
		(set:  $chapel to &quot;chapel&quot;)
		(set:  $cold to &quot;cold&quot;)
		(set: $cool to &quot;cool&quot;)
		(set: $dark to &quot;dark&quot;)
		(set:  $dilapidated to &quot;elevator&quot;)
		(set:  $diningRoom to &quot;dining room&quot;)
		(set:  $domicile to &quot;mansion&quot;)
		(set:  $elevator to &quot;elevator&quot;)
		(set:  $entranceHall to &quot;entrance hall&quot;)
		(set:  $flooded to &quot;&quot;)
		(set:  $gallery to &quot;gallery&quot;)
		(set:  $grandHouse to &quot;grand house&quot;)
		(set:  $hallway1 to &quot;hallway&quot;)
		(set:  $hallway2 to &quot;hallway&quot;)
		(set:  $inABrickWall to &quot;in a brick wall&quot;)
		(set:  $kennels to &quot;kennels&quot;)
		(set:  $kitchen to &quot;kitchen&quot;)
		(set:  $landing to &quot;landing&quot;)
		(set:  $larder to &quot;larder&quot;)
		(set: $laundryCollectionArea to &quot;laundry collection area&quot;)
		(set:  $livingRoom to &quot;living room&quot;)
		(set:  $mainBasement to &quot;main basement&quot;)
		(set:  $mainLanding to &quot;main landing&quot;)
		(set:  $mainStaircase to &quot;main staircase&quot;)
		(set:  $masterBedroom to &quot;master bedroom&quot;)
		(set: $narrow to &quot;narrow&quot;)
		(set:  $noisy to &quot;noisy&quot;)
		(set:  $nursery to &quot;nursery&quot;)
		(set:  $oratory to &quot;oratory&quot;)
		(set:  $partiallySubmerged to &quot;&quot;)
		(set: $roughHewn to &quot;rough-hewn &quot;)
		(set: $secondYard to &quot;yard&quot;)
		(set: $secretDoor to &quot;suit of armor&quot;)
		(set: $secretDoorShort to &quot;armor&quot;)
		(set:  $servantsQuarters to &quot;servant&#39;s quarters&quot;)
		(set: $stables to &quot;stables&quot;)
		(set:  $storageRoom to &quot;storage room&quot;)
		(set:  $study to &quot;library&quot;)
		(set: $suitsOfArmor to &quot;suits of armour&quot;)
		(set: $sumptuous to &quot;sumptuous&quot;)
		(set: $submerged to &quot;&quot;)
		(set: $swim to &quot;go&quot;)
		(set:  $threadbare to &quot;threadbare&quot;)
		(set:  $underKitchenSteps to &quot;under-kitchen steps&quot;)
		(set: $underwater to &quot;&quot;)
		(set: $wade to &quot;go&quot;)
		(set:  $yard to &quot;yard&quot;)
		(output-data: &quot;&quot;)
		]
		))
			
(set: $market to 
(macro: [
	(set: _prep to &quot;at &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($village:)
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;beer brewer&#39;s&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;book seller&#39;s&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;dressmaker&#39;s&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;grocer&#39;s&quot;)]
		(if: $roomNumber is 5) [(set: $roomAdjective to &quot;an &quot;)(set: $roomNoun to &quot;armorer&#39;s&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;locksmith&#39;s&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;psychic&#39;s&quot;)]
		(set: $phrase to it + &quot; stall&quot;)
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))
		
(set: $menagerie to 
(macro: [
	
	(set: _prep to &quot;by &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($camp:)
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;display of African monkeys&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;display of hanging sloths&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;chained tiger&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;sickly rhinocerous&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;dead elephant&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))
		
(set: $mine to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($cave:)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;dark pit&quot;)]
	(if: $roomNumber is 1) [(set: _prep to &quot;at &quot;)(set: $roomNoun to &quot;mine cart roller coaster&quot;)]		
	(if: $roomNumber is 2) [(set: _prep to &quot;at &quot;)(set: $roomNoun to &quot;geologist&#39;s cubby&quot;)]
	(if: $roomNumber is 3) [(set: _prep to &quot;at &quot;)(set: $roomNoun to &quot;diamond face&quot;)]
	(if: $roomNumber is 4) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;bucket hoist&quot;)]
	(if: $roomNumber is 5) [(set: _prep to &quot;near &quot;)(set: $roomAdjective to &quot;an &quot;)(set: $roomNoun to &quot;explosives store&quot;)]
	(if: $roomNumber is 6) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;cramped seam&quot;)]
	(if: $roomNumber is 7) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;shaft of light&quot;)]
	(if: $roomNumber is 8) [(set: $roomAdjective to &quot;a collapsed &quot;)(set: $roomNoun to &quot;tunnel&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(set: $steps to &quot;shaft&quot;)
	(set: $tinyStaircase to &quot;narrow climbable shaft&quot;)
	(set: $mainStairwell to &quot;great shaft&quot;)
	(set: $tower_ to &quot;mine&quot;)
	(set: $towerEntrance to &quot;mineral face&quot;)
	(set: $parapet to &quot;hoist house&quot;)
	(set: $floors to &quot;levels&quot;)
	(set: $reaches to &quot;parts&quot;)
	(output-data: &quot;&quot;)
		]
		))
		
(set: $monastery to 
(macro: [		
	(set: _prep to &quot;in &quot;)
	(if: $decadeNumber is in (a:1720))
		[(set:$roomAdjective to &quot;a one-time &quot;)]
	(else:)
		[(set: $roomAdjective to &quot;a &quot;)]
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;allotment&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;misericord&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;scriptorium&quot;)]
		(if: $roomNumber is 3) [(set: $roomAdjective to &quot;a &quot;)(set: $roomNoun to &quot;kitchen&quot;)]

		(if: $roomNumber is 4) [(set: $roomNoun to &quot;hostelry&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;smithy&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;cell&quot;)]

		(if: $roomNumber is 7) [(set: $roomNoun to &quot;chapel&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;infirmary&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;mortuary&quot;)]

		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		
		(set: $castleword to &quot;compound&quot;)
		(set: $gatehouse to &quot;lodge&quot;)
		(set: $bailey to &quot;garth&quot;)
		(set: $drawbridge to &quot;entrance path&quot;)
		(set: $battlements to &quot;terrace&quot;)
		(set: $maidensTower to &quot;chapter house&quot;)
		(set: $castleKeep to &quot;abbey&quot;)
		(set: $keep to &quot;abbey&quot;)
		(set: $gatehouseWall to &quot;lodgehouse cloister&quot;)
		(set: $turret to &quot;dorter&quot;)
		(set: $sickHall to &quot;infirmary&quot;)
		(set: $wall to &quot;cloister&quot;)
		($setBaileyAdj:)
		(output-data: &quot;&quot;)
		]
		))
		
	

	

(set: $mosque to 
(macro: [	
	($church:)
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $roomNumber is 0) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;wudu fountain&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;children&#39;s area&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;book room&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;musalla nisa&quot;)]
	(if: $roomNumber is 4) [(set: $roomAdjective to &quot;the &quot;)(set: $roomNoun to &quot;Imam&#39;s quarters&quot;)]
	(if: $roomNumber is 5) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;shoe shelf&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;solitary prayer room&quot;)]
	(if: $roomNumber is 7) [(set: _prep to &quot;on &quot;)(set: $roomNoun to &quot;minbar&quot;)]
	(if: $roomNumber is 8) [(set: _prep to &quot;at &quot;)(set: $roomAdjective to &quot;a collapsed &quot;)(set: $roomNoun to &quot;riwaq&quot;)]
	(if: $roomNumber is 9) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;lahad&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
	]
	))


(set: $mountainside to 
(macro: [	
	
	(set: _prep to &quot;by &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($forest:)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;pine tree&quot;)]
		(if: $roomNumber is 2) [(set: _prep to &quot;at &quot;)(set: $roomNoun to &quot;plateau with a breathtaking view over the valley below&quot;)]
		(if: $roomNumber is 3) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;lair of a mountain hag&quot;)]
		(if: $roomNumber is 7) [(set: _prep to &quot;near &quot;)(set: $roomNoun to &quot;high point above the clouds&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;pile of boulders, left from a rockfall&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;carcass&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))

(set: $mushroom to 
(macro: [
	
	(set: $roomNoun to (either: &quot;toadstools&quot;,&quot;toadstools&quot;,&quot;toadstools&quot;,&quot;fairy rings&quot;))
	(set: _prep to &quot;by &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(set: $mushroomAdj to (either: &quot;, fruiting &quot;, &quot;, gilled &quot;,&quot;, umbrellaed  &quot;,&quot; stemmed &quot;, &quot;, fleshy &quot;,&quot;, long-stemmed &quot;,&quot;, thin-stemmed &quot;,&quot;, wide-hatted &quot;,&quot; dotted &quot;,&quot; speckled &quot;, &quot;, wispy &quot;, &quot;, tabular &quot;))
		(if: $roomNumber is 0) [(set: $roomAdjective to &quot;a bed of black&quot; + $mushroomAdj)(set:$roomNoun to &quot;deathcaps&quot;)]
		(if: $roomNumber is 1) [(set: $roomAdjective to &quot;a white mushroom &quot;)(set: $roomNoun to &quot;gazebo&quot;)]
		(if: $roomNumber is 2) [(set: $roomAdjective to &quot;a bed of pink&quot; + $mushroomAdj)]
		(if: $roomNumber is 3) [(set: $roomAdjective to &quot;a bed of red&quot; + $mushroomAdj)]
		(if: $roomNumber is 4) [(set: $roomAdjective to &quot;a display of purple&quot; + $mushroomAdj)]
		(if: $roomNumber is 5) [(set: $roomAdjective to &quot;a blue pool from which there sprout thick&quot; + $mushroomAdj)]
		(if: $roomNumber is 6) [(set: $roomAdjective to &quot;a display of turquoise&quot; + $mushroomAdj)]
		(if: $roomNumber is 7) [(set: $roomAdjective to &quot;a grassy &quot;)(set: $roomNoun to &quot;fungus patch&quot;)]
		(if: $roomNumber is 8) [(set: $roomAdjective to &quot;a broken circle of yellow&quot; + $mushroomAdj)(set: $roomNoun to &quot;creminis&quot;)]
		(if: $roomNumber is 9) [(set: $roomAdjective to &quot;a brown &quot;)(set: $roomNoun to &quot;wooden bench&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))
	
(set: $newsPress to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($castle:)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;darkroom&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;comics office&quot;)]
		(if: $roomNumber is 2) [(set: $roomAdjective to &quot;an &quot;)(set: $roomNoun to &quot;editor&#39;s office&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;maiden&#39;s tower&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;printing press&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;propaganda office&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;classified documents office&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;communist party office&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;repair room&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(if: $roomNumber is 9) [(set: _prep to &quot;at &quot;)(set: $roomNoun to &quot;wastepaper skip&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))

(set: $palace to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($castle:)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;buttery&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;nursery&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;library&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;maiden&#39;s tower&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;audience chamber&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;fencing gymnasium&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))
	
(set: $park to 
(macro: [
	
	(if: $decadeNumber is 470)[(set: $roomAdjective to &quot;an overgrown &quot;)]
	(set: _prep to &quot;by &quot;)
	(set: $roomAdjective to &quot;a &quot;)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;bed of black shale&quot;)]
		(if: $roomNumber is 0 and $decadeNumber is 200) [(set: $roomNoun to &quot;black pagoda&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;white swing seat&quot;)]
		(if: $roomNumber is 1 and $decadeNumber is 200) [(set: $roomNoun to &quot;games pavilion&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;a display of pink carnations, with educational labels&quot;)]
		(if: $roomNumber is 2 and $decadeNumber is 200) [(set: $roomNoun to &quot;a pool with pink waterlillies&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;lover&#39;s seat, surrounded by red poppies&quot;)]
		(if: $roomNumber is 3 and $decadeNumber is 200) [(set: $roomNoun to &quot;pool of red fish&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;statue of a leader, by a display of purple lilacs&quot;)]
		(if: $roomNumber is 4 and $decadeNumber is 200) [(set: $roomNoun to &quot;a boulevard of purple wisteria trees&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;cenotaph, surrounded by a display of bluebells&quot;)]
		(if: $roomNumber is 5 and $decadeNumber is 200) [(set: $roomAdjective to &quot;an &quot;)(set: $roomNoun to &quot;avenue of blue trees&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;a caged display of cyan lotus flowers&quot;)]
		(if: $roomNumber is 6 and $decadeNumber is 200) [(set: $roomNoun to &quot;a pagoda by a crystal cyan pool&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;grassy allotment&quot;)]
		(if: $roomNumber is 7 and $decadeNumber is 200) [(set: $roomNoun to &quot;grassy allotment&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;broken circle of yellow sunflowers&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;brown wooden bench, dedicated to a dead man&quot;)]
		(if: $roomNumber is 9 and $decadeNumber is 200) [(set: $roomNoun to &quot;towering brown pagoda&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))
		

(set: $penalQuarter to 
(macro: [	
	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;blacksmith&#39;s&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;witness&#39;s space, for watching the punishments&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;children&#39;s prison&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;women&#39;s prison&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;execution square&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;gaol&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;whipping post&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))
		
(set: $plaguePit to 
(macro: [	
	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $roomNumber is 0) [(set: _prep to &quot;within &quot;)(set: $roomAdjective to &quot;&quot;)(set: $roomNoun to &quot;walls of fungus covered corpses&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;buried play-park&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;buried school for children&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;chamber of dead nuns&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;buried market&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;chamber of dead soldiers&quot;)]
	(if: $roomNumber is 6) [(set: $phrase to _prep + &quot;subterranean, walled-up&quot; + &quot;street&quot;)]
	(if: $roomNumber is 7) [(set: $phrase to _prep + &quot;collapsed, subterranean&quot; + &quot;chapel&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;chamber of partial bodies&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;repository for random bones and partial human remains&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
	]
	))

(set: $quarter to 
(macro: [	
	
	(set: _prep to &quot;by &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($forest:)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;breakfast mess&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;recreation room&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;study&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;women&#39;s bathroom&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;lounge&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;gymnasium&quot;)]
		(if: $roomNumber is 5 and $floorInt is 0) [(set: $roomNoun to &quot;bathhouse&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;cell&quot;)]
		(if: $roomNumber is 6 and $floorInt is 0) [(set: $roomNoun to &quot;quarantine cell&quot;)]

		(if: $roomNumber is 7) [(set: $roomNoun to &quot;prayer room&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;apothecary&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;morgue&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))

}</tw-passagedata><tw-passagedata pid="329" name="environ database r - s" tags="startup" position="651,1754" size="100,100">{

		
(set: $rectory to 
(macro: [	
	($house:)
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;the broken remnants of a &quot;)
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;housekeeper&#39;s room&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;chapel&quot;)]
	(set:  $chapel to &quot;chapel&quot;)
	(set:  $domicile to &quot;rectory&quot;)
	(set: $suitsOfArmor to &quot;crosses and religious art&quot;)
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
		]
		))

	
(set: $revolution to 
(macro: [	
	(set: $roomAdjective to &quot;a &quot;)
	(set: _prep to &quot;at &quot;)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;trashed marked&quot;)]

	(if: $roomNumber is 1) [(set: $roomNoun to &quot;street party&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;book burning&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;women&#39;s march&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;mansion invasion&quot;)]

	(if: $roomNumber is 5) [(set: $roomNoun to &quot;street war&quot;)]
	(if: $roomNumber is 6) [(set: $roomAdjective to &quot;the &quot;)(set: $roomNoun to &quot;storming of the Bastille&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;burning church&quot;)]
	(if: $roomNumber is 8) [(set: $roomAdjective to &quot;the &quot;)(set: $roomNoun to &quot;ruins of Paris&quot;)]
	(if: $roomNumber is 9) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;slaughtered horse&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)

	(output-data: &quot;&quot;)
		]
		))
		
		
		
(set: $school to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;the &quot;)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;neophyte&#39;s quarters&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;chess room&quot;)]
	(if: $roomNumber is 1 and $decadeNumber is 220) [(set: $roomNoun to &quot;Go room&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;study hall&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;women&#39;s quarters&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;scholar&#39;s lounge&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;examination hall&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;cloister&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;chapel&quot;)]
	(if: $roomNumber is 7 and $decadeNumber is 220) [(set: $roomAdjective to &quot;a &quot;)(set: $roomNoun to &quot;temple&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;remediation hall&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;emeritus chambers&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
		]
		))
		

(set: $ship to 
(macro: [	
	(set: _prep to &quot;on &quot;)
	(set: $roomAdjective to &quot;the &quot;)
	(if: $roomNumber is 0) [(set: _prep to &quot;below &quot;)(set: $roomAdjective to &quot; &quot;)(set: $roomNoun to &quot;deck&quot;)]
	(if: $roomNumber is 1) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;crow&#39;s nest&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;navigation deck&quot;)]
	(if: $roomNumber is 3) [(set: _prep to &quot;at &quot;)(set: $roomNoun to &quot;mast head&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;cabin&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;magazine&quot;)]
	(if: $roomNumber is 6) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;brig&quot;)]
	(if: $roomNumber is 7) [(set: _prep to &quot;in &quot;)(set: $roomNoun to &quot;Chaplain&#39;s cabin&quot;)]
	(if: $roomNumber is 8) [(set: _prep to &quot;in &quot;)(set: $roomAdjective to &quot;the cramped &quot;)(set: $roomNoun to &quot;sick bay&quot;)]
	(if: $roomNumber is 9) [(set: _prep to &quot;in &quot;)(set: $roomAdjective to &quot; &quot;)(set: $roomNoun to &quot;salted storage&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
		]
		))

(set: $skyscraper to 
(macro: [	
	($tower:)
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;food court&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;roof garden&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;computer office&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;kitchen&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;penthouse suite&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;security room&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;bank vault&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;prayer room&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;restroom&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;garbage disposal&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(set: $steps to &quot;elevator&quot;)
	(set: $tinyStaircase to &quot;VIP elevator&quot;)
	(set: $mainStairwell to &quot;main elevator&quot;)
	(set: $tower_ to &quot;skyscraper&quot;)
	(set: $towerEntrance to &quot;tower lobby&quot;)
	(set: $parapet to &quot;windy rooftop&quot;)
	(output-data: &quot;&quot;)
		]
		))
		
(set: $slaveMarket to 
(macro: [	
	(set: _prep to &quot;by &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;the stall of a hawker of contraceptives and abortifacients&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;purveyor of children&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;dealer in captured diplomats and sages&quot;)]
	(if: $roomNumber is 3) [(set: _prep to &quot;at &quot;)(set: $roomNoun to &quot;sex slave auction&quot;)]
	(if: $roomNumber is 4) [(set: _prep to &quot;at &quot;)(set: $roomNoun to &quot;refreshments tent&quot;)]
	(if: $roomNumber is 5) [(set: _prep to &quot;at &quot;)(set: $roomNoun to &quot;gladiator&#39;s auction&quot;)]
	(if: $roomNumber is 6) [(set: _prep to &quot;where &quot;)(set: $prep to &quot;where &quot;)(set: $roomAdjective to &quot;an &quot;)(set: $roomNoun to &quot;ironmonger sells slave shackles&quot;)]
	(if: $roomNumber is 7) [(set: _prep to &quot;where &quot;)(set: $prep to &quot;where &quot;)(set: $roomNoun to &quot;holy man preaches against slavery&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;seller of teeth and hair&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;skull vendor&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
		]
		))	


(set: $stBasil to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;the &quot;)
	(if: $roomNumber is 0) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;Southwestern Chapel of St. Varlaam of Khutyn &quot;)]
	(if: $roomNumber is 1) [(set: $roomAdjective to &quot;an &quot;)(set: $roomNoun to &quot;altarboys&#39; choir&quot;)]
	(if: $roomNumber is 3) [(set: $roomAdjective to &quot;the &quot;)(set: $roomNoun to &quot;Southwestern Chapel of St. Varlaam of Khutyn&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;northern porch&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;lower belfry&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;priest&#39;s hole&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;Northern Chapel of the Holy Martyrs Cyprian and Justina&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;church of saints Alexander, John and Paul&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;crypt of the holy fool&quot;)]

	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	
	(set: $altar to &quot;Northern Chapel of the Holy Martyrs Cyprian and Justina&quot;)

	(set: $chapel to &quot;chapel&quot;)
	(set: $choirboysStalls to &quot;choirboys&#39; stalls&quot;)
	(set: $clergyHouse to &quot;northern porch&quot;)
	(set: $cloister to &quot;Church of St Alexander of Svir&quot;)
	(set: $collonade to &quot;collonade&quot;)
	(set: $crossing to &quot;inner gallery&quot;)
	
	(set: $font to &quot;southern porch&quot;)

	(set: $hymnals to &quot;hymnals&quot;)
	(set: $leftTransept to &quot;Church of the Entry of the Lord into Jerusalem&quot;)
	(set: $liturgicalTexts to &quot;liturgical texts&quot;)
	(set: $matrimonialChapel to &quot;Southwestern Chapel of St. Varlaam of Khutyn&quot;)
	
	(set: $missals to &quot;missals&quot;)
	(set: $narthex to &quot;Southern Chapel of St. Nicholas Velikoretsky&quot;)
	(set: $nave to &quot;Central Chapel of the Intercession of the Holy Virgin&quot;)

	(set: $organistsLoft to &quot;upper belfry&quot;)
	(set: $priestsHole to &quot;priest&#39;s hole&quot;)
	(set: $prophets to &quot;prophets&quot;)
	(set: $reliquary to &quot;reliquary of St Basil the fool&quot;)
	(set: $rightTransept to &quot;Eastern Chapel of the Holy Trinity&quot;)
	(set: $sacred to &quot;sacred&quot;)
	(set: $saints to &quot;saints&quot;)
	(set: $spire to &quot;Northeastern Chapel of the Three Patriarchs of Constantinople&quot;)
	(set: $symbols to &quot;effects&quot;)
	(set: $temple to &quot;church&quot;)
	
	(set: $vapenhus to &quot;lower belfry&quot;)
	(set: $vestments to &quot;vestments&quot;)
	(set: $vestry to &quot;Church of St Gregory the Armenian&quot;)
	(output-data: &quot;&quot;)
	]
	))



(set: $surgery to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($mansion:)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;maternity ward&quot;)]

	(if: $roomNumber is 1) [(set: $roomNoun to &quot;recreation room&quot;)]

	(if: $roomNumber is 2) [(set: $roomNoun to &quot;patient&#39;s library&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;women&#39;s ward&quot;)]

	(if: $roomNumber is 4) [(set: $roomNoun to &quot;medicine closet&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;examination room&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;triage room&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;trauma unit&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(set:  $armorRoom to &quot;specimen room&quot;)
		(set:  $attic to &quot;attic&quot;)
		(set:  $atticStairs to &quot;attic stairs&quot;)
		(set:  $basementCorridor to &quot;basement corridor&quot;)
		(set:  $bathroom to &quot;bathroom&quot;)
		(set:  $bedchamber to &quot;ward&quot;)
		(set:  $billiardRoom to &quot;recreation room&quot;)
		(set:  $boilerRoom to &quot;furnace room&quot;)
		(set:  $boudoir to &quot;women&#39;s ward&quot;)
		(set:  $brickWall to &quot;[&quot; + &quot;[stone wall]&quot; + &quot;]&quot;)
		(set:  $buttery to &quot;cold foods store&quot;)
		(set:  $casketRoom to &quot;casket room&quot;)
		(set:  $cellar to &quot;cellar&quot;)
		(set:  $chapel to &quot;chapel&quot;)
		(set:  $cold to &quot;cold&quot;)
		(set: $cool to &quot;cool&quot;)
		(set: $dark to &quot;dark&quot;)
		(set:  $dilapidated to &quot;trauma unit&quot;)
		(set:  $diningRoom to &quot;canteen&quot;)
		(set:  $domicile to &quot;surgery&quot;)
		(set:  $elevator to &quot;elevator&quot;)
		(set:  $entranceHall to &quot;entrance hall&quot;)
		(set:  $flooded to &quot;&quot;)
		(set:  $gallery to &quot;corridor&quot;)
		(set:  $grandHouse to &quot;compound&quot;)
		(set:  $hallway1 to &quot;foyer&quot;)
		(set:  $hallway2 to &quot;lobby&quot;)
		(set:  $inABrickWall to &quot;in a stone wall&quot;)
		(set:  $kennels to &quot;cells&quot;)
		(set:  $kitchen to &quot;kitchen&quot;)
		(set:  $landing to &quot;landing&quot;)
		(set:  $larder to &quot;larder&quot;)
		(set: $laundryCollectionArea to &quot;laundry collection area&quot;)
		(set:  $livingRoom to &quot;quiet room&quot;)
		(set:  $mainBasement to &quot;main basement&quot;)
		(set:  $mainLanding to &quot;main landing&quot;)
		(set:  $mainStaircase to &quot;main staircase&quot;)
		(set:  $masterBedroom to &quot;administrator&#39;s office&quot;)
		(set: $narrow to &quot;narrow&quot;)
		(set:  $noisy to &quot;noisy&quot;)
		(set:  $nursery to &quot;nursery&quot;)
		(set:  $oratory to &quot;oratory&quot;)
		(set:  $partiallySubmerged to &quot;&quot;)
		(set: $roughHewn to &quot;rough-hewn &quot;)
		(set:  $servantsQuarters to &quot;staff quarters&quot;)
		(set:  $secretDoor to &quot;large jar&quot;)
		(set:  $secretDoorShort to &quot;jar&quot;)
		
		(set:  $storageRoom to &quot;storage room&quot;)
		(set:  $study to &quot;library&quot;)
		(set: $suitsOfArmor to &quot;specimens&quot;)
		(set: $sumptuous to &quot;&quot;)
		(set: $submerged to &quot;&quot;)
		(set: $swim to &quot;go&quot;)
		(set:  $threadbare to &quot;&quot;)
		(set:  $underKitchenSteps to &quot;under-kitchen steps&quot;)
		(set: $underwater to &quot;&quot;)
		(set: $wade to &quot;go&quot;)
		(set:  $yard to &quot;yard&quot;)
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
		]
		))

(set: $swamp to 
(macro: [	
	
	(set: _prep to &quot;wading through &quot;)
	(set: $roomAdjective to &quot;&quot;)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;black mud&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;white algae&quot;)]
	(if: $roomNumber is 2) [(set: _prep to &quot;among &quot;)(set: $roomNoun to &quot;pink thistles&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;red grass&quot;)]
	(if: $roomNumber is 4) [(set: _prep to &quot;among &quot;)(set: $roomNoun to &quot;purple thorn berries&quot;)]
	(if: $roomNumber is 5) [(set: _prep to &quot;among &quot;)(set: $roomNoun to &quot;blueberry bushes&quot;)]
	(if: $roomNumber is 6) [(set: _prep to &quot;under &quot;)(set: $roomAdjective to &quot;a &quot;)(set: $roomNoun to &quot;clear blue-green sky&quot;)]
	(if: $roomNumber is 7) [(set: _prep to &quot;walking through &quot;) (set: $roomNoun to &quot;long green grass&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;yellow grass&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;brown mud&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
		]
		))		



}</tw-passagedata><tw-passagedata pid="330" name="environ database t - z" tags="startup" position="647,1866" size="100,100">{
(set: $tower to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($building:)
	(set: $steps to &quot;winding steps&quot;)
	(set: $tinyStaircase to &quot;tiny wooden staircase&quot;)
	(set: $mainStairwell to &quot;great, winding stairwell&quot;)
	(set: $tower_ to &quot;tower&quot;)
	(set: $towerEntrance to &quot;tower gate&quot;)
	(set: $parapet to &quot;wind blown parapet&quot;)
	(set: $floors to &quot;floors&quot;)
	(set: $top to &quot;top&quot;)
	(set:$reaches to &quot;reaches&quot;)
	(output-data: &quot;&quot;)
		]
		))


(set: $town to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $decadeNumber is in (a: 1990))[(set: $roomAdjective to &quot;an abandoned &quot;)]
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;maternity clinic&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;fairground&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;school gym&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;registry office&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;mall&quot;)]
		(if: $roomNumber is 5) [(set: $roomAdjective to &quot;a rusted &quot;)(set: $roomNoun to &quot;military magazine&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;quarantine pen&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;church center&quot;)]
		(if: $roomNumber is 8) [(set: $roomAdjective to &quot;a radioactive &quot;)(set: $roomNoun to &quot;junkyard&quot;)]
		(if: $roomNumber is 9) [(set: $roomAdjective to &quot;an &quot;)(set: _prep to &quot;at &quot;)(set: $roomNoun to &quot;unmarked grave&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))


(set: $triclinium to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($building:)
	(if: $roomNumber is 0) [(set: $phrase to _prep + &quot;a dark, shady &quot; + &quot;private apse&quot;)]
	(if: $roomNumber is 1) [(set: $phrase to _prep + &quot;a well lit &quot; + &quot;lover&#39;s apse&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;peeper&#39;s balcony&quot;)]
	(if: $roomNumber is 5) [(set: _prep to &quot;by &quot;)(set: $roomNoun to &quot;chaperone&#39;s seat&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;courtyard&quot;)]
	(if: $roomNumber is 7) [(set: $roomNoun to &quot;statue of Venus&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(output-data: &quot;&quot;)
		]
		))


(set: $undergroundChapel to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $roomNumber is 0) [(set: _prep to &quot;by &quot;)(set: $roomAdjective to &quot;an onyx &quot;)(set: $roomNoun to &quot;childrens&#39; prayer room&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;childrens&#39; prayer room&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;christian pamphlet room&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;shrine of the Virgin Mary&quot;)]
	(if: $roomNumber is 4) [(set: $roomAdjective to &quot;the &quot;)(set: $roomNoun to &quot;elder&#39;s quarters&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;chamber of abandoned swords&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;hideout hole&quot;)]
	(if: $roomNumber is 7) [(set: _prep to &quot;by&quot;)(set: $roomAdjective to &quot;an &quot;)(set: $roomNoun to &quot;altar&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;chamber of broken artifacts&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)

	(output-data: &quot;&quot;)
	]
	))


(set: $vault to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;moldy vault&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;beer vault&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;spies&#39; vault&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;underworld knocking shop&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;robbers&#39; hideout&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;illegal weapons store&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;kidnapper&#39;s hideout&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;sacred vault&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;junk dump&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;cadaver&#39;s vault&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))


(set: $vestal to 
(macro: [		
	(set: $phrase to it + &quot; in the Atrium Vestiae&quot;)
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($monastery:)
	(if: $roomNumber is 1) 
		[(set: $roomNoun to &quot;choral chamber in the Atrium Vestiae&quot;)]
	(if: $roomNumber is 5) 
		[(set: $roomNoun to &quot;chamber of Mars&quot;)]
	(if: $roomNumber is 7) 
		[(set: $roomNoun to &quot;sacred flame chamber in the temple of Vesta &quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	(set: $castleword to &quot;temple&quot;)
	(set: $gatehouse to &quot;vestibulum&quot;)
	(set: $bailey to &quot;allotment&quot;)
	(set: $drawbridge to &quot;ostium&quot;)
	(set: $battlements to &quot;deambulatio&quot;)
	(set: $maidensTower to &quot;high priestess&#39;s tower&quot;)
	(set: $castleKeep to &quot;central sanctum&quot;)
	(set: $keep to &quot;inner sanctum&quot;)
	(set: $gatehouseWall to &quot;vestibulum wall&quot;)
	(set: $turret to &quot;spire&quot;)
	(set: $sickHall to &quot;infirmary&quot;)
	(set: $wall to &quot;wall&quot;)
	(output-data: &quot;&quot;)
		]
		))		
	
(set: $villa to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	($mansion:)
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;games room&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;study&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;kitchen&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;triclinium&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;stables&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;shrine&quot;)]
		(if: $roomNumber is 8) [(set: $roomNoun to &quot;ruined pavilion&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(set: $bailey to &quot;atrium&quot;)
		(set: $battlements to &quot;solarium&quot;)
		(set: $domicile to &quot;villa&quot;)
		(set: $drawbridge to &quot;path&quot;)
		(set: $castleword to &quot;villa&quot;)
		(set: $gatehouse to &quot;entrance&quot;)
		(set: $maidensTower to &quot;MAIDEN&#39;S TOWER&quot;)
		(set: $castleKeep to &quot;central domus&quot;)
		(set: $keep to &quot;domus&quot;)
		(set: $gatehouseWall to &quot;atrium wall&quot;)
		(set: $gate to &quot;entrance&quot;)
		(set: $trophyRoom to &quot;trophy room&quot;)
		(set: $turret to &quot;outer house&quot;)
		(set: $sickHall to &quot;sick hall&quot;)
		(set: $wall to &quot;wall&quot;)
		(set: $outTheBack to &quot; and out the back&quot;)
		(output-data: &quot;&quot;)
		]
		))

(set: $village to 
(macro: [	
	(set: _prep to &quot;in &quot;)
	(set: $roomAdjective to &quot;a &quot;)
	(if: $decadeNumber is in (a: 690,1250))[(set: $roomAdjective to &quot;an abandoned &quot;)]
	(if: $decadeNumber is 1200)[(set: $roomAdjective to &quot;a flooded &quot;)]
	(if: $decadeNumber is 1290)[(set: $roomAdjective to &quot;the blazing remains of a &quot;)]
		(if: $roomNumber is 0) [(set: $roomNoun to &quot;blacksmith&#39;s&quot;)]
		(if: $roomNumber is 1) [(set: $roomNoun to &quot;tavern&quot;)]
		(if: $roomNumber is 2) [(set: $roomNoun to &quot;school&quot;)]
		(if: $roomNumber is 3) [(set: $roomNoun to &quot;brothel&quot;)]
		(if: $roomNumber is 4) [(set: $roomNoun to &quot;market&quot;)]
		(if: $roomNumber is 5) [(set: $roomNoun to &quot;courthouse&quot;)]
		(if: $roomNumber is 6) [(set: $roomNoun to &quot;sheriff&#39;s jailhouse&quot;)]
		(if: $roomNumber is 7) [(set: $roomNoun to &quot;church&quot;)]
		(if: $roomNumber is 8) [(set: $roomAdjective to &quot;an &quot;)(set: $roomNoun to &quot;apothecary&#39;s&quot;)]
		(if: $roomNumber is 9) [(set: $roomNoun to &quot;mortician&#39;s&quot;)]
		(set: $phrase to _prep + $roomAdjective + $roomNoun)
		(output-data: &quot;&quot;)
		]
		))
	
(set: $wall to 
(macro: [	
	(set: $roomAdjective to &quot;a &quot;)
	(set: _prep to &quot;at &quot;)
	(if: $roomNumber is 0) [(set: $roomAdjective to &quot;a low &quot;)(set: $roomNoun to &quot;section&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;bar&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;listening station&quot;)]
	(if: $roomNumber is 3) [(set: $roomNoun to &quot;women and children&#39;s checkpoint&quot;)]
	(if: $roomNumber is 4) [(set: $roomNoun to &quot;bunker&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;guards tower&quot;)]
	(if: $roomNumber is 6) [(set: $roomNoun to &quot;detention pen&quot;)]
	(if: $roomNumber is 7) [(set: $roomAdjective to &quot;the abandoned &quot;)(set: $roomNoun to &quot;church of reconciliation in no-man&#39;s land&quot;)]
	(if: $roomNumber is 8) [(set: $roomNoun to &quot;wall breach&quot;)]
	(if: $roomNumber is 9) [(set: $roomNoun to &quot;cemetery&quot;)]

	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	
	(output-data: &quot;&quot;)
		]
		))	
	
(set: $workhouse to 
(macro: [	
	(set: $roomAdjective to &quot;a &quot;)
	(set: _prep to &quot;in &quot;)
	($barrack:)
	(if: $roomNumber is 0) [(set: $roomNoun to &quot;grain house&quot;)]
	(if: $roomNumber is 1) [(set: $roomNoun to &quot;mess&quot;)]
	(if: $roomNumber is 2) [(set: $roomNoun to &quot;book room&quot;)]
	(if: $roomNumber is 5) [(set: $roomNoun to &quot;cane room&quot;)]
	(set: $phrase to _prep + $roomAdjective + $roomNoun)
	
	(output-data: &quot;&quot;)
		]
		))
		
}</tw-passagedata><tw-passagedata pid="331" name="room 90" tags="" position="901,277" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 20)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;1759&quot;)]


(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}
(border-color: (rgb: 155, 100, 0)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[$complexSentence.
($room9content:)
{
From here you may go [[$rightHill_1 $rightOnScreen-&gt;room 4]] ($toThePhrase: 4) or [[$downHill_1 $downOnScreen-&gt;room 61]]. 
}
]</tw-passagedata><tw-passagedata pid="332" name="room 60" tags="" position="903,0" size="100,100">{(set: $thisRoomsNumber to 22)
($setImage:)
($setRoomVariables:)
(if: $decadeNumber is 1750)[($overrideImage: &quot;1756&quot;)]

(set: $thisRoomsNumber to 6)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
($refreshSentences:)}(border-color: (rgb: 0, 255, 255)) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
(if: $bastille is &quot;stormed&quot;)[By the time you arrive the violence and mayhem has passed, and you approach the ruins of the Bastille. The way forward is blocked by a collapsed wall and you may proceed no further.]  
(else:)[$complexSentence.] 

From here you may go [[$upHill_1 $upOnScreen-&gt;room 61]]. (if: $bastille is &quot;unstormed&quot;)[Or, if you like, you can (link:&quot;join the assault on the Bastille!&quot;)[ (set: $bastille to &quot;joining in&quot;)(goto: &quot;complex eight&quot;)] ]


}]</tw-passagedata><tw-passagedata pid="333" name="room 61" tags="" position="897,142" size="100,100">{
(set: $thisRoomsNumber to 21)
($setRoomVariables:)
($overrideImage: &quot;17511&quot;)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4) + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are approaching the Bastille Citadel in Paris. From a distance you can see the smoke rising. You can [[continue towards it-&gt;room 60]] or [[head back-&gt;room 90]].[]]
}</tw-passagedata><tw-passagedata pid="334" name="bastille Phrase" tags="startup" position="132,57" size="100,100">{
(set: $ruinsOfThe to &quot;&quot;)

(set: $bastillePhrase to
(macro: [		
	(if: $floorInt is 17)
		[
		(if: $bastille is &quot;stormed&quot; or $bastille is &quot;joined in&quot;)
			[(set: $ruinsOfThe to &quot;ruins of the&quot;)]
		(else:) [(set: $ruinsOfThe to &quot;&quot;)]
		]
	(else:) [(set: $ruinsOfThe to &quot;&quot;)]
	(output-data:&quot;&quot;)
		]
		)
		)
}</tw-passagedata><tw-passagedata pid="335" name="Afghanistan line" tags="" position="1715,1756" size="100,100">{(set: $gulag to &quot;escaped&quot;)}(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[{(if: $afghanDirection is &quot;south&quot; and $afghanCounter is 3)[(set: $afghanDirection to &quot;north&quot;) You disembark at a desert station. A soviet commander approaches you. &quot;Где твоя форма?&quot; he barks, &quot;Почему ты не со своим взводом?&quot; He signals to some guards who escort you to a barracks and force you to put on a uniform. Soon you are [[deployed in the war in Afghanistan.-&gt;complex five]]]
(elseif: $afghanDirection is &quot;south&quot;)[You are on a train heading south through arid, rugged climes. There is nothing for you to do except (link: &quot;watch the desert speed by.&quot;)[(set: $afghanCounter to $afghanCounter +1)(goto:&quot;Afghanistan line&quot;)]]
(elseif: $afghanDirection is &quot;north&quot; and $afghanCounter is 0)[(set: $afghanDirection to &quot;south&quot;) (set: $afghanCounter to -1)(goto: &quot;middle right&quot;)] 
(elseif: $afghanDirection is &quot;north&quot; and $afghanCounter is 3)[Luckily, a train is just about to leave as you arrive at the station. (link:&quot;You step aboard as it pulls away.&quot;)[(set: $afghanCounter to $afghanCounter -1)(goto: &quot;Afghanistan line&quot;)]] 
(else:) [You are on a train heading north through dry hills. There is nothing for you to do except (link: &quot;wait and watch as the dusty mountains roll by.&quot;)[(set: $afghanCounter to $afghanCounter -1)(goto:&quot;Afghanistan line&quot;)]]
}]

(if: $floorInt is 19)[($overrideImage:(str: 19506 + $afghanCounter))]</tw-passagedata><tw-passagedata pid="336" name="soviet official" tags="" position="1704,1482" size="100,100">{(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)
[The soviet official approaches you. &quot;Пожалуйста, покажите мне ваши документы!&quot; he commands. When you are unable to respond appropriately, he has you arrested and (link:&quot;bundled on a train to Siberia.&quot;)[(set: $siberianDirection to &quot;east&quot;)(set: $gulag to &quot;arrested&quot;)(set:$siberianCounter to 1)(goto:&quot;middle right&quot;)].]}</tw-passagedata><tw-passagedata pid="337" name="train through countryside" tags="" position="922,1328" size="100,100">($overrideImage: &quot;19010&quot;)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
You are on a train heading through the countryside.
(if: $nextStop is &quot;Pripyat&quot;)[There is nothing to do but [[watch the world go by-&gt;complex nine]] ]
(else-if: $nextStop is &quot;Moscow&quot;)[There is nothing to do but [[watch the world go by-&gt;two fifths up]] ]
(else-if: $nextStop is &quot;Berlin&quot;)[There is nothing to do but [[watch the world go by-&gt;complex eight]] ]
(else-if: $nextStop is &quot;farm&quot;)[There is nothing to do but [[watch the world go by-&gt;complex zero]] ]
(else:)[Error: no next stop specified.]
}
]</tw-passagedata><tw-passagedata pid="338" name="reactor" tags="" position="1196,118" size="100,100">{(set: $thisYear to 10000)
(set: $thisRoomsNumber to 23)
($setRoomVariables:)
(if: $decadeNumber is 1990)[($overrideImage: &quot;1991&quot;)]

(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are beneath the shadow of the Chernobyl reactor. From here you may go [[$downOnScreen-&gt;room 9]].[]]}</tw-passagedata><tw-passagedata pid="339" name="bunker" tags="" position="2715,4017" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 4)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(set: $waterway to (cond: 
	$decadeNumber is 760, &quot;Wurm&quot;,
	$decadeNumber is 530, &quot;lake&quot;,
	&quot;lake&quot;)
	)
(if: $decadeNumber is 1980)[($overrideImage: &quot;198041&quot;)]

($refreshSentences:)}(border-color: purple) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
You are in an underground bunker beneath the shadow of the Berlin wall.

($room4content:)

From here you may go [[up to the main street.-&gt;souk 4]] 
[]
}]</tw-passagedata><tw-passagedata pid="340" name="guard tower" tags="" position="2847,3720" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 6)
(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)
(set: $waterway to (cond: 
	$decadeNumber is 760, &quot;Wurm&quot;,
	$decadeNumber is 530, &quot;lake&quot;,
	&quot;lake&quot;)
	)
(if: $decadeNumber is 1980)[($overrideImage: &quot;198051&quot;)]

($refreshSentences:)}(border-color: cyan) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{
You are at the top of a guard tower overlooking the no-man&#39;s land beneath the east and west sections of the Berlin wall. 

($room6content:)

From here you may go [[down to the base of the wall-&gt;souk 5]]. 
[]
}]</tw-passagedata><tw-passagedata pid="341" name="rotateStart" tags="" position="885,721" size="100,100">{(set: $rotateMap to 
(macro: [
	(set: _x to (cond:
		$rotation is 0, 0, 
	(output-data:_x)
	]))
	}</tw-passagedata><tw-passagedata pid="342" name="set up map debugging" tags="startup" position="769,723" size="100,100">{(set: $setUpMapDebugging to 
(macro: [
	(set: $transform to (a:))
	(set: $strtRoomz to (a:$startRoom))
	(set: $rightDirections to (a:&quot;default-east&quot;))
	(set: $upDirections to (a:&quot;default-north&quot;))
	(output-data:&quot;&quot;)
	]))
}</tw-passagedata><tw-passagedata pid="343" name="print map transformations" tags="" position="1008,722" size="100,100">{(set: $printMapTransformations to 
(macro: [
	(print: $transform)
	(print: $strtRoomz)
	(print: $rightDirections)
	(print: $upDirections)	
	(output-data:_x)
	]))
}</tw-passagedata><tw-passagedata pid="344" name="solarium" tags="" position="2340,3355" size="100,100">{($setImage:)
(if: $decadeNumber is 1870)[($overrideImage:1871)]
($refreshSentences:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $flooded $solarium of a $domicile. To the $returnDirection is a $returnRoom.[]]}</tw-passagedata><tw-passagedata pid="345" name="stables" tags="" position="2356,2733" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 6)
($setRoomVariables:)
(set: $thisYear to ($floorInt * 100) + $decadeNum + $thisRoomsNumber)
($refreshSentences:)
(border-color: cyan) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the $stables behind the $house(if:$domicile is in (a:&quot;house&quot;,&quot;mansion&quot;))[, on an aisle between the booths where the horses are tethered.](else:)[.] ($room6content:) To leave here you must head $downOnScreen. []]}</tw-passagedata><tw-passagedata pid="346" name="secondYard" tags="" position="2354,2880" size="100,100">{($setImage:)
(set: $thisRoomsNumber to 13)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage:&quot;1871&quot;)]
($refreshSentences:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are on a path from the yard to the $stables. If you wish, you can go [[$upOnScreen to the stables-&gt;stables]], or [[$leftOnScreen to the yard-&gt;yard]]. []]}</tw-passagedata><tw-passagedata pid="347" name="rear hall" tags="" position="2625,2831" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 15)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are in the rear hall of a $domicile. To the $leftOnScreen is the $partiallySubmerged [[$mainStaircase-&gt;alt staircase]]. Or you can head [[$downOnScreen to the front of the hall.-&gt;entrance hall]].}[]]}</tw-passagedata><tw-passagedata pid="348" name="alt staircase" tags="" position="2483,2830" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 14)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are on the $partiallySubmerged $mainStaircase of a $domicile. You can head up and to the $upOnScreen to the (link: $landing)[(goto: &quot;main landing&quot;)] or down and to the $rightOnScreen to the [[$entranceHall-&gt;rear hall]].}[]]}</tw-passagedata><tw-passagedata pid="349" name="gallery" tags="" position="3141,2942" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 22)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{(if: 2 is in $optionalPaths)[You are in a $flooded $gallery in a $grandHouse. The walls of this long room are bedecked with the finest tapestries and enormous paintings of great figures from the history of the $grandHouse. From here you may go $leftOnScreen to the [[$rightOnScreen hall-&gt;right hallway]] or $rightOnScreen to the [[$oratory-&gt;oratory]].](else:)[(goto:&quot;oratory&quot;)]}[]]}</tw-passagedata><tw-passagedata pid="350" name="séance room" tags="" position="3904,2372" size="100,100">{($setImage:)
($refreshSentences:)
(set: $thisRoomsNumber to 53)
($setRoomVariables:)
(if: $decadeNumber is 1870)[($overrideImage: &quot;18750&quot;)]
(border-color: $brown) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[You are in the séance room. There is an exit to the $upOnScreen that leads [[back to the landing-&gt;main landing]].[]]} 
</tw-passagedata><tw-passagedata pid="351" name="legacy set path prep" tags="" position="783,4146" size="100,100">{
&lt;!--encases the locipreps dm to give it a default value of &quot;in&quot; if nothing is specified --&gt; 

(set: $setPathPrep to
(macro: [
	(if: $lociPreps contains $pathNoun)
		[(set: $pathPrep to $pathNoun of $lociPreps)]
	(else:)[(set: $pathPrep to &quot;in&quot;)]
	(output-data: &quot;&quot;)
	]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;legacy preps database]]
}</tw-passagedata><tw-passagedata pid="352" name="midleft landing" tags="" position="3771,2510" size="100,100">{($setImage:)
($refreshSentences:) 
(set: $thisRoomsNumber to 32)
($setRoomVariables:)
(set:$entryPointFromElevator to &quot;null&quot;)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[
(if: $architecture is &quot;mansion&quot;)[You are on the $leftOnScreen landing.
	(if: $seance is &quot;yes&quot;)[A set of wooden steps leads up [[through a narrow stairwell-&gt;master bedroom]] to the $downOnScreen.] 
	(if: 3 is in $optionalPaths) [The landing continues to the (link: $leftOnScreen)[(goto:&quot;left landing&quot;)] and (link: $rightOnScreen)[(goto:&quot;main landing&quot;)] from here.]
	(else:)[The landing leads [[$upOnScreen-&gt;uplanding]] and [[$rightOnScreen-&gt;main landing]] from here.]
	](else:)[(if: $heading is $leftOnScreen) [(goto:&quot;left landing&quot;)].
	(if: $heading is $rightOnScreen)[(goto: &quot;main landing&quot;)]][]]}</tw-passagedata><tw-passagedata pid="353" name="midright landing" tags="" position="4038,2507" size="100,100">{($setImage:)
($refreshSentences:) 
(set:$entryPointFromElevator to &quot;null&quot;)
(set: $thisRoomsNumber to 34)
($setRoomVariables:)
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[
(if: $architecture is &quot;mansion&quot;)[You are on the $rightOnScreen landing.
	The landing continues to the (link: $leftOnScreen)[(goto:&quot;main landing&quot;)] and (link: $rightOnScreen)[(goto:&quot;right landing&quot;)].
	(if: 3 is in $optionalPaths)[A corridor also branches off to the $upOnScreen.]
	](else:)[(if: $heading is $leftOnScreen) [(goto:&quot;main landing&quot;)].
	(if: $heading is $rightOnScreen)[(goto: &quot;right landing&quot;)]][]]}</tw-passagedata><tw-passagedata pid="354" name="mannequin room" tags="" position="2463,3355" size="100,100">{}</tw-passagedata><tw-passagedata pid="355" name="inner courtyard" tags="" position="2591,3356" size="100,100">{}</tw-passagedata><tw-passagedata pid="356" name="servant&#39;s dining room" tags="" position="2726,3355" size="100,100">{}</tw-passagedata><tw-passagedata pid="357" name="taxidermy room" tags="" position="2863,3355" size="100,100">{}</tw-passagedata><tw-passagedata pid="358" name="uplanding" tags="" position="3769,2370" size="100,100">{($setImage:)
($refreshSentences:) 
(set: $thisRoomsNumber to 51)
($setRoomVariables:)
(if: $architecture is &quot;house&quot;)[(goto: &quot;main landing&quot;)]
(border-color: grey) + (border:&quot;solid&quot;) + (b4r-size:4)  + (background: &quot;https://i.ibb.co/RvgVfhk/grey-Background.png&quot;)[{You are on a corridor leading $upOnScreen from the main landing. If you wish to go to the main landing, you may [[head $downOnScreen-&gt;midleft landing]]. Otherwise, the corridor [[turns $leftOnScreen from here-&gt;left landing]]. (if: 5 is in $optionalPaths) [A door from here leads $upOnScreen.] }[]]}</tw-passagedata><tw-passagedata pid="359" name="collapsed landing" tags="" position="3000,3355" size="100,100">{}</tw-passagedata><tw-passagedata pid="360" name="set Nexus Directions" tags="startup" position="7,2855" size="100,100">{
(set: $setNexusDirections to
(macro: string-type _group, [
	(if: _group is &quot;hr1&quot;)[
		($setHR1:)]
	(if: _group is &quot;hr2&quot;)[
		($setHR2:)]
	(if: _group is &quot;g1&quot;)[
		($setG1:)]
	(if: _group is &quot;g2&quot;)[
		($setG2:)]
	(if: _group is &quot;stem&quot;)[
		($setStem:)]		
	(output-data: &quot;&quot;)
		]))


&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;set HR1]]
[[ -&gt;set HR2]]
[[ -&gt;set g1]]
[[ -&gt;set g2]]
[[ -&gt;set stem]]
}</tw-passagedata><tw-passagedata pid="361" name="set HR1" tags="startup" position="272,2641" size="100,100">{
(set: $setHR1 to
(macro: [
	(if: $map_variable1 is 1)[
		(set: $upOnNexusMap to $upOnNexusMapR)
		(set: $downOnNexusMap to $downOnNexusMapR)
		(set: $leftOnNexusMap to $rightOnNexusMapR)
		(set: $rightOnNexusMap to $leftOnNexusMapR)
	]
	(if: $map_variable1 is 2)[
		(set: $downOnNexusMap to $downOnNexusMapR)
		(set: $leftOnNexusMap to $leftOnNexusMapR)
		(set: $upOnNexusMap to $leftOnNexusMapR)
		(set: $rightOnNexusMap to $upOnNexusMapR)
	]
	(output-data: &quot;&quot;)
		]))
}

</tw-passagedata><tw-passagedata pid="362" name="set reference map" tags="startup" position="156,3406" size="100,100">{
&lt;!--Called upon entry into a new century. Sets the variables accordingly.--&gt;
(set: $setReferenceMap to
(macro: [
	(set: $upOnNexusMap to 1st of $directions)
	(set: $rightOnNexusMap to 2nd of $directions)
	(set: $downOnNexusMap to 3rd of $directions)
	(set: $leftOnNexusMap to 4th of $directions)
	(set: $upOnNexusMapR to 1st of $directions)
	(set: $rightOnNexusMapR to 2nd of $directions)
	(set: $downOnNexusMapR to 3rd of $directions)
	(set: $leftOnNexusMapR to 4th of $directions)
	(output-data:&quot;&quot;)
]))

}

</tw-passagedata><tw-passagedata pid="363" name="set HR2" tags="startup" position="271,2754" size="100,100">{
(set: $setHR2 to
(macro: [
	(if: $map_variable2 is 1)[
		(set: $upOnNexusMap to $upOnNexusMapR)
		(set: $downOnNexusMap to $downOnNexusMapR)
		(set: $leftOnNexusMap to $rightOnNexusMapR)
		(set: $rightOnNexusMap to $leftOnNexusMapR)
	]
	(if: $map_variable2 is 2)[
		(set: $upOnNexusMap to $upOnNexusMapR)
		(set: $leftOnNexusMap to $leftOnNexusMapR)
		(set: $downOnNexusMap to $leftOnNexusMapR)
		(set: $rightOnNexusMap to $downOnNexusMapR)
	]
	(output-data: &quot;&quot;)
		]))
}</tw-passagedata><tw-passagedata pid="364" name="set g1" tags="startup" position="271,2865" size="100,100">{
(set: $setG1 to
(macro: [
	(if: $map_variable1 is 1)[
		(set: $upOnNexusMap to $upOnNexusMapR)
		(set: $downOnNexusMap to $downOnNexusMapR)
		(set: $leftOnNexusMap to $rightOnNexusMapR)
		(set: $rightOnNexusMap to $leftOnNexusMapR)
	]
	(if: $map_variable1 is 2)[
		(set: $upOnNexusMap to $leftOnNexusMapR)
		(set: $rightOnNexusMap to $upOnNexusMapR)
		(set: $downOnNexusMap to $rightOnNexusMapR)
		(set: $leftOnNexusMap to $downOnNexusMapR)
	]
	(output-data: &quot;&quot;)
		]))
}</tw-passagedata><tw-passagedata pid="365" name="set g2" tags="startup" position="270,2978" size="100,100">{
(set: $setG2 to
(macro: [
	(if: $map_variable2 is 1)[
		(set: $upOnNexusMap to $upOnNexusMapR)
		(set: $downOnNexusMap to $downOnNexusMapR)
		(set: $leftOnNexusMap to $rightOnNexusMapR)
		(set: $rightOnNexusMap to $leftOnNexusMapR)
	]
	(if: $map_variable2 is 2)[
		(set: $upOnNexusMap to $rightOnNexusMapR)
		(set: $rightOnNexusMap to $downOnNexusMapR)
		(set: $downOnNexusMap to $leftOnNexusMapR)
		(set: $leftOnNexusMap to $upOnNexusMapR)
	]
	(output-data: &quot;&quot;)
		]))
}</tw-passagedata><tw-passagedata pid="366" name="set map variables" tags="startup" position="38,3390" size="100,100">{
&lt;!--Called upon entry into a new century. Sets the variables accordingly.--&gt;
(set: $setMapVariables to
(macro: [
	(if: $floorInt is 0)[
		(set: $map_variable1 to 0)
		(set: $map_variable2 to 0)
		]
	(if: $floorInt is 1)[
		(set: $map_variable1 to 0)
		(set: $map_variable2 to 1)
		]
	(if: $floorInt is 2)[
		(set: $map_variable1 to 0)
		(set: $map_variable2 to 2)
		]
	(if: $floorInt is 3)[
		(set: $map_variable1 to 1)
		(set: $map_variable2 to 0)
		]
	(if: $floorInt is 4)[
		(set: $map_variable1 to 1)
		(set: $map_variable2 to 1)
		]
	(if: $floorInt is 5)[
		(set: $map_variable1 to 1)
		(set: $map_variable2 to 2)
		]
	(if: $floorInt is 6)[
		(set: $map_variable1 to 2)
		(set: $map_variable2 to 0)
		]
	(if: $floorInt is 7)[
		(set: $map_variable1 to 2)
		(set: $map_variable2 to 1)
		]
	(if: $floorInt is 8)[
		(set: $map_variable1 to 2)
		(set: $map_variable2 to 2)
		]
	(if: $floorInt is 9)[
		(set: $map_variable1 to 0)
		(set: $map_variable2 to 0)
		]
	(if: $floorInt is 10)[
		(set: $map_variable1 to 0)
		(set: $map_variable2 to 1)
		]
	(if: $floorInt is 11)[
		(set: $map_variable1 to 0)
		(set: $map_variable2 to 0)
		]
	(if: $floorInt is 12)[
		(set: $map_variable1 to 1)
		(set: $map_variable2 to 2)
		]
	(if: $floorInt is 13)[
		(set: $map_variable1 to 1)
		(set: $map_variable2 to 0)
		]
	(if: $floorInt is 14)[
		(set: $map_variable1 to 0)
		(set: $map_variable2 to 0)
		]
	(if: $floorInt is 15)[
		(set: $map_variable1 to 2)
		(set: $map_variable2 to 2)
		]
	(if: $floorInt is 16)[
		(set: $map_variable1 to 2)
		(set: $map_variable2 to 1)
		]
	(if: $floorInt is 17)[
		(set: $map_variable1 to 0)
		(set: $map_variable2 to 0)
		]
	(if: $floorInt is 18)[
		(set: $map_variable1 to 0)
		(set: $map_variable2 to 0)
		]
	(if: $floorInt is 19)[
		(set: $map_variable1 to 0)
		(set: $map_variable2 to 0)
		]
	(if: $floorInt is 20)[
		(set: $map_variable1 to 0)
		(set: $map_variable2 to 0)
		]
	(output-data:&quot;&quot;)
]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;

}</tw-passagedata><tw-passagedata pid="367" name="set stem" tags="startup" position="270,3091" size="100,100">{
(set: $setStem to
(macro: [
	(set: $leftOnNexusMap to $leftOnNexusMapR)
	(set: $rightOnNexusMap to $rightOnNexusMapR)
	(set: $upOnNexusMap to $upOnNexusMapR)
	(set: $downOnNexusMap to $downOnNexusMapR)
	(output-data: &quot;&quot;)
		]))
}</tw-passagedata><tw-passagedata pid="368" name="set Room Phrase AC" tags="startup" position="501,1676" size="100,100">{
(set: $setRoomPhraseAC to 
(macro: [
	(if: $decadeNumber is in $afghanistans)[($afghanistan:)]
	(if: $decadeNumber is in $arbors)[($arbor:)]
	(if: $decadeNumber is in $arenas)[($arena:)]
	(if: $decadeNumber is in $armories)[($armory:)]
	(if: $decadeNumber is in $barracks)[($barrack:)]
	(if: $decadeNumber is in $barrows)[($barrow:)]
	(if: $decadeNumber is in $battlefields)[($battlefield:)]
	(if: $decadeNumber is in $breweries)[($brewery:)]
	(if: $decadeNumber is in $brothels)[($brothel:)]
	(if: $decadeNumber is in $buildings)[($building:)]
	(if: $decadeNumber is in $cafes)[($cafe:)]
	(if: $decadeNumber is in $camps)[($camp:)]
	(if: $decadeNumber is in $carnivals)[($carnival:)]
	(if: $decadeNumber is in $castles)[($castle:)]
	(if: $decadeNumber is in $cathedrals)[($cathedral:)]
	(if: $decadeNumber is in $caves)[($cave:)]
	(if: $decadeNumber is in $cemeteries)[($cemetery:)]
	(if: $decadeNumber is in $churches)[($church:)]
	(if: $decadeNumber is in $courthouses)[($courthouse:)]
	(if: $decadeNumber is in $christianCommunes)[($christianCommune:)]
	(if: $decadeNumber is in $churches)[($church:)]
	(if: $decadeNumber is in $crypts)[($crypt:)]
	(output-data: $phrase) 
	]))
	
[[ -&gt;environ database a - d]]
[[ -&gt;environ assign]]
	}</tw-passagedata><tw-passagedata pid="369" name="set room phrase DK" tags="startup" position="500,1796" size="100,100">{
(set: $setRoomPhraseDK to 
(macro: [
	(if: $decadeNumber is in $docksides)[($dockside:)]
	(if: $decadeNumber is in $farms)[($farm:)]
	(if: $decadeNumber is in $forests)[($forest:)]
	(if: $decadeNumber is in $fruments)[($frument:)]	
	(if: $decadeNumber is in $hashishQuarters)[($hashishQuarter:)]
	(if: $decadeNumber is in $houses)[($house:)]
	(if: $decadeNumber is in $hypogea)[($hypogeum:)]
	(if: $decadeNumber is in $inquisitors)[($inquisitor:)]
	(if: $decadeNumber is in $jails)[($jail:)]
	(if: $decadeNumber is in $jungles)[($jungle:)]
	(if: $decadeNumber is in $kremlins)[($kremlin:)]
	(output-data: $phrase) 
	]))
	
[[ -&gt;environ database a - d]]
[[ -&gt;environ database e - j]]
[[ -&gt;environ database k - q]]
[[ -&gt;environ assign]]
	}</tw-passagedata><tw-passagedata pid="370" name="set room phrase LR" tags="startup" position="501,1907" size="100,100">{
(set: $setRoomPhraseLR to 
(macro: [
	(if: $decadeNumber is in $lakesides)[($lakeside:)]
	(if: $decadeNumber is in $loverscaves)[($loverscave:)]
	(if: $decadeNumber is in $libraries)[($library:)]
	(if: $decadeNumber is in $mansions)[($mansion:)]
	(if: $decadeNumber is in $markets)[($market:)]
	(if: $decadeNumber is in $menageries)[($menagerie:)]
	(if: $decadeNumber is in $mines)[($mine:)]
	(if: $decadeNumber is in $monasteries)[($monastery:)]
	(if: $decadeNumber is in $mosques)[($mosque:)]
	(if: $decadeNumber is in $mountainsides)[($mountainside:)]
	(if: $decadeNumber is in $mushrooms)[($mushroom:)]
	(if: $decadeNumber is in $newsPresses)[($newsPress:)]
	(if: $decadeNumber is in $palaces)[($palace:)]
	(if: $decadeNumber is in $parks)[($park:)]
	(if: $decadeNumber is in $penalQuarters)[($penalQuarter:)]
	(if: $decadeNumber is in $plaguePits)[($plaguePit:)]
	(if: $decadeNumber is in $rectories)[($rectory:)]
	(if: $decadeNumber is in $revolutions)[($revolution:)]
	(output-data: $phrase) 
	]))
	
[[ -&gt;environ database k - q]]
[[ -&gt;environ database r - s]]

[[ -&gt;environ assign]]
	}</tw-passagedata><tw-passagedata pid="371" name="set room phrase SZ" tags="startup" position="500,2021" size="100,100">{
(set: $setRoomPhraseSZ to 
(macro: [
	(if: $decadeNumber is in $schools)[($school:)]
	(if: $decadeNumber is in $ships)[($ship:)]
	(if: $decadeNumber is in $skyscrapers)[($skyscraper:)]
	(if: $decadeNumber is in $slaveMarkets)[($slaveMarket:)]
	(if: $decadeNumber is in $surgeries)[($surgery:)]
	(if: $decadeNumber is in $stBasils)[($stBasil:)]
	(if: $decadeNumber is in $swamps)[($swamp:)]
	(if: $decadeNumber is in $temples)[($greekTemple:)]
	(if: $decadeNumber is in $towers)[($tower:)]
	(if: $decadeNumber is in $towns)[($town:)]
	(if: $decadeNumber is in $triclinia)[($triclinium:)]
	(if: $decadeNumber is in $undergroundChapels)[($undergroundChapel:)]
	(if: $decadeNumber is in $vaults)[($vault:)]
	(if: $decadeNumber is in $vestals)[($vestal:)]
	(if: $decadeNumber is in $villages)[($village:)]
	(if: $decadeNumber is in $villas)[($villa:)]
	(if: $decadeNumber is in $walls)[($wall:)]
	(if: $decadeNumber is in $workhouses)[($workhouse:)]
	(output-data: $phrase) 
	]))
	
[[ -&gt;environ database t - z]]
[[ -&gt;environ assign]]
	}

</tw-passagedata><tw-passagedata pid="372" name="set room variables" tags="startup" position="11,3165" size="100,100">{
(set: $setRoomVariables to 
(macro: [
	(if: $thisRoomsNumber &gt; 9)
		[(set: $thisYear to 10000)]
	(else:)[(set: $thisYear to ($floorInt * 100) + $thisRoomsNumber)]
	($setPicString:)
	(set: $imgScript to &quot;&lt;script&gt;CustomScripts.updateBackground(&quot; + $picString +&quot;);&lt;/script&gt;&quot;)
	(output-data: $imgScript)
	(output-data:$imgScript)
	]
	)
	)
&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;

[[ -&gt;set pic string]]
}
</tw-passagedata><tw-passagedata pid="373" name="set pic string" tags="startup" position="268,3205" size="100,100">{
&lt;!--The purpose of this is to produce a string to reference the picture for a room in a complex.--&gt;

(set: $setPicString to 
(macro: [
	($setDecadeString:)&lt;!--sets a four digit decade string--&gt; 
	(set: $thisRoomsString to (str: $thisRoomsNumber))
	(set: $picString to &quot;0.&quot; + $decadeString + $thisRoomsString)
	(if: $picString is &quot;0.00000&quot;)[(set: $picString to &quot;0.000001&quot;)] &lt;!--exception because otherwise 0.00000 collapses to 0 and causes error.--&gt;
	(output-data:&quot;&quot;)
	]
	)
	)
&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
[[ -&gt;set decade string]]
}</tw-passagedata><tw-passagedata pid="374" name="set decade string" tags="startup" position="441,3203" size="100,100">{
&lt;!--The purpose of this is to produce four digit string representing the decade for the purposes of image referencing--&gt;

(set: $setDecadeString to 
(macro: [
	(if: $decadeNumber &lt; 10)
		[(set: $decadeString to &quot;000&quot; + (str:$decadeNumber))] 
	(elseif: $decadeNumber &lt; 100)
		[(set: $decadeString to &quot;00&quot; + (str:$decadeNumber))] 
	(elseif: $decadeNumber &lt; 1000)
		[(set: $decadeString to &quot;0&quot; + (str:$decadeNumber))] 
	(else:) [(set: $decadeString to (str:$decadeNumber))] 
	(output-data:&quot;&quot;)
	]
	)
	)
&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;
}</tw-passagedata><tw-passagedata pid="375" name="override image" tags="startup" position="21,1799" size="100,100">{
(set: $overrideImage to 
(macro: str-type _imageString, [	
	(set: $imgScript to &quot;&lt;script&gt;CustomScripts.updateBackground(&quot; + _imageString +&quot;);&lt;/script&gt;&quot;)
		(output-data: $imgScript)
		]
		))
}</tw-passagedata><tw-passagedata pid="376" name="override image test" tags="" position="753,3075" size="100,100">(set: $floorInt to 0)
(set: $decadeNumber to 0)
(set: $thisRoomsNumber to 9)
($setPicString:)
($overrideImage: $picString)</tw-passagedata><tw-passagedata pid="377" name="tester" tags="" position="758,3206" size="100,100">(set: $thisRoomsNumber to 2)
(set: $thisRoomsString to (str: $thisRoomsNumber))
(print: $thisRoomsString)</tw-passagedata><tw-passagedata pid="378" name="set loose century vocab" tags="startup" position="210,3883" size="100,100">{
&lt;!--makes sure certain vocab terms have a default valuer.--&gt;
(set: $setLooseVocab to
(macro: [
	(set: $staircase to &quot;stairs&quot;)
	(set: $outTheBack to &quot;&quot;)
	(output-data:&quot;&quot;)
]))

&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;

}</tw-passagedata><tw-passagedata pid="379" name="set nexus image" tags="startup" position="9,2996" size="100,100">{
(set: $setNexusImage to 
(macro: [
	($setNexusPicString:)
	(set: $imgScript to &quot;&lt;script&gt;CustomScripts.updateBackground(&quot; + $nexusPicString +&quot;);&lt;/script&gt;&quot;)
	(output-data: $imgScript)
	]
	)
	)
&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;

[[ -&gt;set nexus pic string]]
}</tw-passagedata><tw-passagedata pid="380" name="set nexus pic string" tags="startup" position="141,3086" size="100,100">{
&lt;!--The purpose of this is to produce a string to reference the picture for a room in the nexus.--&gt;

(set: $setNexusPicString to 
(macro: [
	(if: $floorInt &lt; 10)[(set: $century_String to &quot;0&quot; + (str: $floorInt))]
	(else:)[(set: $century_String to (str: $floorInt))]
	(set: $nexusPicString to &quot;2.&quot; + $century_String + (str: $NexusRoom))
	(output-data:&quot;&quot;)
	]
	)
	)
&lt;!--Dummy code to create arrows, in interface, to called functions --&gt;

}</tw-passagedata><tw-passagedata pid="381" name="debugger" tags="startup" position="4778,206" size="100,100">{
(set: $debugger to
(macro: [
	(set: $debugContent to &quot;&quot;)
	(output-data: $debugContent)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="382" name="set room content" tags="startup" position="4836,376" size="100,100">{
(set: $setRoomContent to
(macro: [
	(if: $thisRoomsNumber is 0)[($room0content:)]
	(elseif: $thisRoomsNumber is 1)[($room1content:)]
	(elseif: $thisRoomsNumber is 2)[($room2content:)]
	(elseif: $thisRoomsNumber is 3)[($room3content:)]
	(elseif: $thisRoomsNumber is 4)[($room4content:)]
	(elseif: $thisRoomsNumber is 5)[($room5content:)]
	(elseif: $thisRoomsNumber is 6)[($room6content:)]
	(elseif: $thisRoomsNumber is 7)[($room7content:)]
	(elseif: $thisRoomsNumber is 8)[($room8content:)]
	(elseif: $thisRoomsNumber is 9)[($room9content:)]
	(else:)[(set: $content to &quot;&quot;)] 
	(set: $content to $content + &quot;This room number is &quot; + (str: $thisRoomsNumber))
	(output-data: $content)
	]
	))
	
}</tw-passagedata><tw-passagedata pid="383" name="set miscellaneous decade settings" tags="startup" position="186,2523" size="100,100">{
(set: $setMiscellaneousDecadeSettings to 
(macro: [
	(if: $decadeNumber is in (a: 187))[(set: $seance to &quot;yes&quot;)]
	(else:) [(set: $seance to &quot;no&quot;)]
	(output-data:&quot;&quot;)
	]
	))
}</tw-passagedata><tw-passagedata pid="384" name="passage 1st clauses" tags="startup" position="360,1519" size="100,100">{
(set: $passage_1st_clauses to (dm:
 &#39;0&#39;,
 &#39;You are in a humid tunnel&#39;,
 &#39;1&#39;,
 &#39;You are on an earthy path&#39;,
 &#39;11&#39;,
 &#39;You are on a baking hot corridor&#39;,
 &#39;21&#39;,
 &#39;You are in a dim passage&#39;,
 &#39;31&#39;,
 &#39;You are in a cool tunnel&#39;,
 &#39;41&#39;,
 &#39;You are in a sandy tunnel&#39;,
 &#39;51&#39;,
 &#39;You are on a stone corridor&#39;,
 &#39;61&#39;,
 &#39;You are on a forbidding corridor&#39;,
 &#39;71&#39;,
 &#39;You are in a candlelit tunnel&#39;,
 &#39;81&#39;,
 &#39;You are in a neglected tunnel&#39;,
 &#39;91&#39;,
 &#39;You are on a cool corridor&#39;,
 &#39;100&#39;,
 &#39;You are on a busy street&#39;,
 &#39;101&#39;,
 &#39;You are on a rock brick path&#39;,
 &#39;111&#39;,
 &#39;You are in a sandy passageway&#39;,
 &#39;121&#39;,
 &#39;You are in a sandy passageway&#39;,
 &#39;131&#39;,
 &#39;You are in a curtained hall&#39;,
 &#39;141&#39;,
 &#39;You are on a sumptuous corridor&#39;,
 &#39;151&#39;,
 &#39;You are in a brick alley&#39;,
 &#39;161&#39;,
 &#39;You are on a bustling aisle&#39;,
 &#39;171&#39;,
 &#39;You are on a tranquil aisle&#39;,
 &#39;181&#39;,
 &#39;You are on a tiled corridor&#39;,
 &#39;191&#39;,
 &#39;You are on a cobbled path&#39;,
 &#39;201&#39;,
 &#39;You are on a raised wooden path&#39;,
 &#39;211&#39;,
 &#39;You are on a candlelit path&#39;,
 &#39;221&#39;,
 &#39;You are on a campus path&#39;,
 &#39;231&#39;,
 &#39;You are in a wooden passage&#39;,
 &#39;241&#39;,
 &#39;You are on an airy corridor&#39;,
 &#39;251&#39;,
 &#39;You are in a rock wall passage&#39;,
 &#39;261&#39;,
 &#39;You are on a dirt roadway&#39;,
 &#39;271&#39;,
 &#39;You are on a tiled path&#39;,
 &#39;281&#39;,
 &#39;You are on a ruined corridor&#39;,
 &#39;291&#39;,
 &#39;You are on a silent path&#39;,
 &#39;301&#39;,
 &#39;You are on a country lane&#39;,
 &#39;311&#39;,
 &#39;You are in a backstage passage&#39;,
 &#39;321&#39;,
 &#39;You are in a pillared arcade&#39;,
 &#39;331&#39;,
 &#39;You are on a moonlit aisle&#39;,
 &#39;341&#39;,
 &#39;You are in a paneled passage&#39;,
 &#39;351&#39;,
 &#39;You are in a muddy trench&#39;,
 &#39;361&#39;,
 &#39;You are on a wooden walkway&#39;,
 &#39;371&#39;,
 &#39;You are on an enclosed path&#39;,
 &#39;381&#39;,
 &#39;You are on a glassy corridor&#39;,
 &#39;391&#39;,
 &#39;You are in a damp passage&#39;,
 &#39;401&#39;,
 &#39;You are on a brambly path&#39;,
 &#39;411&#39;,
 &#39;You are in a dirt thoroughfare&#39;,
 &#39;421&#39;,
 &#39;You are in an aisle of shelves&#39;,
 &#39;431&#39;,
 &#39;You are on a draughty corridor&#39;,
 &#39;441&#39;,
 &#39;You are in a crumbling hallway&#39;,
 &#39;451&#39;,
 &#39;You are in a passage&#39;,
 &#39;461&#39;,
 &#39;You are in a passage&#39;,
 &#39;471&#39;,
 &#39;You are on an abundant and overgrown path&#39;,
 &#39;481&#39;,
 &#39;You are on a trash strewn corridor&#39;,
 &#39;491&#39;,
 &#39;You are in a bone lined passage&#39;,
 &#39;501&#39;,
 &#39;You are on a leafy path&#39;,
 &#39;511&#39;,
 &#39;You are in a muddy thoroughfare&#39;,
 &#39;521&#39;,
 &#39;You are in a cavernous passage&#39;,
 &#39;531&#39;,
 &#39;You are on a glimmering path&#39;,
 &#39;541&#39;,
 &#39;You are on a stone corridor&#39;,
 &#39;551&#39;,
 &#39;You are on a bloody path&#39;,
 &#39;561&#39;,
 &#39;You are in a cavernous passage&#39;,
 &#39;571&#39;,
 &#39;You are on a stone walkway&#39;,
 &#39;581&#39;,
 &#39;You are in a dirty mud-street&#39;,
 &#39;591&#39;,
 &#39;You are in a stinking passage&#39;,
 &#39;601&#39;,
 &#39;You are on a leafy path&#39;,
 &#39;611&#39;,
 &#39;You are in a pungent alley&#39;,
 &#39;621&#39;,
 &#39;You are on a whispering aisle&#39;,
 &#39;631&#39;,
 &#39;You are in a raucous colonade&#39;,
 &#39;641&#39;,
 &#39;You are in a teaming arcade&#39;,
 &#39;651&#39;,
 &#39;You are in a limestone passageway&#39;,
 &#39;661&#39;,
 &#39;You are on a narrow street&#39;,
 &#39;671&#39;,
 &#39;You are on a solemn aisle&#39;,
 &#39;681&#39;,
 &#39;You are in a shadowy alley&#39;,
 &#39;691&#39;,
 &#39;You are on a windy street&#39;,
 &#39;701&#39;,
 &#39;You are in a passage&#39;,
 &#39;711&#39;,
 &#39;You are on a puddled walkway&#39;,
 &#39;721&#39;,
 &#39;You are on a quiet aisle&#39;,
 &#39;731&#39;,
 &#39;You are on a wild path&#39;,
 &#39;741&#39;,
 &#39;You are on a marble corridor&#39;,
 &#39;751&#39;,
 &#39;You are in a functional yard&#39;,
 &#39;761&#39;,
 &#39;You are in a wooden jetty&#39;,
 &#39;771&#39;,
 &#39;You are on a corridor&#39;,
 &#39;781&#39;,
 &#39;You are on a well maintained corridor&#39;,
 &#39;791&#39;,
 &#39;You are in a dark passage&#39;,
 &#39;801&#39;,
 &#39;You are on a swamped path&#39;,
 &#39;811&#39;,
 &#39;You are on a mossy path&#39;,
 &#39;821&#39;,
 &#39;You are on a flooded corridor&#39;,
 &#39;831&#39;,
 &#39;You are in a crooked hallway&#39;,
 &#39;841&#39;,
 &#39;You are in a stone brick passage&#39;,
 &#39;851&#39;,
 &#39;You are in a salty passage&#39;,
 &#39;861&#39;,
 &#39;You are in a misty trail&#39;,
 &#39;871&#39;,
 &#39;You are in a chilly passage&#39;,
 &#39;881&#39;,
 &#39;You are on a brush path&#39;,
 &#39;891&#39;,
 &#39;You are on a putrid canal&#39;,
 &#39;901&#39;,
 &#39;You are on a tortuous path&#39;,
 &#39;911&#39;,
 &#39;You are on a skid marked track&#39;,
 &#39;921&#39;,
 &#39;You are on a snow packed track&#39;,
 &#39;931&#39;,
 &#39;You are on a well tended path&#39;,
 &#39;941&#39;,
 &#39;You are in a vacuumed hallway&#39;,
 &#39;951&#39;,
 &#39;You are on a polished corridor&#39;,
 &#39;961&#39;,
 &#39;You are in a dirt thoroughfare&#39;,
 &#39;971&#39;,
 &#39;You are on a towering aisle&#39;,
 &#39;981&#39;,
 &#39;You are on a striplight corridor&#39;,
 &#39;991&#39;,
 &#39;You are in a ditch&#39;,
 &#39;1001&#39;,
 &#39;You are in a wintry cloister&#39;,
 &#39;1011&#39;,
 &#39;You are on a checkered aisle&#39;,
 &#39;1021&#39;,
 &#39;You are on an ivory corridor&#39;,
 &#39;1031&#39;,
 &#39;You are in a simple passage&#39;,
 &#39;1041&#39;,
 &#39;You are on a vacuumed corridor&#39;,
 &#39;1051&#39;,
 &#39;You are in a clay tiled passage&#39;,
 &#39;1061&#39;,
 &#39;You are in a cold stone passageway&#39;,
 &#39;1071&#39;,
 &#39;You are in a gardened cloister&#39;,
 &#39;1081&#39;,
 &#39;You are on a ruined, overgrown aisle&#39;,
 &#39;1091&#39;,
 &#39;You are on an ominous path&#39;,
 &#39;1101&#39;,
 &#39;You are on a winding path&#39;,
 &#39;1111&#39;,
 &#39;You are in a temporary thoroughfare&#39;,
 &#39;1121&#39;,
 &#39;You are on an echoey corridor&#39;,
 &#39;1131&#39;,
 &#39;You are in a suffocating passageway&#39;,
 &#39;1141&#39;,
 &#39;You are in a temporary thoroughfare&#39;,
 &#39;1151&#39;,
 &#39;You are in a temporary thoroughfare&#39;,
 &#39;1161&#39;,
 &#39;You are in a damp passage&#39;,
 &#39;1171&#39;,
 &#39;You are in a silent passage&#39;,
 &#39;1181&#39;,
 &#39;You are in a forsaken passageway&#39;,
 &#39;1191&#39;,
 &#39;You are on a brittle gangway&#39;,
 &#39;1201&#39;,
 &#39;You are in a flooded waterway&#39;,
 &#39;1211&#39;,
 &#39;You are in a sunny alley&#39;,
 &#39;1221&#39;,
 &#39;You are in a dusty passageway&#39;,
 &#39;1231&#39;,
 &#39;You are on a rubbled street&#39;,
 &#39;1241&#39;,
 &#39;You are in a dirt thoroughfare&#39;,
 &#39;1251&#39;,
 &#39;You are in an anarchic boulevard&#39;,
 &#39;1261&#39;,
 &#39;You are on a defeated vulitsa&#39;,
 &#39;1271&#39;,
 &#39;You are on a snowy pass&#39;,
 &#39;1281&#39;,
 &#39;You are on a makeshift raft&#39;,
 &#39;1291&#39;,
 &#39;You are on a fiery avenue&#39;,
 &#39;1301&#39;,
 &#39;You are on a sunny lane&#39;,
 &#39;1311&#39;,
 &#39;You are in an opulent passage&#39;,
 &#39;1321&#39;,
 &#39;You are on a weathered track&#39;,
 &#39;1331&#39;,
 &#39;You are in a dirt thoroughfare&#39;,
 &#39;1341&#39;,
 &#39;You are on a bumpy lane&#39;,
 &#39;1351&#39;,
 &#39;You are in a grassy opening&#39;,
 &#39;1361&#39;,
 &#39;You are in a narrow hallway&#39;,
 &#39;1371&#39;,
 &#39;You are in a gloomy passage&#39;,
 &#39;1381&#39;,
 &#39;You are in a grimy passage&#39;,
 &#39;1391&#39;,
 &#39;You are on a bloody street&#39;,
 &#39;1401&#39;,
 &#39;You are in a humid trail&#39;,
 &#39;1411&#39;,
 &#39;You are in a rowdy alley&#39;,
 &#39;1421&#39;,
 &#39;You are on a busy street&#39;,
 &#39;1431&#39;,
 &#39;You are in a muddy thoroughfare&#39;,
 &#39;1441&#39;,
 &#39;You are on an angular walkway&#39;,
 &#39;1451&#39;,
 &#39;You are on a smoky rampart&#39;,
 &#39;1461&#39;,
 &#39;You are on a damp corridor&#39;,
 &#39;1471&#39;,
 &#39;You are in a bejeweled hallway&#39;,
 &#39;1481&#39;,
 &#39;You are in a dolorous passage&#39;,
 &#39;1491&#39;,
 &#39;You are on a macabre path&#39;,
 &#39;1501&#39;,
 &#39;You are in a muddy trail&#39;,
 &#39;1511&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1521&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1531&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1541&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1551&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1561&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1571&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1581&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1591&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1601&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1611&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1621&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1631&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1641&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1651&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1661&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1671&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1681&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1691&#39;,
 &#39;You are in an undefined passage&#39;,
 &#39;1701&#39;,
 &#39;You are on a dirt path&#39;,
 &#39;1711&#39;,
 &#39;You are on a wide corridor&#39;,
 &#39;1721&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1731&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1741&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1751&#39;,
 &#39;You are on a street&#39;,
 &#39;1761&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1771&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1781&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1791&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1801&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1811&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1821&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1831&#39;,
 &#39;You are in a dank alley&#39;,
 &#39;1841&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1851&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1861&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1871&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1881&#39;,
 &#39;You are on a dirty corridor&#39;,
 &#39;1891&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1901&#39;,
 &#39;You are on a muddy patch of scrub land&#39;,
 &#39;1911&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1921&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1931&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1941&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1951&#39;,
 &#39;You are on a dusty path&#39;,
 &#39;1961&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1971&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1981&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;1991&#39;,
 &#39;You are on a weed and concrete road&#39;,
 &#39;2001&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;2011&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;2021&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;2031&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;2041&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;2051&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;2061&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;2071&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;2081&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;,
 &#39;2091&#39;,
 &#39;You are in a PASSAGE TERMS DATABASE PASSAGE TERMS DATABASE&#39;
 )
 )
 }</tw-passagedata><tw-passagedata pid="385" name="second clauses" tags="startup" position="361,1631" size="100,100">{
(set: $second_clauses to (dm:
 &#39;1&#39;,
 &#39;in an underground mushroom garden&#39;,
 &#39;11&#39;,
 &#39;in the Hypogeum&#39;,
 &#39;21&#39;,
 &#39;in the underground spy complex of the Frumentarii&#39;,
 &#39;31&#39;,
 &quot;in the lovers&#39; caves&quot;,
 &#39;41&#39;,
 &#39;in the hidden underground hideouts&#39;,
 &#39;51&#39;,
 &#39;in a hidden armory&#39;,
 &#39;61&#39;,
 &#39;in an underground dungeon&#39;,
 &#39;71&#39;,
 &#39;in an underground chapel&#39;,
 &#39;81&#39;,
 &#39;in a leper colony&#39;,
 &#39;91&#39;,
 &#39;in a cobwebbed crypt&#39;,
 &#39;101&#39;,
 &#39;in the tranquil garden of Lucullus&#39;,
 &#39;111&#39;,
 &#39;at the dusty ampitheatre&#39;,
 &#39;121&#39;,
 &#39;in a ludus&#39;,
 &#39;131&#39;,
 &#39;in the college of the Vestals&#39;,
 &#39;141&#39;,
 &#39;to the opulent house of Augustus and Livia&#39;,
 &#39;151&#39;,
 &#39;in a Roman barracks&#39;,
 &#39;161&#39;,
 &#39;in a slave market&#39;,
 &#39;171&#39;,
 &#39;in the sacred temple of Jupiter&#39;,
 &#39;181&#39;,
 &#39;in the surgery of Galen&#39;,
 &#39;191&#39;,
 &#39;in the shadowy necropolis&#39;,
 &#39;201&#39;,
 &#39;in the Garden of General Liang Ji&#39;,
 &#39;211&#39;,
 &#39;within the exciting carnival of a hundred shows,&#39;,
 &#39;221&#39;,
 &#39;in the Imperial Academy&#39;,
 &#39;231&#39;,
 &#39;in a floating brothel&#39;,
 &#39;241&#39;,
 &#39;in a Siheyuan&#39;,
 &#39;251&#39;,
 &#39;in a gate house&#39;,
 &#39;261&#39;,
 &#39;among the huts of the ten eunuchs&#39;,
 &#39;271&#39;,
 &#39;in the sacred White Horse buddhist temple&#39;,
 &#39;281&#39;,
 &#39;in the abandoned surgery of Hua Tuo&#39;,
 &#39;291&#39;,
 &#39;in the Dabaozi Cemetery&#39;,
 &#39;301&#39;,
 &#39;on the pastoral farms&#39;,
 &#39;311&#39;,
 &#39;in the many garish theaters of the Hippódromos tēs Kōnstantinoupóleōs&#39;,
 &#39;321&#39;,
 &#39;in the echoey halls of the Magnaura&#39;,
 &#39;331&#39;,
 &#39;in the dim Triclinium of the Nineteen Couches&#39;,
 &#39;341&#39;,
 &#39;in an elaborate home&#39;,
 &#39;351&#39;,
 &#39;in the ditches of a bloody battleground&#39;,
 &#39;361&#39;,
 &#39;in the depths of a forced labor mine&#39;,
 &#39;371&#39;,
 &#39;in a serpentine labyrinth&#39;,
 &#39;381&#39;,
 &#39;in the mystical basilica of St John the Forerunner&#39;,
 &#39;391&#39;,
 &#39;in the watery crypt of Constantine&#39;,
 &#39;401&#39;,
 &#39;in a lush forest&#39;,
 &#39;411&#39;,
 &#39;in the remains of the Circus Maximus,&#39;,
 &#39;421&#39;,
 &#39;in the abandoned Bibliotheca Octaviana&#39;,
 &#39;431&#39;,
 &#39;in the ruined temple of Venus&#39;,
 &#39;441&#39;,
 &#39;in a block of abandoned insulae&#39;,
 &#39;451&#39;,
 &#39;in a looted armory&#39;,
 &#39;461&#39;,
 &#39;in a derelict jail&#39;,
 &#39;471&#39;,
 &quot;in what used to be Emperor Nero&#39;s park&quot;,
 &#39;481&#39;,
 &#39;in the derelict surgery of Asclepiades&#39;,
 &#39;491&#39;,
 &#39;in the mass burial pits&#39;,
 &#39;501&#39;,
 &#39;in the enchanted forest of Brocéliande&#39;,
 &#39;511&#39;,
 &#39;at a jousting tournament&#39;,
 &#39;521&#39;,
 &#39;in the hidden coastal cave of Merlin the wizard,&#39;,
 &#39;531&#39;,
 &#39;by Llyn Ogwen,&#39;,
 &#39;541&#39;,
 &#39;within the keep of Camelot&#39;,
 &#39;551&#39;,
 &#39;at the bloody battlefield at Camlann&#39;,
 &#39;561&#39;,
 &#39;under the mysterious Bryn Myrddin&#39;,
 &#39;571&#39;,
 &#39;within the bailey of the mystical castle of Corbenic,&#39;,
 &#39;581&#39;,
 &#39;in a walled up town&#39;,
 &#39;591&#39;,
 &#39;among the stinking barrows&#39;,
 &#39;601&#39;,
 &#39;in the hanging farms&#39;,
 &#39;611&#39;,
 &#39;in the hashish quarter&#39;,
 &#39;621&#39;,
 &quot;in the hashashin&#39;s library&quot;,
 &#39;631&#39;,
 &quot;in the Sultan&#39;s palace&quot;,
 &#39;641&#39;,
 &#39;in the bustling souk of Al-Madina&#39;,
 &#39;651&#39;,
 &#39;in the Citadel of Aleppo&#39;,
 &#39;661&#39;,
 &#39;in the Jewish quarter&#39;,
 &#39;671&#39;,
 &#39;in the great mosque of Aleppo&#39;,
 &#39;681&#39;,
 &#39;in the penal quarter of the ancient city of Aleppo&#39;,
 &#39;691&#39;,
 &#39;in an abandoned town&#39;,
 &#39;701&#39;,
 &quot;in the emperor&#39;s menagerie at Aachen&quot;,
 &#39;711&#39;,
 &#39;in a partly constructed bath house&#39;,
 &#39;721&#39;,
 &quot;in the great library at Charlemagne&#39;s court&quot;,
 &#39;731&#39;,
 &#39;in the private gynaeceum&#39;,
 &#39;741&#39;,
 &#39;in the partly constructed Palace of Aachen&#39;,
 &#39;751&#39;,
 &quot;in a soldier&#39;s barracks&quot;,
 &#39;761&#39;,
 &#39;at the dockside on the Wurm&#39;,
 &#39;771&#39;,
 &#39;in the Palatine chapel&#39;,
 &#39;781&#39;,
 &#39;in a hospice&#39;,
 &#39;791&#39;,
 &#39;in the crypt beneath the Palatine chapel&#39;,
 &#39;801&#39;,
 &#39;in an overgrown part of the marsh near the Athelney abbey&#39;,
 &#39;811&#39;,
 &#39;in the swimming wood&#39;,
 &#39;821&#39;,
 &#39;in a flooded library&#39;,
 &#39;831&#39;,
 &#39;in the hall of the enchantress Dame Brusen,&#39;,
 &#39;841&#39;,
 &#39;in Ethelingaeigge&#39;,
 &#39;851&#39;,
 &#39;in a partially submerged tower&#39;,
 &#39;861&#39;,
 &quot;in a trapper&#39;s wood&quot;,
 &#39;871&#39;,
 &#39;in the abbey at Athelney&#39;,
 &#39;881&#39;,
 &#39;in the lower marshes&#39;,
 &#39;891&#39;,
 &#39;in the lower marshes&#39;,
 &#39;901&#39;,
 &#39;in a thorny forest&#39;,
 &#39;911&#39;,
 &#39;at a racing event&#39;,
 &#39;921&#39;,
 &#39;at a cold mountain training exercise&#39;,
 &#39;931&#39;,
 &#39;at a nunnery&#39;,
 &#39;941&#39;,
 &#39;in a luxury skyscraper&#39;,
 &#39;951&#39;,
 &#39;in a courthouse&#39;,
 &#39;961&#39;,
 &#39;in a wintry forced labor camp&#39;,
 &#39;971&#39;,
 &#39;in an imposing gothic cathedral&#39;,
 &#39;981&#39;,
 &#39;in a white tile clinic&#39;,
 &#39;991&#39;,
 &#39;by the horrifying death pits&#39;,
 &#39;1001&#39;,
 &#39;in the glacial cathedral of St Nicolas&#39;,
 &#39;1011&#39;,
 &#39;in the bewildering rectory of Teresa of Ávila&#39;,
 &#39;1021&#39;,
 &#39;in the ivory towers of the Albertus Magnus basilica&#39;,
 &#39;1031&#39;,
 &#39;in the austere mountain convent&#39;,
 &#39;1041&#39;,
 &#39;in the towering city chapel of Homobonus&#39;,
 &#39;1051&#39;,
 &quot;in the demanding warrior&#39;s priory&quot;,
 &#39;1061&#39;,
 &#39;in the remote cenobium of St Leonard the hermit&#39;,
 &#39;1071&#39;,
 &#39;in the lush abbey of Saint Phocas the gardener&#39;,
 &#39;1081&#39;,
 &#39;in the rivered ruin of Raphael the Archangel&#39;,
 &#39;1091&#39;,
 &#39;in the eerie grounds of St Joseph of Arimathea&#39;,
 &#39;1101&#39;,
 &#39;in the same New Forest&#39;,
 &#39;1111&#39;,
 &#39;at an archery tournament&#39;,
 &#39;1121&#39;,
 &quot;in London&#39;s New Temple&quot;,
 &#39;1131&#39;,
 &#39;in the Maubergeonne Tower in Poitiers&#39;,
 &#39;1141&#39;,
 &#39;at the camp of Robin Hood&#39;,
 &#39;1151&#39;,
 &#39;at a garrison&#39;,
 &#39;1161&#39;,
 &#39;in the dingy gaol of the Sheriff, beneath Nottingham castle&#39;,
 &#39;1171&#39;,
 &#39;in the magnificent cathedral at Canterbury, where Thomas Beckett was murdered by the king&#39;,
 &#39;1181&#39;,
 &#39;at the abandoned motte of Robert of Lockley&#39;,
 &#39;1191&#39;,
 &#39;at the wreckage of the white ship&#39;,
 &#39;1201&#39;,
 &#39;in the city of Yinchuan&#39;,
 &#39;1211&#39;,
 &#39;in the flourishing middle eastern city of Damascus&#39;,
 &#39;1221&#39;,
 &quot;in the grandiose quarters of the Khan&#39;s emissary in Chennai&quot;,
 &#39;1231&#39;,
 &#39;in the sacked city of Bukhara&#39;,
 &#39;1241&#39;,
 &#39;in the caravan of the Mongol hordes&#39;,
 &#39;1251&#39;,
 &#39;in the city of Lahore&#39;,
 &#39;1261&#39;,
 &#39;in the bitterly cold city of Kiev&#39;,
 &#39;1271&#39;,
 &#39;on the slopes of Khan Tengri&#39;,
 &#39;1281&#39;,
 &#39;amongst the storm tossed wreckage of the Mongol fleet off Japan&#39;,
 &#39;1291&#39;,
 &#39;in the inferno of Merv&#39;,
 &#39;1301&#39;,
 &#39;on a bucolic manor&#39;,
 &#39;1311&#39;,
 &#39;in the fairy palace&#39;,
 &#39;1321&#39;,
 &quot;in the devil&#39;s wood&quot;,
 &#39;1331&#39;,
 &#39;at the rebel camp&#39;,
 &#39;1341&#39;,
 &#39;at a peaceful village&#39;,
 &#39;1351&#39;,
 &#39;at the bloody battle of Bannockburn&#39;,
 &#39;1361&#39;,
 &#39;in the house of William de Leyrer&#39;,
 &#39;1371&#39;,
 &#39;in the modest St Mary the Virgin church at Ludgershall&#39;,
 &#39;1381&#39;,
 &#39;in the putrid practice&#39;,
 &#39;1391&#39;,
 &#39;in the cathedral city of Canterbury&#39;,
 &#39;1401&#39;,
 &#39;in the humid, sticky jungles of the new world&#39;,
 &#39;1411&#39;,
 &#39;in the bear pits&#39;,
 &#39;1421&#39;,
 &#39;in the busy city of Strasbourg&#39;,
 &#39;1431&#39;,
 &quot;in the pious ranks of Joan of Arc&#39;s army&quot;,
 &#39;1441&#39;,
 &#39;in the Aztec capital&#39;,
 &#39;1451&#39;,
 &#39;in the besieged city of Constantinople&#39;,
 &#39;1461&#39;,
 &#39;in Lambeth palace&#39;,
 &#39;1471&#39;,
 &quot;in St Peter&#39;s basilica&quot;,
 &#39;1481&#39;,
 &#39;in the Carcel de la Inquisicion in Seville&#39;,
 &#39;1491&#39;,
 &#39;in the forest of corpses surrounding Târgoviște, Wallachia&#39;,
 &#39;1501&#39;,
 &#39;on a potato farm&#39;,
 &#39;1511&#39;,
 &#39;at a bowling green&#39;,
 &#39;1521&#39;,
 &#39;at the inns of chancery&#39;,
 &#39;1531&#39;,
 &#39;at a dockside&#39;,
 &#39;1541&#39;,
 &#39;at the house of Thomas More&#39;,
 &#39;1551&#39;,
 &#39;on a ship&#39;,
 &#39;1561&#39;,
 &#39;in a tower&#39;,
 &#39;1571&#39;,
 &#39;at Singleton Hall&#39;,
 &#39;1581&#39;,
 &#39;in an abandoned rectory&#39;,
 &#39;1591&#39;,
 &#39;in the public square&#39;,
 &#39;1601&#39;,
 &#39;on a farm&#39;,
 &#39;1611&#39;,
 &#39;at the diabolical festival of Beltane&#39;,
 &#39;1621&#39;,
 &#39;at the college of skeptics&#39;,
 &#39;1631&#39;,
 &#39;in the woods&#39;,
 &#39;1641&#39;,
 &#39;in a colonial house&#39;,
 &#39;1651&#39;,
 &#39;at a skirmish&#39;,
 &#39;1661&#39;,
 &#39;in a jail&#39;,
 &#39;1671&#39;,
 &#39;at the temple of satanic worship&#39;,
 &#39;1681&#39;,
 &#39;at the hall of the witchpricker&#39;,
 &#39;1691&#39;,
 &#39;at the lake&#39;,
 &#39;1701&#39;,
 &#39;at a failing farm in northern France&#39;,
 &#39;1711&#39;,
 &#39;at the Tuileries&#39;,
 &#39;1721&#39;,
 &#39;at the Jacobin club&#39;,
 &#39;1731&#39;,
 &#39;at the prison of Marie Antoinette&#39;,
 &#39;1741&#39;,
 &#39;at the Café Le Procope&#39;,
 &#39;1751&#39;,
 &#39;at the center of the revolutionary turbulence in Paris&#39;,
 &#39;1761&#39;,
 &#39;at the Tour du Temple&#39;,
 &#39;1771&#39;,
 &#39;at the festival of the supreme being&#39;,
 &#39;1781&#39;,
 &#39;at the Bastille&#39;,
 &#39;1791&#39;,
 &#39;at the Place de la Révolution&#39;,
 &#39;1801&#39;,
 &#39;in the Endell Street Lying-In hospital&#39;,
 &#39;1811&#39;,
 &#39;in the work-house of Mrs Mann&#39;,
 &#39;1821&#39;,
 &#39;in the Baker Street house of Sherlock Holmes&#39;,
 &#39;1831&#39;,
 &#39;in the red lantern district in Spitalfields, Whitechapel&#39;,
 &#39;1841&#39;,
 &#39;at the plush town house&#39;,
 &#39;1851&#39;,
 &quot;at Wannop&#39;s gymnasium&quot;,
 &#39;1861&#39;,
 &#39;in Newgate prison&#39;,
 &#39;1871&#39;,
 &quot;in Aleister Crowley&#39;s temple&quot;,
 &#39;1881&#39;,
 &#39;in the Bethlem madhouse&#39;,
 &#39;1891&#39;,
 &#39;in the network of vaults beneath Charing Cross&#39;,
 &#39;1901&#39;,
 &#39;on a grain farm&#39;,
 &#39;1911&#39;,
 &#39;at the entrance to the Grand Arena of the Central Lenin Stadium&#39;,
 &#39;1921&#39;,
 &#39;in the dusty KGB archive&#39;,
 &#39;1931&#39;,
 &#39;at the entrance to the Rabotnitsa&#39;,
 &#39;1941&#39;,
 &#39;at the wall of the Kremlin&#39;,
 &#39;1951&#39;,
 &#39;on a desert battlefield&#39;,
 &#39;1961&#39;,
 &#39;GENERAL LANGUAGE 1 GENERAL LANGUAGE 2 GENERAL LANGUAGE 3&#39;,
 &#39;1971&#39;,
 &quot;before St Basil&#39;s cathedral&quot;,
 &#39;1981&#39;,
 &#39;at the Berlin wall &#39;,
 &#39;1991&#39;,
 &#39;in the derelict city of Pripyat&#39;,
 &#39;2001&#39;,
 &#39;GENERAL LANGUAGE 1 GENERAL LANGUAGE 2 GENERAL LANGUAGE 3&#39;,
 &#39;2011&#39;,
 &#39;GENERAL LANGUAGE 1 GENERAL LANGUAGE 2 GENERAL LANGUAGE 3&#39;,
 &#39;2021&#39;,
 &#39;GENERAL LANGUAGE 1 GENERAL LANGUAGE 2 GENERAL LANGUAGE 3&#39;,
 &#39;2031&#39;,
 &#39;GENERAL LANGUAGE 1 GENERAL LANGUAGE 2 GENERAL LANGUAGE 3&#39;,
 &#39;2041&#39;,
 &#39;GENERAL LANGUAGE 1 GENERAL LANGUAGE 2 GENERAL LANGUAGE 3&#39;,
 &#39;2051&#39;,
 &#39;GENERAL LANGUAGE 1 GENERAL LANGUAGE 2 GENERAL LANGUAGE 3&#39;,
 &#39;2061&#39;,
 &#39;GENERAL LANGUAGE 1 GENERAL LANGUAGE 2 GENERAL LANGUAGE 3&#39;,
 &#39;2071&#39;,
 &#39;GENERAL LANGUAGE 1 GENERAL LANGUAGE 2 GENERAL LANGUAGE 3&#39;,
 &#39;2081&#39;,
 &#39;GENERAL LANGUAGE 1 GENERAL LANGUAGE 2 GENERAL LANGUAGE 3&#39;,
 &#39;2091&#39;,
 &#39;GENERAL LANGUAGE 1 GENERAL LANGUAGE 2 GENERAL LANGUAGE 3&#39;)
 )
 }</tw-passagedata><tw-passagedata pid="386" name="entrance room 1st clauses" tags="startup" position="360,1745" size="100,100">{
(set: $entrance_room_1st_clauses to (dm:
 &#39;1&#39;,
 &#39;You are on a fecund plot&#39;,
 &#39;11&#39;,
 &#39;You are in a busy chamber&#39;,
 &#39;21&#39;,
 &#39;You are in a quiet entrance hall&#39;,
 &#39;31&#39;,
 &#39;You are in a barrel filled vault&#39;,
 &#39;41&#39;,
 &#39;You are in a sparsely furnished abode&#39;,
 &#39;51&#39;,
 &#39;You are in a well stocked depot&#39;,
 &#39;61&#39;,
 &#39;You are in an uncomfortable cell&#39;,
 &#39;71&#39;,
 &#39;You are in a tranquil sanctum&#39;,
 &#39;81&#39;,
 &#39;You are in a scruffy abode&#39;,
 &#39;91&#39;,
 &#39;You are in an ancient ossuary&#39;,
 &#39;101&#39;,
 &#39;You are in a quiet orchard&#39;,
 &#39;111&#39;,
 &#39;You are at a towering entrance&#39;,
 &#39;121&#39;,
 &#39;You are in a dusty courtyard&#39;,
 &#39;131&#39;,
 &#39;You are in a lush boudoir&#39;,
 &#39;141&#39;,
 &#39;You are on a red shale path&#39;,
 &#39;151&#39;,
 &#39;You are in a training yard&#39;,
 &#39;161&#39;,
 &#39;You are in a noisy square&#39;,
 &#39;171&#39;,
 &#39;You are in a sandy courtyard&#39;,
 &#39;181&#39;,
 &#39;You are in an operating theater&#39;,
 &#39;191&#39;,
 &#39;You are in a stone mausoleum&#39;,
 &#39;201&#39;,
 &#39;You are by a serene pond&#39;,
 &#39;211&#39;,
 &#39;You are in a babbling square&#39;,
 &#39;221&#39;,
 &#39;You are in a debating hall&#39;,
 &#39;231&#39;,
 &#39;You are on a dancing deck&#39;,
 &#39;241&#39;,
 &#39;You are in a shady entrance hall&#39;,
 &#39;251&#39;,
 &#39;You are at a rock brick post&#39;,
 &#39;261&#39;,
 &#39;You are in a dirt square&#39;,
 &#39;271&#39;,
 &#39;You are under a draughty gazebo&#39;,
 &#39;281&#39;,
 &#39;You are in a dilapidated dormitory&#39;,
 &#39;291&#39;,
 &#39;You are on a noiseless plot&#39;,
 &#39;301&#39;,
 &#39;You are at a field tower&#39;,
 &#39;311&#39;,
 &#39;You are by a rehearsal stage&#39;,
 &#39;321&#39;,
 &#39;You are in a marble hall&#39;,
 &#39;331&#39;,
 &#39;You are in a discreet apse&#39;,
 &#39;341&#39;,
 &#39;You are in a musty entrance hall&#39;,
 &#39;351&#39;,
 &#39;You are in a blood soaked clearing&#39;,
 &#39;361&#39;,
 &#39;You are on a raised platform&#39;,
 &#39;371&#39;,
 &#39;You are in a hedged yard&#39;,
 &#39;381&#39;,
 &#39;You are in a domed, polished stone shrine&#39;,
 &#39;391&#39;,
 &#39;You are in a half submerged vault&#39;,
 &#39;401&#39;,
 &#39;You are in a verdant clearing&#39;,
 &#39;411&#39;,
 &#39;You are in a ragged tent&#39;,
 &#39;421&#39;,
 &#39;You are in a dilapidated reading entrance hall&#39;,
 &#39;431&#39;,
 &#39;You are in a derelict hall&#39;,
 &#39;441&#39;,
 &#39;You are in a dusty entrance hall&#39;,
 &#39;451&#39;,
 &#39;You are in an abandoned magazine&#39;,
 &#39;461&#39;,
 &#39;You are in a ruined cell&#39;,
 &#39;471&#39;,
 &#39;You are in a lush and fecund grove&#39;,
 &#39;481&#39;,
 &#39;You are in a disintegrating ward&#39;,
 &#39;491&#39;,
 &#39;You are in a deep shaft&#39;,
 &#39;501&#39;,
 &#39;You are in a shady clearing&#39;,
 &#39;511&#39;,
 &quot;You are in a knight&#39;s tent&quot;,
 &#39;521&#39;,
 &#39;You are in an odorous cavern&#39;,
 &#39;531&#39;,
 &#39;You are on a misty bank&#39;,
 &#39;541&#39;,
 &#39;You are in a stone hall&#39;,
 &#39;551&#39;,
 &#39;You are in a clearing&#39;,
 &#39;561&#39;,
 &#39;You are in a claustrophobic cavern&#39;,
 &#39;571&#39;,
 &#39;You are in a solemn hall&#39;,
 &#39;581&#39;,
 &#39;You are in a dirty square&#39;,
 &#39;591&#39;,
 &#39;You are in a deathly pit&#39;,
 &#39;601&#39;,
 &#39;You are in an aromatic garden&#39;,
 &#39;611&#39;,
 &#39;You are in a smoky bar&#39;,
 &#39;621&#39;,
 &#39;You are in a hidden meeting entrance hall&#39;,
 &#39;631&#39;,
 &#39;You are in a rowdy salon&#39;,
 &#39;641&#39;,
 &#39;You are in a bounteous market stall&#39;,
 &#39;651&#39;,
 &#39;You are in a limestone entrance hall&#39;,
 &#39;661&#39;,
 &#39;You are in a small shop&#39;,
 &#39;671&#39;,
 &#39;You are in a private musalla&#39;,
 &#39;681&#39;,
 &#39;You are in a silent square&#39;,
 &#39;691&#39;,
 &#39;You are in a crumbling building&#39;,
 &#39;701&#39;,
 &#39;You are at a fearsome display&#39;,
 &#39;711&#39;,
 &#39;You are in a bathing entrance hall&#39;,
 &#39;721&#39;,
 &#39;You are in a hall&#39;,
 &#39;731&#39;,
 &#39;You are in a gardened courtyard&#39;,
 &#39;741&#39;,
 &#39;You are in a high chamber&#39;,
 &#39;751&#39;,
 &#39;You are in a basic dormitorium&#39;,
 &#39;761&#39;,
 &#39;You are in a carpented wharf&#39;,
 &#39;771&#39;,
 &#39;You are in a prayer chamber&#39;,
 &#39;781&#39;,
 &#39;You are in a small ward&#39;,
 &#39;791&#39;,
 &#39;You are in a dim chamber&#39;,
 &#39;801&#39;,
 &#39;You are in a clearing in the reeds&#39;,
 &#39;811&#39;,
 &#39;You are by a pond&#39;,
 &#39;821&#39;,
 &#39;You are in a sodden study&#39;,
 &#39;831&#39;,
 &#39;You are in a mysterious study&#39;,
 &#39;841&#39;,
 &#39;You are in a firelit hall&#39;,
 &#39;851&#39;,
 &#39;You are in a draughty hall&#39;,
 &#39;861&#39;,
 &#39;You are in a wild clearing&#39;,
 &#39;871&#39;,
 &#39;You are in a shivery chapel&#39;,
 &#39;881&#39;,
 &#39;You are in a dry island&#39;,
 &#39;891&#39;,
 &#39;You are in a fetid lagoon&#39;,
 &#39;901&#39;,
 &#39;You are in a jagged clearing&#39;,
 &#39;911&#39;,
 &#39;You are in an oily pit garage&#39;,
 &#39;921&#39;,
 &#39;You are on a snowy mountainside&#39;,
 &#39;931&#39;,
 &#39;You are in a flowery courtyard&#39;,
 &#39;941&#39;,
 &#39;You are in a plush lobby&#39;,
 &#39;951&#39;,
 &#39;You are in an ominous Gerichtssaal&#39;,
 &#39;961&#39;,
 &#39;You are in a spartan Wohnblock&#39;,
 &#39;971&#39;,
 &#39;You are in a tranquil Gebetsraum&#39;,
 &#39;981&#39;,
 &#39;You are in a lab&#39;,
 &#39;991&#39;,
 &#39;You are by a ditch full of bodies&#39;,
 &#39;1001&#39;,
 &#39;You are in a frosty hall&#39;,
 &#39;1011&#39;,
 &#39;You are in a geometrical tower&#39;,
 &#39;1021&#39;,
 &#39;You are in an isolated study&#39;,
 &#39;1031&#39;,
 &#39;You are in a spartan cell&#39;,
 &#39;1041&#39;,
 &#39;You are in a plush prayer entrance hall&#39;,
 &#39;1051&#39;,
 &#39;You are in a kata yard&#39;,
 &#39;1061&#39;,
 &#39;You are in an ascetic cell&#39;,
 &#39;1071&#39;,
 &#39;You are in a grassed and flowered courtyard&#39;,
 &#39;1081&#39;,
 &#39;You are in a ruined chapel&#39;,
 &#39;1091&#39;,
 &#39;You are in a baleful arbor&#39;,
 &#39;1101&#39;,
 &#39;You are in a verdant hollow&#39;,
 &#39;1111&#39;,
 &#39;You are in a grassy opening&#39;,
 &#39;1121&#39;,
 &#39;You are in a musty entrance hall&#39;,
 &#39;1131&#39;,
 &#39;You are in a small entrance hall&#39;,
 &#39;1141&#39;,
 &#39;You are under a makeshift shelter&#39;,
 &#39;1151&#39;,
 &#39;You are in a battered tent&#39;,
 &#39;1161&#39;,
 &#39;You are in a dirty cell&#39;,
 &#39;1171&#39;,
 &#39;You are at an arched entrance&#39;,
 &#39;1181&#39;,
 &#39;You are on a rotting drawbridge&#39;,
 &#39;1191&#39;,
 &#39;You are on a flotsam strewn beach&#39;,
 &#39;1201&#39;,
 &#39;You are in a waterlogged hall&#39;,
 &#39;1211&#39;,
 &#39;You are in a bustling square&#39;,
 &#39;1221&#39;,
 &#39;You are in a dim entrance hall&#39;,
 &#39;1231&#39;,
 &#39;You are in a quiet plaza&#39;,
 &#39;1241&#39;,
 &#39;You are in a wagon&#39;,
 &#39;1251&#39;,
 &#39;You are in a warring square&#39;,
 &#39;1261&#39;,
 &#39;You are in a frost kissed square&#39;,
 &#39;1271&#39;,
 &#39;You are on a blizzardy plateau&#39;,
 &#39;1281&#39;,
 &#39;You are in a sinking ship&#39;,
 &#39;1291&#39;,
 &#39;You are in a blazing building&#39;,
 &#39;1301&#39;,
 &#39;You are in a small market square&#39;,
 &#39;1311&#39;,
 &#39;You are in a fabulous hall&#39;,
 &#39;1321&#39;,
 &#39;You are in a misty hollow&#39;,
 &#39;1331&#39;,
 &#39;You are in a draughty tent&#39;,
 &#39;1341&#39;,
 &#39;You are in a small cottage&#39;,
 &#39;1351&#39;,
 &#39;You are in a Scottish schiltron&#39;,
 &#39;1361&#39;,
 &#39;You are in a modest entrance hall&#39;,
 &#39;1371&#39;,
 &#39;You are in a simple prayer entrance hall&#39;,
 &#39;1381&#39;,
 &#39;You are in an examination entrance hall&#39;,
 &#39;1391&#39;,
 &#39;You are in a rowdy square&#39;,
 &#39;1401&#39;,
 &#39;You are by a densely overgrown pond&#39;,
 &#39;1411&#39;,
 &#39;You are in a betting pit&#39;,
 &#39;1421&#39;,
 &#39;You are in a printing entrance hall&#39;,
 &#39;1431&#39;,
 &#39;You are in a tent&#39;,
 &#39;1441&#39;,
 &#39;You are in a stepped pyramid&#39;,
 &#39;1451&#39;,
 &#39;You are in a battered tower&#39;,
 &#39;1461&#39;,
 &#39;You are in a cramped cell&#39;,
 &#39;1471&#39;,
 &#39;You are in an opulent nave&#39;,
 &#39;1481&#39;,
 &#39;You are in a dank dungeon&#39;,
 &#39;1491&#39;,
 &#39;You are in a grisly copse&#39;,
 &#39;1501&#39;,
 &#39;You are on a country path&#39;,
 &#39;1511&#39;,
 &#39;You are on a country lane&#39;,
 &#39;1521&#39;,
 &#39;You are in a cloistered yard&#39;,
 &#39;1531&#39;,
 &#39;You are in a stinking wharf&#39;,
 &#39;1541&#39;,
 &#39;You are in a gardens&#39;,
 &#39;1551&#39;,
 &#39;You are in an entrance hall&#39;,
 &#39;1561&#39;,
 &#39;You are in a gatehouse&#39;,
 &#39;1571&#39;,
 &#39;You are in an entrance hall&#39;,
 &#39;1581&#39;,
 &#39;You are on a neglected path&#39;,
 &#39;1591&#39;,
 &#39;You are on a smoky lane&#39;,
 &#39;1601&#39;,
 &#39;You are on a stinking path&#39;,
 &#39;1611&#39;,
 &#39;You are on a misty path&#39;,
 &#39;1621&#39;,
 &#39;You are on a wood beam corridor&#39;,
 &#39;1631&#39;,
 &#39;You are on a bleak path&#39;,
 &#39;1641&#39;,
 &#39;You are in a hall&#39;,
 &#39;1651&#39;,
 &#39;You are in a battlefield&#39;,
 &#39;1661&#39;,
 &#39;You are on a corridor&#39;,
 &#39;1671&#39;,
 &#39;You are in a hall&#39;,
 &#39;1681&#39;,
 &#39;You are in a passage&#39;,
 &#39;1691&#39;,
 &#39;You are on a lane&#39;,
 &#39;1701&#39;,
 &#39;You are on a path&#39;,
 &#39;1711&#39;,
 &#39;You are on a corridor&#39;,
 &#39;1721&#39;,
 &#39;You are on a corridor&#39;,
 &#39;1731&#39;,
 &#39;You are in a passage&#39;,
 &#39;1741&#39;,
 &#39;You are on a rue&#39;,
 &#39;1751&#39;,
 &#39;You are on a rue&#39;,
 &#39;1761&#39;,
 &#39;You are in a passage&#39;,
 &#39;1771&#39;,
 &#39;You are in a thoroughfare&#39;,
 &#39;1781&#39;,
 &#39;You are in a passage&#39;,
 &#39;1791&#39;,
 &#39;You are on a rue&#39;,
 &#39;1801&#39;,
 &#39;You are on a corridor&#39;,
 &#39;1811&#39;,
 &#39;You are in a passage&#39;,
 &#39;1821&#39;,
 &#39;You are in an alley&#39;,
 &#39;1831&#39;,
 &#39;You are in an alley&#39;,
 &#39;1841&#39;,
 &#39;You are at a gate&#39;,
 &#39;1851&#39;,
 &#39;You are in a passage&#39;,
 &#39;1861&#39;,
 &#39;You are in a passage&#39;,
 &#39;1871&#39;,
 &#39;You are in a hall&#39;,
 &#39;1881&#39;,
 &#39;You are on a corridor&#39;,
 &#39;1891&#39;,
 &#39;You are in a vaulted passage&#39;,
 &#39;1901&#39;,
 &#39;You are in a pungent country field&#39;,
 &#39;1911&#39;,
 &#39;You are in an excited queue&#39;,
 &#39;1921&#39;,
 &#39;You are in a wooden double door&#39;,
 &#39;1931&#39;,
 &#39;You are in a chilly vestibule&#39;,
 &#39;1941&#39;,
 &#39;You are in a small crowd&#39;,
 &#39;1951&#39;,
 &#39;You are in a ROOM TERMS DATABASE&#39;,
 &#39;1961&#39;,
 &#39;You are in a ROOM TERMS DATABASE&#39;,
 &#39;1971&#39;,
 &#39;You are in a garden&#39;,
 &#39;1981&#39;,
 &#39;You are at a marker&#39;,
 &#39;1991&#39;,
 &#39;You are on a weed-cracked road&#39;,
 &#39;2001&#39;,
 &#39;You are in a ROOM TERMS DATABASE&#39;,
 &#39;2011&#39;,
 &#39;You are in a ROOM TERMS DATABASE&#39;,
 &#39;2021&#39;,
 &#39;You are in a ROOM TERMS DATABASE&#39;,
 &#39;2031&#39;,
 &#39;You are in a ROOM TERMS DATABASE&#39;,
 &#39;2041&#39;,
 &#39;You are in a ROOM TERMS DATABASE&#39;,
 &#39;2051&#39;,
 &#39;You are in a ROOM TERMS DATABASE&#39;,
 &#39;2061&#39;,
 &#39;You are in a ROOM TERMS DATABASE&#39;,
 &#39;2071&#39;,
 &#39;You are in a ROOM TERMS DATABASE&#39;,
 &#39;2081&#39;,
 &#39;You are in a ROOM TERMS DATABASE&#39;,
 &#39;2091&#39;,
 &#39;You are in a ROOM TERMS DATABASE&#39;
 ))
 }</tw-passagedata></tw-storydata>
<script title="Twine engine code" data-main="harlowe">"use strict";var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(){
/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */var requirejs,require,define,root,factory;!function(e){var t,n,r,i,a={},o={},s={},c={},u=Object.prototype.hasOwnProperty,l=[].slice,p=/\.js$/;function f(e,t){return u.call(e,t)}function d(e,t){var n,r,i,a,o,c,u,l,f,d,h,y=t&&t.split("/"),m=s.map,g=m&&m["*"]||{};if(e){for(o=(e=e.split("/")).length-1,s.nodeIdCompat&&p.test(e[o])&&(e[o]=e[o].replace(p,"")),"."===e[0].charAt(0)&&y&&(e=y.slice(0,y.length-1).concat(e)),f=0;f<e.length;f++)if("."===(h=e[f]))e.splice(f,1),f-=1;else if(".."===h){if(0===f||1===f&&".."===e[2]||".."===e[f-1])continue;f>0&&(e.splice(f-1,2),f-=2)}e=e.join("/")}if((y||g)&&m){for(f=(n=e.split("/")).length;f>0;f-=1){if(r=n.slice(0,f).join("/"),y)for(d=y.length;d>0;d-=1)if((i=m[y.slice(0,d).join("/")])&&(i=i[r])){a=i,c=f;break}if(a)break;!u&&g&&g[r]&&(u=g[r],l=f)}!a&&u&&(a=u,c=l),a&&(n.splice(0,c,a),e=n.join("/"))}return e}function h(t,r){return function(){var i=l.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),n.apply(e,i.concat([t,r]))}}function y(e){return function(t){a[e]=t}}function m(n){if(f(o,n)){var r=o[n];delete o[n],c[n]=!0,t.apply(e,r)}if(!f(a,n)&&!f(c,n))throw new Error("No "+n);return a[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function v(e){return e?g(e):[]}r=function(e,t){var n,r,i=g(e),a=i[0],o=t[1];return e=i[1],a&&(n=m(a=d(a,o))),a?e=n&&n.normalize?n.normalize(e,(r=o,function(e){return d(e,r)})):d(e,o):(a=(i=g(e=d(e,o)))[0],e=i[1],a&&(n=m(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:n}},i={require:function(e){return h(e)},exports:function(e){var t=a[e];return void 0!==t?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:function(e){return function(){return s&&s.config&&s.config[e]||{}}}(e)}}},t=function(t,n,s,u){var l,p,d,g,b,w,T,S=[],x=void 0===s?"undefined":_typeof(s);if(w=v(u=u||t),"undefined"===x||"function"===x){for(n=!n.length&&s.length?["require","exports","module"]:n,b=0;b<n.length;b+=1)if("require"===(p=(g=r(n[b],w)).f))S[b]=i.require(t);else if("exports"===p)S[b]=i.exports(t),T=!0;else if("module"===p)l=S[b]=i.module(t);else if(f(a,p)||f(o,p)||f(c,p))S[b]=m(p);else{if(!g.p)throw new Error(t+" missing "+p);g.p.load(g.n,h(u,!0),y(p),{}),S[b]=a[p]}d=s?s.apply(a[t],S):void 0,t&&(l&&l.exports!==e&&l.exports!==a[t]?a[t]=l.exports:d===e&&T||(a[t]=d))}else t&&(a[t]=s)},requirejs=require=n=function(a,o,c,u,l){if("string"==typeof a)return i[a]?i[a](o):m(r(a,v(o)).f);if(!a.splice){if((s=a).deps&&n(s.deps,s.callback),!o)return;o.splice?(a=o,o=c,c=null):a=e}return o=o||function(){},"function"==typeof c&&(c=u,u=l),u?t(e,a,o,c):setTimeout(function(){t(e,a,o,c)},4),n},n.config=function(e){return n(e)},requirejs._defined=a,(define=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),f(a,e)||f(o,e)||(o[e]=[e,t,n])}).amd={jQuery:!0}}(),define("almond",function(){}),
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.3/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
root=this,factory=function(){var e,t,n=Function.call.bind(Function.apply),r=Function.call.bind(Function.call),i=Array.isArray,a=Object.keys,o=function(e){try{return e(),!1}catch(e){return!0}},s=function(e){try{return e()}catch(e){return!1}},c=(e=o,function(){return!n(e,this,arguments)}),u=!!Object.defineProperty&&!o(function(){return Object.defineProperty({},"x",{get:function(){}})}),l="foo"===function(){}.name,p=Function.call.bind(Array.prototype.forEach),f=Function.call.bind(Array.prototype.reduce),d=Function.call.bind(Array.prototype.filter),h=Function.call.bind(Array.prototype.some),y=function(e,t,n,r){!r&&t in e||(u?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n}):e[t]=n)},m=function(e,t,n){p(a(t),function(r){var i=t[r];y(e,r,i,!!n)})},g=Function.call.bind(Object.prototype.toString),v="function"==typeof/abc/?function(e){return"function"==typeof e&&"[object Function]"===g(e)}:function(e){return"function"==typeof e},b=function(e,t,n){if(!u)throw new TypeError("getters require true ES5 support");Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:n})},w=function(e,t,n){if(!u)throw new TypeError("getters require true ES5 support");var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,{configurable:r.configurable,enumerable:r.enumerable,get:function(){return e[t]},set:function(n){e[t]=n}})},T=function(e,t,n){if(u){var r=Object.getOwnPropertyDescriptor(e,t);r.value=n,Object.defineProperty(e,t,r)}else e[t]=n},S=function(e,t,n){u?Object.defineProperty(e,t,n):"value"in n&&(e[t]=n.value)},x=function(e,t){t&&v(t.toString)&&y(e,"toString",t.toString.bind(t),!0)},k=Object.create||function(e,t){var n=function(){};n.prototype=e;var r=new n;return void 0!==t&&a(t).forEach(function(e){S(r,e,t[e])}),r},O=function(e,t){return!!Object.setPrototypeOf&&s(function(){var n=function t(n){var r=new e(n);return Object.setPrototypeOf(r,t.prototype),r};return Object.setPrototypeOf(n,e),n.prototype=k(e.prototype,{constructor:{value:n}}),t(n)})},j=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),A=j.isFinite,C=Function.call.bind(String.prototype.indexOf),E=Function.apply.bind(Array.prototype.indexOf),_=Function.call.bind(Array.prototype.concat),N=Function.call.bind(String.prototype.slice),P=Function.call.bind(Array.prototype.push),I=Function.apply.bind(Array.prototype.push),M=Function.call.bind(Array.prototype.shift),D=Math.max,R=Math.min,L=Math.floor,q=Math.abs,F=Math.exp,V=Math.log,H=Math.sqrt,z=Function.call.bind(Object.prototype.hasOwnProperty),$=function(){},B=j.Map,W=B&&B.prototype.delete,U=B&&B.prototype.get,G=B&&B.prototype.has,X=B&&B.prototype.set,Y=j.Symbol||{},J=Y.species||"@@species",K=Number.isNaN||function(e){return e!=e},Z=Number.isFinite||function(e){return"number"==typeof e&&A(e)},Q=v(Math.sign)?Math.sign:function(e){var t=Number(e);return 0===t?t:K(t)?t:t<0?-1:1},ee=function(e){var t=Number(e);return t<-1||K(t)?NaN:0===t||t===1/0?t:-1===t?-1/0:1+t-1==0?t:t*(V(1+t)/(1+t-1))},te=function(e){return"[object Arguments]"===g(e)},ne=te(arguments)?te:function(e){return null!==e&&"object"===(void 0===e?"undefined":_typeof(e))&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==g(e)&&"[object Function]"===g(e.callee)},re=function(e){return null===e||"function"!=typeof e&&"object"!==(void 0===e?"undefined":_typeof(e))},ie=function(e){return"[object String]"===g(e)},ae=function(e){return"[object RegExp]"===g(e)},oe=function(e){return"function"==typeof j.Symbol&&"symbol"===(void 0===e?"undefined":_typeof(e))},se=function(e,t,n){var r=e[t];y(e,t,n,!0),x(e[t],r)},ce="function"==typeof Y&&"function"==typeof Y.for&&oe(Y()),ue=oe(Y.iterator)?Y.iterator:"_es6-shim iterator_";j.Set&&"function"==typeof(new j.Set)["@@iterator"]&&(ue="@@iterator"),j.Reflect||y(j,"Reflect",{},!0);var le,pe=j.Reflect,fe=String,de="undefined"!=typeof document&&document?document.all:null,he=null==de?function(e){return null==e}:function(e){return null==e&&e!==de},ye={Call:function(e,t){var r=arguments.length>2?arguments[2]:[];if(!ye.IsCallable(e))throw new TypeError(e+" is not a function");return n(e,t,r)},RequireObjectCoercible:function(e,t){if(he(e))throw new TypeError(t||"Cannot call method on "+e);return e},TypeIsObject:function(e){return null!=e&&!0!==e&&!1!==e&&("function"==typeof e||"object"===(void 0===e?"undefined":_typeof(e))||e===de)},ToObject:function(e,t){return Object(ye.RequireObjectCoercible(e,t))},IsCallable:v,IsConstructor:function(e){return ye.IsCallable(e)},ToInt32:function(e){return ye.ToNumber(e)>>0},ToUint32:function(e){return ye.ToNumber(e)>>>0},ToNumber:function(e){if("[object Symbol]"===g(e))throw new TypeError("Cannot convert a Symbol value to a number");return+e},ToInteger:function(e){var t=ye.ToNumber(e);return K(t)?0:0!==t&&Z(t)?(t>0?1:-1)*L(q(t)):t},ToLength:function(e){var t=ye.ToInteger(e);return t<=0?0:t>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t},SameValue:function(e,t){return e===t?0!==e||1/e==1/t:K(e)&&K(t)},SameValueZero:function(e,t){return e===t||K(e)&&K(t)},IsIterable:function(e){return ye.TypeIsObject(e)&&(void 0!==e[ue]||ne(e))},GetIterator:function(e){if(ne(e))return new t(e,"value");var n=ye.GetMethod(e,ue);if(!ye.IsCallable(n))throw new TypeError("value is not an iterable");var r=ye.Call(n,e);if(!ye.TypeIsObject(r))throw new TypeError("bad iterator");return r},GetMethod:function(e,t){var n=ye.ToObject(e)[t];if(!he(n)){if(!ye.IsCallable(n))throw new TypeError("Method not callable: "+t);return n}},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var n=ye.GetMethod(e,"return");if(void 0!==n){var r,i;try{r=ye.Call(n,e)}catch(e){i=e}if(!t){if(i)throw i;if(!ye.TypeIsObject(r))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ye.TypeIsObject(t))throw new TypeError("bad iterator");return t},IteratorStep:function(e){var t=ye.IteratorNext(e);return!ye.IteratorComplete(t)&&t},Construct:function(e,t,n,r){var i=void 0===n?e:n;if(!r&&pe.construct)return pe.construct(e,t,i);var a=i.prototype;ye.TypeIsObject(a)||(a=Object.prototype);var o=k(a),s=ye.Call(e,o,t);return ye.TypeIsObject(s)?s:o},SpeciesConstructor:function(e,t){var n=e.constructor;if(void 0===n)return t;if(!ye.TypeIsObject(n))throw new TypeError("Bad constructor");var r=n[J];if(he(r))return t;if(!ye.IsConstructor(r))throw new TypeError("Bad @@species");return r},CreateHTML:function(e,t,n,r){var i=ye.ToString(e),a="<"+t;""!==n&&(a+=" "+n+'="'+ye.ToString(r).replace(/"/g,"&quot;")+'"');return a+">"+i+"</"+t+">"},IsRegExp:function(e){if(!ye.TypeIsObject(e))return!1;var t=e[Y.match];return void 0!==t?!!t:ae(e)},ToString:function(e){return fe(e)}};if(u&&ce){var me=function(e){if(oe(Y[e]))return Y[e];var t=Y.for("Symbol."+e);return Object.defineProperty(Y,e,{configurable:!1,enumerable:!1,writable:!1,value:t}),t};if(!oe(Y.search)){var ge=me("search"),ve=String.prototype.search;y(RegExp.prototype,ge,function(e){return ye.Call(ve,e,[this])});se(String.prototype,"search",function(e){var t=ye.RequireObjectCoercible(this);if(!he(e)){var n=ye.GetMethod(e,ge);if(void 0!==n)return ye.Call(n,e,[t])}return ye.Call(ve,t,[ye.ToString(e)])})}if(!oe(Y.replace)){var be=me("replace"),we=String.prototype.replace;y(RegExp.prototype,be,function(e,t){return ye.Call(we,e,[this,t])});se(String.prototype,"replace",function(e,t){var n=ye.RequireObjectCoercible(this);if(!he(e)){var r=ye.GetMethod(e,be);if(void 0!==r)return ye.Call(r,e,[n,t])}return ye.Call(we,n,[ye.ToString(e),t])})}if(!oe(Y.split)){var Te=me("split"),Se=String.prototype.split;y(RegExp.prototype,Te,function(e,t){return ye.Call(Se,e,[this,t])});se(String.prototype,"split",function(e,t){var n=ye.RequireObjectCoercible(this);if(!he(e)){var r=ye.GetMethod(e,Te);if(void 0!==r)return ye.Call(r,e,[n,t])}return ye.Call(Se,n,[ye.ToString(e),t])})}var xe=oe(Y.match),ke=xe&&((le={})[Y.match]=function(){return 42},42!=="a".match(le));if(!xe||ke){var Oe=me("match"),je=String.prototype.match;y(RegExp.prototype,Oe,function(e){return ye.Call(je,e,[this])});se(String.prototype,"match",function(e){var t=ye.RequireObjectCoercible(this);if(!he(e)){var n=ye.GetMethod(e,Oe);if(void 0!==n)return ye.Call(n,e,[t])}return ye.Call(je,t,[ye.ToString(e)])})}}var Ae=function(e,t,n){x(t,e),Object.setPrototypeOf&&Object.setPrototypeOf(e,t),u?p(Object.getOwnPropertyNames(e),function(r){r in $||n[r]||w(e,r,t)}):p(Object.keys(e),function(r){r in $||n[r]||(t[r]=e[r])}),t.prototype=e.prototype,T(e.prototype,"constructor",t)},Ce=function(){return this},Ee=function(e){u&&!z(e,J)&&b(e,J,Ce)},_e=function(e,t){var n=t||function(){return this};y(e,ue,n),!e[ue]&&oe(ue)&&(e[ue]=n)},Ne=function(e,t,n){if(function(e,t,n){u?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n}(e,t,n),!ye.SameValue(e[t],n))throw new TypeError("property is nonconfigurable")},Pe=function(e,t,n,r){if(!ye.TypeIsObject(e))throw new TypeError("Constructor requires `new`: "+t.name);var i=t.prototype;ye.TypeIsObject(i)||(i=n);var a=k(i);for(var o in r)if(z(r,o)){var s=r[o];y(a,o,s,!0)}return a};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var Ie=String.fromCodePoint;se(String,"fromCodePoint",function(e){return ye.Call(Ie,this,arguments)})}var Me={fromCodePoint:function(e){for(var t,n=[],r=0,i=arguments.length;r<i;r++){if(t=Number(arguments[r]),!ye.SameValue(t,ye.ToInteger(t))||t<0||t>1114111)throw new RangeError("Invalid code point "+t);t<65536?P(n,String.fromCharCode(t)):(t-=65536,P(n,String.fromCharCode(55296+(t>>10))),P(n,String.fromCharCode(t%1024+56320)))}return n.join("")},raw:function(e){var t=ye.ToObject(e,"bad callSite"),n=ye.ToObject(t.raw,"bad raw value"),r=n.length,i=ye.ToLength(r);if(i<=0)return"";for(var a,o,s,c,u=[],l=0;l<i&&(a=ye.ToString(l),s=ye.ToString(n[a]),P(u,s),!(l+1>=i));)o=l+1<arguments.length?arguments[l+1]:"",c=ye.ToString(o),P(u,c),l+=1;return u.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&se(String,"raw",Me.raw),m(String,Me);var De={repeat:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this)),n=ye.ToInteger(e);if(n<0||n>=1/0)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return function e(t,n){if(n<1)return"";if(n%2)return e(t,n-1)+t;var r=e(t,n/2);return r+r}(t,n)},startsWith:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this));if(ye.IsRegExp(e))throw new TypeError('Cannot call method "startsWith" with a regex');var n,r=ye.ToString(e);arguments.length>1&&(n=arguments[1]);var i=D(ye.ToInteger(n),0);return N(t,i,i+r.length)===r},endsWith:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this));if(ye.IsRegExp(e))throw new TypeError('Cannot call method "endsWith" with a regex');var n,r=ye.ToString(e),i=t.length;arguments.length>1&&(n=arguments[1]);var a=void 0===n?i:ye.ToInteger(n),o=R(D(a,0),i);return N(t,o-r.length,o)===r},includes:function(e){if(ye.IsRegExp(e))throw new TypeError('"includes" does not accept a RegExp');var t,n=ye.ToString(e);return arguments.length>1&&(t=arguments[1]),-1!==C(this,n,t)},codePointAt:function(e){var t=ye.ToString(ye.RequireObjectCoercible(this)),n=ye.ToInteger(e),r=t.length;if(n>=0&&n<r){var i=t.charCodeAt(n);if(i<55296||i>56319||n+1===r)return i;var a=t.charCodeAt(n+1);return a<56320||a>57343?i:1024*(i-55296)+(a-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&se(String.prototype,"includes",De.includes),String.prototype.startsWith&&String.prototype.endsWith){var Re=o(function(){return"/a/".startsWith(/a/)}),Le=s(function(){return!1==="abc".startsWith("a",1/0)});Re&&Le||(se(String.prototype,"startsWith",De.startsWith),se(String.prototype,"endsWith",De.endsWith))}ce&&(s(function(){var e=/a/;return e[Y.match]=!1,"/a/".startsWith(e)})||se(String.prototype,"startsWith",De.startsWith),s(function(){var e=/a/;return e[Y.match]=!1,"/a/".endsWith(e)})||se(String.prototype,"endsWith",De.endsWith),s(function(){var e=/a/;return e[Y.match]=!1,"/a/".includes(e)})||se(String.prototype,"includes",De.includes));m(String.prototype,De);var qe=["\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join(""),Fe=new RegExp("(^["+qe+"]+)|(["+qe+"]+$)","g"),Ve=function(){return ye.ToString(ye.RequireObjectCoercible(this)).replace(Fe,"")},He=["\x85","\u200b","\ufffe"].join(""),ze=new RegExp("["+He+"]","g"),$e=/^[-+]0x[0-9a-f]+$/i,Be=He.trim().length!==He.length;y(String.prototype,"trim",Ve,Be);var We=function(e){return{value:e,done:0===arguments.length}},Ue=function(e){ye.RequireObjectCoercible(e),this._s=ye.ToString(e),this._i=0};Ue.prototype.next=function(){var e=this._s,t=this._i;if(void 0===e||t>=e.length)return this._s=void 0,We();var n,r,i=e.charCodeAt(t);return r=i<55296||i>56319||t+1===e.length?1:(n=e.charCodeAt(t+1))<56320||n>57343?1:2,this._i=t+r,We(e.substr(t,r))},_e(Ue.prototype),_e(String.prototype,function(){return new Ue(this)});var Ge={from:function(e){var t,n,i,a,o,s,c=this;if(arguments.length>1&&(t=arguments[1]),void 0===t)n=!1;else{if(!ye.IsCallable(t))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2]),n=!0}if(void 0!==(ne(e)||ye.GetMethod(e,ue))){o=ye.IsConstructor(c)?Object(new c):[];var u,l,p=ye.GetIterator(e);for(s=0;!1!==(u=ye.IteratorStep(p));){l=u.value;try{n&&(l=void 0===i?t(l,s):r(t,i,l,s)),o[s]=l}catch(e){throw ye.IteratorClose(p,!0),e}s+=1}a=s}else{var f,d=ye.ToObject(e);for(a=ye.ToLength(d.length),o=ye.IsConstructor(c)?Object(new c(a)):new Array(a),s=0;s<a;++s)f=d[s],n&&(f=void 0===i?t(f,s):r(t,i,f,s)),Ne(o,s,f)}return o.length=a,o},of:function(){for(var e=arguments.length,t=this,n=i(t)||!ye.IsCallable(t)?new Array(e):ye.Construct(t,[e]),r=0;r<e;++r)Ne(n,r,arguments[r]);return n.length=e,n}};m(Array,Ge),Ee(Array),m((t=function(e,t){this.i=0,this.array=e,this.kind=t}).prototype,{next:function(){var e=this.i,n=this.array;if(!(this instanceof t))throw new TypeError("Not an ArrayIterator");if(void 0!==n)for(var r=ye.ToLength(n.length);e<r;e++){var i,a=this.kind;return"key"===a?i=e:"value"===a?i=n[e]:"entry"===a&&(i=[e,n[e]]),this.i=e+1,We(i)}return this.array=void 0,We()}}),_e(t.prototype),Array.of===Ge.of||function(){var e=function(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&2===t.length}()||se(Array,"of",Ge.of);var Xe={copyWithin:function(e,t){var n,r=ye.ToObject(this),i=ye.ToLength(r.length),a=ye.ToInteger(e),o=ye.ToInteger(t),s=a<0?D(i+a,0):R(a,i),c=o<0?D(i+o,0):R(o,i);arguments.length>2&&(n=arguments[2]);var u=void 0===n?i:ye.ToInteger(n),l=u<0?D(i+u,0):R(u,i),p=R(l-c,i-s),f=1;for(c<s&&s<c+p&&(f=-1,c+=p-1,s+=p-1);p>0;)c in r?r[s]=r[c]:delete r[s],c+=f,s+=f,p-=1;return r},fill:function(e){var t,n;arguments.length>1&&(t=arguments[1]),arguments.length>2&&(n=arguments[2]);var r=ye.ToObject(this),i=ye.ToLength(r.length);t=ye.ToInteger(void 0===t?0:t);for(var a=(n=ye.ToInteger(void 0===n?i:n))<0?i+n:n,o=t<0?D(i+t,0):R(t,i);o<i&&o<a;++o)r[o]=e;return r},find:function(e){var t=ye.ToObject(this),n=ye.ToLength(t.length);if(!ye.IsCallable(e))throw new TypeError("Array#find: predicate must be a function");for(var i,a=arguments.length>1?arguments[1]:null,o=0;o<n;o++)if(i=t[o],a){if(r(e,a,i,o,t))return i}else if(e(i,o,t))return i},findIndex:function(e){var t=ye.ToObject(this),n=ye.ToLength(t.length);if(!ye.IsCallable(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var i=arguments.length>1?arguments[1]:null,a=0;a<n;a++)if(i){if(r(e,i,t[a],a,t))return a}else if(e(t[a],a,t))return a;return-1},keys:function(){return new t(this,"key")},values:function(){return new t(this,"value")},entries:function(){return new t(this,"entry")}};if(Array.prototype.keys&&!ye.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ye.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ue]&&(m(Array.prototype,{values:Array.prototype[ue]}),oe(Y.unscopables)&&(Array.prototype[Y.unscopables].values=!0)),l&&Array.prototype.values&&"values"!==Array.prototype.values.name){var Ye=Array.prototype.values;se(Array.prototype,"values",function(){return ye.Call(Ye,this,arguments)}),y(Array.prototype,ue,Array.prototype.values,!0)}m(Array.prototype,Xe),1/[!0].indexOf(!0,-0)<0&&y(Array.prototype,"indexOf",function(e){var t=E(this,arguments);return 0===t&&1/t<0?0:t},!0),_e(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&_e(Object.getPrototypeOf([].values()));var Je,Ke=s(function(){return 0===Array.from({length:-1}).length}),Ze=1===(Je=Array.from([0].entries())).length&&i(Je[0])&&0===Je[0][0]&&0===Je[0][1];if(Ke&&Ze||se(Array,"from",Ge.from),!s(function(){return Array.from([0],void 0)})){var Qe=Array.from;se(Array,"from",function(e){return arguments.length>1&&void 0!==arguments[1]?ye.Call(Qe,this,arguments):r(Qe,this,e)})}var et=-(Math.pow(2,32)-1),tt=function(e,t){var n={length:et};return n[t?(n.length>>>0)-1:0]=!0,s(function(){return r(e,n,function(){throw new RangeError("should not reach here")},[]),!0})};if(!tt(Array.prototype.forEach)){var nt=Array.prototype.forEach;se(Array.prototype,"forEach",function(e){return ye.Call(nt,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.map)){var rt=Array.prototype.map;se(Array.prototype,"map",function(e){return ye.Call(rt,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.filter)){var it=Array.prototype.filter;se(Array.prototype,"filter",function(e){return ye.Call(it,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.some)){var at=Array.prototype.some;se(Array.prototype,"some",function(e){return ye.Call(at,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.every)){var ot=Array.prototype.every;se(Array.prototype,"every",function(e){return ye.Call(ot,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.reduce)){var st=Array.prototype.reduce;se(Array.prototype,"reduce",function(e){return ye.Call(st,this.length>=0?this:[],arguments)})}if(!tt(Array.prototype.reduceRight,!0)){var ct=Array.prototype.reduceRight;se(Array.prototype,"reduceRight",function(e){return ye.Call(ct,this.length>=0?this:[],arguments)})}var ut=8!==Number("0o10"),lt=2!==Number("0b10"),pt=h(He,function(e){return 0===Number(e+0+e)});if(ut||lt||pt){var ft=Number,dt=/^0b[01]+$/i,ht=/^0o[0-7]+$/i,yt=dt.test.bind(dt),mt=ht.test.bind(ht),gt=ze.test.bind(ze),vt=$e.test.bind($e),bt=function(){var e=function(t){var n;"string"==typeof(n=arguments.length>0?re(t)?t:function(e){var t;if("function"==typeof e.valueOf&&(t=e.valueOf(),re(t)))return t;if("function"==typeof e.toString&&(t=e.toString(),re(t)))return t;throw new TypeError("No default value")}(t):0)&&(n=ye.Call(Ve,n),yt(n)?n=parseInt(N(n,2),2):mt(n)?n=parseInt(N(n,2),8):(gt(n)||vt(n))&&(n=NaN));var r=this,i=s(function(){return ft.prototype.valueOf.call(r),!0});return r instanceof e&&!i?new ft(n):ft(n)};return e}();Ae(ft,bt,{}),m(bt,{NaN:ft.NaN,MAX_VALUE:ft.MAX_VALUE,MIN_VALUE:ft.MIN_VALUE,NEGATIVE_INFINITY:ft.NEGATIVE_INFINITY,POSITIVE_INFINITY:ft.POSITIVE_INFINITY}),Number=bt,T(j,"Number",bt)}var wt=Math.pow(2,53)-1;m(Number,{MAX_SAFE_INTEGER:wt,MIN_SAFE_INTEGER:-wt,EPSILON:2.220446049250313e-16,parseInt:j.parseInt,parseFloat:j.parseFloat,isFinite:Z,isInteger:function(e){return Z(e)&&ye.ToInteger(e)===e},isSafeInteger:function(e){return Number.isInteger(e)&&q(e)<=Number.MAX_SAFE_INTEGER},isNaN:K}),y(Number,"parseInt",j.parseInt,Number.parseInt!==j.parseInt),1===[,1].find(function(){return!0})&&se(Array.prototype,"find",Xe.find),0!==[,1].findIndex(function(){return!0})&&se(Array.prototype,"findIndex",Xe.findIndex);var Tt,St,xt,kt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),Ot=function(e,t){u&&kt(e,t)&&Object.defineProperty(e,t,{enumerable:!1})},jt=function(){for(var e=Number(this),t=arguments.length,n=t-e,r=new Array(n<0?0:n),i=e;i<t;++i)r[i-e]=arguments[i];return r},At=function(e){return function(t,n){return t[n]=e[n],t}},Ct=function(e,t){var n,r=a(Object(t));return ye.IsCallable(Object.getOwnPropertySymbols)&&(n=d(Object.getOwnPropertySymbols(Object(t)),kt(t))),f(_(r,n||[]),At(t),e)},Et={assign:function(e,t){var n=ye.ToObject(e,"Cannot convert undefined or null to object");return f(ye.Call(jt,1,arguments),Ct,n)},is:function(e,t){return ye.SameValue(e,t)}};if(Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}}()&&se(Object,"assign",Et.assign),m(Object,Et),u){var _t={setPrototypeOf:function(e,t){var n,i=function(e,t){return function(e,t){if(!ye.TypeIsObject(e))throw new TypeError("cannot set prototype on a non-object");if(null!==t&&!ye.TypeIsObject(t))throw new TypeError("can only set prototype to an object or null"+t)}(e,t),r(n,e,t),e};try{n=e.getOwnPropertyDescriptor(e.prototype,"__proto__").set,r(n,{},null)}catch(t){if(e.prototype!=={}.__proto__)return;n=function(e){this.__proto__=e},i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object)};m(Object,_t)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&(Tt=Object.create(null),St=Object.getPrototypeOf,xt=Object.setPrototypeOf,Object.getPrototypeOf=function(e){var t=St(e);return t===Tt?null:t},Object.setPrototypeOf=function(e,t){return xt(e,null===t?Tt:t)},Object.setPrototypeOf.polyfill=!1),!!o(function(){return Object.keys("foo")})){var Nt=Object.keys;se(Object,"keys",function(e){return Nt(ye.ToObject(e))}),a=Object.keys}if(o(function(){return Object.keys(/a/g)})){var Pt=Object.keys;se(Object,"keys",function(e){if(ae(e)){var t=[];for(var n in e)z(e,n)&&P(t,n);return t}return Pt(e)}),a=Object.keys}if(Object.getOwnPropertyNames&&!!o(function(){return Object.getOwnPropertyNames("foo")})){var It="object"===("undefined"==typeof window?"undefined":_typeof(window))?Object.getOwnPropertyNames(window):[],Mt=Object.getOwnPropertyNames;se(Object,"getOwnPropertyNames",function(e){var t=ye.ToObject(e);if("[object Window]"===g(t))try{return Mt(t)}catch(e){return _([],It)}return Mt(t)})}if(Object.getOwnPropertyDescriptor&&!!o(function(){return Object.getOwnPropertyDescriptor("foo","bar")})){var Dt=Object.getOwnPropertyDescriptor;se(Object,"getOwnPropertyDescriptor",function(e,t){return Dt(ye.ToObject(e),t)})}if(Object.seal&&!!o(function(){return Object.seal("foo")})){var Rt=Object.seal;se(Object,"seal",function(e){return ye.TypeIsObject(e)?Rt(e):e})}if(Object.isSealed&&!!o(function(){return Object.isSealed("foo")})){var Lt=Object.isSealed;se(Object,"isSealed",function(e){return!ye.TypeIsObject(e)||Lt(e)})}if(Object.freeze&&!!o(function(){return Object.freeze("foo")})){var qt=Object.freeze;se(Object,"freeze",function(e){return ye.TypeIsObject(e)?qt(e):e})}if(Object.isFrozen&&!!o(function(){return Object.isFrozen("foo")})){var Ft=Object.isFrozen;se(Object,"isFrozen",function(e){return!ye.TypeIsObject(e)||Ft(e)})}if(Object.preventExtensions&&!!o(function(){return Object.preventExtensions("foo")})){var Vt=Object.preventExtensions;se(Object,"preventExtensions",function(e){return ye.TypeIsObject(e)?Vt(e):e})}if(Object.isExtensible&&!!o(function(){return Object.isExtensible("foo")})){var Ht=Object.isExtensible;se(Object,"isExtensible",function(e){return!!ye.TypeIsObject(e)&&Ht(e)})}if(Object.getPrototypeOf&&!!o(function(){return Object.getPrototypeOf("foo")})){var zt=Object.getPrototypeOf;se(Object,"getPrototypeOf",function(e){return zt(ye.ToObject(e))})}var $t,Bt=u&&(($t=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags"))&&ye.IsCallable($t.get));if(u&&!Bt){b(RegExp.prototype,"flags",function(){if(!ye.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e})}var Wt,Ut=u&&s(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),Gt=ce&&u&&((Wt=/./)[Y.match]=!1,RegExp(Wt)===Wt),Xt=s(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),Yt=Xt&&s(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!Xt||!Yt){var Jt=RegExp.prototype.toString;y(RegExp.prototype,"toString",function(){var e=ye.RequireObjectCoercible(this);return ae(e)?r(Jt,e):"/"+fe(e.source)+"/"+fe(e.flags)},!0),x(RegExp.prototype.toString,Jt)}if(u&&(!Ut||Gt)){var Kt=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,Zt=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},Qt=ye.IsCallable(Zt.get)?Zt.get:function(){return this.source},en=RegExp,tn=function e(t,n){var r=ye.IsRegExp(t);return this instanceof e||!r||void 0!==n||t.constructor!==e?ae(t)?new e(ye.Call(Qt,t),void 0===n?ye.Call(Kt,t):n):(r&&(t.source,void 0===n&&t.flags),new en(t,n)):t};Ae(en,tn,{$input:!0}),RegExp=tn,T(j,"RegExp",tn)}if(u){var nn={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};p(a(nn),function(e){e in RegExp&&!(nn[e]in RegExp)&&b(RegExp,nn[e],function(){return RegExp[e]})})}Ee(RegExp);var rn=1/Number.EPSILON,an=Math.pow(2,-23),on=Math.pow(2,127)*(2-an),sn=Math.pow(2,-126),cn=Math.E,un=Math.LOG2E,ln=Math.LOG10E,pn=Number.prototype.clz;delete Number.prototype.clz;var fn={acosh:function(e){var t=Number(e);if(K(t)||e<1)return NaN;if(1===t)return 0;if(t===1/0)return t;var n=1/(t*t);if(t<2)return ee(t-1+H(1-n)*t);var r=t/2;return ee(r+H(1-n)*r-1)+1/un},asinh:function(e){var t=Number(e);if(0===t||!A(t))return t;var n=q(t),r=n*n,i=Q(t);return n<1?i*ee(n+r/(H(r+1)+1)):i*(ee(n/2+H(1+1/r)*n/2-1)+1/un)},atanh:function(e){var t=Number(e);if(0===t)return t;if(-1===t)return-1/0;if(1===t)return 1/0;if(K(t)||t<-1||t>1)return NaN;var n=q(t);return Q(t)*ee(2*n/(1-n))/2},cbrt:function(e){var t=Number(e);if(0===t)return t;var n,r=t<0;return r&&(t=-t),n=t===1/0?1/0:(t/((n=F(V(t)/3))*n)+2*n)/3,r?-n:n},clz32:function(e){var t=Number(e),n=ye.ToUint32(t);return 0===n?32:pn?ye.Call(pn,n):31-L(V(n+.5)*un)},cosh:function(e){var t=Number(e);if(0===t)return 1;if(K(t))return NaN;if(!A(t))return 1/0;var n=F(q(t)-1);return(n+1/(n*cn*cn))*(cn/2)},expm1:function(e){var t=Number(e);if(t===-1/0)return-1;if(!A(t)||0===t)return t;if(q(t)>.5)return F(t)-1;for(var n=t,r=0,i=1;r+n!==r;)r+=n,n*=t/(i+=1);return r},hypot:function(e,t){for(var n=0,r=0,i=0;i<arguments.length;++i){var a=q(Number(arguments[i]));r<a?(n*=r/a*(r/a),n+=1,r=a):n+=a>0?a/r*(a/r):a}return r===1/0?1/0:r*H(n)},log2:function(e){return V(e)*un},log10:function(e){return V(e)*ln},log1p:ee,sign:Q,sinh:function(e){var t=Number(e);if(!A(t)||0===t)return t;var n=q(t);if(n<1){var r=Math.expm1(n);return Q(t)*r*(1+1/(r+1))/2}var i=F(n-1);return Q(t)*(i-1/(i*cn*cn))*(cn/2)},tanh:function(e){var t=Number(e);return K(t)||0===t?t:t>=20?1:t<=-20?-1:(Math.expm1(t)-Math.expm1(-t))/(F(t)+F(-t))},trunc:function(e){var t=Number(e);return t<0?-L(-t):L(t)},imul:function(e,t){var n=ye.ToUint32(e),r=ye.ToUint32(t),i=65535&n,a=65535&r;return i*a+((n>>>16&65535)*a+i*(r>>>16&65535)<<16>>>0)|0},fround:function(e){var t=Number(e);if(0===t||t===1/0||t===-1/0||K(t))return t;var n=Q(t),r=q(t);if(r<sn)return n*(r/sn/an+rn-rn)*sn*an;var i=(1+an/Number.EPSILON)*r,a=i-(i-r);return a>on||K(a)?n*(1/0):n*a}},dn=function(e,t,n){return q(1-e/t)/Number.EPSILON<(n||8)};m(Math,fn),y(Math,"sinh",fn.sinh,Math.sinh(710)===1/0),y(Math,"cosh",fn.cosh,Math.cosh(710)===1/0),y(Math,"log1p",fn.log1p,-1e-17!==Math.log1p(-1e-17)),y(Math,"asinh",fn.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),y(Math,"asinh",fn.asinh,Math.asinh(1e300)===1/0),y(Math,"atanh",fn.atanh,0===Math.atanh(1e-300)),y(Math,"tanh",fn.tanh,-2e-17!==Math.tanh(-2e-17)),y(Math,"acosh",fn.acosh,Math.acosh(Number.MAX_VALUE)===1/0),y(Math,"acosh",fn.acosh,!dn(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON))),y(Math,"cbrt",fn.cbrt,!dn(Math.cbrt(1e-300),1e-100)),y(Math,"sinh",fn.sinh,-2e-17!==Math.sinh(-2e-17));var hn=Math.expm1(10);y(Math,"expm1",fn.expm1,hn>22025.465794806718||hn<22025.465794806718);var yn=Math.round,mn=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),gn=[rn+1,2*rn-1].every(function(e){return Math.round(e)===e});y(Math,"round",function(e){var t=L(e);return e-t<.5?t:-1===t?-0:t+1},!mn||!gn),x(Math.round,yn);var vn=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=fn.imul,x(Math.imul,vn)),2!==Math.imul.length&&se(Math,"imul",function(e,t){return ye.Call(vn,Math,arguments)});var bn,wn,Tn=function(){var e=j.setTimeout;if("function"==typeof e||"object"===(void 0===e?"undefined":_typeof(e))){ye.IsPromise=function(e){return!!ye.TypeIsObject(e)&&void 0!==e._promise};var t,n=function(e){if(!ye.IsConstructor(e))throw new TypeError("Bad promise constructor");var t=this;if(t.resolve=void 0,t.reject=void 0,t.promise=new e(function(e,n){if(void 0!==t.resolve||void 0!==t.reject)throw new TypeError("Bad Promise implementation!");t.resolve=e,t.reject=n}),!ye.IsCallable(t.resolve)||!ye.IsCallable(t.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ye.IsCallable(window.postMessage)&&(t=function(){var e=[];return window.addEventListener("message",function(t){if(t.source===window&&"zero-timeout-message"===t.data){if(t.stopPropagation(),0===e.length)return;M(e)()}},!0),function(t){P(e,t),window.postMessage("zero-timeout-message","*")}});var i,a,o,s,c,u=ye.IsCallable(j.setImmediate)?j.setImmediate:"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process.nextTick?process.nextTick:(i=j.Promise,(a=i&&i.resolve&&i.resolve())&&function(e){return a.then(e)}||(ye.IsCallable(t)?t():function(t){e(t,0)})),l=function(e){return e},p=function(e){throw e},f={},d=function(e,t,n){u(function(){h(e,t,n)})},h=function(e,t,n){var r,i;if(t===f)return e(n);try{r=e(n),i=t.resolve}catch(e){r=e,i=t.reject}i(r)},y=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(d(n.fulfillReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var i=1,a=0;i<r;i++,a+=3)d(n[a+0],n[a+2],t),e[a+0]=void 0,e[a+1]=void 0,e[a+2]=void 0;n.result=t,n.state=1,n.reactionLength=0},g=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(d(n.rejectReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var i=1,a=0;i<r;i++,a+=3)d(n[a+1],n[a+2],t),e[a+0]=void 0,e[a+1]=void 0,e[a+2]=void 0;n.result=t,n.state=2,n.reactionLength=0},v=function(e){var t=!1;return{resolve:function(n){var r;if(!t){if(t=!0,n===e)return g(e,new TypeError("Self resolution"));if(!ye.TypeIsObject(n))return y(e,n);try{r=n.then}catch(t){return g(e,t)}if(!ye.IsCallable(r))return y(e,n);u(function(){w(e,n,r)})}},reject:function(n){if(!t)return t=!0,g(e,n)}}},b=function(e,t,n,i){e===s?r(e,t,n,i,f):r(e,t,n,i)},w=function(e,t,n){var r=v(e),i=r.resolve,a=r.reject;try{b(n,t,i,a)}catch(e){a(e)}},T=c=function(e){if(!(this instanceof c))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!ye.IsCallable(e))throw new TypeError("not a valid resolver");var t=Pe(this,c,o,{_promise:{result:void 0,state:0,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),n=v(t),r=n.reject;try{e(n.resolve,r)}catch(e){r(e)}return t};o=T.prototype;var S=function(e,t,n,r){var i=!1;return function(a){i||(i=!0,t[e]=a,0==--r.count&&(0,n.resolve)(t))}};return m(T,{all:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Promise is not object");var r,i,a=new n(t);try{return function(e,t,n){for(var r,i,a=e.iterator,o=[],s={count:1},c=0;;){try{if(!1===(r=ye.IteratorStep(a))){e.done=!0;break}i=r.value}catch(t){throw e.done=!0,t}o[c]=void 0;var u=t.resolve(i),l=S(c,o,n,s);s.count+=1,b(u.then,u,l,n.reject),c+=1}0==--s.count&&(0,n.resolve)(o);return n.promise}(i={iterator:r=ye.GetIterator(e),done:!1},t,a)}catch(e){var o=e;if(i&&!i.done)try{ye.IteratorClose(r,!0)}catch(e){o=e}return(0,a.reject)(o),a.promise}},race:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Promise is not object");var r,i,a=new n(t);try{return function(e,t,n){for(var r,i,a,o=e.iterator;;){try{if(!1===(r=ye.IteratorStep(o))){e.done=!0;break}i=r.value}catch(t){throw e.done=!0,t}a=t.resolve(i),b(a.then,a,n.resolve,n.reject)}return n.promise}(i={iterator:r=ye.GetIterator(e),done:!1},t,a)}catch(e){var o=e;if(i&&!i.done)try{ye.IteratorClose(r,!0)}catch(e){o=e}return(0,a.reject)(o),a.promise}},reject:function(e){if(!ye.TypeIsObject(this))throw new TypeError("Bad promise constructor");var t=new n(this);return(0,t.reject)(e),t.promise},resolve:function(e){var t=this;if(!ye.TypeIsObject(t))throw new TypeError("Bad promise constructor");if(ye.IsPromise(e)&&e.constructor===t)return e;var r=new n(t);return(0,r.resolve)(e),r.promise}}),m(o,{catch:function(e){return this.then(null,e)},then:function(e,t){if(!ye.IsPromise(this))throw new TypeError("not a promise");var r,i=ye.SpeciesConstructor(this,T);r=arguments.length>2&&arguments[2]===f&&i===T?f:new n(i);var a,o=ye.IsCallable(e)?e:l,s=ye.IsCallable(t)?t:p,c=this._promise;if(0===c.state){if(0===c.reactionLength)c.fulfillReactionHandler0=o,c.rejectReactionHandler0=s,c.reactionCapability0=r;else{var u=3*(c.reactionLength-1);c[u+0]=o,c[u+1]=s,c[u+2]=r}c.reactionLength+=1}else if(1===c.state)a=c.result,d(o,r,a);else{if(2!==c.state)throw new TypeError("unexpected Promise state");a=c.result,d(s,r,a)}return r.promise}}),f=new n(T),s=o.then,T}}();if(j.Promise&&(delete j.Promise.accept,delete j.Promise.defer,delete j.Promise.prototype.chain),"function"==typeof Tn){m(j,{Promise:Tn});var Sn=O(j.Promise,function(e){return e.resolve(42).then(function(){})instanceof e}),xn=!o(function(){return j.Promise.reject(42).then(null,5).then(null,$)}),kn=o(function(){return j.Promise.call(3,$)}),On=function(e){var t=e.resolve(5);t.constructor={};var n=e.resolve(t);try{n.then(null,$).then(null,$)}catch(e){return!0}return t===n}(j.Promise),jn=u&&(bn=0,wn=Object.defineProperty({},"then",{get:function(){bn+=1}}),Promise.resolve(wn),1===bn),An=function e(t){var n=new Promise(t);t(3,function(){}),this.then=n.then,this.constructor=e};An.prototype=Promise.prototype,An.all=Promise.all;var Cn=s(function(){return!!An.all([1,2])});if(Sn&&xn&&kn&&!On&&jn&&!Cn||(Promise=Tn,se(j,"Promise",Tn)),1!==Promise.all.length){var En=Promise.all;se(Promise,"all",function(e){return ye.Call(En,this,arguments)})}if(1!==Promise.race.length){var _n=Promise.race;se(Promise,"race",function(e){return ye.Call(_n,this,arguments)})}if(1!==Promise.resolve.length){var Nn=Promise.resolve;se(Promise,"resolve",function(e){return ye.Call(Nn,this,arguments)})}if(1!==Promise.reject.length){var Pn=Promise.reject;se(Promise,"reject",function(e){return ye.Call(Pn,this,arguments)})}Ot(Promise,"all"),Ot(Promise,"race"),Ot(Promise,"resolve"),Ot(Promise,"reject"),Ee(Promise)}var In,Mn,Dn=function(e){var t=a(f(e,function(e,t){return e[t]=!0,e},{}));return e.join(":")===t.join(":")},Rn=Dn(["z","a","bb"]),Ln=Dn(["z",1,"a","3",2]);if(u){var qn=function(e,t){return t||Rn?he(e)?"^"+ye.ToString(e):"string"==typeof e?"$"+e:"number"==typeof e?Ln?e:"n"+e:"boolean"==typeof e?"b"+e:null:null},Fn=function(){return Object.create?Object.create(null):{}},Vn=function(e,t,n){if(i(n)||ie(n))p(n,function(e){if(!ye.TypeIsObject(e))throw new TypeError("Iterator value "+e+" is not an entry object");t.set(e[0],e[1])});else if(n instanceof e)r(e.prototype.forEach,n,function(e,n){t.set(n,e)});else{var a,o;if(!he(n)){if(o=t.set,!ye.IsCallable(o))throw new TypeError("bad map");a=ye.GetIterator(n)}if(void 0!==a)for(;;){var s=ye.IteratorStep(a);if(!1===s)break;var c=s.value;try{if(!ye.TypeIsObject(c))throw new TypeError("Iterator value "+c+" is not an entry object");r(o,t,c[0],c[1])}catch(e){throw ye.IteratorClose(a,!0),e}}}},Hn=function(e,t,n){if(i(n)||ie(n))p(n,function(e){t.add(e)});else if(n instanceof e)r(e.prototype.forEach,n,function(e){t.add(e)});else{var a,o;if(!he(n)){if(o=t.add,!ye.IsCallable(o))throw new TypeError("bad set");a=ye.GetIterator(n)}if(void 0!==a)for(;;){var s=ye.IteratorStep(a);if(!1===s)break;var c=s.value;try{r(o,t,c)}catch(e){throw ye.IteratorClose(a,!0),e}}}},zn={Map:function(){var e={},t=function(e,t){this.key=e,this.value=t,this.next=null,this.prev=null};t.prototype.isRemoved=function(){return this.key===e};var n,i=function(e,t){if(!ye.TypeIsObject(e)||!function(e){return!!e._es6map}(e))throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ye.ToString(e))},a=function(e,t){i(e,"[[MapIterator]]"),this.head=e._head,this.i=this.head,this.kind=t};_e(a.prototype={isMapIterator:!0,next:function(){if(!this.isMapIterator)throw new TypeError("Not a MapIterator");var e,t=this.i,n=this.kind,r=this.head;if(void 0===this.i)return We();for(;t.isRemoved()&&t!==r;)t=t.prev;for(;t.next!==r;)if(!(t=t.next).isRemoved())return e="key"===n?t.key:"value"===n?t.value:[t.key,t.value],this.i=t,We(e);return this.i=void 0,We()}});var o=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var r=Pe(this,e,n,{_es6map:!0,_head:null,_map:B?new B:null,_size:0,_storage:Fn()}),i=new t(null,null);return i.next=i.prev=i,r._head=i,arguments.length>0&&Vn(e,r,arguments[0]),r};return b(n=o.prototype,"size",function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size}),m(n,{get:function(e){var t;i(this,"get");var n=qn(e,!0);if(null!==n)return(t=this._storage[n])?t.value:void 0;if(this._map)return(t=U.call(this._map,e))?t.value:void 0;for(var r=this._head,a=r;(a=a.next)!==r;)if(ye.SameValueZero(a.key,e))return a.value},has:function(e){i(this,"has");var t=qn(e,!0);if(null!==t)return void 0!==this._storage[t];if(this._map)return G.call(this._map,e);for(var n=this._head,r=n;(r=r.next)!==n;)if(ye.SameValueZero(r.key,e))return!0;return!1},set:function(e,n){i(this,"set");var r,a=this._head,o=a,s=qn(e,!0);if(null!==s){if(void 0!==this._storage[s])return this._storage[s].value=n,this;r=this._storage[s]=new t(e,n),o=a.prev}else this._map&&(G.call(this._map,e)?U.call(this._map,e).value=n:(r=new t(e,n),X.call(this._map,e,r),o=a.prev));for(;(o=o.next)!==a;)if(ye.SameValueZero(o.key,e))return o.value=n,this;return r=r||new t(e,n),ye.SameValue(-0,e)&&(r.key=0),r.next=this._head,r.prev=this._head.prev,r.prev.next=r,r.next.prev=r,this._size+=1,this},delete:function(t){i(this,"delete");var n=this._head,r=n,a=qn(t,!0);if(null!==a){if(void 0===this._storage[a])return!1;r=this._storage[a].prev,delete this._storage[a]}else if(this._map){if(!G.call(this._map,t))return!1;r=U.call(this._map,t).prev,W.call(this._map,t)}for(;(r=r.next)!==n;)if(ye.SameValueZero(r.key,t))return r.key=e,r.value=e,r.prev.next=r.next,r.next.prev=r.prev,this._size-=1,!0;return!1},clear:function(){i(this,"clear"),this._map=B?new B:null,this._size=0,this._storage=Fn();for(var t=this._head,n=t,r=n.next;(n=r)!==t;)n.key=e,n.value=e,r=n.next,n.next=n.prev=t;t.next=t.prev=t},keys:function(){return i(this,"keys"),new a(this,"key")},values:function(){return i(this,"values"),new a(this,"value")},entries:function(){return i(this,"entries"),new a(this,"key+value")},forEach:function(e){i(this,"forEach");for(var t=arguments.length>1?arguments[1]:null,n=this.entries(),a=n.next();!a.done;a=n.next())t?r(e,t,a.value[1],a.value[0],this):e(a.value[1],a.value[0],this)}}),_e(n,n.entries),o}(),Set:function(){var e,t=function(e,t){if(!ye.TypeIsObject(e)||!function(e){return e._es6set&&void 0!==e._storage}(e))throw new TypeError("Set.prototype."+t+" called on incompatible receiver "+ye.ToString(e))},n=function t(){if(!(this instanceof t))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var n=Pe(this,t,e,{_es6set:!0,"[[SetData]]":null,_storage:Fn()});if(!n._es6set)throw new TypeError("bad set");return arguments.length>0&&Hn(t,n,arguments[0]),n};e=n.prototype;var i=function(e){if(!e["[[SetData]]"]){var t=new zn.Map;e["[[SetData]]"]=t,p(a(e._storage),function(e){var n=function(e){var t=e;if("^null"===t)return null;if("^undefined"!==t){var n=t.charAt(0);return"$"===n?N(t,1):"n"===n?+N(t,1):"b"===n?"btrue"===t:+t}}(e);t.set(n,n)}),e["[[SetData]]"]=t}e._storage=null};b(n.prototype,"size",function(){return t(this,"size"),this._storage?a(this._storage).length:(i(this),this["[[SetData]]"].size)}),m(n.prototype,{has:function(e){var n;return t(this,"has"),this._storage&&null!==(n=qn(e))?!!this._storage[n]:(i(this),this["[[SetData]]"].has(e))},add:function(e){var n;return t(this,"add"),this._storage&&null!==(n=qn(e))?(this._storage[n]=!0,this):(i(this),this["[[SetData]]"].set(e,e),this)},delete:function(e){var n;if(t(this,"delete"),this._storage&&null!==(n=qn(e))){var r=z(this._storage,n);return delete this._storage[n]&&r}return i(this),this["[[SetData]]"].delete(e)},clear:function(){t(this,"clear"),this._storage&&(this._storage=Fn()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return t(this,"values"),i(this),new o(this["[[SetData]]"].values())},entries:function(){return t(this,"entries"),i(this),new o(this["[[SetData]]"].entries())},forEach:function(e){t(this,"forEach");var n=arguments.length>1?arguments[1]:null,a=this;i(a),this["[[SetData]]"].forEach(function(t,i){n?r(e,n,i,i,a):e(i,i,a)})}}),y(n.prototype,"keys",n.prototype.values,!0),_e(n.prototype,n.prototype.values);var o=function(e){this.it=e};return o.prototype={isSetIterator:!0,next:function(){if(!this.isSetIterator)throw new TypeError("Not a SetIterator");return this.it.next()}},_e(o.prototype),n}()};if(j.Set&&!Set.prototype.delete&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys)&&(j.Set=zn.Set),j.Map||j.Set){s(function(){return 2===new Map([[1,2]]).get(1)})||(j.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new B;return arguments.length>0&&Vn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,j.Map.prototype),t},j.Map.prototype=k(B.prototype),y(j.Map.prototype,"constructor",j.Map,!0),x(j.Map,B));var $n=new Map,Bn=((Mn=new Map([[1,0],[2,0],[3,0],[4,0]])).set(-0,Mn),Mn.get(0)===Mn&&Mn.get(-0)===Mn&&Mn.has(0)&&Mn.has(-0)),Wn=$n.set(1,2)===$n;Bn&&Wn||se(Map.prototype,"set",function(e,t){return r(X,this,0===e?0:e,t),this}),Bn||(m(Map.prototype,{get:function(e){return r(U,this,0===e?0:e)},has:function(e){return r(G,this,0===e?0:e)}},!0),x(Map.prototype.get,U),x(Map.prototype.has,G));var Un=new Set,Gn=Set.prototype.delete&&Set.prototype.add&&Set.prototype.has&&((In=Un).delete(0),In.add(-0),!In.has(0)),Xn=Un.add(1)===Un;if(!Gn||!Xn){var Yn=Set.prototype.add;Set.prototype.add=function(e){return r(Yn,this,0===e?0:e),this},x(Set.prototype.add,Yn)}if(!Gn){var Jn=Set.prototype.has;Set.prototype.has=function(e){return r(Jn,this,0===e?0:e)},x(Set.prototype.has,Jn);var Kn=Set.prototype.delete;Set.prototype.delete=function(e){return r(Kn,this,0===e?0:e)},x(Set.prototype.delete,Kn)}var Zn=O(j.Map,function(e){var t=new e([]);return t.set(42,42),t instanceof e}),Qn=Object.setPrototypeOf&&!Zn,er=function(){try{return!(j.Map()instanceof j.Map)}catch(e){return e instanceof TypeError}}();0===j.Map.length&&!Qn&&er||(j.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new B;return arguments.length>0&&Vn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},j.Map.prototype=B.prototype,y(j.Map.prototype,"constructor",j.Map,!0),x(j.Map,B));var tr=O(j.Set,function(e){var t=new e([]);return t.add(42,42),t instanceof e}),nr=Object.setPrototypeOf&&!tr,rr=function(){try{return!(j.Set()instanceof j.Set)}catch(e){return e instanceof TypeError}}();if(0!==j.Set.length||nr||!rr){var ir=j.Set;j.Set=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');var t=new ir;return arguments.length>0&&Hn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},j.Set.prototype=ir.prototype,y(j.Set.prototype,"constructor",j.Set,!0),x(j.Set,ir)}var ar=new j.Map,or=!s(function(){return ar.keys().next().done});if(("function"!=typeof j.Map.prototype.clear||0!==(new j.Set).size||0!==ar.size||"function"!=typeof j.Map.prototype.keys||"function"!=typeof j.Set.prototype.keys||"function"!=typeof j.Map.prototype.forEach||"function"!=typeof j.Set.prototype.forEach||c(j.Map)||c(j.Set)||"function"!=typeof ar.keys().next||or||!Zn)&&m(j,{Map:zn.Map,Set:zn.Set},!0),j.Set.prototype.keys!==j.Set.prototype.values&&y(j.Set.prototype,"keys",j.Set.prototype.values,!0),_e(Object.getPrototypeOf((new j.Map).keys())),_e(Object.getPrototypeOf((new j.Set).keys())),l&&"has"!==j.Set.prototype.has.name){var sr=j.Set.prototype.has;se(j.Set.prototype,"has",function(e){return r(sr,this,e)})}}m(j,zn),Ee(j.Map),Ee(j.Set)}var cr=function(e){if(!ye.TypeIsObject(e))throw new TypeError("target must be an object")},ur={apply:function(){return ye.Call(ye.Call,null,arguments)},construct:function(e,t){if(!ye.IsConstructor(e))throw new TypeError("First argument must be a constructor.");var n=arguments.length>2?arguments[2]:e;if(!ye.IsConstructor(n))throw new TypeError("new.target must be a constructor.");return ye.Construct(e,t,n,"internal")},deleteProperty:function(e,t){if(cr(e),u){var n=Object.getOwnPropertyDescriptor(e,t);if(n&&!n.configurable)return!1}return delete e[t]},has:function(e,t){return cr(e),t in e}};Object.getOwnPropertyNames&&Object.assign(ur,{ownKeys:function(e){cr(e);var t=Object.getOwnPropertyNames(e);return ye.IsCallable(Object.getOwnPropertySymbols)&&I(t,Object.getOwnPropertySymbols(e)),t}});var lr=function(e){return!o(e)};if(Object.preventExtensions&&Object.assign(ur,{isExtensible:function(e){return cr(e),Object.isExtensible(e)},preventExtensions:function(e){return cr(e),lr(function(){return Object.preventExtensions(e)})}}),u){var pr=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(!r){var i=Object.getPrototypeOf(e);if(null===i)return;return pr(i,t,n)}return"value"in r?r.value:r.get?ye.Call(r.get,n):void 0},fr=function(e,t,n,i){var a=Object.getOwnPropertyDescriptor(e,t);if(!a){var o=Object.getPrototypeOf(e);if(null!==o)return fr(o,t,n,i);a={value:void 0,writable:!0,enumerable:!0,configurable:!0}}return"value"in a?!!a.writable&&(!!ye.TypeIsObject(i)&&(Object.getOwnPropertyDescriptor(i,t)?pe.defineProperty(i,t,{value:n}):pe.defineProperty(i,t,{value:n,writable:!0,enumerable:!0,configurable:!0}))):!!a.set&&(r(a.set,i,n),!0)};Object.assign(ur,{defineProperty:function(e,t,n){return cr(e),lr(function(){return Object.defineProperty(e,t,n)})},getOwnPropertyDescriptor:function(e,t){return cr(e),Object.getOwnPropertyDescriptor(e,t)},get:function(e,t){cr(e);var n=arguments.length>2?arguments[2]:e;return pr(e,t,n)},set:function(e,t,n){cr(e);var r=arguments.length>3?arguments[3]:e;return fr(e,t,n,r)}})}if(Object.getPrototypeOf){var dr=Object.getPrototypeOf;ur.getPrototypeOf=function(e){return cr(e),dr(e)}}if(Object.setPrototypeOf&&ur.getPrototypeOf){Object.assign(ur,{setPrototypeOf:function(e,t){if(cr(e),null!==t&&!ye.TypeIsObject(t))throw new TypeError("proto must be an object or null");return t===pe.getPrototypeOf(e)||!(pe.isExtensible&&!pe.isExtensible(e))&&(!function(e,t){for(var n=t;n;){if(e===n)return!0;n=ur.getPrototypeOf(n)}return!1}(e,t)&&(Object.setPrototypeOf(e,t),!0))}})}Object.keys(ur).forEach(function(e){!function(e,t){ye.IsCallable(j.Reflect[e])?s(function(){return j.Reflect[e](1),j.Reflect[e](NaN),j.Reflect[e](!0),!0})&&se(j.Reflect,e,t):y(j.Reflect,e,t)}(e,ur[e])});var hr=j.Reflect.getPrototypeOf;if(l&&hr&&"getPrototypeOf"!==hr.name&&se(j.Reflect,"getPrototypeOf",function(e){return r(hr,j.Reflect,e)}),j.Reflect.setPrototypeOf&&s(function(){return j.Reflect.setPrototypeOf(1,{}),!0})&&se(j.Reflect,"setPrototypeOf",ur.setPrototypeOf),j.Reflect.defineProperty&&(s(function(){var e=!j.Reflect.defineProperty(1,"test",{value:1}),t="function"!=typeof Object.preventExtensions||!j.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})||se(j.Reflect,"defineProperty",ur.defineProperty)),j.Reflect.construct&&(s(function(){var e=function(){};return j.Reflect.construct(function(){},[],e)instanceof e})||se(j.Reflect,"construct",ur.construct)),"Invalid Date"!==String(new Date(NaN))){var yr=Date.prototype.toString;se(Date.prototype,"toString",function(){var e=+this;return e!=e?"Invalid Date":ye.Call(yr,this)})}var mr={anchor:function(e){return ye.CreateHTML(this,"a","name",e)},big:function(){return ye.CreateHTML(this,"big","","")},blink:function(){return ye.CreateHTML(this,"blink","","")},bold:function(){return ye.CreateHTML(this,"b","","")},fixed:function(){return ye.CreateHTML(this,"tt","","")},fontcolor:function(e){return ye.CreateHTML(this,"font","color",e)},fontsize:function(e){return ye.CreateHTML(this,"font","size",e)},italics:function(){return ye.CreateHTML(this,"i","","")},link:function(e){return ye.CreateHTML(this,"a","href",e)},small:function(){return ye.CreateHTML(this,"small","","")},strike:function(){return ye.CreateHTML(this,"strike","","")},sub:function(){return ye.CreateHTML(this,"sub","","")},sup:function(){return ye.CreateHTML(this,"sup","","")}};p(Object.keys(mr),function(e){var t=String.prototype[e],n=!1;if(ye.IsCallable(t)){var i=r(t,"",' " '),a=_([],i.match(/"/g)).length;n=i!==i.toLowerCase()||a>2}else n=!0;n&&se(String.prototype,e,mr[e])});var gr=function(){if(!ce)return!1;var e="object"===("undefined"==typeof JSON?"undefined":_typeof(JSON))&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!e)return!1;if(void 0!==e(Y()))return!0;if("[null]"!==e([Y()]))return!0;var t={a:Y()};return t[Y()]=!0,"{}"!==e(t)}(),vr=s(function(){return!ce||"{}"===JSON.stringify(Object(Y()))&&"[{}]"===JSON.stringify([Object(Y())])});if(gr||!vr){var br=JSON.stringify;se(JSON,"stringify",function(e){if("symbol"!==(void 0===e?"undefined":_typeof(e))){var t;arguments.length>1&&(t=arguments[1]);var n=[e];if(i(t))n.push(t);else{var a=ye.IsCallable(t)?t:null;n.push(function(e,t){var n=a?r(a,this,e,t):t;if("symbol"!==(void 0===n?"undefined":_typeof(n)))return oe(n)?At({})(n):n})}return arguments.length>2&&n.push(arguments[2]),br.apply(this,n)}})}return j},"function"==typeof define&&define.amd?define("es6-shim",factory):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=factory():root.returnExports=factory(),function(e,t){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=[],r=Object.getPrototypeOf,i=n.slice,a=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},o=n.push,s=n.indexOf,c={},u=c.toString,l=c.hasOwnProperty,p=l.toString,f=p.call(Object),d={},h=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},y=function(e){return null!=e&&e===e.window},m=e.document,g={type:!0,src:!0,nonce:!0,noModule:!0};function v(e,t,n){var r,i,a=(n=n||m).createElement("script");if(a.text=e,t)for(r in g)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&a.setAttribute(r,i);n.head.appendChild(a).parentNode.removeChild(a)}function b(e){return null==e?e+"":"object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e?c[u.call(e)]||"object":void 0===e?"undefined":_typeof(e)}var w=function e(t,n){return new e.fn.init(t,n)};function T(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!h(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}w.fn=w.prototype={jquery:"3.5.1",constructor:w,length:0,toArray:function(){return i.call(this)},get:function(e){return null==e?i.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,a,o=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"===(void 0===o?"undefined":_typeof(o))||h(o)||(o={}),s===c&&(o=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(u&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(n=o[t],a=i&&!Array.isArray(n)?[]:i||w.isPlainObject(n)?n:{},i=!1,o[t]=w.extend(u,a,r)):void 0!==r&&(o[t]=r));return o},w.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==u.call(e))&&(!(t=r(e))||"function"==typeof(n=l.call(t,"constructor")&&t.constructor)&&p.call(n)===f)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){v(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(T(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?w.merge(n,"string"==typeof e?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:s.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,a=e.length,o=!n;i<a;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(T(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a(s)},guid:1,support:d}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){c["[object "+t+"]"]=t.toLowerCase()});var S=function(e){var t,n,r,i,a,o,s,c,u,l,p,f,d,h,y,m,g,v,b,w="sizzle"+1*new Date,T=e.document,S=0,x=0,k=ce(),O=ce(),j=ce(),A=ce(),C=function(e,t){return e===t&&(p=!0),0},E={}.hasOwnProperty,_=[],N=_.pop,P=_.push,I=_.push,M=_.slice,D=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",q="(?:\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+L+"*("+q+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+L+"*\\]",V=":("+q+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",H=new RegExp(L+"+","g"),z=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),$=new RegExp("^"+L+"*,"+L+"*"),B=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),W=new RegExp(L+"|>"),U=new RegExp(V),G=new RegExp("^"+q+"$"),X={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=function(){f()},oe=we(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{I.apply(_=M.call(T.childNodes),T.childNodes),_[T.childNodes.length].nodeType}catch(e){I={apply:_.length?function(e,t){P.apply(e,M.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var a,s,u,l,p,h,g,v=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&(f(t),t=t||d,y)){if(11!==T&&(p=Q.exec(e)))if(a=p[1]){if(9===T){if(!(u=t.getElementById(a)))return r;if(u.id===a)return r.push(u),r}else if(v&&(u=v.getElementById(a))&&b(t,u)&&u.id===a)return r.push(u),r}else{if(p[2])return I.apply(r,t.getElementsByTagName(e)),r;if((a=p[3])&&n.getElementsByClassName&&t.getElementsByClassName)return I.apply(r,t.getElementsByClassName(a)),r}if(n.qsa&&!A[e+" "]&&(!m||!m.test(e))&&(1!==T||"object"!==t.nodeName.toLowerCase())){if(g=e,v=t,1===T&&(W.test(e)||B.test(e))){for((v=ee.test(e)&&ge(t.parentNode)||t)===t&&n.scope||((l=t.getAttribute("id"))?l=l.replace(re,ie):t.setAttribute("id",l=w)),s=(h=o(e)).length;s--;)h[s]=(l?"#"+l:":scope")+" "+be(h[s]);g=h.join(",")}try{return I.apply(r,v.querySelectorAll(g)),r}catch(t){A(e,!0)}finally{l===w&&t.removeAttribute("id")}}}return c(e.replace(z,"$1"),t,r,i)}function ce(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ue(e){return e[w]=!0,e}function le(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function pe(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ye(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ue(function(t){return t=+t,ue(function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},a=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},f=se.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:T;return o!=d&&9===o.nodeType&&o.documentElement?(h=(d=o).documentElement,y=!a(d),T!=d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ae,!1):i.attachEvent&&i.attachEvent("onunload",ae)),n.scope=le(function(e){return h.appendChild(e).appendChild(d.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(d.getElementsByClassName),n.getById=le(function(e){return h.appendChild(e).id=w,!d.getElementsByName||!d.getElementsByName(w).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var n,r,i,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(i=t.getElementsByName(e),r=0;a=i[r++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&y)return t.getElementsByClassName(e)},g=[],m=[],(n.qsa=Z.test(d.querySelectorAll))&&(le(function(e){var t;h.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+L+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),(t=d.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+L+"*name"+L+"*="+L+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Z.test(v=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le(function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),g.push("!=",V)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Z.test(h.compareDocumentPosition),b=t||Z.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return p=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==d||e.ownerDocument==T&&b(T,e)?-1:t==d||t.ownerDocument==T&&b(T,t)?1:l?D(l,e)-D(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return p=!0,0;var n,r=0,i=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!i||!a)return e==d?-1:t==d?1:i?-1:a?1:l?D(l,e)-D(l,t):0;if(i===a)return fe(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?fe(o[r],s[r]):o[r]==T?-1:s[r]==T?1:0},d):d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(f(e),n.matchesSelector&&y&&!A[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=v.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){A(t,!0)}return se(t,d,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=d&&f(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=d&&f(e);var i=r.attrHandle[t.toLowerCase()],a=i&&E.call(r.attrHandle,t.toLowerCase())?i(e,t,!y):void 0;return void 0!==a?a:n.attributes||!y?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,a=0;if(p=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(C),p){for(;t=e[a++];)t===e[a]&&(i=r.push(a));for(;i--;)e.splice(r[i],1)}return l=null,e},i=se.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=se.selectors={cacheLength:50,createPseudo:ue,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&U.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&k(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var u,l,p,f,d,h,y=a!==o?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),v=!c&&!s,b=!1;if(m){if(a){for(;y;){for(f=t;f=f[y];)if(s?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;h=y="only"===e&&!h&&"nextSibling"}return!0}if(h=[o?m.firstChild:m.lastChild],o&&v){for(b=(d=(u=(l=(p=(f=m)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===S&&u[1])&&u[2],f=d&&m.childNodes[d];f=++d&&f&&f[y]||(b=d=0)||h.pop();)if(1===f.nodeType&&++b&&f===t){l[e]=[S,d,b];break}}else if(v&&(b=d=(u=(l=(p=(f=t)[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===S&&u[1]),!1===b)for(;(f=++d&&f&&f[y]||(b=d=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++b||(v&&((l=(p=f[w]||(f[w]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]=[S,b]),f!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ue(function(e,n){for(var r,a=i(e,t),o=a.length;o--;)e[r=D(e,a[o])]=!(n[r]=a[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ue(function(e){var t=[],n=[],r=s(e.replace(z,"$1"));return r[w]?ue(function(e,t,n,i){for(var a,o=r(e,null,i,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,i,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}}),has:ue(function(e){return function(t){return se(e,t).length>0}}),contains:ue(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}}),lang:ue(function(e){return G.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=y?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ye(!1),disabled:ye(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,n){return[n<0?n+t:n]}),even:me(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:me(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:me(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:me(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function ve(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function we(e,t,n){var r=t.dir,i=t.next,a=i||r,o=n&&"parentNode"===a,s=x++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,c){var u,l,p,f=[S,s];if(c){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,c))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(l=(p=t[w]||(t[w]={}))[t.uniqueID]||(p[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=l[a])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(l[a]=f,f[2]=e(t,n,c))return!0}return!1}}function Te(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Se(e,t,n,r,i){for(var a,o=[],s=0,c=e.length,u=null!=t;s<c;s++)(a=e[s])&&(n&&!n(a,r,i)||(o.push(a),u&&t.push(s)));return o}function xe(e,t,n,r,i,a){return r&&!r[w]&&(r=xe(r)),i&&!i[w]&&(i=xe(i,a)),ue(function(a,o,s,c){var u,l,p,f=[],d=[],h=o.length,y=a||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!a&&t?y:Se(y,f,e,s,c),g=n?i||(a?e:h||r)?[]:o:m;if(n&&n(m,g,s,c),r)for(u=Se(g,d),r(u,[],s,c),l=u.length;l--;)(p=u[l])&&(g[d[l]]=!(m[d[l]]=p));if(a){if(i||e){if(i){for(u=[],l=g.length;l--;)(p=g[l])&&u.push(m[l]=p);i(null,g=[],u,c)}for(l=g.length;l--;)(p=g[l])&&(u=i?D(a,p):f[l])>-1&&(a[u]=!(o[u]=p))}}else g=Se(g===o?g.splice(h,g.length):g),i?i(null,o,g,c):I.apply(o,g)})}function ke(e){for(var t,n,i,a=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],c=o?1:0,l=we(function(e){return e===t},s,!0),p=we(function(e){return D(t,e)>-1},s,!0),f=[function(e,n,r){var i=!o&&(r||n!==u)||((t=n).nodeType?l(e,n,r):p(e,n,r));return t=null,i}];c<a;c++)if(n=r.relative[e[c].type])f=[we(Te(f),n)];else{if((n=r.filter[e[c].type].apply(null,e[c].matches))[w]){for(i=++c;i<a&&!r.relative[e[i].type];i++);return xe(c>1&&Te(f),c>1&&be(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(z,"$1"),n,c<i&&ke(e.slice(c,i)),i<a&&ke(e=e.slice(i)),i<a&&be(e))}f.push(n)}return Te(f)}return ve.prototype=r.filters=r.pseudos,r.setFilters=new ve,o=se.tokenize=function(e,t){var n,i,a,o,s,c,u,l=O[e+" "];if(l)return t?0:l.slice(0);for(s=e,c=[],u=r.preFilter;s;){for(o in n&&!(i=$.exec(s))||(i&&(s=s.slice(i[0].length)||s),c.push(a=[])),n=!1,(i=B.exec(s))&&(n=i.shift(),a.push({value:n,type:i[0].replace(z," ")}),s=s.slice(n.length)),r.filter)!(i=X[o].exec(s))||u[o]&&!(i=u[o](i))||(n=i.shift(),a.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):O(e,c).slice(0)},s=se.compile=function(e,t){var n,i=[],a=[],s=j[e+" "];if(!s){for(t||(t=o(e)),n=t.length;n--;)(s=ke(t[n]))[w]?i.push(s):a.push(s);(s=j(e,function(e,t){var n=t.length>0,i=e.length>0,a=function(a,o,s,c,l){var p,h,m,g=0,v="0",b=a&&[],w=[],T=u,x=a||i&&r.find.TAG("*",l),k=S+=null==T?1:Math.random()||.1,O=x.length;for(l&&(u=o==d||o||l);v!==O&&null!=(p=x[v]);v++){if(i&&p){for(h=0,o||p.ownerDocument==d||(f(p),s=!y);m=e[h++];)if(m(p,o||d,s)){c.push(p);break}l&&(S=k)}n&&((p=!m&&p)&&g--,a&&b.push(p))}if(g+=v,n&&v!==g){for(h=0;m=t[h++];)m(b,w,o,s);if(a){if(g>0)for(;v--;)b[v]||w[v]||(w[v]=N.call(c));w=Se(w)}I.apply(c,w),l&&!a&&w.length>0&&g+t.length>1&&se.uniqueSort(c)}return l&&(S=k,u=T),b};return n?ue(a):a}(a,i))).selector=e}return s},c=se.select=function(e,t,n,i){var a,c,u,l,p,f="function"==typeof e&&e,d=!i&&o(e=f.selector||e);if(n=n||[],1===d.length){if((c=d[0]=d[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&9===t.nodeType&&y&&r.relative[c[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(a=X.needsContext.test(e)?0:c.length;a--&&(u=c[a],!r.relative[l=u.type]);)if((p=r.find[l])&&(i=p(u.matches[0].replace(te,ne),ee.test(c[0].type)&&ge(t.parentNode)||t))){if(c.splice(a,1),!(e=i.length&&be(c)))return I.apply(n,i),n;break}}return(f||s(e,d))(i,t,!y,n,!t||ee.test(e)&&ge(t.parentNode)||t),n},n.sortStable=w.split("").sort(C).join("")===w,n.detectDuplicates=!!p,f(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||pe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(e);w.find=S,w.expr=S.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=S.uniqueSort,w.text=S.getText,w.isXMLDoc=S.isXML,w.contains=S.contains,w.escapeSelector=S.escape;var x=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},k=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},O=w.expr.match.needsContext;function j(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function C(e,t,n){return h(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return s.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&O.test(e)?w(e):e||[],!1).length}});var E,_=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||E,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:_.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),A.test(r[1])&&w.isPlainObject(t))for(r in t)h(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=m.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):h(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,E=w(m);var N=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,a=[],o="string"!=typeof e&&w(e);if(!O.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?w.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?s.call(w(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,n){return x(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,n){return x(e,"nextSibling",n)},prevUntil:function(e,t,n){return x(e,"previousSibling",n)},siblings:function(e){return k((e.parentNode||{}).firstChild,e)},children:function(e){return k(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(j(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(P[e]||w.uniqueSort(i),N.test(e)&&i.reverse()),this.pushStack(i)}});var M=/[^\x20\t\r\n\f]+/g;function D(e){return e}function R(e){throw e}function L(e,t,n,r){var i;try{e&&h(i=e.promise)?i.call(e).done(t).fail(n):e&&h(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}(e):w.extend({},e);var t,n,r,i,a=[],o=[],s=-1,c=function(){for(i=i||e.once,r=t=!0;o.length;s=-1)for(n=o.shift();++s<a.length;)!1===a[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=a.length,n=!1);e.memory||(n=!1),t=!1,i&&(a=n?[]:"")},u={add:function(){return a&&(n&&!t&&(s=a.length-1,o.push(n)),function t(n){w.each(n,function(n,r){h(r)?e.unique&&u.has(r)||a.push(r):r&&r.length&&"string"!==b(r)&&t(r)})}(arguments),n&&!t&&c()),this},remove:function(){return w.each(arguments,function(e,t){for(var n;(n=w.inArray(t,a,n))>-1;)a.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=o=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=o=[],n||t||(a=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=h(e[r[4]])&&e[r[4]];a[r[1]](function(){var e=i&&i.apply(this,arguments);e&&h(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var a=0;function o(t,n,r,i){return function(){var s=this,c=arguments,u=function(){var e,u;if(!(t<a)){if((e=r.apply(s,c))===n.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e)&&e.then,h(u)?i?u.call(e,o(a,n,D,i),o(a,n,R,i)):(a++,u.call(e,o(a,n,D,i),o(a,n,R,i),o(a,n,D,n.notifyWith))):(r!==D&&(s=void 0,c=[e]),(i||n.resolveWith)(s,c))}},l=i?u:function(){try{u()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,l.stackTrace),t+1>=a&&(r!==R&&(s=void 0,c=[e]),n.rejectWith(s,c))}};t?l():(w.Deferred.getStackHook&&(l.stackTrace=w.Deferred.getStackHook()),e.setTimeout(l))}}return w.Deferred(function(e){n[0][3].add(o(0,e,h(i)?i:D,e.notifyWith)),n[1][3].add(o(0,e,h(t)?t:D)),n[2][3].add(o(0,e,h(r)?r:R))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},a={};return w.each(n,function(e,t){var o=t[2],s=t[5];i[t[1]]=o.add,s&&o.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),o.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=o.fireWith}),i.promise(a),t&&t.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),a=i.call(arguments),o=w.Deferred(),s=function(e){return function(n){r[e]=this,a[e]=arguments.length>1?i.call(arguments):n,--t||o.resolveWith(r,a)}};if(t<=1&&(L(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||h(a[n]&&a[n].then)))return o.then();for(;n--;)L(a[n],s(n),o.reject);return o.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&q.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var F=w.Deferred();function V(){m.removeEventListener("DOMContentLoaded",V),e.removeEventListener("load",V),w.ready()}w.fn.ready=function(e){return F.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(m,[w]))}}),w.ready.then=F.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?e.setTimeout(w.ready):(m.addEventListener("DOMContentLoaded",V),e.addEventListener("load",V));var H=function e(t,n,r,i,a,o,s){var c=0,u=t.length,l=null==r;if("object"===b(r))for(c in a=!0,r)e(t,n,c,r[c],!0,o,s);else if(void 0!==i&&(a=!0,h(i)||(s=!0),l&&(s?(n.call(t,i),n=null):(l=n,n=function(e,t,n){return l.call(w(e),n)})),n))for(;c<u;c++)n(t[c],r,s?i:i.call(t[c],c,n(t[c],r)));return a?t:l?n.call(t):u?n(t[0],r):o},z=/^-ms-/,$=/-([a-z])/g;function B(e,t){return t.toUpperCase()}function W(e){return e.replace(z,"ms-").replace($,B)}var U=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=w.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},U(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[W(t)]=n;else for(r in t)i[W(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][W(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(W):(t=W(t))in r?[t]:t.match(M)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var X=new G,Y=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:J.test(e)?JSON.parse(e):e)}(n)}catch(e){}Y.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return Y.hasData(e)||X.hasData(e)},data:function(e,t,n){return Y.access(e,t,n)},removeData:function(e,t){Y.remove(e,t)},_data:function(e,t,n){return X.access(e,t,n)},_removeData:function(e,t){X.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(i=Y.get(a),1===a.nodeType&&!X.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=W(r.slice(5)),Z(a,r,i[r]));X.set(a,"hasDataAttrs",!0)}return i}return"object"===(void 0===e?"undefined":_typeof(e))?this.each(function(){Y.set(this,e)}):H(this,function(t){var n;if(a&&void 0===t)return void 0!==(n=Y.get(a,e))?n:void 0!==(n=Z(a,e))?n:void 0;this.each(function(){Y.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Y.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=X.get(e,t),n&&(!r||Array.isArray(n)?r=X.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),a=w._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,function(){w.dequeue(e,t)},a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return X.get(e,n)||X.access(e,n,{empty:w.Callbacks("once memory").add(function(){X.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=X.get(a[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ee=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],ne=m.documentElement,re=function(e){return w.contains(e.ownerDocument,e)},ie={composed:!0};ne.getRootNode&&(re=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(ie)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&re(e)&&"none"===w.css(e,"display")};function oe(e,t,n,r){var i,a,o=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},c=s(),u=n&&n[3]||(w.cssNumber[t]?"":"px"),l=e.nodeType&&(w.cssNumber[t]||"px"!==u&&+c)&&ee.exec(w.css(e,t));if(l&&l[3]!==u){for(c/=2,u=u||l[3],l=+c||1;o--;)w.style(e,t,l+u),(1-a)*(1-(a=s()/c||.5))<=0&&(o=0),l/=a;l*=2,w.style(e,t,l+u),n=n||[]}return n&&(l=+l||+c||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=l,r.end=i)),i}var se={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=se[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),se[r]=i,i)}function ue(e,t){for(var n,r,i=[],a=0,o=e.length;a<o;a++)(r=e[a]).style&&(n=r.style.display,t?("none"===n&&(i[a]=X.get(r,"display")||null,i[a]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[a]=ce(r))):"none"!==n&&(i[a]="none",X.set(r,"display",n)));for(a=0;a<o;a++)null!=i[a]&&(e[a].style.display=i[a]);return e}w.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?w(this).show():w(this).hide()})}});var le,pe,fe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;le=m.createDocumentFragment().appendChild(m.createElement("div")),(pe=m.createElement("input")).setAttribute("type","radio"),pe.setAttribute("checked","checked"),pe.setAttribute("name","t"),le.appendChild(pe),d.checkClone=le.cloneNode(!0).cloneNode(!0).lastChild.checked,le.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!le.cloneNode(!0).lastChild.defaultValue,le.innerHTML="<option></option>",d.option=!!le.lastChild;var ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function me(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&j(e,t)?w.merge([e],n):n}function ge(e,t){for(var n=0,r=e.length;n<r;n++)X.set(e[n],"globalEval",!t||X.get(t[n],"globalEval"))}ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td,d.option||(ye.optgroup=ye.option=[1,"<select multiple='multiple'>","</select>"]);var ve=/<|&#?\w+;/;function be(e,t,n,r,i){for(var a,o,s,c,u,l,p=t.createDocumentFragment(),f=[],d=0,h=e.length;d<h;d++)if((a=e[d])||0===a)if("object"===b(a))w.merge(f,a.nodeType?[a]:a);else if(ve.test(a)){for(o=o||p.appendChild(t.createElement("div")),s=(de.exec(a)||["",""])[1].toLowerCase(),c=ye[s]||ye._default,o.innerHTML=c[1]+w.htmlPrefilter(a)+c[2],l=c[0];l--;)o=o.lastChild;w.merge(f,o.childNodes),(o=p.firstChild).textContent=""}else f.push(t.createTextNode(a));for(p.textContent="",d=0;a=f[d++];)if(r&&w.inArray(a,r)>-1)i&&i.push(a);else if(u=re(a),o=me(p.appendChild(a),"script"),u&&ge(o),n)for(l=0;a=o[l++];)he.test(a.type||"")&&n.push(a);return p}var we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function ke(){return!1}function Oe(e,t){return e===function(){try{return m.activeElement}catch(e){}}()==("focus"===t)}function je(e,t,n,r,i,a){var o,s;if("object"===(void 0===t?"undefined":_typeof(t))){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)je(e,s,n,r,t[s],a);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ke;else if(!i)return e;return 1===a&&(o=i,(i=function(e){return w().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}function Ae(e,t,n){n?(X.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var r,a,o=X.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=i.call(arguments),X.set(this,t,o),r=n(this,t),this[t](),o!==(a=X.get(this,t))||r?X.set(this,t,!1):a={},o!==a)return e.stopImmediatePropagation(),e.preventDefault(),a.value}else o.length&&(X.set(this,t,{value:w.event.trigger(w.extend(o[0],w.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===X.get(e,t)&&w.event.add(e,t,xe)}w.event={global:{},add:function(e,t,n,r,i){var a,o,s,c,u,l,p,f,d,h,y,m=X.get(e);if(U(e))for(n.handler&&(n=(a=n).handler,i=a.selector),i&&w.find.matchesSelector(ne,i),n.guid||(n.guid=w.guid++),(c=m.events)||(c=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(M)||[""]).length;u--;)d=y=(s=Se.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),d&&(p=w.event.special[d]||{},d=(i?p.delegateType:p.bindType)||d,p=w.event.special[d]||{},l=w.extend({type:d,origType:y,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(".")},a),(f=c[d])||((f=c[d]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,r,h,o)||e.addEventListener&&e.addEventListener(d,o)),p.add&&(p.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),w.event.global[d]=!0)},remove:function(e,t,n,r,i){var a,o,s,c,u,l,p,f,d,h,y,m=X.hasData(e)&&X.get(e);if(m&&(c=m.events)){for(u=(t=(t||"").match(M)||[""]).length;u--;)if(d=y=(s=Se.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),d){for(p=w.event.special[d]||{},f=c[d=(r?p.delegateType:p.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=f.length;a--;)l=f[a],!i&&y!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(a,1),l.selector&&f.delegateCount--,p.remove&&p.remove.call(e,l));o&&!f.length&&(p.teardown&&!1!==p.teardown.call(e,h,m.handle)||w.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)w.event.remove(e,d+t[u],n,r,!0);w.isEmptyObject(c)&&X.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,a,o,s=new Array(arguments.length),c=w.event.fix(e),u=(X.get(this,"events")||Object.create(null))[c.type]||[],l=w.event.special[c.type]||{};for(s[0]=c,t=1;t<arguments.length;t++)s[t]=arguments[t];if(c.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,c)){for(o=w.event.handlers.call(this,c,u),t=0;(i=o[t++])&&!c.isPropagationStopped();)for(c.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==a.namespace&&!c.rnamespace.test(a.namespace)||(c.handleObj=a,c.data=a.data,void 0!==(r=((w.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,s))&&!1===(c.result=r)&&(c.preventDefault(),c.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,r,i,a,o,s=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(a=[],o={},n=0;n<c;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?w(i,this).index(u)>-1:w.find(i,this,null,[u]).length),o[i]&&a.push(r);a.length&&s.push({elem:u,handlers:a})}return u=this,c<t.length&&s.push({elem:u,handlers:t.slice(c)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:h(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return fe.test(t.type)&&t.click&&j(t,"input")&&Ae(t,"click",xe),!1},trigger:function(e){var t=this||e;return fe.test(t.type)&&t.click&&j(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&j(t,"input")&&X.get(t,"click")||j(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(e,t){w.event.special[e]={setup:function(){return Ae(this,e,Oe),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||w.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return je(this,e,t,n,r)},one:function(e,t,n,r){return je(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===(void 0===e?"undefined":_typeof(e))){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var Ce=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,_e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return j(e,"table")&&j(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ie(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,i,a,o,s;if(1===t.nodeType){if(X.hasData(e)&&(s=X.get(e).events))for(i in X.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)w.event.add(t,i,s[i][n]);Y.hasData(e)&&(a=Y.access(e),o=w.extend({},a),Y.set(t,o))}}function De(e,t,n,r){t=a(t);var i,o,s,c,u,l,p=0,f=e.length,y=f-1,m=t[0],g=h(m);if(g||f>1&&"string"==typeof m&&!d.checkClone&&Ee.test(m))return e.each(function(i){var a=e.eq(i);g&&(t[0]=m.call(this,i,a.html())),De(a,t,n,r)});if(f&&(o=(i=be(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(c=(s=w.map(me(i,"script"),Pe)).length;p<f;p++)u=i,p!==y&&(u=w.clone(u,!0,!0),c&&w.merge(s,me(u,"script"))),n.call(e[p],u,p);if(c)for(l=s[s.length-1].ownerDocument,w.map(s,Ie),p=0;p<c;p++)u=s[p],he.test(u.type||"")&&!X.access(u,"globalEval")&&w.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?w._evalUrl&&!u.noModule&&w._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):v(u.textContent.replace(_e,""),u,l))}return e}function Re(e,t,n){for(var r,i=t?w.filter(t,e):e,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||w.cleanData(me(r)),r.parentNode&&(n&&re(r)&&ge(me(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,a,o,s,c,u,l=e.cloneNode(!0),p=re(e);if(!(d.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(o=me(l),r=0,i=(a=me(e)).length;r<i;r++)s=a[r],c=o[r],void 0,"input"===(u=c.nodeName.toLowerCase())&&fe.test(s.type)?c.checked=s.checked:"input"!==u&&"textarea"!==u||(c.defaultValue=s.defaultValue);if(t)if(n)for(a=a||me(e),o=o||me(l),r=0,i=a.length;r<i;r++)Me(a[r],o[r]);else Me(e,l);return(o=me(l,"script")).length>0&&ge(o,!p&&me(e,"script")),l},cleanData:function(e){for(var t,n,r,i=w.event.special,a=0;void 0!==(n=e[a]);a++)if(U(n)){if(t=n[X.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[X.expando]=void 0}n[Y.expando]&&(n[Y.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return H(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return De(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)})},prepend:function(){return De(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return De(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return H(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ce.test(e)&&!ye[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return De(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(me(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),a=i.length-1,s=0;s<=a;s++)n=s===a?this:this.clone(!0),w(i[s])[t](n),o.apply(r,n.get());return this.pushStack(r)}});var Le=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),qe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Fe=function(e,t,n){var r,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=a[i];return r},Ve=new RegExp(te.join("|"),"i");function He(e,t,n){var r,i,a,o,s=e.style;return(n=n||qe(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||re(e)||(o=w.style(e,t)),!d.pixelBoxStyles()&&Le.test(o)&&Ve.test(t)&&(r=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=i,s.maxWidth=a)),void 0!==o?o+"":o}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ne.appendChild(u).appendChild(l);var t=e.getComputedStyle(l);r="1%"!==t.top,c=12===n(t.marginLeft),l.style.right="60%",o=36===n(t.right),i=36===n(t.width),l.style.position="absolute",a=12===n(l.offsetWidth/3),ne.removeChild(u),l=null}}function n(e){return Math.round(parseFloat(e))}var r,i,a,o,s,c,u=m.createElement("div"),l=m.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===l.style.backgroundClip,w.extend(d,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),c},scrollboxSize:function(){return t(),a},reliableTrDimensions:function(){var t,n,r,i;return null==s&&(t=m.createElement("table"),n=m.createElement("tr"),r=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px",n.style.height="1px",r.style.height="9px",ne.appendChild(t).appendChild(n).appendChild(r),i=e.getComputedStyle(n),s=parseInt(i.height)>3,ne.removeChild(t)),s}}))}();var $e=["Webkit","Moz","ms"],Be=m.createElement("div").style,We={};function Ue(e){var t=w.cssProps[e]||We[e];return t||(e in Be?e:We[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=$e.length;n--;)if((e=$e[n]+t)in Be)return e}(e)||e)}var Ge=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"};function Ke(e,t,n){var r=ee.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,a){var o="width"===t?1:0,s=0,c=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=w.css(e,n+te[o],!0,i)),r?("content"===n&&(c-=w.css(e,"padding"+te[o],!0,i)),"margin"!==n&&(c-=w.css(e,"border"+te[o]+"Width",!0,i))):(c+=w.css(e,"padding"+te[o],!0,i),"padding"!==n?c+=w.css(e,"border"+te[o]+"Width",!0,i):s+=w.css(e,"border"+te[o]+"Width",!0,i));return!r&&a>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-c-s-.5))||0),c}function Qe(e,t,n){var r=qe(e),i=(!d.boxSizingReliable()||n)&&"border-box"===w.css(e,"boxSizing",!1,r),a=i,o=He(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Le.test(o)){if(!n)return o;o="auto"}return(!d.boxSizingReliable()&&i||!d.reliableTrDimensions()&&j(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===w.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===w.css(e,"boxSizing",!1,r),(a=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+Ze(e,t,n||(i?"border":"content"),a,r,o)+"px"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=He(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,s=W(t),c=Xe.test(t),u=e.style;if(c||(t=Ue(s)),o=w.cssHooks[t]||w.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:u[t];"string"===(a=void 0===n?"undefined":_typeof(n))&&(i=ee.exec(n))&&i[1]&&(n=oe(e,t,i),a="number"),null!=n&&n==n&&("number"!==a||c||(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),d.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(c?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var i,a,o,s=W(t);return Xe.test(t)||(t=Ue(s)),(o=w.cssHooks[t]||w.cssHooks[s])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=He(e,t,r)),"normal"===i&&t in Je&&(i=Je[t]),""===n||n?(a=parseFloat(i),!0===n||isFinite(a)?a||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!Ge.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Qe(e,t,r):Fe(e,Ye,function(){return Qe(e,t,r)})},set:function(e,n,r){var i,a=qe(e),o=!d.scrollboxSize()&&"absolute"===a.position,s=(o||r)&&"border-box"===w.css(e,"boxSizing",!1,a),c=r?Ze(e,t,r,s,a):0;return s&&o&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-Ze(e,t,"border",!1,a)-.5)),c&&(i=ee.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(0,n,c)}}}),w.cssHooks.marginLeft=ze(d.reliableMarginLeft,function(e,t){if(t)return(parseFloat(He(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+te[r]+t]=a[r]||a[r-2]||a[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return H(this,function(e,t,n){var r,i,a={},o=0;if(Array.isArray(t)){for(r=qe(e),i=t.length;o<i;o++)a[t[o]]=w.css(e,t[o],!1,r);return a}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}}),w.Tween=et,et.prototype={constructor:et,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(w.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}},et.prototype.init.prototype=et.prototype,et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[Ue(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},et.propHooks.scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=et.prototype.init,w.fx.step={};var tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function at(){nt&&(!1===m.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,w.fx.interval),w.fx.tick())}function ot(){return e.setTimeout(function(){tt=void 0}),tt=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=te[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),a=0,o=i.length;a<o;a++)if(r=i[a].call(n,t,e))return r}function ut(e,t,n){var r,i,a=0,o=ut.prefilters.length,s=w.Deferred().always(function(){delete c.elem}),c=function(){if(i)return!1;for(var t=tt||ot(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),a=0,o=u.tweens.length;a<o;a++)u.tweens[a].run(r);return s.notifyWith(e,[u,r,n]),r<1&&o?n:(o||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:tt||ot(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),l=u.props;for(!function(e,t){var n,r,i,a,o;for(n in e)if(i=t[r=W(n)],a=e[n],Array.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(o=w.cssHooks[r])&&"expand"in o)for(n in a=o.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=i);else t[r]=i}(l,u.opts.specialEasing);a<o;a++)if(r=ut.prefilters[a].call(u,e,l,u.opts))return h(r.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return w.map(l,ct,u),h(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return oe(n.elem,e,ee.exec(t),n),n}]},tweener:function(e,t){h(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,a,o,s,c,u,l,p="width"in t||"height"in t,f=this,d={},h=e.style,y=e.nodeType&&ae(e),m=X.get(e,"fxshow");for(r in n.queue||(null==(o=w._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,w.queue(e,"fx").length||o.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],a=a||"toggle"===i,i===(y?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;y=!0}d[r]=m&&m[r]||w.style(e,r)}if((c=!w.isEmptyObject(t))||!w.isEmptyObject(d))for(r in p&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(u=m&&m.display)&&(u=X.get(e,"display")),"none"===(l=w.css(e,"display"))&&(u?l=u:(ue([e],!0),u=e.style.display||u,l=w.css(e,"display"),ue([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===w.css(e,"float")&&(c||(f.done(function(){h.display=u}),null==u&&(l=h.display,u="none"===l?"":l)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),c=!1,d)c||(m?"hidden"in m&&(y=m.hidden):m=X.access(e,"fxshow",{display:u}),a&&(m.hidden=!y),y&&ue([e],!0),f.done(function(){for(r in y||ue([e]),X.remove(e,"fxshow"),d)w.style(e,r,d[r])})),c=ct(y?m[r]:0,r,f),r in m||(m[r]=c.start,y&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"===(void 0===e?"undefined":_typeof(e))?w.extend({},e):{complete:n||!n&&t||h(e)&&e,duration:e,easing:n&&t||t&&!h(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){h(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),a=w.speed(t,n,r),o=function(){var t=ut(this,w.extend({},e),a);(i||X.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",a=w.timers,o=X.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&it.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=X.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=w.timers,o=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(st(t,!0),e,r,i)}}),w.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),tt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){nt||(nt=!0,at())},w.fx.stop=function(){nt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx&&w.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=m.createElement("input"),t=m.createElement("select").appendChild(m.createElement("option"));e.type="checkbox",d.checkOn=""!==e.value,d.optSelected=t.selected,(e=m.createElement("input")).value="t",e.type="radio",d.radioValue="t"===e.value}();var lt,pt=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return H(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?w.prop(e,t,n):(1===a&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!d.radioValue&&"radio"===t&&j(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),lt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=pt[t]||w.find.attr;pt[t]=function(e,t,r){var i,a,o=t.toLowerCase();return r||(a=pt[o],pt[o]=i,i=null!=n(e,t,r)?o:null,pt[o]=a),i}});var ft=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(M)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}w.fn.extend({prop:function(e,t){return H(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,n,r,i,a,o,s,c=0;if(h(e))return this.each(function(t){w(this).addClass(e.call(this,t,yt(this)))});if((t=mt(e)).length)for(;n=this[c++];)if(i=yt(n),r=1===n.nodeType&&" "+ht(i)+" "){for(o=0;a=t[o++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,a,o,s,c=0;if(h(e))return this.each(function(t){w(this).removeClass(e.call(this,t,yt(this)))});if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[c++];)if(i=yt(n),r=1===n.nodeType&&" "+ht(i)+" "){for(o=0;a=t[o++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=void 0===e?"undefined":_typeof(e),r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):h(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,yt(this),t),t)}):this.each(function(){var t,i,a,o;if(r)for(i=0,a=w(this),o=mt(e);t=o[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=yt(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":X.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ht(yt(n))+" ").indexOf(t)>-1)return!0;return!1}});var gt=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=h(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(gt,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:ht(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,a=e.selectedIndex,o="select-one"===e.type,s=o?null:[],c=o?a+1:i.length;for(r=a<0?c:o?a:0;r<c;r++)if(((n=i[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!j(n.parentNode,"optgroup"))){if(t=w(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,a=w.makeArray(t),o=i.length;o--;)((r=i[o]).selected=w.inArray(w.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},d.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),d.focusin="onfocusin"in e;var vt=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,r,i){var a,o,s,c,u,p,f,d,g=[r||m],v=l.call(t,"type")?t.type:t,b=l.call(t,"namespace")?t.namespace.split("."):[];if(o=d=s=r=r||m,3!==r.nodeType&&8!==r.nodeType&&!vt.test(v+w.event.triggered)&&(v.indexOf(".")>-1&&(v=(b=v.split(".")).shift(),b.sort()),u=v.indexOf(":")<0&&"on"+v,(t=t[w.expando]?t:new w.Event(v,"object"===(void 0===t?"undefined":_typeof(t))&&t)).isTrigger=i?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:w.makeArray(n,[t]),f=w.event.special[v]||{},i||!f.trigger||!1!==f.trigger.apply(r,n))){if(!i&&!f.noBubble&&!y(r)){for(c=f.delegateType||v,vt.test(c+v)||(o=o.parentNode);o;o=o.parentNode)g.push(o),s=o;s===(r.ownerDocument||m)&&g.push(s.defaultView||s.parentWindow||e)}for(a=0;(o=g[a++])&&!t.isPropagationStopped();)d=o,t.type=a>1?c:f.bindType||v,(p=(X.get(o,"events")||Object.create(null))[t.type]&&X.get(o,"handle"))&&p.apply(o,n),(p=u&&o[u])&&p.apply&&U(o)&&(t.result=p.apply(o,n),!1===t.result&&t.preventDefault());return t.type=v,i||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(g.pop(),n)||!U(r)||u&&h(r[v])&&!y(r)&&((s=r[u])&&(r[u]=null),w.event.triggered=v,t.isPropagationStopped()&&d.addEventListener(v,bt),r[v](),t.isPropagationStopped()&&d.removeEventListener(v,bt),w.event.triggered=void 0,s&&(r[u]=s)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),d.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=X.access(r,t);i||r.addEventListener(e,n,!0),X.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=X.access(r,t)-1;i?X.access(r,t,i):(r.removeEventListener(e,n,!0),X.remove(r,t))}}});var wt=e.location,Tt={guid:Date.now()},St=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var xt=/\[\]$/,kt=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function At(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||xt.test(e)?r(e,i):At(e+"["+("object"===(void 0===i?"undefined":_typeof(i))&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==b(t))r(e,t);else for(i in t)At(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=h(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&jt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!fe.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var Ct=/%20/g,Et=/#.*$/,_t=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,It=/^\/\//,Mt={},Dt={},Rt="*/".concat("*"),Lt=m.createElement("a");function qt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,a=t.toLowerCase().match(M)||[];if(h(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ft(e,t,n,r){var i={},a=e===Dt;function o(s){var c;return i[s]=!0,w.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||a||i[u]?a?!(c=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),c}return o(t.dataTypes[0])||!i["*"]&&o("*")}function Vt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}Lt.href=wt.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Vt(Vt(e,w.ajaxSettings),t):Vt(w.ajaxSettings,e)},ajaxPrefilter:qt(Mt),ajaxTransport:qt(Dt),ajax:function(t,n){"object"===(void 0===t?"undefined":_typeof(t))&&(n=t,t=void 0),n=n||{};var r,i,a,o,s,c,u,l,p,f,d=w.ajaxSetup({},n),h=d.context||d,y=d.context&&(h.nodeType||h.jquery)?w(h):w.event,g=w.Deferred(),v=w.Callbacks("once memory"),b=d.statusCode||{},T={},S={},x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(u){if(!o)for(o={};t=Nt.exec(a);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?a:null},setRequestHeader:function(e,t){return null==u&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,T[e]=t),this},overrideMimeType:function(e){return null==u&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)k.always(e[k.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||x;return r&&r.abort(t),O(0,t),this}};if(g.promise(k),d.url=((t||d.url||wt.href)+"").replace(It,wt.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(M)||[""],null==d.crossDomain){c=m.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Lt.protocol+"//"+Lt.host!=c.protocol+"//"+c.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=w.param(d.data,d.traditional)),Ft(Mt,d,n,k),u)return k;for(p in(l=w.event&&d.global)&&0==w.active++&&w.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Pt.test(d.type),i=d.url.replace(Et,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Ct,"+")):(f=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(St.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(_t,"$1"),f=(St.test(i)?"&":"?")+"_="+Tt.guid+++f),d.url=i+f),d.ifModified&&(w.lastModified[i]&&k.setRequestHeader("If-Modified-Since",w.lastModified[i]),w.etag[i]&&k.setRequestHeader("If-None-Match",w.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&k.setRequestHeader("Content-Type",d.contentType),k.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Rt+"; q=0.01":""):d.accepts["*"]),d.headers)k.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(!1===d.beforeSend.call(h,k,d)||u))return k.abort();if(x="abort",v.add(d.complete),k.done(d.success),k.fail(d.error),r=Ft(Dt,d,n,k)){if(k.readyState=1,l&&y.trigger("ajaxSend",[k,d]),u)return k;d.async&&d.timeout>0&&(s=e.setTimeout(function(){k.abort("timeout")},d.timeout));try{u=!1,r.send(T,O)}catch(e){if(u)throw e;O(-1,e)}}else O(-1,"No Transport");function O(t,n,o,c){var p,f,m,T,S,x=n;u||(u=!0,s&&e.clearTimeout(s),r=void 0,a=c||"",k.readyState=t>0?4:0,p=t>=200&&t<300||304===t,o&&(T=function(e,t,n){for(var r,i,a,o,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){c.unshift(i);break}if(c[0]in n)a=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){a=i;break}o||(o=i)}a=a||o}if(a)return a!==c[0]&&c.unshift(a),n[a]}(d,k,o)),!p&&w.inArray("script",d.dataTypes)>-1&&(d.converters["text script"]=function(){}),T=function(e,t,n,r){var i,a,o,s,c,u={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(a=l.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=a,a=l.shift())if("*"===a)a=c;else if("*"!==c&&c!==a){if(!(o=u[c+" "+a]||u["* "+a]))for(i in u)if((s=i.split(" "))[1]===a&&(o=u[c+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[i]:!0!==u[i]&&(a=s[0],l.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+c+" to "+a}}}return{state:"success",data:t}}(d,T,k,p),p?(d.ifModified&&((S=k.getResponseHeader("Last-Modified"))&&(w.lastModified[i]=S),(S=k.getResponseHeader("etag"))&&(w.etag[i]=S)),204===t||"HEAD"===d.type?x="nocontent":304===t?x="notmodified":(x=T.state,f=T.data,p=!(m=T.error))):(m=x,!t&&x||(x="error",t<0&&(t=0))),k.status=t,k.statusText=(n||x)+"",p?g.resolveWith(h,[f,x,k]):g.rejectWith(h,[k,x,m]),k.statusCode(b),b=void 0,l&&y.trigger(p?"ajaxSuccess":"ajaxError",[k,d,p?f:m]),v.fireWith(h,[k,x]),l&&(y.trigger("ajaxComplete",[k,d]),--w.active||w.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return h(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),w._evalUrl=function(e,t,n){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,n)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(h(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return h(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=h(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},zt=w.ajaxSettings.xhr();d.cors=!!zt&&"withCredentials"in zt,d.ajax=zt=!!zt,w.ajaxTransport(function(t){var n,r;if(d.cors||zt&&!t.crossDomain)return{send:function(i,a){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];for(o in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(o,i[o]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(Ht[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),m.head.appendChild(t[0])},abort:function(){n&&n()}}});var $t,Bt=[],Wt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Bt.pop()||w.expando+"_"+Tt.guid++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var i,a,o,s=!1!==t.jsonp&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=h(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Wt,"$1"+i):!1!==t.jsonp&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||w.error(i+" was not called"),o[0]},t.dataTypes[0]="json",a=e[i],e[i]=function(){o=arguments},r.always(function(){void 0===a?w(e).removeProp(i):e[i]=a,t[i]&&(t.jsonpCallback=n.jsonpCallback,Bt.push(i)),o&&h(a)&&a(o[0]),o=a=void 0}),"script"}),d.createHTMLDocument=(($t=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===$t.childNodes.length),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(d.createHTMLDocument?((r=(t=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,t.head.appendChild(r)):t=m),a=!n&&[],(i=A.exec(e))?[t.createElement(i[1])]:(i=be([e],t,a),a&&a.length&&w(a).remove(),w.merge([],i.childNodes)));var r,i,a},w.fn.load=function(e,t,n){var r,i,a,o=this,s=e.indexOf(" ");return s>-1&&(r=ht(e.slice(s)),e=e.slice(0,s)),h(t)?(n=t,t=void 0):t&&"object"===(void 0===t?"undefined":_typeof(t))&&(i="POST"),o.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){a=arguments,o.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,a,o,s,c,u=w.css(e,"position"),l=w(e),p={};"static"===u&&(e.style.position="relative"),s=l.offset(),a=w.css(e,"top"),c=w.css(e,"left"),("absolute"===u||"fixed"===u)&&(a+c).indexOf("auto")>-1?(o=(r=l.position()).top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(c)||0),h(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+o),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):("number"==typeof p.top&&(p.top+="px"),"number"==typeof p.left&&(p.left+="px"),l.css(p))}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||ne})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return H(this,function(e,r,i){var a;if(y(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===i)return a?a[t]:e[r];a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=ze(d.pixelPosition,function(e,n){if(n)return n=He(e,t),Le.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,a){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===a?"margin":"border");return H(this,function(t,n,i){var a;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,o?i:void 0,o)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var Ut=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var n,r,a;if("string"==typeof t&&(n=e[t],t=e,e=n),h(e))return r=i.call(arguments,2),(a=function(){return e.apply(t||this,r.concat(i.call(arguments)))}).guid=e.guid=e.guid||w.guid++,a},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=j,w.isFunction=h,w.isWindow=y,w.camelCase=W,w.type=b,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},w.trim=function(e){return null==e?"":(e+"").replace(Ut,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var Gt=e.jQuery,Xt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Xt),t&&e.jQuery===w&&(e.jQuery=Gt),w},void 0===t&&(e.jQuery=e.$=w),w}),define("jqueryplugins",["jquery"],function(e){e.prototype.extend({popAttr:function(e){var t=this.attr(e);return this.removeAttr(e),t},popData:function(e){var t=this.data(e);return this.removeData(e),t},tag:function(){return this[0]&&this[0].tagName&&this[0].tagName.toLowerCase()},textNodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";return 1===this.length&&this[0]instanceof Text?[this[0]]:this.get().concat(this.contents().get(),this.find(e).contents().get()).filter(function(e,t,n){return e instanceof Text&&n.indexOf(e)===t}).sort(function(e,t){return 2&e.compareDocumentPosition(t)?1:-1})},findAndFilter:function(e){return this.filter(e).add(this.find(e))}})}),function(){var e=void 0,t={};function n(){for(var e=0;e<arguments.length;e++)for(var t in arguments[e])this[t]=arguments[e][t]}function r(e,t){e.childAt=e.childAt||{};for(var n=t.start;n<t.end;n+=1)e.childAt[n]=t}function i(e,t,n,r){return!(e.canFollow&&!(e.canFollow.indexOf(n&&n.type)>-1)||e.cannotFollow&&(-1!==e.cannotFollow.indexOf(n&&n.type)||e.cannotFollow.indexOf("text")>-1&&r)||e.peek&&e.peek.toLowerCase()!==t.slice(0,e.peek.length).toLowerCase())}function a(e){for(var n=e.innerText,r=[],a=0,s=a,c=n.length,u=null;a<c;){for(var l=n.slice(a),p=(r.length?r[0]:e).innerMode,f=0,d=p.length;f<d;f+=1){var h=t[p[f]];if(i(h,l,u,s<a)&&h.pattern.test(l)){var y=h.pattern.exec(l),m=h.fn(y),g=!1,v=0;if(m.matches){for(;v<r.length;v+=1){var b=r[v].type;if(b in m.matches){g=!0;break}0===b.indexOf("verbatim")&&(b="verbatimOpener"),m.cannotCross&&m.cannotCross.indexOf(b)>-1&&(v=r.length-1)}if(v>=r.length&&!m.isFront)continue}s<a&&e.addChild({type:"text",text:n.slice(s,a),innerMode:p}),s=a+=(u=e.addChild(m)).text.length,g&&(o(e,u,r[v]),r=r.slice(v+1)),u.isFrontToken()&&r.unshift(u);break}}f===d&&(a+=1,null===u&&(u={type:"text"}))}for(s<a&&e.addChild({type:"text",text:n.slice(s,a),innerMode:(r.length?r[0]:e).innerMode});r.length>0;)r.shift().demote();return e}function o(e,t,n){var i=e.children.indexOf(t),a=e.children.indexOf(n);t.children=e.children.splice(a+1,i-(a+1)),t.children.forEach(function(e){r(t,e)}),t.type=t.matches[n.type],t.innerText="";for(var o=0,s=t.children.length;o<s;o++)t.innerText+=t.children[o].text;t.start=n.start,t.text=n.text+t.innerText+t.text,Object.keys(n).forEach(function(e){Object.hasOwnProperty.call(t,e)||(t[e]=n[e])}),t.isFront&&(t.isFront=!1),e.children.splice(a,1),r(e,t)}n.prototype={constructor:n,addChild:function(e){var t=this.lastChildEnd(),i=new n({start:t,end:e.text&&t+e.text.length,children:[]},e);return i.innerText&&a(i),this.children.push(i),r(this,i),i},firstChild:function(){return this.children&&this.children[0]||null},lastChild:function(){return this.children&&this.children[this.children.length-1]||null},lastChildEnd:function(){var e=this.lastChild();return e?e.end:this.start+Math.max(0,this.text.indexOf(this.innerText))},tokenAt:function(e){if(e<this.start||e>=this.end)return null;if(this.childAt)return this.childAt[e]&&this.childAt[e].tokenAt(e)||this;if(this.children.length)for(var t=0;t<this.children.length;t+=1){var n=this.children[t].tokenAt(e);if(n)return n}return this},pathAt:function(e){if(e<this.start||e>=this.end)return[];if(this.childAt)return(this.childAt[e]&&this.childAt[e].pathAt(e)||[]).concat(this);var t=[];if(this.children.length)for(var n=0;n<this.children.length;n+=1){var r=this.children[n].pathAt(e);if(r.length){t.concat(r);break}}return t.concat(this)},nearestTokenAt:function(e){return e<this.start||e>=this.end?null:this.children?this.children.reduce(function(t,n){return t||(e>=n.start&&e<n.end?n:null)},null):this},everyLeaf:function(e){return this.children&&0!==this.children.length?this.children.reduce(function(t,n){return t&&n.everyLeaf(e)},!0):!!e(this)},isWhitespace:function(){return this.everyLeaf(function(e){return"whitespace"===e.type||!e.text.trim()})},isFrontToken:function(){return this.isFront},isBackToken:function(){return"matches"in this},demote:function(){this.type="text"},error:function(e){this.type="error",this.message=e},toString:function(){var e=this.type+"("+this.start+"\u2192"+this.end+")";return this.children&&this.children.length>0&&(e+="["+this.children+"]"),e}},e={lex:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start";return a(new n({type:"root",start:r||0,end:t.length,text:t,innerText:t,children:[],childAt:{},innerMode:e.modes[i]}))},rules:t,modes:{}},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e:"function"==typeof define&&define.amd?define("lexer",[],function(){return e}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Lexer=e):this.TwineLexer=e}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){var e;function t(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))?(Object.keys(e).forEach(function(n){e[n]=t(e[n])}),e):(e+"").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function n(e){return function(){return"("+e+Array.apply(0,arguments).join("|")+")"}}var r=n("?:"),i=n("?!"),a=n("?="),o="[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",s=o.replace("*","+"),c="\\b",u="[\\w\\-\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",l=u.replace("\\-",""),p=r("\\n","$"),f=o+"(\\*+)"+s,d=o+"((?:0\\.)+)"+s,h=o+"-{3,}"+o+p,y=o+"(==+>|<=+|=+><=+|<==+>)"+o+p,m=o+"(=+\\|+|\\|+=+|=+\\|+=+|\\|=+\\|)"+o+p,g={opener:"\\[\\[(?!\\[)",text:"("+function(){return"[^"+Array.apply(0,arguments).map(t).join("")+"]*"}("]")+")",rightSeparator:r("\\->","\\|"),leftSeparator:"<\\-",closer:"\\]\\]",legacySeparator:"\\|",legacyText:"("+r("[^\\|\\]]","\\]"+i("\\]"))+"+)"},v=l+"*"+l.replace("\\w","a-zA-Z")+l+"*",b="\\$("+v+")",w="_("+v+")",T="'s"+s+"("+v+")",S="("+v+")"+s+"of"+c+i("it\\b"),x="'s"+s,k=r("it","time","visits?","exits?","pos")+c,O="its"+s+"("+v+")",j="its"+s,A="("+v+")"+s+"of"+s+"it"+c,C="of\\b"+s+"it"+c,E={opener:"\\(",name:"("+r("\\$","_")+"?"+u+"+):"+i("\\/"),closer:"\\)"},_=r("=<","=>","[gl]te?\\b","n?eq\\b","isnot\\b","are\\b","x\\b","isa\\b","or"+s+"a"+c),N="[a-zA-Z][\\w\\-]*",P="(?:\"[^\"]*\"|'[^']*'|[^'\">])*?",I="\\|("+u+"+)(>|\\))",M="(<|\\()("+u+"+)\\|",D="\\b(\\d+(?:\\.\\d+)?(?:[eE][+\\-]?\\d+)?)"+i("m?s")+c;g.main=g.opener+r(g.text+g.rightSeparator,g.text.replace("*","*?")+g.leftSeparator)+g.text,e={upperLetter:"[A-Z\\u00c0-\\u00de\\u0150\\u0170]",lowerLetter:"[a-z0-9_\\-\\u00df-\\u00ff\\u0151\\u0171]",anyLetter:u,anyLetterStrict:l,whitespace:s,escapedLine:"\\\\\\n\\\\?|\\n\\\\",br:"\\n(?!\\\\)",commentFront:"\x3c!--",commentBack:"--\x3e",tag:"<\\/?"+N+P+">",tagPeek:"<",scriptStyleTag:"<("+r("script","style","textarea")+")"+P+">[^]*?<\\/\\1>",scriptStyleTagOpener:"<",url:"("+r("https?","mailto","javascript","ftp","data")+":\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])",bullet:"\\*",hr:h,heading:"[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*(#{1,6})[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",align:y,column:m,bulleted:f,numbered:d,strikeOpener:t("~~"),italicOpener:t("//"),boldOpener:t("''"),supOpener:t("^^"),strongFront:t("**"),strongBack:t("**"),emFront:t("*"),emBack:t("*"),verbatimOpener:"`+",collapsedFront:"{",collapsedBack:"}",hookAppendedFront:"\\["+i("=+"),hookPrependedFront:I+"\\["+i("=+"),hookFront:"\\["+i("=+"),hookBack:"\\]"+i(M),hookAppendedBack:"\\]"+M,unclosedHook:"\\[=+",unclosedHookPrepended:I+"\\[=+",unclosedCollapsed:"\\{=+",passageLink:g.main+g.closer,passageLinkPeek:"[[",legacyLink:g.opener+g.legacyText+g.legacySeparator+g.legacyText+g.closer,legacyLinkPeek:"[[",simpleLink:g.opener+g.legacyText+g.closer,simpleLinkPeek:"[[",macroFront:E.opener+a(E.name),macroFrontPeek:"(",macroName:E.name,groupingFront:"\\("+i(E.name),groupingFrontPeek:"(",groupingBack:"\\)",twine1Macro:"<<[^>\\s]+\\s*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"|[^'\"\\\\>]|>(?!>))*>>",twine1MacroPeek:"<<",validPropertyName:v,property:T,propertyPeek:"'s",belongingProperty:S,possessiveOperator:x,belongingOperator:"of\\b",belongingOperatorPeek:"of",itsOperator:j,itsOperatorPeek:"its",belongingItOperator:C,belongingItOperatorPeek:"of",variable:b,variablePeek:"$",tempVariable:w,tempVariablePeek:"_",hookName:"\\?("+u+"+)\\b",hookNamePeek:"?",cssTime:"(\\d+\\.?\\d*|\\d*\\.?\\d+)(m?s)\\b",colour:r(r("Red","Orange","Yellow","Lime","Green","Cyan","Aqua","Blue","Navy","Purple","Fuchsia","Magenta","White","Gray","Grey","Black","Transparent"),"#[\\dA-Fa-f]{3}(?:[\\dA-Fa-f]{3})?"),datatype:r("alnum","alphanumeric","any(?:case)?","array","bool(?:ean)?","changer","colou?r","const","command","dm","data"+r("map","type","set"),"ds","digit","gradient","empty","even","int"+i("o")+"(?:eger)?","lambda","lowercase","macro","linebreak","num(?:ber)?","odd","str(?:ing)?","uppercase","whitespace")+c,number:D,boolean:r("true","false")+c,identifier:k,itsProperty:O,itsPropertyPeek:"its",belongingItProperty:A,escapedStringChar:"\\\\[^\\n]",singleStringOpener:"'",doubleStringOpener:'"',singleStringCloser:"'",doubleStringCloser:'"',is:"is"+i(s+"not"+c,s+"an?"+c,s+"in"+c,s+"<",s+">")+c,isNot:"is"+s+"not"+i(s+r("an?","in")+c)+c,isA:"is"+s+"an?"+c,isNotA:"is"+s+"not"+s+"an?"+c,matches:"matches\\b",doesNotMatch:"does"+s+"not"+s+"match"+c,and:"and\\b",or:"or\\b",not:"not\\b",inequality:"((?:is(?:"+s+"not)?"+o+")*)("+r("<(?!=)","<=",">(?!=)",">=")+")",isIn:"is"+s+"in"+c,contains:"contains\\b",doesNotContain:"does"+s+"not"+s+"contain"+c,isNotIn:"is"+s+"not"+s+"in"+c,addition:t("+")+i("="),subtraction:t("-")+i("=","type"),multiplication:t("*")+i("="),division:r("/","%")+i("="),comma:",",spread:"\\.\\.\\."+i("\\."),to:r("to\\b","="),into:"into\\b",making:"making\\b",where:"where\\b",when:"when\\b",via:"via\\b",each:"each\\b",augmentedAssign:r("\\+","\\-","\\*","\\/","%")+"=",bind:"2?bind\\b",typeSignature:t("-type")+c,incorrectOperator:_},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e:"function"==typeof define&&define.amd?define("patterns",[],function(){return e}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Patterns=e):this.Patterns=e}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){var e=void 0;Object.assign=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var t=Object.keys,n=Object.assign;function r(r){return Object.freeze({lex:function(r){function i(e){return e=e||"innerText",function(t){var n=t.reduceRight(function(e,t,n){return e||(n?t:"")},""),r={};return r[e]=n,r}}function a(e,t){var n={};return n[e]=t,function(){return{isFront:!0,matches:n,cannotCross:["verbatimOpener"]}}}var o=Object.bind(0,null);function s(e,t){return Object.keys(t).forEach(function(n){var r=t[n].fn;t[n].fn=function(t){var i=r(t);return i.text||(i.text=t[0]),i.type||(i.type=n),i.innerMode||(i.innerMode=e),i}}),t}var c=[],u=[],l=[],p=s(c,{hr:{fn:o},bulleted:{fn:function(e){return{depth:e[1].length}}},numbered:{fn:function(e){return{depth:e[1].length/2}}},heading:{fn:function(e){return{depth:e[1].length}}},align:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("><");return~r?25===(t=Math.round(r/(n.length-2)*50))&&(t="center"):"<"===n[0]&&">"===n.slice(-1)?t="justify":n.indexOf(">")>-1?t="right":n.indexOf("<")>-1&&(t="left"),{align:t}}},column:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("|");return r&&r<n.length-1?t="center":"|"===n[0]&&"|"===n.slice(-1)?t="none":r===n.length-1?t="right":r||(t="left"),{column:t,width:/\|+/.exec(n)[0].length,marginLeft:/^=*/.exec(n)[0].length,marginRight:/=*$/.exec(n)[0].length}}}});t(p).forEach(function(e){p[e].canFollow=[null,"br","hr","bulleted","numbered","heading","align","column","escapedLine"],p[e].cannotFollow=["text"]});var f=s(c,{twine1Macro:{fn:function(){return{type:"error",message:"Harlowe macros use a different syntax to Twine 1, SugarCube, and Yarn macros."}}},emBack:{fn:function(){return{matches:{emFront:"em"},cannotCross:["verbatimOpener"]}}},strongBack:{fn:function(){return{matches:{strongFront:"strong"},cannotCross:["verbatimOpener"]}}},strongFront:{fn:function(){return{isFront:!0}}},emFront:{fn:function(){return{isFront:!0}}},boldOpener:{fn:a("boldOpener","bold")},italicOpener:{fn:a("italicOpener","italic")},strikeOpener:{fn:a("strikeOpener","strike")},supOpener:{fn:a("supOpener","sup")},commentFront:{fn:function(){return{isFront:!0}}},commentBack:{fn:function(){return{matches:{commentFront:"comment"}}}},scriptStyleTag:{fn:o},tag:{fn:o},url:{fn:o},hookPrependedFront:{fn:function(e){return{name:e[1],hidden:")"===e[2],isFront:!0,tagPosition:"prepended"}}},hookFront:{fn:function(){return{isFront:!0}}},hookBack:{fn:function(){return{matches:{hookPrependedFront:"hook",hookFront:"hook"},cannotCross:["verbatimOpener"]}}},hookAppendedBack:{fn:function(e){return{name:e[2],hidden:"("===e[1],tagPosition:"appended",matches:{hookFront:"hook"},cannotCross:["verbatimOpener"]}}},unclosedHook:{fn:o},unclosedHookPrepended:{fn:function(e){return{type:"unclosedHook",name:e[1],hidden:")"===e[2]}}},verbatimOpener:{fn:function(e){var t=e[0].length,n={};return n["verbatim"+t]="verbatim",{type:"verbatim"+t,isFront:!0,matches:n}}},unclosedCollapsed:{fn:o},collapsedFront:{fn:function(){return{isFront:!0}}},collapsedBack:{fn:function(){return{matches:{collapsedFront:"collapsed"},cannotCross:["verbatimOpener"]}}},escapedLine:{fn:o},legacyLink:{fn:function(e){return{type:"twineLink",innerText:e[1],passage:e[2],innerMode:c}}},br:{fn:o}}),d=n(s(u,{macroFront:{fn:function(e){return{isFront:!0,name:e[1]}}},groupingBack:{fn:function(){return{matches:{groupingFront:"grouping",macroFront:"macro"},cannotCross:["singleStringOpener","doubleStringOpener"]}}},passageLink:{fn:function(e){var t=e[1]||"",n=e[2]||"",r=e[3]||"";return{type:"twineLink",innerText:n?r:t,passage:t?r:n,innerMode:c}}},simpleLink:{fn:function(e){return{type:"twineLink",innerText:e[1]||"",passage:e[1]||"",innerMode:c}}},variable:{cannotFollow:["macroFront"],fn:i("name")},tempVariable:{cannotFollow:["macroFront"],fn:i("name")}}),{hookFront:f.hookFront,hookBack:f.hookBack}),h=s(u,n({macroName:{canFollow:["macroFront"],fn:i("name")},groupingFront:{fn:function(){return{isFront:!0}}},property:{fn:i("name"),canFollow:["variable","hookName","property","tempVariable","colour","itsProperty","belongingItProperty","macro","grouping","string","datatype","hook","boolean","number"]},possessiveOperator:{fn:o},itsProperty:{cannotFollow:["text"],fn:i("name")},itsOperator:{cannotFollow:["text"],fn:o},belongingItProperty:{cannotFollow:["text"],fn:i("name")},belongingItOperator:{cannotFollow:["text"],fn:o},belongingProperty:{cannotFollow:["text"],fn:i("name")},belongingOperator:{cannotFollow:["text"],fn:o},escapedStringChar:{fn:function(){return{type:"text"}}},singleStringOpener:{fn:function(){return{isFront:!0,matches:{singleStringOpener:"string"},innerMode:l}}},doubleStringOpener:{fn:function(){return{isFront:!0,matches:{doubleStringOpener:"string"},innerMode:l}}},hookName:{fn:i("name")},cssTime:{fn:function(e){return{value:+e[1]*("s"===e[2].toLowerCase()?1e3:1)}}},datatype:{cannotFollow:["text"],fn:function(e){return{name:e[0].toLowerCase()}}},colour:{cannotFollow:["text"],fn:function(e){var t=e[0].toLowerCase(),n={red:"e61919",orange:"e68019",yellow:"e5e619",lime:"80e619",green:"19e619",cyan:"19e5e6",aqua:"19e5e6",blue:"197fe6",navy:"1919e6",purple:"7f19e6",fuchsia:"e619e5",magenta:"e619e5",white:"fff",black:"000",gray:"888",grey:"888"};return{colour:Object.hasOwnProperty.call(n,t)?"#"+n[t]:t}}},number:{fn:function(e){return{value:parseFloat(e[0])}}},inequality:{fn:function(e){return{operator:e[2],negate:e[1].indexOf("not")>-1}}},augmentedAssign:{fn:function(e){return{operator:e[0][0]}}},identifier:{fn:i("name"),cannotFollow:["text"]},whitespace:{fn:o,cannotFollow:"text"},incorrectOperator:{fn:function(e){var t={"=>":">=","=<":"<=",gte:">=",lte:"<=",gt:">",lt:"<",eq:"is",isnot:"is not",neq:"is not",isa:"is a",are:"is",x:"*","or a":"or"}[e[0].toLowerCase().replace(/\s+/g," ")];return{type:"error",message:"Please say "+(t?"'"+t+"'":"something else")+" instead of '"+e[0]+"'.",explanation:"In the interests of readability, I want certain operators to be in a specific form."}},cannotFollow:"text"}},["boolean","is","to","into","where","when","via","making","each","and","or","not","isNot","contains","doesNotContain","isIn","isA","isNotA","isNotIn","matches","doesNotMatch","bind"].reduce(function(e,t){return e[t]={fn:o,cannotFollow:["text"]},e},{}),["comma","spread","typeSignature","addition","subtraction","multiplication","division"].reduce(function(e,t){return e[t]={fn:o},e},{}))),y=s(l,{singleStringCloser:h.singleStringOpener,doubleStringCloser:h.doubleStringOpener,escapedStringChar:h.escapedStringChar});c.push.apply(c,_toConsumableArray(t(p)).concat(_toConsumableArray(t(d)),_toConsumableArray(t(f)))),u.push.apply(u,_toConsumableArray(t(d)).concat(_toConsumableArray(t(h)))),l.push.apply(l,_toConsumableArray(t(y)));var m=n({},p,f,d,h,y);t(m).forEach(function(t){var n=e[t];m[t].pattern="string"!=typeof n?n:RegExp("^(?:"+n+")","i"),e[t+"Peek"]&&(m[t].peek=e[t+"Peek"])}),n(r.rules,m);var g=r.modes;return g.start=g.markup=c,g.macro=u,g.string=l,r}(r).lex,Patterns:e})}"object"===("undefined"==typeof module?"undefined":_typeof(module))?(e=require("./patterns"),module.exports=r(require("./lexer"))):"function"==typeof define&&define.amd?define("markup",["lexer","patterns"],function(t,n){return e=n,r(t)}):this&&this.loaded&&this.modules?(e=this.modules.Patterns,this.modules.Markup=r(this.modules.Lexer)):(e=this.Patterns,this.TwineMarkup=r(this.TwineLexer))}.call(eval("this")||("undefined"!=typeof global?global:window)),define("utils/polyfills",[],function(){var e=Array.prototype;"function"!=typeof e.includes&&(e.includes=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Number.isNaN(t)&&Number.isFinite(n)&&void 0!==t)return e.indexOf.call(this,t,n)>-1;var r=Object(this),i=parseInt(r.length);if(i<=0)return!1;for(var a=n>=0?n:Math.max(0,i+n);a<i;){if(Object.is(t,r[a]))return!0;a+=1}return!1}),!window.Symbol&&(window.Symbol={iterator:"_es6-shim iterator_"})}),define("utils",["jquery","markup","utils/polyfills"],function(e){var t=String.fromCharCode,n="audio,blockquote,canvas,div,h1,h2,h3,h4,h5,hr,ol,p,pre,table,ul,video,tw-align,tw-story,tw-passage,tw-sidebar,tw-columns,tw-column,tw-meter".split(","),r="a,b,i,em,strong,sup,sub,abbr,acronym,s,strike,del,big,small,script,img,button,input,tw-link,tw-broken-link,tw-verbatim,tw-collapsed,tw-error,tw-colour,tw-icon".split(","),i=["audio"],a=[function(e){return t(e)!==t(e).toLowerCase()},function(e){return t(e)!==t(e).toUpperCase()},function(e){return t(e).toLowerCase()!==t(e).toUpperCase()}].map(function(e){return"["+Array.from(Array(57343)).map(function(e,t){return t}).filter(e).map(function(e,n,r){return e===r[n-1]+1&&e===r[n+1]-1?"-":t(e)}).join("").replace(/\-+/g,"-")+"]"}),o=_slicedToArray(a,3),s=o[0],c=o[1],u=o[2];function l(e){return"instant"===e?0:800}var p=void 0,f=[],d={},h=0,y={},m=0,g={},v=void 0;function b(e,t,n,r,i){var a=null,o=0,s=t+n;function c(n){1&e[0].compareDocumentPosition(document)&&(s=0),a&&(s-=n-a,o+=n-a),a=n,r>0&&h+m>0&&(s-=r,e.css("animation-delay",(v.cssTimeUnit(e.css("animation-delay"))||0)-r+"ms")),s<=0?i(o):requestAnimationFrame(c),s<=t&&e.css("visibility","")}s?requestAnimationFrame(c):c()}return e(document.documentElement).on("keydown keyup mousedown mouseup",function(e){var t=e.key,n=e.button,r=e.type.includes("down"),i=t?d:y,a=t&&v.insensitiveName(t)||n;i[a]&&!r?t?h=Math.max(h-1,0):m=Math.max(m-1,0):!i[a]&&r&&(t?h+=1:m+=1),i[a]=r}).on("mousemove",function(e){var t=e.pageX,n=e.pageY;g.x=t,g.y=n}),v={lockProperty:function(e,t,n){var r=Object.create({configurable:0,writable:0});return n&&(r.value=n),Object.defineProperty(e,t,r),e},permutations:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.length,i=[[].concat(t)],a=Array(r).fill(0),o=1,s=void 0,c=void 0;o<r;)a[o]<o?(s=o%2&&a[o],c=t[o],t[o]=t[s],t[s]=c,++a[o],o=1,i.push([].concat(t))):(a[o]=0,++o);return i},shuffled:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t,n){var r=Math.random()*(n+1)|0;return r===n?e.push(t):(e.push(e[r]),e[r]=t),e},[])},matMul:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a;if(r.length>0)return(a=v).matMul.apply(a,[v.matMul(e,t)].concat(r));if(!t)return e;for(var o=[],s=0;s<e.length;s++){o[s]=[];for(var c=0;c<t[0].length;c++){for(var u=0,l=0;l<e[0].length;l++)u+=e[s][l]*t[l][c];o[s][c]=u}}return o},cssTimeUnit:function(e){return"ms"===(e=e.toLowerCase()).slice(-2)?+e.slice(0,-2)||0:"s"===e.slice(-1)&&1e3*+e.slice(0,-1)||0},nth:function(e){var t=(+e+"").slice(-1);return e+("1"===t?"st":"2"===t?"nd":"3"===t?"rd":"th")},plural:function(e,t){return e+" "+t+(e>1?"s":"")},andList:function(e){return 1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},realWhitespace:"[ \\n\\r\\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]",anyRealLetter:"[\\dA-Za-z\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",anyUppercase:s,anyLowercase:c,anyCasedLetter:u,anyNewline:"(?:\\n|\\r|\\r\\n)",unescape:function(e){return e.replace(/&(?:amp|lt|gt|quot|nbsp|zwnj|#39|#96);/g,function(e){return{"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'","&nbsp;":String.fromCharCode(160),"&zwnj;":String.fromCharCode(8204)}[e]})},escape:function(e){return e.replace(/[&><"']/g,function(e){return{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"}[e]})},insensitiveName:function(e){return(e+"").toLowerCase().replace(/-|_/g,"")},allKeysDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return d[e]})},someKeysDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function(e){return d[e]})},buttonsDown:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return y[e]})},anyInputDown:function(){return h+m>0},mouseCoords:g,parentColours:function(e){for(var t={colour:null,backgroundColour:null},n=/^\w+a\(.+?,\s*0\s*\)$|^transparent$/;e.length&&e[0]!==document;e=e.parent()){if(!t.backgroundColour){var r=e.css("background-color");r.match(n)||(t.backgroundColour=r)}if(!t.colour){var i=e.css("color");i.match(n)||(t.colour=i)}if(t.colour&&t.backgroundColour)return t}return{colour:"#fff",backgroundColour:"#000"}},childrenProbablyInline:function(e){var t=[];return[].every.call(e.findAndFilter("*"),function(e){return!!(e.hidden||/none|inline/.test(e.style.display)||/display: (none|inline)/.test(e.getAttribute("style")))||!n.includes(e.tagName.toLowerCase())&&!/display: (?!none|inline|inherit|unset)/.test(e.getAttribute("style"))&&(!!r.includes(e.tagName.toLowerCase())||(t.push(e),!0))})&&t.every(function(e){return window.getComputedStyle(e).display.includes("inline")})},transitionReplace:function(t,n,r){var i=t.closest("tw-hook");i.length>0&&(t=i);var a=e("<tw-transition-container>").css("position","relative");a.insertBefore(t.first());var o=void 0;n&&(o=e("<tw-transition-container>").appendTo(a),n.appendTo(o));var s=e("<tw-transition-container>").css("position","absolute").prependTo(a);t.detach().appendTo(s),v.transitionOut(s,r),n&&v.transitionIn(o,r,function(){o.unwrap().children().first().unwrap()})},transitionOut:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;0!==e.length&&(n=n||l(t),(e.length>1||!v.childrenProbablyInline(e)||!["tw-hook","tw-passage","tw-expression"].includes(e.tag()))&&(e=e.wrapAll("<tw-transition-container>").parent()),o&&e.css("transform-origin",o),e.attr("data-t8n",t).addClass("transition-out").css({"animation-duration":n+"ms","animation-delay":r-a+"ms"}),requestAnimationFrame(function(){v.childrenProbablyInline(e)?e.css("display","inline"):e.parent().is("tw-backdrop,tw-story")||e[0].setAttribute("style",e[0].getAttribute("style")+"display:block !important;width:100%")}),b(e,n,r-a,i,function(){e.remove()}))},transitionIn:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;if(0!==t.length){r=r||l(n);var u=t.length>1||!v.childrenProbablyInline(t)||!["tw-hook","tw-passage","tw-expression"].includes(t.tag());u&&(t=t.wrapAll("<tw-transition-container>").parent()),c&&t.css("transform-origin",c),t.attr("data-t8n",n).addClass("transition-in").css(Object.assign({"animation-duration":r+"ms","animation-delay":a-s+"ms"},a-s?{visibility:"hidden"}:{})),requestAnimationFrame(function(){v.childrenProbablyInline(t)?t.css("display","inline"):t.parent().is("tw-backdrop,tw-story")||t[0].setAttribute("style",t[0].getAttribute("style")+"display:block !important;width:100%")}),b(t,r,a-s,o,function(n){var r=0===t.filter(i.join(",")).length;u&&r?(t.find("tw-transition-container").each(function(t,r){(r=e(r)).css("animation-delay",v.cssTimeUnit(r.css("animation-delay")||0)-n+"ms")}),t.contents().unwrap()):t.removeClass("transition-in").removeAttr("data-t8n")})}},debounce:function(e){var t=void 0,n=void 0,r=0,i=function i(){Date.now()-r>300?(t=0,e.apply(void 0,_toConsumableArray(n))):t=requestAnimationFrame(i)};return function(){r=Date.now(),n=arguments,t&&cancelAnimationFrame(t),t=requestAnimationFrame(i)}},impossible:function(e,t){window.console&&console.error(e+"(): "+t)},assertMustHave:function(e,t){if(window.console)for(var n=0;n<t.length;n+=1)t[n]in e||console.error("Assertion failed: object lacks property "+t[n])},assertOnlyHas:function(e,t){if(window.console)for(var n in e)t.includes(n)||console.error("Assertion failed: object had unexpected property '"+n+"'!")},onStartup:function(e){f?f.push(e):e()},get storyElement(){return p}},e(function(){p=e("tw-story"),f.forEach(function(e){return e()}),f=null}),Object.freeze(v)}),define("utils/naturalsort",[],function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String;return function(n,r){var i,a,o,s,c=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,u=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,p=/^0/,f=t(n).trim(),d=t(r).trim(),h=f.replace(c,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),y=d.replace(c,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(f.match(l))||1!==h.length&&f.match(u)&&Date.parse(f),g=parseInt(d.match(l))||m&&d.match(u)&&Date.parse(d)||null;if(e&&window.Intl&&window.Intl.Collator&&(o=window.Intl.Collator(e)),g){if(m<g)return-1;if(m>g)return 1}for(var v=0,b=Math.max(h.length,y.length);v<b;v++){if(i=!(h[v]||"").match(p)&&parseFloat(h[v])||h[v]||0,a=!(y[v]||"").match(p)&&parseFloat(y[v])||y[v]||0,isNaN(i)!==isNaN(a))return isNaN(i)?1:-1;if((void 0===i?"undefined":_typeof(i))!==(void 0===a?"undefined":_typeof(a)))i+="",a+="";else if("string"==typeof i&&o&&0!==(s=o.compare(i,a)))return s;if(i<a)return-1;if(i>a)return 1}return 0}}}),define("twinescript/compiler",["utils"],function(e){var t=e.impossible,n=JSON.stringify;function r(e,t){for(var n=0;n<e.length;n+=1)if(t.includes(e[n].type))return n;return NaN}function i(e,t){var n=[];return e.length?([["error"],["comma"],["to","into"],["where","when","via"],["making","each"],["typeSignature"],["augmentedAssign"],["and","or"],["is","isNot"],["contains","doesNotContain","isIn","isNotIn"],["isA","isNotA","matches","doesNotMatch"],["inequality"],["addition","subtraction"],["multiplication","division"],{rightAssociative:["spread","bind"]},{rightAssociative:["not","positive","negative"]},{rightAssociative:["belongingProperty","belongingItProperty","belongingOperator","belongingItOperator"]},["property","itsProperty","possessiveOperator","itsOperator"],["twineLink"],["macro"],["grouping"]]["most"===t?"reverse":"valueOf"]().some(function(t){var i=void 0;if(i=t.rightAssociative?r(e,t.rightAssociative):function(e,t){return e.length-1-r.apply(void 0,[[].concat(_toConsumableArray(e)).reverse(),t])}(e,t),!Number.isNaN(i)&&i>-1)return n=[e[i],i],!0}),n):n}function a(e){if("inequality"===e.type){var t=e.operator;return e.negate?{">":"<=","<":">=",">=":"<","<=":">"}[t]:t}return e.type}function o(e){var t=a(e);return{">":"<","<":">",">=":"<=","<=":">=",contains:"isIn",doesNotContain:"isNotIn",isIn:"contains",isA:"typifies",typifies:"isA",isNotA:"untypifies",untypifies:"isNotA"}[t]||t}var s=["inequality","is","isNot","isIn","contains","doesNotContain","isNotIn","isA","typifies","isNotA","untypifies","matches","doesNotMatch"];return function e(r){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=c.isVarRef,l=c.isTypedVar,p=c.whitespaceError,f=c.elidedComparison,d=c.testNeedsRight,h="Operations.Identifiers.it";if(!(r=[].concat(r)).length)return u&&p?"TwineError.create('operation',"+n(p)+")":"";var y=void 0;if(1===r.length){var m=(y=r[0]).type;if("identifier"===m)return u?"VarRef.create(Operations.Identifiers,"+n(y.text)+")":"Operations.Identifiers."+y.text.toLowerCase()+" ";if("variable"===m||"tempVariable"===m){var g="VarRef.create("+("tempVariable"===m?"section.stackTop.tempV":"State.v")+"ariables,"+n(y.name)+")"+(u||l?"":".get()");return l?"TypedVar.create(Datatype.create('any'),"+g+")":g}if("hookName"===m)return"HookSet.create({type:'name', data:'"+y.name+"'}) ";if("string"===m)return y.text.replace(/\n/g,"\\n");if("hook"===m)return"CodeHook.create("+n(y.text.slice(1,-1))+","+n(y.html||"")+")";if("colour"===m)return"Colour.create("+n(y.colour)+")";if("datatype"===m)return"Datatype.create("+n(y.name)+")";if("blockedValue"===m)return"section.blockedValue()";if("root"===m)return e(y.children);if("whitespace"===m&&u&&p)return"TwineError.create('operation',"+n(p)+")"}var v,b=i(r,"least"),w=_slicedToArray(b,2);y=w[0],v=w[1];var T=(y||{}).type,S=r.slice(0,v),x=r.slice(v+1),k=function(e,t){return{isVarRef:!0,isTypedVar:t,whitespaceError:"I need usable data to be on the "+e+' of "'+y.text+'".'}},O="must",j="mustn't",A="may",C=void 0,E=void 0,_="",N="",P="",I=O,M=O,D=!1;if(T)if("comma"===T)N=",",M=A;else if("spread"===T)_="Operations.makeSpreader(",P=")",I=A;else if("bind"===T)_="VarBind.create(",E=e(x,k("right")),P=(y.text.startsWith("2")?",'two way'":"")+")",I=j;else if("to"===T)_="Operations.makeAssignmentRequest(Operations.setIt(",E=e(x,k("right")),N="),",C=e(S,k("left",!0)),P=",'to')";else if("into"===T)_="Operations.makeAssignmentRequest(",E=e(S,k("left")),N=",Operations.setIt(",C=e(x,k("right",!0)),P="),'into')";else if("typeSignature"===T)_="TypedVar.create(",N=",",E=e(x,k("right")),P=")",l=!1;else if("where"===T||"when"===T||"via"===T)_="Lambda.create(",C=e(S,{isVarRef:!0,whitespaceError:null}).trim()||"undefined",N=","+n(y.type)+",",E=n(e(x)),P=","+n(r.map(function(e){return e.text}).join(""))+")";else if("making"===T||"each"===T)"each"===T?(_="Lambda.create(",E=e(x,k("right")).trim(),P=",'where','true',"+n(r.map(function(e){return e.text}).join(""))+")",I=A):(_="Lambda.create(",C=e(S,{isVarRef:!0,whitespaceError:null}).trim()||"undefined",N=","+n(y.type)+",",E=e(x,k("right")).trim(),P=","+n(r.map(function(e){return e.text}).join(""))+")");else if("augmentedAssign"===T)_="Operations.makeAssignmentRequest(",C=e(S,k("left")),N=",",E="Operations["+n(y.operator)+"]("+e(S)+","+e(x)+")",P=","+n(y.operator)+")";else if("and"===T||"or"===T){var R=function e(t){var n=i(t,"least"),r=_slicedToArray(n,2),a=r[0],o=r[1];if(a)return s.includes(a.type)?a:["and","or"].includes(a.type)?e(t.slice(0,o))||e(t.slice(o+1)):void 0},L=R(S),q=R(x),F="TwineError.create('operation', 'This use of \"is not\" and \""+T+"\" is grammatically ambiguous','Maybe try rewriting this as \"__ is not __ "+T+" __ is not __\"') ";if(_="Operations."+T+"(",N=",",P=")",f===y.type)_=P="",C=e(S,{isVarRef:u,elidedComparison:f}).trim(),E=e(x,{elidedComparison:f}).trim();else if(L&&!q){var V=L,H=n(a(V));if("isNot"===V.type||"isNotA"===V.type||"untypifies"===V.type)return F;E="Operations.elidedComparisonOperator("+n(y.type)+","+H+","+e(x,{elidedComparison:T})+")"}else if(!L&&q){var z=q,$=r.indexOf(z),B=n(o(z));if("isNot"===z.type||"isNotA"===z.type||"untypifies"===z.type)return F;E="Operations.elidedComparisonOperator("+n(y.type)+","+B+","+e(S,{elidedComparison:T})+")",C=e([].concat(_toConsumableArray(r.slice($+1)),[Object.assign(Object.create(z),_defineProperty({},"inequality"===z.type?"operator":"type",o(z)))],_toConsumableArray(r.slice(v+1,$))))}u=!1}else if(s.includes(T))D=!0,u=!1,_="Operations["+n(a(y))+"](",N=",",P=")";else if("addition"===T||"subtraction"===T){if(!e(S,{testNeedsRight:!0}).trim())return y.type={addition:"positive",subtraction:"negative"}[T],e(r,{isVarRef:u,whitespaceError:p,elidedComparison:f,testNeedsRight:d});u=!1,_="Operations["+n(y.text)+"](",N=",",P=")"}else if("multiplication"===T||"division"===T)u=!1,_="Operations["+n(y.text)+"](",N=",",P=")";else if("positive"===T||"negative"===T)u=!1,C="negative"===T?"-1":"1",_="Operations['*'](",N=",",P=")";else if("not"===T)_="Operations.not(",E=e(x),P=")",I=A;else if("belongingProperty"===T)_="VarRef.create(",E=e(x,k("right")),P=","+n(y.name)+")"+(u?"":".get()"),I=A;else if("belongingOperator"===T||"belongingItOperator"===T)C=y.type.includes("It")?h:e(x,k("right")),E=e(S),_="VarRef.create(",N=",{computed:true,value:",P="})"+(u?"":".get()");else if("property"===T)_="VarRef.create(",C=e(S,k("left")),P=","+n(y.name)+")"+(u?"":".get()"),M=A;else if("itsProperty"===T||"belongingItProperty"===T)_="VarRef.create(",C=h,P=","+n(y.name)+")"+(u?"":".get()"),I=M=A;else if("possessiveOperator"===T||"itsOperator"===T)y.type.includes("it")&&(C=h,I=A),_="VarRef.create(",N=",{computed:true,value:",P="})"+(u?"":".get()"),l=!1;else if("twineLink"===T)N='Macros.run("link-goto", [section,'+n(y.innerText)+","+n(y.passage)+"])",I=M=j;else if("macro"===T){var W=y.children[0],U="$"===W.text[0]||"_"===W.text[0];"macroName"===W.type||U||t("Compiler.compile","macro token had no macroName child token"),N="Macros.run"+(U?"Custom":"")+"("+(U?"VarRef.create("+("_"===W.text[0]?"section.stackTop.tempV":"State.v")+"ariables,"+n(W.text.trim().slice(1,-1))+").get()":'"'+y.name+'"')+", [section,"+e(y.children.slice(1),{isTypedVar:l})+"])",I=M=j}else if("grouping"===T)N="("+e(y.children,{isVarRef:u})+")",I=M=j;else if("error"===T)return"TwineError.create('syntax',"+n(y.message)+(y.explanation?", "+n(y.explanation):"")+")";return v>-1?(C=(C||e(S,{isVarRef:u,isTypedVar:l})).trim(),E=(E||e(x)).trim(),D&&!C&&(C=h),I===O&&!C||M===O&&!E?d&&M&&!E?"":"TwineError.create('operation','I need usable code to be "+(I===O?"left ":"")+(I===O&&M===O?"and ":"")+(M===O?"right ":"")+'of "'+y.text+"\"')":I===j&&C||M===j&&E?"TwineError.create('operation','There can't be code to the "+(I===j?"left ":"")+(I===j&&M===j?"or ":"")+(M===j?"right ":"")+'of "'+y.text+"\"')":_+C+N+E+P):1===r.length?(("value"in r[0]?r[0].value:r[0].text)+"").trim()||" ":r.reduce(function(t,n){return t+e(n,{isVarRef:u,isTypedVar:l})},"")}}),define("internaltypes/twineerror",["jquery","utils"],function(e,t){var n=t.impossible,r=t.escape;e(document.documentElement).on("click","tw-folddown",function(t){var n=t.target;for((n=e(n)).toggleClass("open");n&&!n.next().length;)n=n.parent();n&&n.next().toggle()});var i={syntax:"The markup seems to contain a mistake.",saving:"I tried to save or load the game, but I couldn't do it.",operation:"I tried to perform an operation on some data, but the data's type was incorrect.",macrocall:"I tried to use a macro, but its call wasn't written correctly.",datatype:"I tried to use a macro, but was given the wrong type of data to it.",custommacro:"I tried to use a custom macro, but its code hook had a mistake in it.",infinite:"I almost ended up doing the same thing over and over, forever.",property:"I tried to access a value in a string/array/datamap, but I couldn't find it.",unimplemented:"I currently don't have this particular feature. I'm sorry.",javascript:"This error message was reported by your browser's Javascript engine. I don't understand it either, but it usually means that an expression was badly written.",propagated:"Click the 'Open' button to see the code hook as it was executed.",user:"This is a custom error created by (error:). It usually means you used a custom macro incorrectly.",assertion:"This command exists to provide a helpful error if a certain important condition wasn't true."},a={error:[],warning:[]},o={create:function(e,t,r,a){return t&&"string"==typeof t||n("TwineError.create","has a bad message string"),r||e in i||n("TwineError.create","no error explanation given"),"user"!==e&&(t=t[0].toUpperCase()+t.slice(1)),Object.assign(Object.create(this),{type:e,message:t,explanation:r,source:void 0,innerDOM:a,appendTitleText:!1})},fromError:function(e){return o.create("javascript","\u2615 "+e.message)},containsError:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e||(t instanceof Error?t:o.isPrototypeOf(t)?t:!!Array.isArray(t)&&o.containsError.apply(o,_toConsumableArray(t)))},!1)},createWarning:function(e,t){return Object.assign(this.create(e,t),{warning:!0})},render:function(n){var o=this;n=n||this.source||"";var s=e("<tw-error class='"+("javascript"===this.type?"javascript ":"")+(this.warning?"warning":"error")+"' title='"+r(n)+"'>"+r(this.message+(this.appendTitleText?" "+n:""))+"</tw-error>"),c=e("<tw-error-explanation>").text(this.explanation||i[this.type]).hide(),u=e("<tw-folddown tabindex=0>");return this.innerDOM&&e("<tw-open-button>").on("click",function(){var n=e("<tw-backdrop><tw-dialog></tw-backdrop>");n.find("tw-dialog").prepend(o.innerDOM,e("<tw-link tabindex=0>OK</tw-link>").on("click",function(){o.innerDOM.detach(),n.remove()}).wrap("<tw-dialog-links>").parent()),t.storyElement.prepend(n)}).appendTo(s),s.append(u).append(c),s.data("TwineError",this),a.error.forEach(function(e){return e(o,n)}),s},on:function(e,t){if(e in a)return"function"!=typeof t||a[e].includes(t)||a[e].push(t),o;n("TwineError.on","invalid event name")}};return o}),define("renderer",["utils","markup","twinescript/compiler","internaltypes/twineerror"],function(e,t,n,r){var i=e.escape,a=e.impossible,o=e.insensitiveName,s=void 0;function c(e,t){return"<"+t+">"+e+"</"+t+">"}function u(e,t){var n=s.render(e.children);return n&&c(n,t)}var l,p,f="text-align: center; max-width:50%; ",d=RegExp(t.Patterns.macroFront+t.Patterns.macroName,"ig");return s={options:{debug:!1,blockerMacros:[],metadataMacros:[]},preprocess:function(e){var i=s.options.metadataMacros;if(!(e.match(d)||[]).some(function(e){return i.some(function(t){return o(e.slice(1,-1))===t})}))return{};var a=!1,c={};return t.lex(e).children.forEach(function e(t){if("macro"===t.type){if(i.some(function(e){return t.name===e})){if(r.isPrototypeOf(c[t.name]))return;if(a)return void(c[t.name]=r.create("syntax","The ("+t.name+":) macro can't appear after non-metadata macros."));if(c[t.name])return void(c[t.name]=r.create("syntax","There is more than one ("+t.name+":) macro."));c[t.name]={code:n(t),source:t.text}}else a=!0;t.children.forEach(function e(t){"macro"===t.type&&i.some(function(e){return t.name===e})?c[t.name]=r.create("syntax","The ("+t.name+":) macro can't be inside another macro."):t.children.forEach(e)})}else t.children.forEach(e)}),c},exec:(l=void 0,p=void 0,function(e){return"string"!=typeof e?(a("Renderer.exec","source was not a string, but "+(void 0===e?"undefined":_typeof(e))),""):e===l?p:(l=e,p=s.render(t.lex(e).children))}),render:function e(a){var l="",p=[];if(!a)return l;for(var d=a.length,h=0;h<d;h+=1){var y=a[h];switch(y.type){case"error":l+=r.create("syntax",y.message,y.explanation).render(i(y.text))[0].outerHTML;break;case"numbered":case"bulleted":var m="numbered"===y.type?"ol":"ul";l+="<"+m+">";for(var g=1;h<d&&a[h];){if("br"===a[h].type){if(l+="</li>",!a[h+1]||a[h+1].type!==y.type)break}else a[h].type===y.type?(l+=("<"+m+">").repeat(Math.max(0,a[h].depth-g)),l+=("</"+m+">").repeat(Math.max(0,g-a[h].depth)),l+="<li>",g=a[h].depth):l+=e([a[h]]);h+=1}l+=("</"+m+">").repeat(g+1);break;case"align":for(;y&&"align"===y.type;){var v=y.align,b=h+=1;if("left"===v){h-=1;break}for(;h<d&&a[h]&&"align"!==a[h].type;)h+=1;var w=e(a.slice(b,h)),T="";switch(v){case"center":T+=f+"margin-left: auto; margin-right: auto;";break;case"justify":case"right":T+="text-align: "+v+";";break;default:+v&&(T+=f+"margin-left: "+v+"%;")}l+="<tw-align "+(T?'style="'+T+'"':"")+">"+w+"</tw-align>\n",y=a[h]}break;case"column":for(var S=[];y&&"column"===y.type;){var x=y.column,k=h+=1;if("none"===x){h-=1;break}for(;h<d&&a[h]&&"column"!==a[h].type;)h+=1;S.push({text:y.text,type:x,body:e(a.slice(k,h)),width:y.width,marginLeft:y.marginLeft,marginRight:y.marginRight}),y=a[h]}S.length&&function(){var e=S.reduce(function(e,t){return e+t.width},0);l+="<tw-columns>"+S.map(function(t){return"<tw-column type="+t.type+'  style="width:'+t.width/e*100+"%; margin-left: "+t.marginLeft+"em; margin-right: "+t.marginRight+'em;">'+t.body+"</tw-column>\n"}).join("")+"</tw-columns>"}();break;case"heading":for(l+="<h"+y.depth+">";++h<d&&a[h];){if("br"===a[h].type){l+="</h"+y.depth+">";break}l+=e([a[h]])}break;case"br":if(!p.length||/td|th/.test(p[0])){l+="<br>";for(var O=a[h+1];O&&("br"===O.type||"tag"===O.type&&/^<br\b/i.test(O.text));)l+="<tw-consecutive-br"+("tag"===O.type?" data-raw":"")+"></tw-consecutive-br>",O=a[(h+=1)+1]}break;case"hr":l+="<hr>";break;case"escapedLine":case"comment":break;case"inlineUrl":l+='<a class="link" href="'+i(y.text)+'">'+y.text+"</a>";break;case"scriptStyleTag":case"tag":var j=y.text.toLowerCase();/^<\/?(?:table|thead|tbody|tr|tfoot|td|th)\b/.test(j)&&p[y.text.startsWith("</")?"shift":"unshift"](j),l+=y.text.startsWith("</")?y.text:y.text.replace(/>$/," data-raw>");break;case"sub":case"sup":case"strong":case"em":l+=u(y,y.type);break;case"strike":l+=u(y,"s");break;case"bold":l+=u(y,"b");break;case"italic":l+=u(y,"i");break;case"twineLink":var A=_slicedToArray(t.lex("(link-goto:"+JSON.stringify(y.innerText)+","+JSON.stringify(y.passage)+")").children,1)[0];l+='<tw-expression type="macro" name="link-goto"'+(s.options.debug?' title="'+i(y.text)+'"':"")+' js="'+i(n(A))+'"></tw-expression>';break;case"hook":l+="<tw-hook "+(y.hidden?"hidden ":"")+(y.name?'name="'+o(y.name)+'"':"")+(s.options.debug&&y.name?' title="Hook: ?'+y.name+'"':"")+' source="'+i(y.innerText)+'"></tw-hook>';break;case"unclosedHook":return l+="<tw-hook "+(y.hidden?"hidden ":"")+(y.name?'name="'+o(y.name)+'"':"")+'source="'+i(a.slice(h+1,d).map(function(e){return e.text}).join(""))+'"></tw-hook>';case"verbatim":l+=c(i(y.innerText).replace(/\n/g,"<br>"),"tw-verbatim");break;case"collapsed":l+=u(y,"tw-collapsed");break;case"unclosedCollapsed":return l+="<tw-collapsed>"+e(a.slice(h+1,d))+"</tw-collapsed>";case"variable":case"tempVariable":case"macro":var C=function(){var t=[],a=[];if("macro"===y.type&&function n(r){"string"!==r.type&&"hook"!==r.type&&r.children.every(n);var i=r.firstChild();if("macro"===r.type&&i&&"macroName"===i.type&&s.options.blockerMacros.includes(o(i.text.slice(0,-1))))t.push(r);else if("hook"===r.type){if(!r.everyLeaf(function(e){return"error"!==e.type||(a.push(e),!1)}))return!1;r.html=e(r.children)}return!0}(y),a.length)return{v:r.create("syntax","This code hook's markup contained "+a.length+" error"+(a.length?"s":"")+":<br>\u2014"+a.map(function(e){return e.message}).join("<br>\u2014")).render(i(y.text))[0].outerHTML};var c=t.length&&t.map(function(e){var t=n(e);return e.type="blockedValue",t});l+='<tw-expression type="'+y.type+'" name="'+i(y.name||y.text)+'"'+(s.options.debug?' title="'+i(y.text)+'"':"")+(t.length?' blockers="'+i(JSON.stringify(c))+'"':"")+' js="'+i(n(y))+'"></tw-expression>',t.forEach(function(e){return e.type="macro"})}();if("object"===(void 0===C?"undefined":_typeof(C)))return C.v;break;default:l+=y.children&&y.children.length?e(y.children):y.text}}return l}},Object.freeze(s)}),define("passages",["jquery","utils/naturalsort","utils","markup","renderer","internaltypes/twineerror"],function(e,t,n,r,i,a){var o=n.unescape,s=n.onStartup,c=Object.assign;function u(e){var t=o(e.html()),n=i.preprocess(t);return c(new Map([["source",t],["tags",(e.attr("tags")||"").split(/\s/)||[]],["name",e.attr("name")]]),{TwineScript_TypeName:"a passage datamap",TwineScript_ObjectName:"a passage datamap",metadata:n})}var l=c(new Map,{TwineScript_ObjectName:"the Passages datamap",getTagged:function(e){var n=t("en",function(e){return e.get("name")}),r=[];return this.forEach(function(t){var n=t instanceof Map&&t.get("tags");Array.isArray(n)&&n.includes(e)&&r.push(t)}),r.sort(n)},getStorylets:function(e,n){var r=n?n.filter(e,[].concat(_toConsumableArray(l.values()))):[].concat(_toConsumableArray(l.values()));if(a.containsError(r))return r;var i=[],o=-1/0,s=r.reduce(function(t,n){if(t)return t;var r=n.get("storylet");if(r){var s=e.speculate(r,n.get("name"),"a (storylet:) macro");if(a.containsError(s))return s.message="There's an error in the storylet passage \""+n.get("name")+'":\n'+s.message,s.source=r.TwineScript_ToSource(),s;if(s){var c=n.get("exclusivity");o=Math.max(o,"number"==typeof c?c:0),i.push(n)}}},void 0);if(s)return s;var c=t("en");return i.filter(function(e){var t=e.get("exclusivity");return(t="number"==typeof t?t:0)===o}).sort(function(e,t){var n=e.get("urgency"),r=t.get("urgency");return(n="number"==typeof n?n:0)!==(r="number"==typeof r?r:0)?r-n:c(e.get("name"),t.get("name"))})},allStorylets:function(){return[].concat(_toConsumableArray(l.values())).filter(function(e){return e.get("storylet")})},loadMetadata:function(e){var t=[];return l.forEach(function(n){n.metadata&&Object.keys(n.metadata).forEach(function(r){if(a.containsError(n.metadata[r]))t.push(n.metadata[r]);else{var i=n.metadata[r],o=i.code,s=i.source,c=e.speculate(o,n.get("name"),"a ("+r+":) macro"),u='In "'+n.get("name")+'":\n';if(a.containsError(c))return c.message=u+c.message,c.source=s,void t.push(c);c instanceof Map?c.forEach(function(e,t){return l(t,e)}):l(r,c)}function l(e,r){n.has(e)?t.push(a.create("syntax","This passage's datamap already has a '"+JSON.stringify(e)+"' data name.")):n.set(e,r)}}),n.metadata=void 0}),t},hasValid:function(e){var t=this.get(e);return t&&t instanceof Map&&t.has("source")},create:u});return s(function(){Array.from(e("tw-storydata > tw-passagedata")).forEach(function(t){t=e(t),l.set(t.attr("name"),new u(t))})}),l}),define("utils/operationutils",["utils/naturalsort","utils","internaltypes/twineerror","patterns"],function(e,t,n,r){var i=t.impossible,a=t.nth,o=t.insensitiveName,s=t.permutations,c=r.validPropertyName,u="object",l="boolean",p="string",f="number",d="function";function h(e){return!!e&&((void 0===e?"undefined":_typeof(e))===u||(void 0===e?"undefined":_typeof(e))===d)}function y(e){return e&&Object.getPrototypeOf(e)===Object.prototype}function m(e){return Array.isArray(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":(void 0===e?"undefined":_typeof(e))===p?p:e&&(void 0===e?"undefined":_typeof(e))===u?u:""}function g(e){if(!h(e))return e;if(_typeof(e.TwineScript_Clone)===d)return e.TwineScript_Clone();if(Array.isArray(e))return[].concat(_toConsumableArray(e));if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if((void 0===e?"undefined":_typeof(e))===d)return Object.assign(e.bind(),e);switch(Object.getPrototypeOf(e)){case Object.prototype:return Object.assign({},e);case null:return Object.assign(Object.create(null),e)}return i("OperationUtils.clone","The value "+e+" cannot be cloned!"),e}function v(e){return h(e)&&"TwineScript_ObjectName"in e?e.TwineScript_ObjectName:Array.isArray(e)?"an array":e instanceof Map?"a datamap":e instanceof Set?"a dataset":(void 0===e?"undefined":_typeof(e))===l?"the boolean value '"+e+"'":(void 0===e?"undefined":_typeof(e))===p||(void 0===e?"undefined":_typeof(e))===f?"the "+(void 0===e?"undefined":_typeof(e))+" "+JSON.stringify(e):void 0===e?"an empty variable":"...whatever this is"}function b(e,t){return(void 0===e?"undefined":_typeof(e))!==u&&(void 0===t?"undefined":_typeof(t))!==u?e===t:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(e,n){return b(t[n],e)}):e instanceof Map&&t instanceof Map?b(Array.from(e.entries()).sort(),Array.from(t.entries()).sort()):e instanceof Set&&t instanceof Set?b([].concat(_toConsumableArray(e)),[].concat(_toConsumableArray(t))):e&&_typeof(e.TwineScript_is)===d?e.TwineScript_is(t):e&&(void 0===e?"undefined":_typeof(e))===u&&t&&(void 0===t?"undefined":_typeof(t))===u&&y(e)&&y(t)?b(Object.getOwnPropertyNames(e).map(function(t){return[t,e[t]]}),Object.getOwnPropertyNames(t).map(function(e){return[e,t[e]]})):Object.is(e,t)}return Object.freeze({isObject:h,isPureObject:y,singleTypeCheck:function e(t,n){if(null===n)return void 0===t;var r=void 0===t?"undefined":_typeof(t);if((void 0===n?"undefined":_typeof(n))!==d&&n.pattern){if("optional"===n.pattern||"zero or more"===n.pattern)return void 0===t||e(t,n.innerType);if("either"===n.pattern)return n.innerType.some(function(n){return e(t,n)});if("lambda"===n.pattern&&e(t,n.innerType))return n.clauses.includes("where")==="where"in t&&n.clauses.includes("making")==="making"in t&&n.clauses.includes("via")==="via"in t&&n.clauses.includes("with")==="with"in t;if("insensitive set"===n.pattern)return n.innerType.includes(o(t));if("range"===n.pattern)return n.range(t);if("wrapped"===n.pattern)return e(t,n.innerType)}return(void 0===n||void 0!==t)&&("anything"===n.TwineScript_TypeName&&void 0!==t&&!t.TwineScript_Unstorable||"everything"===n.TwineScript_TypeName&&void 0!==t||(n===String?r===p:n===Boolean?r===l:n===parseInt?r===f&&!Number.isNaN(t)&&!(t+"").includes("."):n===Number?r===f&&!Number.isNaN(t):n===Array?Array.isArray(t):n===Map||n===Set?t instanceof n:Object.isPrototypeOf.call(n,t)))},isValidDatamapName:function(e,t){if(e instanceof Map||i("isValidDatamapName","called with non-Map"),n.containsError(t))return t;if((void 0===t?"undefined":_typeof(t))!==p&&(void 0===t?"undefined":_typeof(t))!==f)return n.create("property","Only strings and numbers can be used as data names for "+v(e)+", not "+v(t)+".");var r=(void 0===t?"undefined":_typeof(t))===p?+t:""+t;return!(!Number.isNaN(r)&&e.has(r))||n.create("property","You mustn't use both "+v(t)+" and "+v(r)+" as data names in the same datamap.")},collectionType:m,isSequential:function(e){return(void 0===e?"undefined":_typeof(e))===p||Array.isArray(e)||_typeof(e.hooks)===d},unstorableValue:function e(t){return t&&t.TwineScript_Unstorable&&t||Array.isArray(t)&&t.find(e)||t instanceof Map&&[].concat(_toConsumableArray(t.values())).find(e)||t instanceof Set&&[].concat(_toConsumableArray(t)).find(e)},clone:g,objectName:v,typeName:function e(t){var n=y(t);if(n&&t.innerType)return t.typeName?t.typeName:"insensitive set"===t.pattern?"a case-insensitive string name":"either"===t.pattern?(Array.isArray(t.innerType)||i("typeName",'"either" pattern had non-array inner type'),t.innerType.map(e).join(" or ")):"optional"===t.pattern?"(optional) "+e(t.innerType):e(t.innerType);if(n&&t.pattern&&"range"===t.pattern){if(t.name)return t.name;var r=t.min,a=t.max;return"a"+(r>0?" positive":"")+(t.integer?" whole":"")+" number"+(0===r?" between 0 and "+a:a<1/0?" up to "+a:"")}return t===String||t===Number||t===Boolean?"a "+_typeof(t()):t===parseInt?"a whole number":t===Map?"a datamap":t===Set?"a dataset":t===Array?"an array":h(t)&&"TwineScript_TypeName"in t?t.TwineScript_TypeName:v(t)},typeID:function(e){var t=void 0===e?"undefined":_typeof(e);return[l,p,f].includes(t)?t:Array.isArray(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":e.TwineScript_TypeID||""},toSource:function t(r,o){return n.containsError(r)&&i("toSource","received a TwineError"),_typeof(r.TwineScript_ToSource)===d?r.TwineScript_ToSource():y(r)&&"first"in r&&"last"in r?(r.first<0?(-1!==r.first?a(-r.first):"")+"last":a(r.first+1))+"to"+(r.last<0?(-1!==r.last?a(-r.last):"")+"last":a(r.last+1)):Array.isArray(r)?"(a:"+("property"===o?r.map(function(e){return e+(e>0)}):r).map(t)+")":r instanceof Map?"(dm:"+Array.from(r.entries()).sort(function(t,n){return[t[0],n[0]].sort(e("en"))[0]===t[0]?-1:1}).map(function(e){return e.map(t)})+")":r instanceof Set?"(ds:"+Array.from(r).sort(e("en")).map(t)+")":(void 0===r?"undefined":_typeof(r))===f&&"property"===o?r<0?-1===r?"last":a(-r)+"last":a(r+1):(void 0===r?"undefined":_typeof(r))===p&&"property"===o?RegExp(c).test(r)?r:"("+JSON.stringify(r)+")":JSON.stringify(r)},is:b,contains:function(e,t){if(e||""===e){if((void 0===e?"undefined":_typeof(e))===p)return(void 0===t?"undefined":_typeof(t))!==p?n.create("operation",v(e)+" can only contain strings, not "+v(t)+"."):e.includes(t);if(Array.isArray(e))return e.some(function(e){return b(e,t)});if(e instanceof Set||e instanceof Map)return Array.from(e.keys()).some(function(e){return b(e,t)})}return n.create("operation",v(e)+" cannot contain any values, let alone "+v(t))},isA:function(e,t){return _typeof(t.TwineScript_IsTypeOf)===d?t.TwineScript_IsTypeOf(e):n.create("operation",'"is a" should only be used to compare type names, not '+v(t)+".")},matches:function e(t,r){var i=!1;if(t&&_typeof(t.TwineScript_IsTypeOf)===d){var a=t.TwineScript_IsTypeOf(r);if(n.containsError(a))return a;i|=a}if(r&&_typeof(r.TwineScript_IsTypeOf)===d){var o=r.TwineScript_IsTypeOf(t);if(n.containsError(o))return o;i|=o}if(i)return!0;if(Array.isArray(t)&&Array.isArray(r)){for(var c=0,u=0,l=!0;l&&c<t.length&&u<r.length;){var p=t[c],f=r[u];if(p.rest){for(;u<r.length&&e(p,f);)f=r[u+=1];c+=1}else if(f.rest){for(;c<t.length&&e(p,f);)p=t[c+=1];u+=1}else e(p,f)?(c+=1,u+=1):l=!1}return l&&c>=t.length&&u>=r.length}return t instanceof Map&&r instanceof Map?e(Array.from(t.entries()).sort(),Array.from(r.entries()).sort()):t instanceof Set&&r instanceof Set?(t=[].concat(_toConsumableArray(t)),s.apply(void 0,_toConsumableArray(r)).some(function(n){return e(t,n)})):b(t,r)},subset:function e(t,r,i){if(!r||!i)return n.create("macrocall","The sub"+m(t)+" index value must not be "+(r&&i)+".");var a=(void 0===t?"undefined":_typeof(t))===p;if(a&&(t=Array.from(t)),r<0&&(r=Math.max(0,t.length+r+1)),i<0&&(i=Math.max(0,t.length+i+1)),r>i)return e(arguments[0],i,r);var o=t.slice(r>0?r-1:r,i).map(g);return a?o.join(""):o},range:function e(t,n){if(t>n)return e(n,t);var r=[t];for(n-=t;n-- >0;)r.push(++t);return r},printBuiltinValue:function e(t){return n.containsError(t)?t:t&&_typeof(t.TwineScript_Print)===d?t.TwineScript_Print():t instanceof Map?(t=Array.from(t.entries()),n.containsError(t)?t:t.reduce(function(t,n){var r=_slicedToArray(n,2),i=r[0],a=r[1];return t+"<tr><td>`"+e(i)+"`</td><td>`"+e(a)+"`</td></tr>"},"<table class=datamap>")+"</table>"):t instanceof Set?Array.from(t.values()).map(e)+"":Array.isArray(t)?t.map(e)+"":t&&_typeof(t.jquery)===p?t:h(t)?n.create("unimplemented","I don't know how to print this value yet."):t+""},unique:function(e,t,n){return!n.slice(t+1).some(function(t){return b(e,t)})}})}),define("utils/renderutils",["jquery","utils","renderer"],function(e,t,n){var r=RegExp(t.realWhitespace+"+"),i=RegExp(t.realWhitespace+"+","g");function a(e,t,n){var r=e.textContent.length;if(!(t>=r)){var i=void 0,a=[i=0===t?e:e.splitText(t)];return n&&(n<=0&&(n=r-n),n<r&&a.push(i.splitText(n-t))),a}}var o,s=(o=void 0,function(){if(void 0!==o)return o;var t=e("<p>");return t[0].normalize?(t.append(document.createTextNode("0-"),document.createTextNode("2"),document.createTextNode(""))[0].normalize(),o=1===t.contents().length):o=!1});var c="tw-collapsed,[collapsing=true]";var u=/^(=*)([^=]+)=*$/;return Object.freeze({dialog:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.section,a=r.parent,o=void 0===a?t.storyElement:a,s=r.cd,c=r.message,u=void 0===c?"":c,l=r.defaultValue,p=r.buttons,f=void 0===p?[{name:"OK",confirm:!0,callback:Object}]:p,d=e("<tw-backdrop><tw-dialog>"+(l||""===l?"<input type=text style='display:block;margin:0 auto'></input>\n":"")+"<tw-dialog-links>"+(f.length?f.reduce(function(e,t,n){var r=t.name;return e+"<tw-link style='margin:0 "+(n===f.length-1?"0 0 0.5em":0===n?"0.5em 0 0":"0.5em")+"' tabindex=0>"+r+"</tw-link>"},""):"<tw-link tabindex=0>"+f[0].name+"</tw-link>")+"</tw-dialog-links></tw-dialog></tw-backdrop>"),h=d.find("tw-dialog");if(o.append(d),i){i.renderInto(u,h,Object.assign({},s,{append:"prepend"}));var y=s&&s.transition&&d.find("tw-dialog > tw-transition-container");y&&y.length&&y.appendTo(d).append(h.prepend(y.contents().detach()))}else h.prepend(n.exec(u));if(l){var m=d.find("input").last();m.val(l).on("keypress",function(e){13===e.which&&(d.remove(),f.filter(function(e){return e.confirm}).forEach(function(e){return e.callback()}))}),setTimeout(function(){return m.focus()},100)}return f.reverse().forEach(function(t,n){e(d.find("tw-link").get(-n-1)).on("click",function(){d.remove(),t.callback()})}),d},realWhitespace:r,textNodeToChars:function(e){var t=[].concat(_toConsumableArray(e.textContent));return 1===t.length?[e]:t.reduce(function(e,t){return t.match(r)&&e.length&&e[e.length-1].match(r)?e[e.length-1]+=t:e.push(t),e},[]).reduce(function(t,n){var r=e;return n.length<e.textContent.length&&(e=e.splitText(n.length)),t.concat(r)},[])},findTextInNodes:function e(t,n){var r=[],i="",o=[];if(!t.length||!n)return o;for(;t.length>0;){r.push(t[0]),i+=t[0].textContent,t.shift();var s=i.indexOf(n);if(s>-1){for(var c,u=i.length-(s+n.length);s>=r[0].textContent.length;)s-=r[0].textContent.length,r.shift();if(1===r.length){var l=a(r[0],s,s+n.length);o.push(l[0]),l[1]&&t.unshift(l[1]);break}o.push(a(r[0],s,r[0].length)[0]),(c=o).push.apply(c,_toConsumableArray(r.slice(1,-1)));var p=a(r[r.length-1],0,r[r.length-1].textContent.length-u);o.push(p[0]),p[1]&&t.unshift(p[1]),o=o.filter(Boolean);break}}return[o].concat(_toConsumableArray(e(t,n)))},collapse:function(t){function n(t){return 0===e(this||t).parentsUntil(c).filter("tw-verbatim, tw-expression, [collapsing=false]").length}var r=function e(t){var n=t[0],r=t.parent();if(!r.length||t.findAndFilter("tw-story").length)return null;var i=r.textNodes().filter(function(e){var t=e.compareDocumentPosition(n);return 4&t&&!(8&t)});return(i=i[i.length-1])||e(r)}(t);e(r).parents(c).length||(r=null);var a=function e(t){var n=t[0],r=t.parent();if(!r.length||t.findAndFilter("tw-story").length)return null;var i=r.textNodes().filter(function(e){var t=e.compareDocumentPosition(n);return 2&t&&!(8&t)})[0];return i||e(r)}(t);e(a).parents(c).length||(a=null);var o="br:not([data-raw]),tw-consecutive-br:not([data-raw])";t.find(o).filter(n).replaceWith(document.createTextNode(" "));var u=(t=e(t.get().map(function(t){return e(t).filter(n).is(o)?e(document.createTextNode(" ")).replaceAll(t)[0]:t}))).textNodes(),l=0;u.reduce(function(e,t){return n(t)?(t.textContent=t.textContent.replace(i," ")," "!==t.textContent[0]||e&&e.textContent&&!(e.textContent.search(/\s$/)>-1)||(t.textContent=t.textContent.slice(1)),t):document.createTextNode("A")},r),[].concat(_toConsumableArray(u)).reverse().every(function(e){return!!n(e)&&(e.textContent.match(/^\s*$/)?(l+=e.textContent.length,e.textContent="",!0):(e.textContent=e.textContent.replace(/\s+$/,function(e){return l+=e.length,""}),!1))}),l>0&&a&&(u[u.length-1].textContent+=" "),t[0]&&s()&&t[0].normalize()},geomStringRegExp:u,geomParse:function(e){var t=e.length,n=u.exec(e)||[],r=_slicedToArray(n,3),i=r[0],a=r[1],o=r[2];return i?{marginLeft:a.length/t*100,size:o.length/t*100}:{marginLeft:0,size:0}}})}),define("datatypes/hookset",["jquery","utils","utils/renderutils","utils/operationutils"],function(e,t,n,r){var i=n.textNodeToChars,a=n.realWhitespace,o=n.findTextInNodes,s=r.toSource;function c(n){var r=n.dom,s=e();this.next&&(s=s.add(c.call(this.next,n)));var u=function(t,n){if(Array.isArray(n))return n.reduce(function(e,n){return e.add(t.get(n))},e());if(n&&"object"===(void 0===n?"undefined":_typeof(n))&&"first"in n&&"last"in n){var r=n.first,o=n.last,s=t.length;r<0&&(r+=s),o<0&&(o+=s);for(var c=[t.get(r)];r!==o;)r+=Math.sign(o-r),c.push(t.get(r));return e(c)}if("string"==typeof n){if("chars"===n){var u=[],l=!0,p=!1,f=void 0;try{for(var d,h=t.textNodes(":not(tw-error, tw-error *)")[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var y=d.value,m=!0,g=!1,v=void 0;try{for(var b,w=i(y)[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var T=b.value;T.textContent.match(a)||u.push(T)}}catch(e){g=!0,v=e}finally{try{!m&&w.return&&w.return()}finally{if(g)throw v}}}}catch(e){p=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(p)throw f}}return e(u)}if("links"===n)return t.findAndFilter("tw-link, .enchantment-link");if("visited"===n)return t.findAndFilter("tw-link.visited");if("lines"===n){var S=t.findAndFilter("br:not(tw-sidebar *),tw-consecutive-br:not(tw-sidebar *)").get(),x=[[]];return t.textNodes(":not(tw-error, tw-error *):not(tw-sidebar, tw-sidebar *)").forEach(function(e){S.length&&2&e.compareDocumentPosition(S[0])&&(S.shift(),x.push([])),x[x.length-1]=x[x.length-1].concat(e)}),x=x.map(function(t){return t.map(function(n){for(var r=n.parentNode;e(r).textNodes().every(function(e){return t.includes(e)})&&!t.every(function(t){return e(r).has(t).length});){r=(n=r).parentNode}return n})}),e(x.map(function(t){return e(t).wrapAll("<tw-pseudo-hook>").parent()[0]}))}}return e(t.get(n))};if(this.selector){var l=void 0;if("string"===this.selector.type)l=function(t,n){var r=o(n.textNodes(),t),i=e();return r.forEach(function(t){i=i.add(e(t).wrapAll("<tw-pseudo-hook>").parent())}),i}(this.selector.data,r);else{if("base"===this.selector.type)return s.add(u(c.call(this.selector.data,n),this.property));var p=function(e){var n='tw-hook[name="'+(e=t.insensitiveName(e).replace(/"/g,"&quot;"))+'"],tw-enchantment[name="'+e+'"]';return n+={page:", tw-story",passage:", tw-passage",sidebar:", tw-sidebar",link:", tw-link, .enchantment-link"}[e]||""}(this.selector.data);l=r.findAndFilter(p).add(r.parentsUntil(t.storyElement.parent())).filter(p)}s=this.property?s.add(u(l,this.property)):s.add(l)}return s}function u(e){if(!e)return[];var n=e.selector,r=e.property,i=e.next;return[JSON.stringify(["base"===n.type?u(n.data):t.insensitiveName(n.data),r])].concat(_toConsumableArray(u(i))).sort()}var l=Object.freeze({forEach:function(t,n){var r=c.call(this,t).each(function(t){n(e(this),t)});return t.dom.findAndFilter("tw-pseudo-hook").contents().unwrap(),r},hooks:function(e){return c.call(this,e)},get TwineScript_ObjectName(){return this.property||this.next?"a complex hook name":"?"+this.selector.data+" (a hook name)"},TwineScript_TypeID:"hookName",TwineScript_TypeName:"a hook name (like ?this)",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){var e="",n=this.selector,r=n.type,i=n.data;return"name"===r?i.match(RegExp("^"+t.anyRealLetter+"+$"))?e+="?"+i:e+="(hooks-named:"+JSON.stringify(i)+")":"string"===r?e+=JSON.stringify(i):"base"===r&&(e+=i.TwineScript_ToSource()+"'s "+s(this.property,"property")),this.next&&(e+=" + "+this.next.TwineScript_ToSource()),e},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){return u(this)+""==u(e)+""},TwineScript_GetProperty:function(e){return l.create({type:"base",data:this},e,void 0)},TwineScript_Properties:["chars","links","lines","visited"],TwineScript_Clone:function(){return l.create(this.selector,this.property,this.next)},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Object.assign(Object.create(this||l),{selector:Object.freeze(e),property:t,next:n})},from:function(e){return l.isPrototypeOf(e)||"string"==typeof e||t.impossible("HookSet.from() was given a non-HookSet non-string."),l.isPrototypeOf(e)?e:l.create({type:"string",data:e})}});return l}),define("internaltypes/changedescriptor",["jquery","utils","renderer","datatypes/hookset"],function(e,t,n,r){var i=t.assertOnlyHas,a=t.impossible,o=t.transitionIn,s=n.exec,c=Object.assign,u=Object.keys,l=Object.create,p=Object.seal,f=function(e){return e.split(/\n/g).reduce(function(e,t,n,r){var i=r.length;return e.concat(document.createTextNode(t),n!==i-1&&document.createElement(t.length?"br":"tw-consecutive-br"))},[])},d=void 0,h={source:"",appendSource:null,enabled:!0,enablers:null,verbatim:!1,target:null,append:"",newTargets:null,transition:"",transitionTime:null,transitionDeferred:!1,transitionDelay:0,transitionSkip:0,transitionOrigin:null,loopVars:null,styles:null,attr:null,data:null,functions:null,section:null,timestamp:0,summary:function(){var e=this;return["source","appendSource","enabled","verbatim","target","append","newTargets","transition","transitionTime","transitionDeferred","transitionDelay","transitionSkip","transitionOrigin","functions","enablers"].filter(function(t){return e.hasOwnProperty(t)}).concat([this.attr.length&&"attr",this.styles.length&&"styles",u(this.loopVars).length&&"loopVars",u(this.data).length&&"data"].filter(Boolean))},create:function(e,t){var n=c(l(this),{attr:[].concat(this.attr||[]),styles:[].concat(this.styles||[]),loopVars:this.loopVars||{},data:this.data||{}},e);return t&&t.run(n),n},update:function(){var e=this,t=this.section,n=this.newTargets,i=this.transition,a=this.transitionDeferred,s=this.append,c=this.target;"function"==typeof c&&(c=c());var l=function(t){if(Array.isArray(e.styles)&&e.styles.length>0){var n=e.styles.reduce(function(e,t){return u(t).forEach(function(n){var r=t[n];e[+("function"==typeof r)][n]=r}),e},[{},{}]),r=_slicedToArray(n,2),i=r[0],a=r[1];t.css(i),setTimeout(function(){return t.css(a)})}e.attr&&e.attr.forEach(function(e){return t.attr(e)}),e.data&&t.data(e.data)};if(Array.isArray(n)&&n.length&&(c=n.map(function(e){return e.target})),[].concat(c).forEach(function(e){r.isPrototypeOf(e)?e.forEach(t,l):l(e)}),i&&!a&&!s){var p=c,f=void 0;do{!(f=p.data("timestamp"))&&(p=p.parent())}while(!f&&p.length);o(c,i,this.transitionTime,this.transitionDelay,this.transitionSkip,f?Date.now()-f:0,this.transitionOrigin)}},render:function(){var t=this,n=this.source,u=this.transition,l=this.transitionTime,p=this.transitionDeferred,y=this.enabled,m=this.enablers,g=this.data,v=this.section,b=this.newTargets,w=this.functions,T=this.appendSource,S=this.target,x=this.target,k=this.append;if("function"==typeof S&&(S=S()),i(this,d),!k)return a("ChangeDescriptor.render","This doesn't have an 'append' method chosen."),e();if(m&&m.length){var O=m[0],j=O.descriptor,A=O.changer,C=j.render();if(A){var E=h.create({section:v,target:C});A.run(E),E.update()}return C}if(!y||void 0!==S.attr("hidden"))return h.create({target:S,data:c({},g,{originalSource:n,hidden:!0})}).update(),e();if(Array.isArray(b)&&b.length&&(S=b),!S)return a("ChangeDescriptor.render","ChangeDescriptor has source but not a target!"),e();var _=e();if([].concat(S).filter(function(e){return!e.jquery}).map(function(e){var t=k,n=void 0;if(e.target&&e.append){var r=e;t=r.append,n=r.before,e=e.target}return{elements:e.hooks(v,x).filter(function(){return!(n&&1&this.compareDocumentPosition(document)&&2&this.compareDocumentPosition(x[0]))}),append:t}},[]).forEach(function(n){var r=n.elements,i=n.append;r.each(function(n,r){r=e(r),_=_.add(t.create({target:r,append:i,newTargets:null}).render()),r.filter("tw-pseudo-hook").contents().unwrap()})}),_.length||Array.isArray(S)||r.isPrototypeOf(S))return _;if(!(k in S)){if("replace"!==k)return a("ChangeDescriptor.render","The target doesn't have a '"+k+"' method."),e();S[0]instanceof Text?k="replaceWith":(S.empty(),k="append")}return S[0]instanceof Text&&("append"===k&&(k="after"),"prepend"===k&&(k="before")),_=e(n&&(this.verbatim?f(n):e.parseHTML(s(n),document,!0))),Array.isArray(T)&&T.forEach(function(n){var r=n.source,i=n.append,a=e(t.verbatim?f(r):e.parseHTML(s(r),document,!0));_="append"===i?_.add(a):"prepend"===i?a.add(_):a}),S[k](_.length?_:void 0),S.data("timestamp",Date.now()),this.update(),u&&!p&&o("replace"===k?S:_,u,l,this.transitionDelay,this.transitionSkip,this.expedite,this.transitionOrigin),w&&w.forEach(function(e){return e(S)}),_}};return d=u(h),p(h)}),define("datatypes/changercommand",["utils","utils/operationutils","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r){var i=e.impossible,a=t.is,o=t.toSource,s={},c={TwineScript_TypeID:"changer",TwineScript_TypeName:"a changer",TwineScript_Print:function(){return"`[A ("+this.macroName+":) changer]`"},TwineScript_ToSource:function(){return"("+this.macroName+":"+("else"===this.name?"":this.params.map(o))+")"+(this.next?"+"+this.next.TwineScript_ToSource():"")},summary:function(){var e=n.create();return this.run(e),e.summary()},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Array.isArray(t)||i("ChangerCommand.create","params was not an array but "+t),Object.assign(Object.create(this),{macroName:e,params:t,next:n,TwineScript_ObjectName:"a ("+e+":) changer"})},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){if(c.isPrototypeOf(e))return this.macroName===e.macroName&&a(this.params,e.params)&&a(this.next,e.next)},TwineScript_Clone:function(){return this.create(this.macroName,this.params,this.next)},run:function(e){var t=s[this.macroName].apply(s,[e].concat(_toConsumableArray(this.params)));if(r.containsError(t))return t;this.next&&this.next.run(e)},register:function(e,t){s[e]=t}};return Object.freeze(c)}),define("state",["utils","passages","datatypes/changercommand","internaltypes/twineerror","utils/operationutils","markup","twinescript/compiler"],function(e,t,n,r,i,a,o){var s=e.impossible,c=i.objectName,u=i.toSource,l=a.lex,p=Object.assign,f=Object.create,d=["localStorage","sessionStorage"].map(function(e){try{return!!window[e]&&(window[e].setItem("test","1"),window[e].removeItem("test"),!0)}catch(e){return!1}}),h=p(f(null),{TwineScript_ObjectName:"this story's variables",TwineScript_TypeDefs:f(null),TwineScript_VariableStore:!0,TwineScript_MockVisits:null}),y={passage:"",variables:h,create:function(e,t){var n=f(y);return n.passage=e||"",n.variables=p(f(this.variables),t),n}},m=[],g=-1,v=y.create(),b=void 0,w={forward:[],back:[],load:[]},T=void 0;function S(e){v=(m[g]||y).create(e),function(){if(T.hasSessionStorage){var e=T.serialise();if("string"==typeof e)try{sessionStorage.setItem("Saved Session",e)}catch(e){return}}}()}return T=p({get passage(){return v.passage},get variables(){return v.variables},get pastLength(){return g},get futureLength(){return m.length-1-g},get mockVisits(){return v.variables.TwineScript_MockVisits||[]},set mockVisits(e){v.variables.TwineScript_MockVisits=e},passageNameVisited:function(e){var n=0;if(!t.get(e))return 0;for(var r=0;r<=g;r++)n+=+(e===m[r].passage);return n},passageNameLastVisited:function(e){if(!t.get(e))return 1/0;if(e===v.passage)return 0;for(var n=g;n>0;n--)if(m[n].passage===e)return g-n+1;return 1/0},pastPassageNames:function(){for(var e=[],t=g-1;t>=0;t--)e.unshift(m[t].passage);return e},timelinePassageNames:function(){return m.map(function(e){return e.passage})},play:function(e){v||s("State.play","present is undefined!"),v.passage=e,m=m.slice(0,g+1).concat(v),g+=1,S(e),w.forward.forEach(function(t){return t(e)})},rewind:function(e){var t=1,n=!1;if(e)if("string"==typeof e){if((t=this.passageNameLastVisited(e))===1/0)return}else"number"==typeof e&&(t=e);for(;t>0&&g>0;t--)n=!0,g-=1;return n&&(S(m[g].passage),w.back.forEach(function(e){return e()})),n},fastForward:function(e){var t=1,n=!1;for("number"==typeof e&&(t=e);t>0&&m.length>0;t--)n=!0,g+=1;return n&&(S(m[g].passage),w.forward.forEach(function(e){return e(m[g].passage,"fastForward")})),n},on:function(e,t){if(e in w)return"function"!=typeof t||w[e].includes(t)||w[e].push(t),T;s("State.on","invalid event name")},reset:function(){m=[],g=-1,v=y.create(),b=void 0,w.load.forEach(function(e){return e(m)})},hasStorage:d[0],hasSessionStorage:d[1]},function(){function e(e,t){Object.keys(t).forEach(function(n){return!n.startsWith("TwineScript_")&&(t[n]=e.eval(o(l(t[n],0,"macro"))))})}return{serialise:function(){var e=m.slice(0,g+1),t=e.map(function(e){return Object.keys(e.variables).filter(function(t){return e.variables[t]&&(n=e.variables[t],i=void 0===n?"undefined":_typeof(n),!(!r.containsError(n)&&("function"==typeof n.TwineScript_ToSource||Array.isArray(n)||n instanceof Map||n instanceof Set||"string"===i||"number"===i||"boolean"===i||Object.isPrototypeOf.call(h.TwineScript_TypeDefs,n))));var n,i}).map(function(t){return[t,e.variables[t]]})});if(b||(b=t.reduce(function(e,t,n){var r=_slicedToArray(t,2),i=r[0],a=r[1];return e||i&&[i,a,n+1]},void 0)),b){var n=_slicedToArray(b,3),i=n[0],a=n[1],o=n[2];return r.create("saving","The variable $"+i+" holds "+c(a)+" (which is, or contains, a complex data value) on turn "+o+"; the game can no longer be saved.")}try{return JSON.stringify(e,function(e,t){return this.TwineScript_VariableStore?"TwineScript_TypeDefs"===e?Object.keys(t).reduce(function(e,n){return e[n]=u(t[n]),e},{}):u(t):t})}catch(e){return!1}},deserialise:function(n,r){var i,a=void 0,o=h,s="The save data is unintelligible.";try{a=JSON.parse(r)}catch(e){return Error(s)}return Array.isArray(a)?(i=(a=a.map(function(r){if("object"!==(void 0===r?"undefined":_typeof(r))||!r.hasOwnProperty("passage")||!r.hasOwnProperty("variables"))return Error(s);if(!t.hasValid(r.passage))return Error("The data refers to a passage named '"+r.passage+"', but it isn't in this story.");if(r.variables=p(f(o),r.variables),Object.hasOwnProperty.call(r.variables,"TwineScript_TypeDefs")){var i=r.variables.TwineScript_TypeDefs=p(f(o.TwineScript_TypeDefs),r.variables.TwineScript_TypeDefs);try{e(n,i)}catch(e){return Error(s)}}try{e(n,r.variables)}catch(e){return Error(s)}return o=r.variables,p(f(y),r)})).find(function(e){return e instanceof Error}))?i:(m=a,w.load.forEach(function(e){return e(m)}),g=m.length-1,S(m[g].passage),!0):Error(s)}}}()),Object.seal(y),Object.freeze(T)}),define("internaltypes/varref",["state","internaltypes/twineerror","utils","utils/operationutils","datatypes/hookset"],function(e,t,n,r,i){var a=n.impossible,o=n.andList,s=n.nth,c=r.is,u=r.isObject,l=r.toSource,p=r.isSequential,f=r.objectName,d=r.typeName,h=r.clone,y=r.isValidDatamapName,m=r.subset,g=r.collectionType,v=r.unstorableValue,b=r.matches,w=void 0,T=0,S={set:[],delete:[]};function x(e,n){var r=void 0;if(e instanceof Map&&(r=t.containsError(y(e,n))))return r;if(p(e)){var a=void 0,s="You can only access position strings/numbers ('4th', 'last', '2ndlast', (2), etc.) or slices ('1stTo2ndlast', '3rdTo5th'), ",c="You can't access the '0th' or '0thlast' position of "+f(e)+".";if("number"==typeof n){if(0===n)return t.create("property","You can't access elements at position 0 of "+f(e)+".","Only positive and negative position values exist.");n>0&&(n-=1)}else if("string"==typeof n&&(a=/^(\d+)(?:st|[nr]d|th)last$/i.exec(n))){if("0"===a[1])return t.create("property",c);n=-a[1]}else if("string"==typeof n&&(a=/^(\d+)(?:st|[nr]d|th)$/i.exec(n))){if("0"===a[1])return t.create("property",c);n=a[1]-1}else if("string"==typeof n&&(a=/^(?:(\d+)(?:st|[nr]d|th)(last)?|last)to(?:(\d+)(?:st|[nr]d|th)(last)?|last)$/i.exec(n))){var u=_slicedToArray(a,5),l=u[1],d=void 0===l?0:l,h=u[2],m=u[3],g=void 0===m?0:m;n={last:g=u[4]?-g:g-1,first:d=h?-d:d-1}}else if("last"===n)n=-1;else if("random"===n){if(!e.length)return t.create("property","I can't get a random value from "+f(e)+", because it's empty");n=Math.random()*Array.from(e).length|0}else{if(i.isPrototypeOf(e)&&!i.TwineScript_Properties.includes(n))return t.create("property",s+o(i.TwineScript_Properties.map(function(e){return"'"+e+"'"}))+" of "+f(e)+", not "+f(n)+".");if(!["length","any","all","start","end","random"].includes(n)&&!i.isPrototypeOf(e))return t.create("property",s+"'length', 'any', 'all', 'start', 'end', and 'random' of "+f(e)+", not "+f(n)+".")}}else if(e instanceof Set){if(!["length","any","all"].includes(n))return t.create("property","You can only get the 'length', 'any' and 'all' of "+f(e)+".","To check contained values, use the 'contains' operator.");"length"===n&&(n="size")}else{if(Array.isArray(e.TwineScript_Properties)&&!e.TwineScript_Properties.includes(n))return t.create("property","You can only get the "+o(e.TwineScript_Properties.map(function(e){return"'"+e+"'"}))+" of "+f(e)+", not "+f(n)+".");if("number"==typeof e||"boolean"==typeof e)return t.create("property","You can't get data values from "+f(e)+".")}return n}function k(e,t){return t-0<0&&Math.abs(t)<=e.length?e.length+(t-0):t}function O(e,t){if(void 0===e)return e;if(e instanceof Map||w.isPrototypeOf(e))return e.get(t);if("any"===t||"all"===t||"start"===t||"end"===t)return function(e,t){var n="'"+t+"' value"+("any"===t?"":"s")+" of ";return{determiner:t,array:[].concat(_toConsumableArray(e)),string:"string"==typeof e&&e,TwineScript_ObjectName:n+f(e),TwineScript_TypeName:n+"a data structure",TwineScript_Unstorable:!0,TwineScript_Print:function(){return"`["+this.TwineScript_TypeName+"]`"}}}(e,t);if("string"==typeof e&&(e=[].concat(_toConsumableArray(e))),p(e)&&Number.isFinite(t)&&(t=k(e,t)),e.TwineScript_GetProperty)return e.TwineScript_GetProperty(t);var n=e[t];return"function"!=typeof n?n:void 0}function j(e){if(e.computed){var t=e.value;return w.isPrototypeOf(t)&&(t=t.get()),"string"==typeof t?"('"+t+"')":"("+t+")"}return"number"==typeof e?s(e):"'"+e+"'"}function A(n,r,a){if(n.TwineScript_VariableStore){if(n.TwineScript_TypeDefs&&r in n.TwineScript_TypeDefs){var o=n.TwineScript_TypeDefs[r];if("const"===o.name){if(void 0!==n[r])return t.create("operation","I can't alter "+(n===e.variables?"$":"_")+r+" because it's been restricted to a constant value.","This variable can't be changed for the rest of the story.")}else if(!b(o,a))return t.create("operation","I can't set "+(n===e.variables?"$":"_")+r+" to "+d(a)+" because it's been restricted to "+l(o)+"-type data.","You can restrict a variable or data name by giving a typed variable to (set:) or (put:).")}return!0}return Array.isArray(r)?r.map(function(e){return A(n,e)}):n instanceof Map?"string"==typeof r||t.create("operation",f(n)+" can only have string data names, not "+f(r)+"."):p(n)?["length","random","any","all","start","end"].includes(r)?t.create("operation","I can't forcibly alter the '"+r+"' of "+f(n)+".","start"===r||"end"===r?"Alter the values at actual positions, like 1st or 2ndlast, rather than just the '"+r+"'.":void 0):+r==(0|r)||t.create("property",f(n)+" can only have position keys ('3rd', '1st', (5), etc.), not "+j(r)+"."):n.TwineScript_Identifiers&&r in n?t.create("keyword","I can't alter the value of the '"+r+"' identifier.","You can only alter data in variables and hooks, not fixed identifiers."):t.create("operation","I can't modify "+f(n),n instanceof Set?"You should use an (array:) if you need to modify the data inside this dataset.":i.isPrototypeOf(n)?"You should alter hooks indirectly using macros like (replace:) or (enchant:).":void 0)}function C(e,t,n){var r=t;e instanceof Map?e.set(t,n):(p(e)&&(t=k(e,t)),e.TwineScript_Set?e.TwineScript_Set(t):e[t]=n),S.set.forEach(function(t){return t(e,r,n)})}function E(e,t){var n=t;p(e)&&(t=k(e,t)),Array.isArray(e)&&/^(?:[1-9]\d*|0)$/.exec(t)?e.splice(t,1):e instanceof Map||e instanceof Set?e.delete(t):delete e[t],S.delete.forEach(function(t){return t(e,n)})}function _(e){return Object.assign(Object.create(w),{error:e})}function N(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;if(r&&"object"===(void 0===r?"undefined":_typeof(r))&&"last"in r&&"first"in r){if(i.isPrototypeOf(n))return n.TwineScript_GetProperty(r);var s=r.first,c=r.last;return m(n,s+(s>=0),c+(c>=0))}if(Array.isArray(r))return i.isPrototypeOf(n)?n.TwineScript_GetProperty(r):r.map(function(e){return N(n,e,e)})["string"==typeof n?"join":"valueOf"]("");var u=O(n,r);if(void 0===u){if(n===e.variables)return T;if(n.TwineScript_VariableStore)return t.create("property","There isn't a temp variable named _"+a+" in this place.","Temp variables only exist inside the same passage and hook in which they're (set:).");if(Array.isArray(n)&&"number"==typeof r)return t.create("property","This array of "+(n.length+1)+" elements doesn't have a "+j(a)+" element.",n.length?"It contains: "+o(n.map(f))+".":"The array is empty.");var l=Array.from("function"==typeof n.keys&&n.keys());return t.create("property","I can't find a "+j(a)+" data name in "+f(n),n instanceof Map&&l.length?"Its names include: "+o(l)+".":void 0)}return u}function P(e,n){var r=this,i=this.compiledPropertyChain.reduce(function(e,t){var n=void 0;return n=0===e.length?r.object:N.apply(void 0,_toConsumableArray(e[e.length-1])),e.push([n,t])&&e},[]).reduceRight(e,n);return t.containsError(i)?i:void 0}return w=Object.freeze({get:function(){return this.error?this.error:N(this.deepestObject,this.compiledPropertyChain.slice(-1)[0],this.propertyChain.slice(-1)[0])},set:function(n){var r=this;return this.error?this.error:!this.object||this.object.TwineScript_VariableStore||this.object.TwineScript_Identifiers?P.call(this,function(n,i,a){var o,s=_slicedToArray(i,2),c=s[0],l=s[1];if(o=t.containsError(n,c,l)||t.containsError(A(c,l,n)))return o;var d;if(d=v(n))return t.create("operation",f(n)+" can't be stored"+(g(n)?" because it holds "+f(d)+".":""));if(a>0)c=h(c);else if(c.TwineScript_VariableStore&&c!==e.variables){for(var y=c;y.TwineScript_VariableStore&&!y.hasOwnProperty(l);)y=Object.getPrototypeOf(y);y.TwineScript_VariableStore&&(c=y)}if("string"==typeof c){if("string"!=typeof n)return t.create("datatype","I can't put this non-string value, "+f(n)+", in a string.");if(n.length!==(Array.isArray(l)?l.length:1))return t.create("datatype",f(n)+"is not the right length to fit into this string location.");c=[].concat(_toConsumableArray(c));var m=[].concat(_toConsumableArray(n));[].concat(l).forEach(function(e){0+e<0&&(e=c.length+(0+e)),c=[].concat(_toConsumableArray(c.slice(0,e)),[m.shift()],_toConsumableArray(c.slice(e+1)))}),c=c.join("")}else u(c)&&(void 0!==n.TwineScript_KnownName&&(n.TwineScript_KnownName=r.TwineScript_ObjectName),Array.isArray(l)&&p(n)?("string"==typeof n&&(n=[].concat(_toConsumableArray(n))),l.map(function(e,t){return[e,n[t]]}).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return C(c,n,r)})):C(c,l,n));return c},n):t.create("macrocall","I can't (set:) "+f(this)+", if the "+(f(this.object).match(/ (.+$)/)||["","value"])[1]+" isn't stored in a variable.","Modifying data structures that aren't in variables won't change the game state at all.")},delete:function(){return this.error?this.error:P.call(this,function(e,n,r){var i,a=_slicedToArray(n,2),o=a[0],s=a[1];if(i=t.containsError(e,o,s)||t.containsError(A(o,s)))return i;if(r>0&&(o=h(o)),null===e){var c="string"==typeof o;c&&(o=[].concat(_toConsumableArray(o))),Array.isArray(s)?(p(o)&&(s=[].concat(_toConsumableArray(new Set(s)))).sort(function(e,t){return k(o,t)-k(o,e)}),s.forEach(function(e){return E(o,e)})):E(o,s),c&&(o=o.join(""))}else C(o,s,e);return o},null)},defineType:function(e){var n=this.object,r=this.compiledPropertyChain;if(!n||!n.TwineScript_VariableStore||1!==r.length||!n.TwineScript_TypeDefs)return t.create("unimplemented","I can only restrict the datatypes of variables, not data names or anything else.");var i=r[0];Object.hasOwnProperty.call(n,"TwineScript_TypeDefs")||(n.TwineScript_TypeDefs=Object.create(n.TwineScript_TypeDefs));var a=n.TwineScript_TypeDefs,o=a[i];if(o&&!c(o,e))return t.create("operation","I can't redefine the type of "+f(this)+" to "+(e.TwineScript_ObjectName||d(e))+", as it is already "+(o.TwineScript_ObjectName||d(o))+".");a[i]=e,"const"===e.name&&(n[i]=void 0)},matches:function(e,t){return this.object===e&&this.compiledPropertyChain[0]===t},getName:function(){return this.compiledPropertyChain[0]},create:function(e,n){var r=void 0;if(r=t.containsError(e))return _(r);n=[].concat(n),w.isPrototypeOf(e)&&(n=e.propertyChain.concat(n),e=e.object);var i=function(e,n){return{compiledPropertyChain:n.reduce(function(r,i,a){var o;return i.computed&&(i=i.value),w.isPrototypeOf(i)&&(i=i.get()),i=Array.isArray(i)?i.map(function(t){return x(e,t)}):x(e,i),(o=t.containsError(r,i))?o:(a<n.length-1&&(e=N(e,i)),r.push(i),r)},[]),deepestObject:e}}(e,n),a=i.compiledPropertyChain,o=i.deepestObject;return(r=t.containsError(a,o))?_(r):Object.assign(Object.create(w),{object:e,propertyChain:n,compiledPropertyChain:a,deepestObject:o})},TwineScript_ToSource:function(){var t=this,n=function(e,n){return!n&&t.object.TwineScript_VariableStore?e:j(e)};return(this.object===e.variables?"$":this.object.TwineScript_VariableStore?"_":f(this.object)+"'s ")+(1===this.propertyChain.length?n(this.propertyChain[0]):this.propertyChain.reduce(function(e,t,r){return e+"'s "+n(t,r)}))},get TwineScript_ObjectName(){return this.TwineScript_ToSource()+(this.object.TwineScript_VariableStoreName?" in "+this.object.TwineScript_VariableStoreName:"")},on:function(e,t){if(e in S)return"function"!=typeof t||S[e].includes(t)||S[e].push(t),w;a("VarRef.on","invalid event name")}})}),define("internaltypes/varscope",[],function(){return Object.seal({TwineScript_ObjectName:"the temporary variables",TwineScript_VariableStore:!0,TwineScript_TypeDefs:Object.create(null)})}),define("internaltypes/twinenotifier",["jquery","utils"],function(e,t){var n=t.impossible,r={create:function(e){return e||n("TwineNotifier.create","called with only 1 string."),Object.assign(Object.create(r),{message:e})},render:function(){return e("<tw-notifier>").attr("message",this.message)}};return r}),define("datatypes/custommacro",["jquery","utils/operationutils","internaltypes/changedescriptor","internaltypes/varref","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,i,a,o){var s=t.objectName,c=t.matches,u=Object.assign,l=Object.create,p=function(t){return function(c){for(var p=arguments.length,f=Array(p>1?p-1:0),d=1;d<p;d++)f[d-1]=arguments[d];t.called+=1;var h=t.varNames,y=t.params,m=t.body,g=u(l(i),{TwineScript_VariableStoreName:t.TwineScript_ObjectName+" call #"+t.called,TwineScript_TypeDefs:l(null)}),v=[],b=0;f.forEach(function(e,t){var n=h[b];g.TwineScript_TypeDefs[n]=y[b].datatype.rest?y[b].datatype.create("array"):y[b].datatype;var i=r.create(g,n);if(y[b].datatype.rest){var a=(g[n]||[]).concat(e);if(t<f.length-1)return void(g[n]=a);i.set(a)}else i.set(e),b+=1;v.push(o.create(s(i)+" is now "+s(g[n])))}),f.length&&(b+=1),y[b]&&y[b].datatype.rest&&(r.create(g,h[b]).set([]),g.TwineScript_TypeDefs[name]=y[b].datatype.create("array"));var w=void 0,T=e("<p>").append(m.html);c.stack.unshift({tempVariables:g,dom:T,output:function(e){w=e}}),c.execute(),c.stackTop.blocked&&c.stack.shift();var S,x,k=T.find("tw-error");return k.length?(T.prepend(v.map(function(e){return e.render()}),"<br>"),a.create("propagated",k.length+" error"+(k.length>1?"s":"")+" occurred when running "+t.TwineScript_ObjectName+".",void 0,T)):void 0===w?a.create("custommacro",t.TwineScript_ObjectName+" didn't output any data or hooks using (output:) or (output-data:)."):n.isPrototypeOf(w)?(S=w,x=u({TwineScript_TypeID:"command",TwineScript_ObjectName:"a custom command",TwineScript_TypeName:"a custom command",TwineScript_Print:function(){return"`[a custom command]`"},TwineScript_Attach:function(e){return e.run(S),x},TwineScript_Run:function(){return S}})):w}},f=Object.freeze({TwineScript_TypeID:"macro",TwineScript_TypeName:"a custom macro",get TwineScript_ObjectName(){return this.TwineScript_KnownName?"the "+this.TwineScript_KnownName+" macro":"a custom macro"},TwineScript_GetProperty:function(e){if("params"===e)return[].concat(_toConsumableArray(this.params))},TwineScript_Properties:["params"],TwineScript_Print:function(){return"`["+this.TwineScript_ObjectName+"]`"},TwineScript_Clone:function(){return u(l(f),this)},TwineScript_ToSource:function(){return"(macro:"+this.params.map(function(e){return e.TwineScript_ToSource()}).concat("")+this.body.TwineScript_ToSource()+")"},create:function(e,t){var n=u(l(this),{params:e,called:0,varNames:e.map(function(e){return e.varRef.propertyChain[0]}),typeSignature:e.map(function(e){var t=void 0;return t=e.datatype.toTypeSignatureObject?e.datatype.toTypeSignatureObject({rest:e.rest}):{pattern:"range",range:function(t){return c(e.datatype,t)}},e.rest?{pattern:"zero or more",innerType:t}:t}),body:t,TwineScript_KnownName:""});return n.fn=p(n),n}});return f}),define("datatypes/lambda",["utils/operationutils","internaltypes/varscope","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r){var i=e.objectName,a=Object.freeze({TwineScript_TypeID:"lambda",TwineScript_TypeName:"a lambda",get TwineScript_ObjectName(){return'a "'+("making"in this?"making ... ":"")+("where"in this?"where ... ":"")+("when"in this?"when ... ":"")+("via"in this?"via ... ":"")+'" lambda'},TwineScript_Print:function(){return"`[A lambda]`"},TwineScript_is:function(e){return e===this},TwineScript_ToSource:function(){return this.source},TypeSignature:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"lambda",innerType:a,clauses:t,typeName:'a "'+t.concat("").join(" ...")+'" lambda'}},TwineScript_Clone:function(){return Object.assign(Object.create(a),this)},create:function(e,o,s,c){var u=void 0;function l(e){var r=e&&e.varRef?e.varRef:e;return void 0===r||r&&n.isPrototypeOf(r)&&t.isPrototypeOf(r.object)&&1===r.propertyChain.length}if("making"===o&&!l(s))return r.create("syntax","I need a temp variable, or typed temp variable, to the right of '"+o+"', not "+i(s)+".");if(r.containsError(e))return e;if(a.isPrototypeOf(e)){if("when"===o||"when"in e)return r.create("syntax","A 'when' lambda cannot have any other clauses, such as '"+o+"'.");if(o in e&&("where"!==o||"true"!==e[o]))return r.create("syntax","This lambda has two '"+o+"' clauses.");u=e}else{if("when"===o&&void 0!==e)return r.create("syntax","A 'when' lambda shouldn't begin with a temp variable (just use 'when' followed by the condition).");if(!l(e))return r.create("syntax","This lambda needs to start with a single temp variable, or typed temp variable, not "+i(e)+".");(u=Object.create(this)).loop=e||""}return u.source=c.trim(),u[o]=s,u.making&&u.making.getName()===(u.loop&&u.loop.getName())?r.create("syntax","This lambda has two variables named '"+u.loop.getName()+"'.","Lambdas should have all-unique parameter names."):u},apply:function(e,n){var i=n.loop,a=n.pos,o=n.making,s=n.ignoreVia,c=n.tempVariables;function u(e,t){if(e)if("datatype"in e&&"varRef"in e){var n=e.varRef.create(c,e.varRef.propertyChain);n.defineType(e.datatype);var i=n.set(t);if(r.containsError(i))return i}else c[e.getName()]=t}c=c||Object.create(e.stack.length?e.stackTop.tempVariables:t);var l=u(this.loop,i)||u(this.making,o);if(r.containsError(l))return l;e.stack.unshift(Object.assign(Object.create(e.stackTop||null),{tempVariables:c,lambdaPos:this.when?void 0:a}));var p=e.eval("Operations");!i||this.making||this.when?p.initialiseIt(r.create("operation","I can't use 'it', or an implied 'it', in "+this.TwineScript_ObjectName)):p.initialiseIt(i);var f=!s&&this.via,d=e.eval("where"in this||"when"in this?"Operations.where("+(this.where||this.when)+","+(f||"true")+",null)":f||"true");return e.stack.shift(),d},filter:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=void 0,o=t.reduce(function(t,o,s){if(a=r.containsError(t))return a;var c=n.apply(e,{loop:o,pos:s+1,ignoreVia:!0,tempVariables:i});return(a=r.containsError(c))?a:t.concat(c?[o]:[])},[]);return(a=r.containsError(o))?a:o}});return a}),define("datatypes/codehook",["internaltypes/twineerror","renderer"],function(e,t){var n=t.exec;return Object.freeze({TwineScript_TypeName:"a code hook",TwineScript_ObjectName:"a code hook",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){return"["+this.source+"]"},create:function(t,r){r||(r=n(t));var i=e.containsError(r);return i||Object.assign(Object.create(this),{source:t,html:r})}})}),define("datatypes/colour",["jquery","utils"],function(e,t){var n=t.matMul,r=Math.max,i=Math.min,a=Math.sin,o=Math.cos,s=Math.pow,c=Math.round,u=Math.floor,l=Math.atan2,p=Math.cbrt,f=Math.sqrt,d=Math.PI,h=Object.assign,y=Object.create,m=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,g=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,v=y(null);function b(e){var t=e.r,n=e.g,a=e.b,o=e.a,s=r(t/=255,n/=255,a/=255),u=i(t,n,a),l=(s+u)/2,p=s-u;if(s===u)return{h:0,s:0,l:l};var f=void 0;switch(s){case t:f=(n-a)/p+(n<a?6:0);break;case n:f=(a-t)/p+2;break;case a:f=(t-n)/p+4}return{h:f=c(60*f),s:l>.5?p/(2-s-u):p/(s+u),l:l,a:o}}var w=[.96422,1,.82521],T=24389/27,S=216/24389,x=function(e){return e.map(function(e){return[e]})},k=function(e){return e.map(function(e){return e[0]})};function O(e){var t=e.l,r=e.c,i=e.h,c=e.a;t*=100;var u=[];u[1]=(t+16)/116,u[0]=r*o(i*d/180)/500+u[1],u[2]=u[1]-r*a(i*d/180)/200;var l=[s(u[0],3)>S?s(u[0],3):(116*u[0]-16)/T,t>T*S?s((t+16)/116,3):t/T,s(u[2],3)>S?s(u[2],3):(116*u[2]-16)/T].map(function(e,t){return e*w[t]}),p=k(n([[.9555766,-.0230393,.0631636],[-.0282895,1.0099416,.0210077],[.0122982,-.020483,1.3299098]],n([[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]],x(l)))).map(function(e){return 255*e}),f=_slicedToArray(p,3);return{r:f[0],g:f[1],b:f[2],a:c}}function j(e){var t=O(e);return[t.r,t.g,t.b].every(function(e){return e>=0&&e<=255})}var A=Object.freeze({TwineScript_TypeID:"colour",TwineScript_TypeName:"a colour",TwineScript_ObjectName:"a colour",TwineScript_DebugName:function(){return"a colour "+this.TwineScript_Print()},"TwineScript_+":function(e){var t=this.toRGBA(),n=e.toRGBA();return A.create({r:Math.min(Math.round(.6*(t.r+n.r)),255),g:Math.min(Math.round(.6*(t.g+n.g)),255),b:Math.min(Math.round(.6*(t.b+n.b)),255),a:(t.a+n.a)/2})},TwineScript_Print:function(){var e=this.toRGBA();return"<tw-colour style='background-color:rgba("+[e.r,e.g,e.b,e.a]+");'></tw-colour>"},TwineScript_is:function(e){if(!A.isPrototypeOf(e))return!1;if(e.lcha&&this.lcha)return e.lcha.l===this.lcha.l&&e.lcha.c===this.lcha.c&&e.lcha.h===this.lcha.h&&e.a===this.a;var t=this.toRGBA();return(e=e.toRGBA()).r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a},TwineScript_Clone:function(){return A.create(this)},toRGBAString:function(){var e=this.toRGBA();return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},toHSLA:function(){return b(this.toRGBA())},toRGBA:function(){return this.lch?O(function(e){if(j(e))return e;var t=(e=h({},e)).c,n=0;for(e.c/=2;t-n>1e-5;)j(e)?n=e.c:t=e.c,e.c=(t+n)/2;return e}(h({},this.lch,{a:this.a}))):this},toLCHA:function(){return this.lch?h({},this.lch):(t=(e=this).r,r=e.g,i=e.b,a=e.a,o=k(n([[1.0478112,.0228866,-.050127],[.0295424,.9904844,-.0170491],[-.0092345,.0150436,.7521316]],n([[.4124564,.3575761,.1804375],[.2126729,.7151522,.072175],[.0193339,.119192,.9503041]],x([t/255,r/255,i/255])))).map(function(e,t){return e/w[t]}).map(function(e){return e>S?p(e):(T*e+16)/116}),c=[116*o[1]-16,500*(o[0]-o[1]),200*(o[1]-o[2])],u=180*l(c[2],c[1])/d,{l:c[0]/100,c:f(s(c[1],2)+s(c[2],2)),h:u>=0?u:u+360,a:a});var e,t,r,i,a,o,c,u},LCHRotate:function(e){e<0&&(e=360+e);var t=this.toLCHA();return t.h=(t.h+e)%360,t.a=this.a,A.create(t)},TwineScript_GetProperty:function(e){if("lch"===e){var t=this.toLCHA();return new Map([["l",t.l],["c",t.c],["h",t.h]])}var n=this.toRGBA();return"h"===e||"s"===e||"l"===e?b(n)[e]:"r"===e||"g"===e||"b"===e||"a"===e?n[e]:void 0},TwineScript_Properties:["h","s","l","r","g","b","a","lch"],TwineScript_ToSource:function(){var e=!this.lch&&b(this);if(e&&!e.h&&!e.s){if(1===e.l)return"white";if(0===e.l)return"black"}return"("+(this.lch?"lch":"hsl")+":"+(this.lch?[this.lch.l,this.lch.c,this.lch.h]:[e.h,e.s,e.l])+(1!==this.a?","+this.a:"")+")"},create:function(t){return"string"==typeof t?this.create((A.isHexString(t)?function(e){return"string"!=typeof e?e:(e=(e=e.replace("#","")).replace(m,"$1$1$2$2$3$3"),{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)})}:function(t){if(t in v)return v[t];var n=e("<p>").css("background-color",t).css("background-color");return n="transparent"===n?{r:0,g:0,b:0,a:0}:n.startsWith("rgb")?n.match(/\d+/g).reduce(function(e,t,n){return e["rgb"[n]]=+t,e},{}):{r:192,g:192,b:192},v[t]=n,n})(t)):!("h"in t&&"s"in t&&"l"in t)||"r"in t||"g"in t||"b"in t?("a"in t&&"number"==typeof t.a||(t.a=1),h(y(this),"h"in t&&"c"in t&&!("s"in t)&&"l"in t?{a:t.a,lch:{l:t.l,c:t.c,h:t.h}}:t)):this.create(function(e){var t=e.h,n=e.s,r=e.l,i=e.a;if(0===n){var a=u(255*r);return{r:a,g:a,b:a}}var o=r<.5?r*(1+n):r+n-r*n,s=2*r-o;function c(e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+6*(o-s)*e:e<.5?o:e<2/3?s+(o-s)*(2/3-e)*6:s}return{r:u(255*c((t/=360)+1/3)),g:u(255*c(t)),b:u(255*c(t-1/3)),a:i}}(t))},isHexString:function(e){return"string"==typeof e&&"#"===e[0]&&(e.slice(1).match(m)||e.slice(1).match(g))},isCSS3Function:function(e){return"string"==typeof e&&/^(?:rgb|hsl)a?\(\s*\d+\s*,\s*\d+%?\s*,\s*\d+%?(?:,\s*\d+(?:\.\d+)?\s*)?\)$/.test(e)}});return A}),define("datatypes/gradient",["utils/operationutils"],function(e){var t=e.toSource,n=Object.freeze({TwineScript_TypeID:"gradient",TwineScript_TypeName:"a gradient",TwineScript_ObjectName:"a gradient",TwineScript_DebugName:function(){return"a gradient "+this.TwineScript_Print()},TwineScript_GetProperty:function(e){var t=this;return"angle"===e?this.angle:"stops"===e?this.stops.map(function(e){return new Map([[t.repeating?"pixels":"percent",e.stop],["colour",e.colour.TwineScript_Clone()]])}):void 0},TwineScript_Properties:["angle","stops"],TwineScript_ToSource:function(){return"(gradient:"+this.angle+","+this.stops.map(function(e){return t(e.stop)+","+t(e.colour)})+")"},TwineScript_is:function(e){var t=this;return e.angle===this.angle&&e.stops.length===this.stops.length&&e.stops.every(function(e,n){var r=e.colour,i=e.stop;return t.stops[n].stop===i&&t.stops[n].colour.TwineScript_is(r)})},TwineScript_Clone:function(){return n.create(this.angle,[].concat(_toConsumableArray(this.stops)))},TwineScript_Print:function(){return"<tw-colour style='background:"+this.toLinearGradientString()+"'></tw-colour>"},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object.assign(Object.create(this),{angle:e,stops:t.sort(function(e,t){return e.stop-t.stop}),repeating:n})},multiply:function(e){return n.create(this.angle,this.stops.map(function(t){return{colour:t.colour,stop:t.stop*e}}))},toLinearGradientString:function(){var e=this;return(this.repeating?"repeating-":"")+"linear-gradient("+this.angle+"deg, "+this.stops.reduce(function(t,n){var r=n.colour,i=n.stop;return t+r.toRGBAString()+" "+i*(e.repeating?1:100)+(e.repeating?"px,":"%,")},"").slice(0,-1)+")"}});return n}),define("datatypes/datatype",["utils","utils/operationutils","datatypes/changercommand","datatypes/colour","datatypes/gradient","datatypes/lambda","datatypes/custommacro","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s){var c=e.realWhitespace,u=e.anyRealLetter,l=e.anyCasedLetter,p=e.anyNewline,f=t.objectName,d=Object.assign,h=Object.seal,y=Object.keys,m=Math.floor,g=Math.abs,v=void 0,b=void 0,w={TwineScript_TypeID:"datatype",TwineScript_TypeName:"a datatype",TwineScript_Print:function(){return"`["+this.TwineScript_ObjectName+"]`"},get TwineScript_ObjectName(){return"the "+(this.rest?"...":"")+this.name+" datatype"},TwineScript_is:function(e){return w.isPrototypeOf(e)&&e.name===this.name},TwineScript_Clone:function(){return this.rest?this:Object.create(this)},TwineScript_ToSource:function(){return(this.rest?"...":"")+this.name},TwineScript_IsTypeOf:function(e){var t=this.name,n=this.rest;return!!v[t]&&v[t](e,n)},toTypeSignatureObject:function(){var e={pattern:"range",range:v[this.name]};return this.rest?{pattern:"zero or more",innerType:e}:e},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e="datamap"===e?"dm":"dataset"===e?"ds":"number"===e?"num":"string"===e?"str":"color"===e?"colour":"boolean"===e?"bool":"alphanumeric"===e?"alnum":"integer"===e?"int":e;var n=Object.create(this);return n.name=e,n.rest=t,n},from:function(e){var t=y(b).find(function(t){return b[t](e)});return t?w.create(t):s.create("datatype",f(e)+" doesn't correspond to a datatype value.")}};return b={array:Array.isArray,dm:function(e){return e instanceof Map},ds:function(e){return e instanceof Set},datatype:function(e){return w.isPrototypeOf(e)},changer:function(e){return n.isPrototypeOf(e)},colour:function(e){return r.isPrototypeOf(e)},gradient:function(e){return i.isPrototypeOf(e)},lambda:function(e){return a.isPrototypeOf(e)},macro:function(e){return o.isPrototypeOf(e)},str:function(e){return"string"==typeof e},num:function(e){return"number"==typeof e},bool:function(e){return"boolean"==typeof e}},v=d({},b,{even:function(e){return!isNaN(e)&&m(g(e))%2==0},odd:function(e){return!isNaN(e)&&m(g(e))%2==1},empty:function(e){return e instanceof Map||e instanceof Set?!e.size:!(!Array.isArray(e)&&"string"!=typeof e)&&!e.length},int:function(e){return"number"==typeof e&&e===(0|e)},uppercase:function(e){return"string"==typeof e&&1===[].concat(_toConsumableArray(e)).length&&[].concat(_toConsumableArray(e)).every(function(e){return e!==e.toLowerCase()})},lowercase:function(e){return"string"==typeof e&&1===[].concat(_toConsumableArray(e)).length&&[].concat(_toConsumableArray(e)).every(function(e){return e!==e.toUpperCase()})},whitespace:function(e){return"string"==typeof e&&!!e.match("^"+c+"$")},digit:function(e){return"string"==typeof e&&!!e.match("^\\d$")},alnum:function(e){return"string"==typeof e&&!!e.match("^"+u+"$")},anycase:function(e){return"string"==typeof e&&!!e.match("^"+l+"$")},linebreak:function(e){return"string"==typeof e&&!!e.match("^"+p+"$")},any:function(){return!0},const:function(){return!0}}),h(w)}),define("datatypes/typedvar",["utils/operationutils","datatypes/datatype","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r){var i=e.typeName,a=e.matches,o=e.toSource,s=e.unstorableValue,c=Object.freeze,u=Object.assign,l=Object.create,p=c({TwineScript_TypeName:"a typed variable name",get TwineScript_ObjectName(){return this.TwineScript_ToSource()},TwineScript_Print:function(){return"`[A typed variable name]`"},TwineScript_Unstorable:!0,TwineScript_Clone:function(){return u(l(p),{datatype:this.datatype.TwineScript_Clone(),varRef:this.varRef})},TwineScript_ToSource:function(){return o(this.datatype)+"-type "+this.varRef.TwineScript_ToSource()},TwineScript_GetProperty:function(e){return"name"===e?this.getName():this[e]},TwineScript_Properties:["datatype","name"],TwineScript_IsTypeOf:function(e){return a(this.datatype,e)},get:function(){var e;return(e=this.varRef).get.apply(e,arguments)},getName:function(){return this.varRef.getName()},defineType:function(){if("any"!==this.datatype.name)return this.varRef.defineType(this.datatype)},create:function(e,t){var n;if(n=r.containsError(t)||r.containsError(e)||t.error)return n;var a=s(e);return a&&!p.isPrototypeOf(a)?r.create("syntax","The -type syntax can't have "+i(a)+" to its left."):u(l(this),{datatype:e,varRef:t})}});return p}),define("macros",["jquery","utils/naturalsort","utils","utils/operationutils","datatypes/changercommand","datatypes/custommacro","datatypes/lambda","datatypes/hookset","datatypes/codehook","datatypes/typedvar","datatypes/datatype","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s,c,u,l,p,f){var d=n.insensitiveName,h=n.nth,y=n.plural,m=n.andList,g=n.lockProperty,v=(r.clone,r.objectName),b=r.typeName,w=r.singleTypeCheck,T=r.toSource,S=void 0,x={};function k(e,n,r){var i=n.fn,a=n.typeSignature,s=n.isChanger,u=void 0!==s&&s,l=r[0];r=function(e){return e.reduce(function(e,n){if(n&&!0===n.spreader){var r=n.value,i=f.containsError(r);if(i)e.push(i);else if(Array.isArray(r)||"string"==typeof r)for(var a=0;a<r.length;a++)e.push(r[a]);else r instanceof Set?e.push.apply(e,_toConsumableArray(Array.from(r).sort(t("en")))):e.push(f.create("operation","I can't spread out "+v(r)+", because it is not a string, dataset, or array."))}else e.push(n);return e},[])}(r.slice(1)),a=[].concat(a||[]);var p=!e,d=p?"":"("+(Array.isArray(e)&&e.length>1?e[0]:e)+":)";e=p?"this custom macro":"the "+d+" macro";var g=void 0;g=a.length>0?e+" must only be given "+m(a.map(b))+(a.length>1?", in that order":"."):e+" must not be given any data."+(p?"":" Just write "+d);for(var T=void 0,x=function(t,n){var i=a[t],s=r[t];if(f.containsError(s))return{v:s};if(c.isPrototypeOf(s)&&u)return{v:f.create("syntax","Please put this hook outside the parentheses of the changer macro, not inside it.","Hooks should appear after a macro"+(p?".":": "+d+"[Some text]"))};if(t>=a.length&&!T)return{v:f.create("datatype",r.length-a.length+" too many values were given to "+e+".",g)};if(i||(i=T),!i.innerType||"rest"!==i.pattern&&"zero or more"!==i.pattern||(T=i.innerType,"rest"===i.pattern&&(i=i.innerType)),!w(s,i)){if(void 0===s){var l=a.filter(function(e){return!("optional"===e.pattern||"zero or more"===e.pattern)}).length;return{v:f.create("datatype",e+" needs "+y(l-t,"more value")+".",g)}}return s&&s.TwineScript_Unstorable&&(i===S.TypeSignature.Any||i.innerType&&i.innerType===S.TypeSignature.Any)?{v:f.create("datatype",e+"'s "+h(t+1)+" value, "+v(s)+", is not valid data for this macro.",g)}:s&&o.isPrototypeOf(s)&&"lambda"===i.pattern?{v:f.create("datatype",e+"'s "+h(t+1)+" value (a lambda) should have "+m(["where","when","making","via","with"].filter(function(e){return i.clauses.includes(e)}).map(function(e){return"a '"+e+"' clause"}))+", not "+m(["where","when","making","via","with"].filter(function(e){return e in s}).map(function(e){return"a '"+e+"' clause"}))+".")}:"insensitive set"===i.pattern?{v:f.create("datatype",v(s)+" is not a valid name string for "+e+".","Only the following names are recognised (capitalisation and hyphens ignored): "+m(i.innerType)+".")}:{v:f.create("datatype",e+"'s "+h(t+1)+" value is "+v(s)+", but should be "+b(i)+".",i.message||g)}}},k=0,O=Math.max(r.length,a.length);k<O;k+=1){var j=x(k);if("object"===(void 0===j?"undefined":_typeof(j)))return j.v}return i.apply(void 0,[l].concat(_toConsumableArray(r)))}function O(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={fn:t,typeSignature:n};r&&(i.isChanger=!0),Object.freeze(i),Array.isArray(e)?e.forEach(function(e){return g(x,d(e),i)}):g(x,d(e),i)}return S={has:function(e){return e=d(e),x.hasOwnProperty(e)},get:function(e){return e=d(e),x.hasOwnProperty(e)&&x[e]},add:function e(t,n,r){return O(t,n,r),e},addChanger:function e(t,n,r,a){return O(t,n,a,!0),i.register(Array.isArray(t)?t[0]:t,r),e},addCommand:function e(t,n,r,i){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return O(t,function(e,t,n,r){return function(i){for(var a=arguments.length,o=Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];var c=t.apply(void 0,o);if(c)return c;var u=p.create(),l=Object.assign({TwineScript_TypeID:"command",TwineScript_ObjectName:"a ("+e+":) command",TwineScript_TypeName:"a ("+e+":) command",TwineScript_Print:function(){return"`[A ("+e+":) command]`"},TwineScript_ToSource:function(){return"("+e+":"+o.map(T)+")"},TwineScript_is:function(e){return T(this)===T(e)}},r?{TwineScript_Attach:function(e,t){return u.section=e,t.run(u),l},TwineScript_Run:function(e){return n.apply(void 0,[u,e].concat(o))}}:{TwineScript_Run:function(e){return n.apply(void 0,[e].concat(o))}});return l}}([].concat(t)[0],n,r,a),i),e},TypeSignature:{optional:function(e){return{pattern:"optional",innerType:e}},zeroOrMore:function(e){return{pattern:"zero or more",innerType:e}},either:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"either",innerType:t}},rest:function(e){return{pattern:"rest",innerType:e}},insensitiveSet:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{pattern:"insensitive set",innerType:t}},numberRange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return{pattern:"range",min:e,max:t,range:function(n){return"number"==typeof n&&!Number.isNaN(n)&&n>=e&&n<=t}}},nonNegativeInteger:{pattern:"range",integer:!0,min:0,max:1/0,range:function(e){return"number"==typeof e&&!Number.isNaN(e)&&e>=0&&!(e+"").includes(".")}},positiveInteger:{pattern:"range",integer:!0,min:1,max:1/0,range:function(e){return"number"==typeof e&&!Number.isNaN(e)&&e>=1&&!(e+"").includes(".")}},wrapped:function(e,t){return{pattern:"wrapped",innerType:e,message:t}},Any:{TwineScript_TypeName:"anything"},Everything:{TwineScript_TypeName:"everything"}},run:function(e,t){return S.has(e)?k(e,S.get(e),t):f.create("macrocall","I can't run the macro '"+e+"' because it doesn't exist.","Did you mean to run a macro? If you have a word written like (this:), it is regarded as a macro name.")},runCustom:function(e,t){return a.isPrototypeOf(e)?k("",e,t):f.create("macrocall","I can't call "+v(e)+" because it isn't a custom macro.")}},Object.assign(S.TypeSignature,{positiveNumber:S.TypeSignature.numberRange(Math.pow(2,-52),1/0),nonNegativeNumber:S.TypeSignature.numberRange(0,1/0),percent:S.TypeSignature.numberRange(0,1)}),Object.freeze(S)}),define("datatypes/varbind",["jquery","utils","utils/operationutils","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,i){var a=n.objectName;return r.on("set",function(n,r){n.TwineScript_VariableStore&&e(t.storyElement).find("[data-2bind]").each(function(t,i){var a=(i=e(i)).data("twoWayBindEvent");"function"==typeof a&&a(i,n,r)})}),Object.freeze({TwineScript_TypeName:"a bound variable",TwineScript_ObjectName:"a bound variable",TwineScript_Unstorable:!0,TwineScript_ToSource:function(){return("two way"===this.bind?"2":"")+"bind "+this.varRef.TwineScript_ToSource()},set:function(e){var t,n=this.varRef.set(e);if(t=i.containsError(n))return t},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"one way";return r.isPrototypeOf(e)?e.error?e.error:Object.assign(Object.create(this),{varRef:e,bind:t}):i.create("operation","I can only 'bind' a variable, not "+a(e)+".")}})}),define("datatypes/assignmentrequest",["utils/operationutils","datatypes/typedvar","datatypes/datatype","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,i){var a=e.objectName,o=e.matches;return Object.freeze({assignmentRequest:!0,TwineScript_TypeName:"a 'to' or 'into' expression",TwineScript_ObjectName:"a 'to' or 'into' expression",TwineScript_Unstorable:!0,set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=void 0,c=[],u=function e(s,c){var u,l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],p=[],f=void 0;if(f=c&&r.isPrototypeOf(c)?c.get():c,u=i.containsError(f))return u;if(Array.isArray(f)&&Array.isArray(s)){for(var d=0,h=0;d<s.length&&h<f.length;){var y=s[d],m=f[h];if(t.isPrototypeOf(y)&&y.datatype.rest||n.isPrototypeOf(y)&&y.rest){for(var g=h;h<f.length&&o(y,m);)m=f[h+=1];t.isPrototypeOf(y)?y.datatype=[y.datatype]:n.isPrototypeOf(y)&&(y=n.create("array")),p=p.concat(e(y,r.isPrototypeOf(c)?r.create(c,{first:g+1,last:h+1}):f.slice(g,h)))}else p=p.concat(e(y,r.isPrototypeOf(c)?r.create(c,h+1):m)),h+=1;d+=1}return d<s.length?l&&i.create("operation","I can't unpack this array because it needs "+(s.length-d)+" more value"+(s.length-d>0?"s":"")+"."):p}if(s instanceof Map&&f instanceof Map){var v=!0,b=!1,w=void 0;try{for(var T,S=s.entries()[Symbol.iterator]();!(v=(T=S.next()).done);v=!0){var x=_slicedToArray(T.value,2),k=x[0],O=x[1];if(!f.has(k))return l&&i.create("operation","I can't unpack this datamap because it needs a '"+k+"' data name.");p=p.concat(e(O,r.isPrototypeOf(c)?r.create(c,k):f.get(k)))}}catch(e){b=!0,w=e}finally{try{!v&&S.return&&S.return()}finally{if(b)throw w}}return p}if(t.isPrototypeOf(s)){if("function"==typeof s.datatype.destructure)return[{dest:s,value:f,src:c}].concat(s.datatype.destructure(f));if(!o(f,s.datatype))return[l&&i.create("operation","I can't unpack "+a(f)+" into "+s.varRef.TwineScript_ToSource()+" because it doesn't match "+a(s.datatype)+".")];p=p.concat(e(s.datatype,f))}return r.isPrototypeOf(s)||t.isPrototypeOf(s)?p.concat({dest:s,value:f,src:c}):"function"==typeof s.destructure?p.concat(s.destructure(f)):o(f,s)?p:l&&i.create("operation","I tried to unpack, but "+a(s)+" in the pattern didn't match "+a(f)+".")}(this.dest,this.src);if(s=i.containsError(u))return s;if(!u.length)return i.create("operation","I can't store a new value inside "+a(this.dest)+" that isn't in a variable.","You need a variable, or a data structure containing variables at certain positions, to store the value.");var l=!0,p=!1,f=void 0;try{for(var d,h=u.reverse()[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var y=d.value,m=y.dest,g=y.value,v=y.src;if(t.isPrototypeOf(m)){if(s=i.containsError(m.defineType()))return s;m=m.varRef}if(s=m.set(g),i.isPrototypeOf(s))return s;e&&v&&v.delete(),c.shift(a(m)+" is now "+a(g))}}catch(e){p=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(p)throw f}}return c.join("; ")},create:function(e,t,n){return Object.assign(Object.create(this),{dest:e,src:t,operator:n})}})}),define("twinescript/operations",["jquery","state","datatypes/assignmentrequest","utils/operationutils","internaltypes/varref","datatypes/typedvar","datatypes/datatype","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s){var c=r.isObject,u=r.collectionType,l=r.is,p=r.isA,f=r.clone,d=r.unique,h=r.contains,y=r.matches,m=r.objectName,g=void 0,v=0;function b(e,t,n,r){return n=n||"do this to",function(i,a){1===t.length&&(a=i);var o;return(o=s.containsError(i,a))?o:(void 0===i?"undefined":_typeof(i))!==e||(void 0===a?"undefined":_typeof(a))!==e?s.create("operation","I can only "+n+" "+e+"s, not "+m((void 0===i?"undefined":_typeof(i))!==e?i:a)+".",r):t(i,a)}}function w(e){return function(t,n){var r;if(r=s.containsError(t,n))return r;if((void 0===t?"undefined":_typeof(t))!==(void 0===n?"undefined":_typeof(n))||c(t)&&"TwineScript_TypeName"in t&&c(n)&&"TwineScript_TypeName"in n&&t.TwineScript_TypeName!==n.TwineScript_TypeName||u(t)!==u(n)){var i=m(t)+" isn't the same type of data as "+m(n);return s.create("operation",i[0].toUpperCase()+i.slice(1))}return e(t,n)}}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function r(i,a){var o=void 0;if(o=s.containsError(i,a))return o;v=i;var c=i.determiner?[i,a]:a.determiner?[a,i]:[],u=_slicedToArray(c,2),l=u[0],p=u[1];if(l){var f=l.determiner;if("start"===f||"end"===f){if(t)return s.create("operation","I can't use '"+t+"' with the 'start' or 'end' of "+m(l)+".");if(p.determiner){if("start"===p.determiner||"end"===p.determiner)return s.create("operation","I can't compare one value's 'start' or 'end' with another value's 'start' or 'end'.","Please change one of them to use an exact range, such as '1stto4th' or '2ndlasttolast'.");var d=[p,l];l=d[0],p=d[1]}for(var h=l.string||l.array,y=0;y<h.length+1;y+=1){var g=y?"end"===f?h.slice(-y):h.slice(0,y):h.constructor(),b=l===i?r(g,a):r(i,g);if(o=s.containsError(b))return o;if(b!==n)return b}return n}var w="all"===f;return l.array.reduce(function(e,t){var n,o=l===i?r(t,a):r(i,t);return(n=s.containsError(e,o))?n:w?e&&o:e||o},w)}return e(i,a)}}function S(e,t){return T(function(t,n){var r=e(t,n);return s.containsError(r)?r:!r},t,!0)}var x="If one of these values is a number, you may want to write a check that it 'is not 0'. Also, if one is a string, you may want to write a check that it 'is not \"\" '.";return g={create:function(n){var r=Object.create(this);return r.Identifiers={TwineScript_Identifiers:!0,get it(){return v},get time(){return n.stackTop&&n.stackTop.evaluateOnly?s.create("operation","'time' can't be used in "+n.stackTop.evaluateOnly+"."):Date.now()-n.timestamp},get visits(){var e=n.stackTop.speculativePassage,r=function(n){return n===(e||t.passage)};return t.pastPassageNames().filter(r).length+t.mockVisits.filter(r).length+(!e||e===t.passage)},get visit(){return r.Identifiers.visits},get exits(){return n.stackTop&&n.stackTop.evaluateOnly?s.create("operation","'exit' and 'exits' can't be used in "+n.stackTop.evaluateOnly+"."):n.dom.find("tw-enchantment, tw-link").filter(function(t,n){return e(n).data("enchantmentEvent")||e(n).parent().data("linkPassageName")||e(n).parent().data("clickEvent")}).length},get exit(){return r.Identifiers.exits},get pos(){return n.stackTop&&!n.stackTop.evaluateOnly&&n.stackTop.lambdaPos?+n.stackTop.lambdaPos||1:s.create("operation","'pos' can only be used in lambdas that aren't 'when' lambdas.")}},r},elidedComparisonOperator:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return r.reduce(function(n,r){return"boolean"==typeof r?r:g[e](n,g[t](v,r))},"and"===e)},and:b("boolean",w(function(e,t){return e&&t}),"use 'and' to join",x),or:b("boolean",w(function(e,t){return e||t}),"use 'or' to join",x),not:b("boolean",function(e){return!e},"use 'not' to invert",x),"+":w(function(e,t){if(Array.isArray(e))return[].concat(_toConsumableArray(e),_toConsumableArray(t));var n=void 0;return e instanceof Map?(n=new Map(e),t.forEach(function(e,t){return n.set(t,e)}),n):e instanceof Set?new Set([].concat(_toConsumableArray(e),_toConsumableArray(t)).filter(d).map(f)):"function"==typeof e["TwineScript_+"]?e["TwineScript_+"](t):"string|number|boolean".includes(void 0===e?"undefined":_typeof(e))?e+t:s.create("operation","I can't use + on "+m(e)+".")}),"-":w(function(e,t){if(Array.isArray(e))return e.filter(function(e){return!t.some(function(t){return l(e,t)})});if(e instanceof Set){var n=[].concat(_toConsumableArray(t));return new Set([].concat(_toConsumableArray(e)).filter(function(e){return!n.some(function(t){return l(e,t)})}))}return"string"==typeof e?e.split(t).join(""):"number"==typeof e?e-t:s.create("operation","I can't use - on "+m(e)+".")}),"*":b("number",w(function(e,t){return e*t}),"multiply"),"/":b("number",w(function(e,t){return 0===t?s.create("operation","I can't divide "+m(e)+" by zero."):e/t}),"divide"),"%":b("number",w(function(e,t){return 0===t?s.create("operation","I can't modulo "+m(e)+" by zero."):e%t}),"modulus"),"<":T(b("number",w(function(e,t){return e<t}),"do < to"),"<"),">":T(b("number",w(function(e,t){return e>t}),"do > to"),">"),"<=":T(b("number",w(function(e,t){return e<=t}),"do <= to"),"<="),">=":T(b("number",w(function(e,t){return e>=t}),"do >= to"),">="),is:T(l),isNot:S(l),contains:T(h,"contains"),doesNotContain:S(h,"does not contain"),isIn:T(function(e,t){return h(t,e)},"is in"),isNotIn:S(function(e,t){return h(t,e)},"is not in"),isA:T(p,"is a"),isNotA:S(p,"is not a"),typifies:T(function(e,t){return p(t,e)}),untypifies:S(function(e,t){return p(t,e)}),matches:T(y),doesNotMatch:S(y),where:function(e,t,n){var r;return(r=s.containsError(e))?r:"boolean"!=typeof e?s.create("operation","This lambda's 'where' clause must evaluate to true or false, not "+m(e)+"."):e?t:n},makeSpreader:function(e){if(a.isPrototypeOf(e)||o.isPrototypeOf(e)){var t=f(e);return(a.isPrototypeOf(e)?t.datatype:t).rest=!0,t}return{value:e,spreader:!0,TwineScript_TypeName:"a spreaded '...' value",TwineScript_ObjectName:"a spreaded '...' value",TwineScript_Unstorable:!0}},makeAssignmentRequest:function(e,t,r){var i=s.containsError(e,t);return i||n.create(e,t,r)},setIt:function(e){return i.isPrototypeOf(e)||a.isPrototypeOf(e)?(v=e.get(),e):e},initialiseIt:function(e){v=e}},Object.freeze(g)}),define("twinescript/environ",["macros","state","utils","datatypes/colour","datatypes/hookset","datatypes/lambda","datatypes/datatype","datatypes/varbind","datatypes/codehook","datatypes/typedvar","internaltypes/varref","internaltypes/twineerror","twinescript/operations"],function(Macros,State,Utils,Colour,HookSet,Lambda,Datatype,VarBind,CodeHook,TypedVar,VarRef,TwineError,OperationsProto){return function(section){"object"===(void 0===section?"undefined":_typeof(section))&&section||Utils.impossible("TwineScript.environ","no Section argument was given!");var Operations=OperationsProto.create(section);return section.eval=function(){try{return eval(arguments[0])}catch(e){return e}},section}}),define("section",["jquery","utils","renderer","twinescript/environ","twinescript/operations","state","utils/operationutils","utils/renderutils","datatypes/changercommand","datatypes/hookset","datatypes/colour","datatypes/lambda","internaltypes/changedescriptor","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,i,a,o,s,c,u,l,p,f,d,h,y){var m,g=o.printBuiltinValue,v=o.objectName,b=o.typeID,w=s.collapse;function T(e,n,r){if(n&&"object"===(void 0===n?"undefined":_typeof(n))&&c.isPrototypeOf(n)){if(r.data("originalSource",r.popAttr("source")),!this.renderInto(r.data("originalSource"),r,n)){var i=t.insensitiveName(e.attr("name"));if(["if","elseif","unless","else","testfalse"].includes(i)&&(e.addClass("false"),"elseif"!==i&&(this.stackTop.lastHookShown=!1)),r.data("live")){var a=r.data("live"),o=a.delay,s=a.event;(function(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;a&&t.assertMustHave(a,["when"]);var o=n.data("originalSource")||"",s=_slicedToArray(this.stack,1)[0].tempVariables,c=this.whenUnblocked.bind(this,function(){if(r.inDOM()){var t=a&&a.filter(r,[!0],s);h.containsError(t)?t.render(e.attr("title")).replaceAll(e):!a||t[0]?(r.renderInto(o,n,{append:"replace"}),t||n.find("tw-expression[name='stop']").length||r.inDOM()&&setTimeout(c,i)):setTimeout(c,i)}});setTimeout(c,i)}).call(this,e,r,o,s)}return}}else{if(!1===n)return r.attr("source")&&(r.data("originalSource",r.popAttr("source")),r.data("hidden",!0)),e.addClass("false"),void(this.stackTop.lastHookShown=!1);!0!==n&&e.replaceWith(h.create("datatype",v(n)+" cannot be attached to this hook.","Only Booleans and changers can be attached to hooks.").render(e.attr("title")))}this.stackTop.lastHookShown=!0}function S(t){var n=(t instanceof e?t[0]:t).nextSibling;if(n&&(n instanceof Text&&!n.textContent.trim()||["br","tw-consecutive-br"].includes((n.tagName||"").toLowerCase()))){var r=S(n),i=r.whitespace,a=r.nextElem;return{whitespace:e(n).add(i),nextElem:a}}return{whitespace:e(),nextElem:e(n)}}var x={add:[],remove:[]};return m={create:function(e){var n=Object.assign(Object.create(this),{timestamp:Date.now(),dom:e||t.storyElement,stack:[],enchantments:[],unblockCallbacks:[]});return n=r(n)},get stackTop(){return this.stack[0]},inDOM:function(){return e(t.storyElement).find(this.dom).length>0},evaluateTwineMarkup:function(t,n){var r=e("<p>");this.stack.unshift({desc:f.create({target:r,source:t,section:this,append:"append"}),tempVariables:this.stackTop.tempVariables,evaluateOnly:n,finalIter:!0}),this.execute();var i;return(i=r.find("tw-error")).length>0?i:r},speculate:function(e,t,n){this.stack.unshift({evaluateOnly:n,finalIter:!0,tempVariables:Object.assign(Object.create(d),{TwineScript_VariableStoreName:n}),speculativePassage:t});var r=void 0;return r=p.isPrototypeOf(e)?e.apply(this,{fail:!1,pass:!0}):this.eval(e),this.stack.shift(),r},renderInto:function(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=f.create({target:n,source:t,section:this,append:"append"});if(r)if(c.isPrototypeOf(r)){var s=r.run(o);if(h.containsError(s))return s.render(n.attr("title")).replaceAll(n),!1}else Object.assign(o,r);if((n=o.target,this.stack.length>=50)&&this.stack.reduce(function(e,t){return e+!!t.finalIter},0)>=50)return h.create("infinite","Printing this expression may have trapped me in an infinite loop.").render(n.attr("title")).replaceAll(n),!1;var u=function(t,r,a){var o=n instanceof e&&n.is("tw-hook")&&n.parents("tw-collapsed,[collapsing=true]").length>0;i.stack.unshift({desc:t,finalIter:a,tempVariables:r,collapses:o,evaluateOnly:i.stackTop&&i.stackTop.evaluateOnly})};if(a||(a=Object.create(this.stack.length?this.stackTop.tempVariables:d)),!a.hasOwnProperty("TwineScript_VariableStoreName")){var l=n&&n.tag();a.TwineScript_VariableStoreName="tw-hook"===l?n.attr("name")?"?"+n.attr("name"):"an unnamed hook":"tw-expression"===l?"a "+n.attr("type")+" expression":"tw-passage"===l?"this passage":"an unknown scope"}return Object.keys(o.loopVars).length?function(){var e=Object.assign({},o.loopVars),t=Math.min.apply(Math,_toConsumableArray(Object.keys(e).map(function(t){return e[t].length})));if(y.create(t+" loop"+(1!==t?"s":"")).render().prependTo(n),t){for(var r=function(n){u(o,Object.keys(e).reduce(function(t,r){return t[r]=e[r][n],t},Object.create(a),n===t-1))},s=t-1;s>=0;s-=1)r(s);for(s=t-1;s>=0&&!i.stackTop.blocked;s-=1)i.execute()}}():(u(o,a,!0),this.execute()),0===this.stack.length&&this.updateEnchantments(),o.enabled},execute:function(){var n=this,r=this.stackTop,a=r.desc,o=r.dom,s=r.collapses,u=r.evaluateOnly;a&&!o&&(o=a.render(),this.stackTop.dom=o,this.stackTop.desc=void 0),o.findAndFilter("tw-hook,tw-expression").each(function(r,a){if(n.stackTop.blocked)return!1;switch((a=e(a)).tag()){case"tw-hook":var o=a.popAttr("source")||"";if(o&&a.data("originalSource",o),a.data("tempVariables",n.stackTop.tempVariables),a.popAttr("hidden")){a.data("hidden",!0);break}o&&n.renderInto(o,a);break;case"tw-expression":if(a.attr("blockers")){if(u)return void a.removeAttr("blockers").removeAttr("js").replaceWith(h.create("syntax","I can't use a macro like (prompt:) or (confirm:) in "+u+".","Please rewrite this without putting such macros here.").render(a.attr("title"),a));var s=[];try{s=JSON.parse(a.popAttr("blockers")),a.data("blockers",s)}catch(e){t.impossible("Section.execute","JSON.parse blockers failed.")}}if(a.data("blockers")){var p=a.data("blockers");if(p.length){n.stackTop.blocked=!0;var d=n.eval(p.shift());return h.containsError(d)&&(n.stackTop.blocked=!1,a.removeData("blockers").replaceWith(d.render(a.attr("title"),a))),!1}a.removeData("blockers")}a.attr("js")&&function(n){var r=this.eval(n.popAttr("js")||"");this.stackTop.evaluateOnly&&r&&(c.isPrototypeOf(r)||"function"==typeof r.TwineScript_Run)&&(r=h.create("syntax","I can't work out what "+this.stackTop.evaluateOnly+" should evaluate to, because it contains a "+(c.isPrototypeOf(r)?"changer.":"command."),"Please rewrite this without putting changers or commands here."));var a=void 0,o=void 0,s=e();for(o=n;c.isPrototypeOf(r);){var u=S(o);if(a=u.whitespace,(o=u.nextElem)[0]instanceof Text&&"+"===o[0].textContent.trim()){var p,d=o,m=S(d);if(p=m.whitespace,(o=m.nextElem).is("tw-expression")){var w=this.eval(o.popAttr("js"));if(h.containsError(w)){r=w;break}var x=i["+"](r,w);e(a).add(d).add(p).remove(),r=h.containsError(x)?h.create("operation","I can't combine "+v(r)+" with "+v(w)+".","function"==typeof w.TwineScript_Run?"If you want to attach this changer to "+v(w)+", remove the + between them.":"Changers can only be added to other changers."):x;continue}}if(o.is("tw-expression")){var k=this.eval(o.popAttr("js"));if(h.containsError(k)){r=k;break}if(k&&"object"===(void 0===k?"undefined":_typeof(k))&&"function"==typeof k.TwineScript_Attach){r=k.TwineScript_Attach(this,r);break}return c.isPrototypeOf(k)?void n.replaceWith(h.create("operation","Changers like ("+r.macroName+":) need to be combined using + between them.","Place the + between the changer macros, or the variables holding them. The + is absent only between a changer and its attached hook or command.").render(n.attr("title"))):void n.replaceWith(h.create("operation",v(k)+" can't have changers like ("+r.macroName+":) attached.","Changers placed just before hooks, links and commands will attempt to attach, but in this case it didn't work.").render(n.attr("title")))}if(o.is("tw-hook")){a.remove(),s=o;break}r.macroName||t.impossible("Section.runExpression","changer has no macroName");var O=n.attr("title")||"("+r.macroName+": ...)";return void n.replaceWith(h.create("syntax","The ("+r.macroName+":) changer should be stored in a variable or attached to a hook.","Macros like this should appear before a hook: "+O+"[Some text]").render(n.attr("title")))}n.attr("return",b(r)),s=s.length?s:S(n).nextElem.filter("tw-hook");var j=void 0;if(j=h.containsError(r))j instanceof Error&&(j=h.fromError(j)),n.replaceWith(j.render(n.attr("title"),n));else if(y.isPrototypeOf(r))n.append(r.render());else if(r&&"function"==typeof r.TwineScript_Run)if(r=r.TwineScript_Run(this),h.containsError(r))n.replaceWith(r.render(n.attr("title")));else if(f.isPrototypeOf(r)){if(r.data&&r.data.live)return void n.replaceWith(h.create("unimplemented","I currently can't attach (live:) or (event:) macros to commands - only hooks.").render(n.attr("title")));r.section=this,r.target=o,this.renderInto("",o,r)}else{if("blocked"===r)return this.stackTop.blocked=!0,void n.attr("js","section.blockedValue()");r&&t.impossible("Section.runExpression","TwineScript_Run() returned a non-ChangeDescriptor "+(void 0===r?"undefined":_typeof(r))+': "'+r+'"')}else!s.length&&("string"==typeof r||"number"==typeof r||r instanceof Map||r instanceof Set||Array.isArray(r)||l.isPrototypeOf(r))||r&&"function"==typeof r.TwineScript_Print&&!c.isPrototypeOf(r)?(r=g(r),h.containsError(r)?(r instanceof Error&&(r=h.fromError(r)),n.replaceWith(r.render(n.attr("title")))):"string"!=typeof r?t.impossible("printBuiltinValue() produced a non-string "+(void 0===r?"undefined":_typeof(r))):this.renderInto(r,n)):s.length?T.call(this,n,r,s):c.isPrototypeOf(r)||"boolean"==typeof r||t.impossible("Section.runExpression","The expression evaluated to an unknown value: "+r)}.call(n,a)}}),this.stackTop.blocked||(o.length&&s&&w(o),o.findAndFilter("tw-collapsed,[collapsing=true]").each(function(){w(e(this))}),this.stack.shift())},updateEnchantments:function(){this.enchantments.forEach(function(e){e.disenchant(),e.enchantScope()})},on:function(e,t){return x[e].push(t),this},addEnchantment:function(e){var t=this;this.enchantments.push(e),x.add.forEach(function(n){return n(t,e)})},removeEnchantment:function(e){var t=this,n=this.enchantments.indexOf(e);this.enchantments.splice(n,1),e.disenchant(),x.remove.forEach(function(n){return n(t,e)})},unblock:function(e){for(this.stack.length||t.impossible("Section.unblock","stack is empty"),this.stackTop.blocked=!1,void 0!==e&&(this.stackTop.blockedValues=(this.stackTop.blockedValues||[]).concat(e));this.stack.length&&!this.stackTop.blocked;)this.execute();if(!this.stack.length)for(;this.unblockCallbacks.length>0;){if(this.unblockCallbacks.shift()(),this.stackTop&&this.stackTop.blocked)return}},whenUnblocked:function(e){this.stack.length&&this.stackTop.blocked?this.unblockCallbacks=this.unblockCallbacks.concat(e):e()},blockedValue:function(){var e=this.stackTop;return e||t.impossible("Section.blockedValue","stack is empty"),e.blockedValues&&e.blockedValues.length||t.impossible("Section.blockedValue","blockedValues is missing or empty"),e.blockedValues.shift()}},Object.preventExtensions(m)}),define("engine",["jquery","utils","state","section","passages"],function(e,t,n,r,i){var a,o=t.escape,s=t.impossible,c=t.passageSelector,u=t.transitionOut,l=Object.create(null);function p(e,t){return"<tw-include type="+e+" title='"+o(t.get("name"))+"'>"+t.get("source")+"</tw-include>"}function f(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.assertOnlyHas(o,["stretch","transition"]);var f=i.get(a),d=t.storyElement,h=d.parent(),y=o.stretch,m=o.transition,g=(m=void 0===m?{}:m).depart,v=void 0===g?"instant":g,b=m.arrive,w=void 0===b?"dissolve":b,T=m.departOrigin,S=m.arriveOrigin,x=m.time;h.findAndFilter("tw-enchantment").each(function(t,n){var r=(n=e(n)).data("enchantedProperties");r&&d.css(r.reduce(function(e,t){return e[t]="",e},{})),n[0]===h[0]&&(h=d.unwrap().parent())}),i.hasValid(a)||s("Engine.showPassage","There's no passage with the name \""+a+'"!');var k,O,j,A,C=d.children(c).not(".transition-out, .transition-out *"),E=(f.get("tags")||[]).join(" "),_=(k=e("<tw-passage><tw-sidebar>"),O=k.children("tw-sidebar"),j=e('<tw-icon tabindex=0 alt="Undo" title="Undo">&#8630;</tw-icon>'),A=e('<tw-icon tabindex=0 alt="Redo" title="Redo">&#8631;</tw-icon>'),n.pastLength<=0&&j.css("visibility","hidden"),n.futureLength<=0&&A.css("visibility","hidden"),O.append(j,A),k);"function"==typeof T&&(T=T.call(C)),"function"==typeof S&&(S=S.call(_)),d.detach(),_.appendTo(d).attr({tags:E}),!y&&v&&(u(C,v,x,0,0,0,T),C.css("position","absolute")),d.attr({tags:E});var N=r.create(_),P=f.get("source");P=i.getTagged("header").map(p.bind(0,"header")).join("")+(l.debug?i.getTagged("debug-header").map(p.bind(0,"debug-header")).join(""):"")+P+i.getTagged("footer").map(p.bind(0,"footer")).join("")+(l.debug?i.getTagged("debug-footer").map(p.bind(0,"debug-footer")).join(""):""),n.pastLength<=0&&(l.debug&&(P=i.getTagged("debug-startup").map(p.bind(0,"debug-startup")).join("")+P),P=i.getTagged("startup").map(p.bind(0,"startup")).join("")+P),N.renderInto(P,_,{transition:w,transitionTime:x,transitionOrigin:S}),h.append(d.parents().length?d.parents().last():d),scroll(0,y?_.offset().top-.05*e(window).height():d.offset().top)}return a={goBack:function(e){n.rewind()&&f(n.passage,e)},goForward:function(e){n.fastForward()&&f(n.passage,e)},goToPassage:function(e,t){n.play(e),f(e,t)},toggleFullscreen:function(){var e=document.documentElement;document.fullscreenElement?document.exitFullscreen():document.msFullscreenElement?document.msExitFullscreen():(e.msRequestFullscreen||e.requestFullscreen).call(e)},showPassage:f,options:l},Object.freeze(a)}),define("debugmode/panel",["jquery"],function(e){return Object.freeze({create:function(t){var n=t.className,r=t.rowAdd,i=t.rowCheck,a=t.columnHead,o=t.tabName,s=t.tabUpdate,c=e("<div class='panel panel-"+n+"' hidden><table class='panel-rows'></table></div>"),u=e("<button class='tab tab-"+n+"'>0 "+o+"s</button>");return u.click(function(){u.toggleClass("enabled"),u.parent().siblings(".panel").attr("hidden",""),u.is(".enabled")&&(u.siblings(".tab:not(.tab-"+n+")").removeClass("enabled"),c.removeAttr("hidden"))}),s||(s=function(e){return u.text(e+" "+o+(1!==e?"s":""))}),Object.assign(Object.create(this),{tabName:o,tab:u,panel:c,panelRows:c.find(".panel-rows"),rowAdd:r,rowCheck:i,columnHead:a,tabUpdate:s})},update:function(t,n){var r=this.rowCheck,i=this.rowAdd,a=this.panelRows,o=this.columnHead,s=[],c=a.children();t.forEach(function(t){var n=c.filter(function(n,i){return r(t,e(i))}),o=i(t);n.length?n.replaceWith(o):a.append(o),s.push(o[0])}),c.filter(function(e,t){return!s.includes(t)}).remove(),this.tabUpdate(n),n>0&&!a.find(".panel-head").length?a.prepend(o()):0===n&&a.find(".panel-head").remove()}})}),define("debugmode/mode",["jquery","utils","state","internaltypes/varref","internaltypes/twineerror","utils/operationutils","engine","passages","section","debugmode/panel"],function(e,t,n,r,i,a,o,s,c,u){var l=t.escape,p=t.nth,f=t.storyElement,d=t.debounce,h=a.objectName,y=a.isObject,m=a.toSource;return function(t,a){var g=e(document.documentElement),v=e("<tw-debugger>\n\t\t<div class='panel panel-errors' hidden><table></table></div>\n\t\t<div class='tabs'></div>\n\t\t<label style='user-select:none'>Turns: </label><select class='turns' disabled></select><button class='show-invisibles'>Debug View</button><button class='show-dom'>DOM View</button>\n\t\t<div class='resizer'>\n\t\t</tw-debugger>"),b=v.find(".tabs"),w=v.find(".show-dom"),T=v.find(".show-invisibles"),S=v.find(".turns");v.find(".resizer").mousedown(function(e){if(1!==e.which)return!0;e.stopPropagation();var t=e.pageX,n=v.width();g.on("mousemove.debugger-resizer",function(e){var r=e.pageX;v.width((n+t-r|0)+"px")}).on("mouseup.debugger-resizer",function(){g.off(".debugger-resizer")})}),T.click(function(){g.toggleClass("debug-mode").removeClass("dom-debug-mode"),T.toggleClass("enabled"),w.removeClass("enabled")}),w.click(function(){g.toggleClass("dom-debug-mode").removeClass("debug-mode"),w.toggleClass("enabled"),T.removeClass("enabled")}),n.timelinePassageNames().forEach(function(e,t){S.append("<option value="+t+">"+(t+1)+": "+e+"</option>")}),S.val(n.pastLength),n.pastLength>0&&S.removeAttr("disabled"),S.change(function(e){var t=e.target.value-n.pastLength;0!==t&&(n[t<0?"rewind":"fastForward"](Math.abs(t)),o.showPassage(n.passage))}),n.on("forward",function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n.pastLength;i>=1&&S.removeAttr("disabled"),r?(S.find("[selected]").removeAttr("selected"),S.val(i)):(S.children().each(function(t,n){t>=i&&e(n).remove()}),S.append("<option value="+i+">"+(i+1)+": "+t+"</option>").val(i))}).on("back",function(){n.pastLength<=1&&S.attr("disabled"),S.find("[selected]").removeAttr("selected"),S.val(n.pastLength)}).on("load",function(e){S.empty(),S[e.length<=1?"attr":"removeAttr"]("disabled"),e.forEach(function(e,t){return S.append("<option value="+t+">"+(t+1)+": "+e.passage+"</option>")})});var x=new Set,k=u.create({className:"variables",tabName:"Variable",rowAdd:function(t){var n=t.name,r=t.path,i=t.value,a=t.tempScope,o=t.type,s=y(i)&&i.TwineScript_DebugName?i.TwineScript_DebugName():l(h(i)),c="";r.length&&(c=r.reduce(function(e,t){return e+t+"'s "},""));var u=o?m(o):"",p=s.length>48&&!i.TwineScript_DebugName,f="object"===(void 0===i?"undefined":_typeof(i))||p,d=p?s.slice(0,48)+"\u2026":s;return e('<div class="variable-row">').attr("data-name",n).attr("data-path",r+"").attr("data-scope",a||"").css("padding-left",Math.min(5,r.length)+"em").append("<td class='variable-type'>"+(u?u+"-type ":"")+"</td>","<td class='variable-name'>"+(c?"<span class='variable-path'>"+(a?"_":"$")+l(c)+"</span> ":"")+(c?"":a?"_":"$")+l(n+"")+"</td>","<td class='temporary-variable-scope'>"+(a||"")+"</td>","<td class='variable-value'>"+d+"</td><td class='panel-row-buttons'>"+(f?"<tw-folddown tabindex=0>(source:) </tw-folddown>":"")+"</td>").add(f?"<tr class='variable-row panel-row-source' style='display:none'><td colspan='5'>"+l(m(i))+"</td></tr>":"")},rowCheck:function(e,t){var n=e.name,r=e.path,i=e.tempScope;return t.attr("data-name")===n&&t.attr("data-path")===r+""&&t.attr("data-scope")===i},columnHead:function(){return'<tr class="panel-head"><th>Type</th><th>Name</th><th>Scope</th><th>Value</th></tr>'}}),O=d(function(){var e=[],t=n.variables,r=e.length;function i(t){if(!(e.length>500)){e.push(t);var n=t.path.concat(t.name),r=t.value,a=t.tempScope;Array.isArray(r)?r.forEach(function(e,t){return i({name:p(t+1),path:n,value:e,tempScope:a})}):r instanceof Map?[].concat(_toConsumableArray(r)).forEach(function(e){var t=_slicedToArray(e,2),r=t[0],o=t[1];return i({name:r,path:n,value:o,tempScope:a})}):r instanceof Set&&[].concat(_toConsumableArray(r)).forEach(function(e){return i({name:"???",path:n,value:e,tempScope:a})})}}for(var a in t)a.startsWith("TwineScript")||(r+=1,i({name:a,path:[],value:t[a],tempScope:"",type:t.TwineScript_TypeDefs&&t.TwineScript_TypeDefs[a]}));e.push.apply(e,_toConsumableArray(x)),r+=x.size,k.update(e,r),k.panel[(r?"remove":"add")+"Class"]("panel-variables-empty")}),j=void 0;r.on("set",function(e,t,r){if(e!==n.variables&&e.TwineScript_VariableStoreName){var i=e.TwineScript_VariableStoreName,a=e.TwineScript_TypeDefs&&e.TwineScript_TypeDefs[t],o=[].concat(_toConsumableArray(x)).find(function(e){return e.name===t&&e.tempScope===i});o?o.value=r:x.add({name:t,path:[],value:r,tempScope:i,type:a})}O(),j()}).on("delete",function(){O(),j()}),k.panel.append("<div class='panel-variables-bottom'>\n\t\t\t<button class='panel-variables-copy'>Copy $ variables as (set:) call</button>\n\t\t\t<input class='clipboard' type=\"text\" style='opacity:0;pointer-events:none;position:absolute;'></input>\n\t\t</div>").removeAttr("hidden"),k.tab.addClass("enabled");var A=k.panel.find(".clipboard");g.on("click",".panel-variables-copy",function(){var e=[];for(var t in n.variables)t.startsWith("TwineScript")||e.push("$"+t+" to "+m(n.variables[t]));A.val("(set:"+e+")")[0].select(),document.execCommand("copy")});var C=u.create({className:"enchantments",tabName:"Enchantment",rowAdd:function(t){var n=t.scope,r=t.changer,i=t.name,a=t.localHook,o=void 0;return o=r?l(h(r)):"<em>enchanted via ("+i+":)</em>",e('<div class="enchantment-row">').data("enchantment",t).append("<td><span class='enchantment-name'>"+m(n)+(a?"</span><span class=enchantment-local>"+(a.attr("name")?"?"+a.attr("name"):"an unnamed hook"):"")+"</span></td><td class='enchantment-value'>"+o+"</td>"+(r?"<td class='panel-row-buttons'><tw-folddown tabindex=0>(source:)</tw-folddown></td>":"")).add(r?"<tr class='panel-row-source' style='display:none'><td colspan='3'>"+l(m(r))+"</td></tr>":"")},rowCheck:function(e,t){return t.data("enchantment")===e},columnHead:function(){return'<tr class="panel-head"><th>Scope</th><th>Value</th></div>'}}),E=d(function(e){C.update(e.enchantments,e.enchantments.length)});c.on("add",E).on("remove",E);var _=c.create(f),N=u.create({className:"storylets",tabName:"Storylet",rowAdd:function(t){var n=t.name,r=t.active,i=t.storyletSource,a=t.exclusive,o=t.urgent;return e('<tr class="storylet-row '+(r?"":"storylet-closed")+'">').attr("data-name",n).append("<td class='storylet-name'>"+n+"</td><td class='storylet-lambda'>"+i+"</td><td class='storylet-exclusive'>"+a+"</td><td class='storylet-urgent'>"+o+"</td>")},rowCheck:function(e,t){var n=e.name;return t.attr("data-name")===l(n+"")},columnHead:function(){return"<tr class=\"panel-head\"><th>Name</th><th>Condition</th><th class='storylet-exclusive'>Exclusivity</th><th class='storylet-urgent'>Urgency</th></tr>"}});N.tab.hide(),j=d(function(){var e=s.getStorylets(_),t=i.containsError(e),n=s.allStorylets();N.update(n.map(function(n){return{name:n.get("name"),storyletSource:n.get("storylet").TwineScript_ToSource(),active:!t&&e.some(function(e){return e.get("name")===n.get("name")}),exclusive:"number"==typeof n.get("exclusivity")?n.get("exclusivity"):0,urgent:"number"==typeof n.get("urgency")?n.get("urgency"):0}}),t?0:e.length),N.panel[(t?"add":"remove")+"Class"]("storylet-error");var r=n.some(function(e){return e.get("exclusivity")&&"number"==typeof e.get("exclusivity")}),a=n.some(function(e){return e.get("urgency")&&"number"==typeof e.get("urgency")});N.panel[(r?"add":"remove")+"Class"]("panel-exclusive"),N.panel[(a?"add":"remove")+"Class"]("panel-urgent"),n.length&&N.tab.show()});var P=u.create({className:"source",tabName:"Source",rowAdd:e.noop,rowCheck:e.noop,tabUpdate:e.noop,columnHead:e.noop});P.tab.text("Source");var I=u.create({className:"errors",tabName:"Error",rowAdd:e.noop,rowCheck:e.noop,columnHead:e.noop}),M=function(t,r){if("propagated"!==t.type){I.panelRows.children().length>500&&I.panelRows.children(":first-child").remove();var i=e('<tr class="error-row"><td class="error-passage">'+n.passage+'</td><td class="error-message">'+t.message+"</td></tr>");i.find(".error-message").attr("title",r),I.panelRows.append(i),I.tabUpdate(I.panelRows.children().length)}};function D(){x=new Set,O(),j(),C.panelRows.empty(),C.tabUpdate(0),n.passage&&P.panelRows.text(s.get(n.passage).get("source"))}i.on("error",M),v.prepend(k.panel,C.panel,I.panel,N.panel,P.panel),b.prepend(k.tab,C.tab,I.tab,N.tab,P.tab),n.on("forward",D).on("back",D).on("load",D),t&&(M(t,a),D()),e(document.body).append(v)}}),define("macrolib/values",["macros","utils","utils/operationutils","datatypes/colour","datatypes/gradient","datatypes/datatype","datatypes/hookset","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s){var c=t.realWhitespace,u=t.nth,l=t.anyRealLetter,p=n.subset,f=n.objectName,d=n.clone,h=n.toSource,y=e.TypeSignature,m=y.rest,g=y.zeroOrMore,v=y.either,b=y.optional,w=y.insensitiveSet,T=y.numberRange,S=y.percent,x=y.nonNegativeInteger,k=y.positiveInteger,O=y.Any,j=Math.max,A=Math.min,C=Math.round,E=Math.floor,_=Math.ceil;function N(e){return function(){var t=e.apply(void 0,arguments);return"number"!=typeof t||isNaN(t)?s.create("macrocall","This mathematical expression doesn't compute!"):t}}e.add(["str","string","text"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.join("")},[g(e.TypeSignature.either(String,Number,Boolean,Array))])("source",function(e,t){return t&&"command"===t.TwineScript_TypeID&&!t.TwineScript_ToSource?s.create("datatype","I can't construct the source code of a command created by a custom macro."):h(t)},[O])("substring",function(e,t,n,r){return p(t,n,r)},[String,parseInt,parseInt])("lowercase",function(e,t){return t.toLowerCase()},[String])("uppercase",function(e,t){return t.toUpperCase()},[String])("lowerfirst",function(e,t){return t.replace(RegExp(l+"+"),function(e){return(e=Array.from(e))[0].toLowerCase()+e.slice(1).join("").toLowerCase()})},[String])("upperfirst",function(e,t){return t.replace(RegExp(l+"+"),function(e){return(e=Array.from(e))[0].toUpperCase()+e.slice(1).join("").toLowerCase()})},[String])("words",function(e,t){return t.split(RegExp(c+"+")).filter(Boolean)},[String])(["str-repeated","string-repeated"],function(e,t,n){return 0===n.length?s.create("macrocall","I can't repeat an empty string."):n.repeat(t)},[x,String])(["str-reversed","string-reversed"],function(e,t){return[].concat(_toConsumableArray(t)).reverse().join("")},[String])("joined",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return r.join(t)},[m(String)])("plural",function(e,t,n,r){return n&&""!==r?t+" "+(1!==Math.abs(t)?r||n+"s":n):s.create("macrocall","The (plural:) macro can't be given empty strings.")},[parseInt,String,b(String)])(["str-nth","string-nth"],function(e,t){return u(t)},[parseInt])(["num","number"],function(e,t){return Number.isNaN(+t)?s.create("macrocall","I couldn't convert "+f(t)+" to a number."):+t},[String])("datatype",function(e,t){return a.from(t)},[O])("datapattern",function(e,t){return function e(t){var n,r=void 0;return Array.isArray(t)?r=t.map(e):t instanceof Map?(r=new Map,[].concat(_toConsumableArray(t)).forEach(function(t){var n=_slicedToArray(t,2),i=n[0],a=n[1];return r.set(i,e(a))})):r=a.from(t),(n=s.containsError(r))?n:r}(t)},[O])(["rgb","rgba"],function(e){return r.create({r:arguments.length<=1?void 0:arguments[1],g:arguments.length<=2?void 0:arguments[2],b:arguments.length<=3?void 0:arguments[3],a:arguments.length<=4?void 0:arguments[4]})},[T(0,255),T(0,255),T(0,255),b(S)])(["hsl","hsla"],function(e,t,n,i,a){return(t=C(t)%360)<0&&(t+=360),r.create({h:t,s:n,l:i,a:a})},[Number,S,S,b(S)])(["lch","lcha"],function(e,t,n,i,a){return(i=C(i)%360)<0&&(i+=360),r.create({l:t,c:n,h:i,a:a})},[S,T(0,132),Number,b(S)])("complement",function(e,t){return t.LCHRotate(180)},[r])("palette",function(e,t,n){var i=n.toLCHA(),a=i.l,o={l:a<=.75?.75+a/3:.75-3*(1-a),c:80,h:i.h,a:1},s=void 0,c=void 0,u=void 0;return s=r.create(o),o.l+=a<=.75?-.1:.1,o.l<.5&&(o.l*=.5/o.l),c=r.create(o),o.l+=a<=.85?.15:-.15,u=r.create(o),"adjacent"===t?(c=(s=s.LCHRotate(-30)).LCHRotate(30),u=s.LCHRotate(60)):"triad"===t&&(u=s.LCHRotate(180),c=s.LCHRotate(140),s=s.LCHRotate(-140)),[n,s,c,u]},[w("mono","adjacent","triad"),r])("gradient",function(e,t){for(var n=arguments.length,a=Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];if((t=C(t)%360)<0&&(t+=360),a.length<4)return s.create("datatype","(gradient:) must be given at least 2 colour-stop pairs of numbers and colours.");var c=void 0,u=[],l=a.reduce(function(e,t){if(s.containsError(e))return e;if(void 0===c)c=t;else{if("number"!=typeof c||!r.isPrototypeOf(t))return s.create("datatype","(gradient:) colour-stops should be pairs of numbers and colours, not colours and numbers.");u.push({stop:c,colour:d(t)}),c=void 0}return e},!0);return s.containsError(l)?l:void 0!==c?s.create("macrocall","This gradient has a colour-stop percent without a colour."):i.create(t,u)},[Number,m(v(S,r))])("stripes",function(e,t,n){for(var r=arguments.length,a=Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];(t=C(t)%360)<0&&(t+=360);var s=0,c=[];return a.forEach(function(e){c.push({stop:s,colour:d(e)}),s+=n,c.push({stop:s,colour:d(e)})}),i.create(t,c,!0)},[Number,k,r,m(r)])("hooks-named",function(e,t){return t?o.create({type:"name",data:t}):s.create("datatype","(hooks-named:) can't be given an empty string.")},[String])("cond",function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t+=2){var n=arguments.length<=t+1?void 0:arguments[t+1];if(t===(arguments.length<=1?0:arguments.length-1)-1||s.containsError(n))return n;if("boolean"!=typeof n)return s.create("datatype","(cond:)'s "+u(t+1)+" value is "+f(n)+", but should be a boolean.");if(n)return arguments.length<=t+1+1?void 0:arguments[t+1+1]}return s.create("macrocall","An odd number of values must be given to (cond:), not "+(arguments.length<=1?0:arguments.length-1),"(cond:) must be given one or more pairs of booleans and values, as well as one final value.")},[Boolean,O,m(O)]),{weekday:[function(){return["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur"][(new Date).getDay()]+"day"},null],monthday:[function(){return(new Date).getDate()},null],currenttime:[function(){var e=new Date,t=e.getHours()<12;return(e.getHours()%12||12)+":"+((e.getMinutes()<10?"0":"")+e.getMinutes())+" "+(t?"A":"P")+"M"},null],currentdate:[function(){return(new Date).toDateString()},null],min:[A,m(Number)],max:[j,m(Number)],abs:[Math.abs,Number],sign:[Math.sign,Number],sin:[Math.sin,Number],cos:[Math.cos,Number],tan:[Math.tan,Number],floor:[E,Number],round:[C,Number],trunc:[function(e){return e>0?E(e):_(e)},Number],ceil:[_,Number],pow:[N(Math.pow),[Number,Number]],exp:[Math.exp,Number],sqrt:[N(Math.sqrt),Number],log:[N(Math.log),Number],log10:[N(Math.log10),Number],log2:[N(Math.log2),Number],random:[function(e,t){var n=void 0,r=void 0;return t?(n=A(e,t),r=j(e,t)):(n=0,r=e),r+=1,~~(Math.random()*(r-n))+n},[parseInt,e.TypeSignature.optional(parseInt)]],either:[function(){var e;return e=~~(Math.random()*arguments.length),arguments.length<=e?void 0:arguments[e]},m(O)],nth:[function(e){var t;return e<=0?s.create("datatype","(nth:)'s first value should be a positive whole number, not "+e):(t=(e-1)%(arguments.length<=1?0:arguments.length-1)+1,arguments.length<=t?void 0:arguments[t])},[parseInt,m(O)]],"":function(){var t=this;Object.keys(this).forEach(function(n){if(n){var r=t[n][0],i=t[n][1];e.add(n,function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return r.apply(void 0,n)},i)}})}}[""]()}),define("macrolib/commands",["jquery","macros","utils","state","passages","renderer","engine","internaltypes/twineerror","internaltypes/twinenotifier","datatypes/assignmentrequest","datatypes/hookset","datatypes/codehook","datatypes/lambda","datatypes/colour","datatypes/gradient","internaltypes/varref","datatypes/typedvar","datatypes/varbind","utils/operationutils","utils/renderutils"],function(e,t,n,r,i,a,o,s,c,u,l,p,f,d,h,y,m,g,v,b){var w=v.printBuiltinValue,T=v.objectName,S=v.clone,x=v.toSource,k=b.dialog,O=b.geomParse,j=b.geomStringRegExp,A=t.TypeSignature,C=A.Any,E=A.Everything,_=A.rest,N=A.either,P=A.optional,I=A.zeroOrMore,M=A.positiveInteger,D=A.positiveNumber,R=Object.assign,L=Math.floor,q=Math.ceil,F=Math.abs,V=Math.max,H=Math.min,z=e.noop;function $(e){return"("+e+" "+o.options.ifid+") "}["set","put","unpack"].forEach(function(e){return t.add(e,function(t){for(var n=0;n<(arguments.length<=1?0:arguments.length-1);n+=1){var r=arguments.length<=n+1?void 0:arguments[n+1];if("into"===r.operator&&"set"===e)return s.create("macrocall","Please say 'to' when using the (set:) macro.");if("to"===r.operator&&"set"!==e)return s.create("macrocall","Please say 'into' when using the (put:) or (unpack:) macro.");if((y.isPrototypeOf(r.dest)||m.isPrototypeOf(r.dest))===("unpack"===e))return s.create("macrocall","unpack"===e?"Please use the (unpack:) macro with arrays, datamaps or (p:) patterns containing variables to the right of 'into'.":"Please use the ("+e+":) macro with just single variables and typed variables to the "+("set"===e?"left of 'to'.":"right of 'into'."));var i=r.set();if(s.containsError(i))return i}return{TwineScript_TypeID:"instant",TwineScript_TypeName:"a ("+e+":) operation",TwineScript_ObjectName:"a ("+e+":) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return o.options.debug,""}}},[_(u)])}),t.add("move",function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"!==n.operator)return s.create("macrocall","Please say 'into' when using the (move:) macro.");var r=n.set(!0);if(s.containsError(r))return r}return{TwineScript_TypeID:"instant",TwineScript_TypeName:"a (move:) operation",TwineScript_ObjectName:"a (move:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return o.options.debug,""}}},[_(u)]),t.addCommand("display",function(e){if(!i.hasValid(e))return s.create("macrocall","I can't (display:) the passage '"+e+"' because it doesn't exist.")},function(e,t,r){return R(e,{source:n.unescape(i.get(r).get("source"))})},[String])("print",z,function(e,t,n){return R(e,{source:w(n)})},[C])(["verbatim-print","v6m-print"],z,function(e,t,n){return R(e,{verbatim:!0,source:w(n)})},[C])(["verbatim-source","v6m-source"],function(e){if(e&&"command"===e.TwineScript_TypeID&&!e.TwineScript_ToSource)return s.create("datatype","I can't construct the source code of a command created by a custom macro.")},function(e,t,n){return R(e,{verbatim:!0,source:w(x(n))})},[C])("go-to",function(e){if(!i.hasValid(e))return s.create("macrocall","I can't (go-to:) the passage '"+e+"' because it doesn't exist.")},function(e,t,n){return requestAnimationFrame(function(){return o.goToPassage(n,{transition:e.data.passageT8n})}),"blocked"},[String])("undo",z,function(e){return r.pastLength<1?s.create("macrocall","I can't (undo:) on the first turn."):(requestAnimationFrame(function(){return o.goBack({transition:e.data.passageT8n})}),"blocked")},[]),n.onStartup(function(){return e(n.storyElement).on("click.icon","tw-icon",function(t){var n=e(this),i=n.data("clickEvent"),a=n.attr("alt");i&&i(n),"Undo"===a&&(t.stopPropagation(),o.goBack()),"Redo"===a&&(t.stopPropagation(),o.goForward()),"Fullscreen"===a&&(t.stopPropagation(),o.toggleFullscreen()),"Reload"===a&&(r.hasSessionStorage&&sessionStorage.removeItem("Saved Session"),window.location.reload())})}),[["Undo","&#8630;",function(){return r.pastLength>0}],["Redo","&#8631;",function(){return r.futureLength>0}],["Fullscreen","&#9974;",function(){return document.fullscreenEnabled||document.msFullscreenEnabled}],["Restart","&#10226;",Object]].forEach(function(e){var n=_slicedToArray(e,3),r=n[0],i=n[1],a=n[2];t.addCommand("icon-"+r.toLowerCase(),function(e,t){if("string"==typeof e&&"string"==typeof t){var n=[].concat(_toConsumableArray(e)).length,i=[].concat(_toConsumableArray(t)).length;if(n>1&&i>1)return s.create("datatype","One of the two strings given to (icon-"+r.toLowerCase()+":) should be 1 character long, for its icon.");if(1===n&&1===i)return s.create("datatype","One of the two strings given to (icon-"+r.toLowerCase()+":) should be 2 or more characters long, for its label.")}},function(e,t,n,o){if("string"==typeof o&&1===[].concat(_toConsumableArray(o)).length||"string"==typeof n&&[].concat(_toConsumableArray(n)).length>1){var s=[o,n];n=s[0],o=s[1]}return R(e,{source:'<tw-icon tabindex=0 alt="'+r+'" '+(o?'data-label="'+o.replace('"',"&quot;")+'"':"")+' title="'+r+'" '+(a()?"":'style="visibility:hidden"')+">"+(n||i)+"</tw-icon>"})},[P(String),P(String)])}),t.addCommand("icon-counter",function(e,t,n){var r=" label string given to (icon-counter:) can't be empty or only whitespace.";return t&&t.trim()?"string"!=typeof n||n.trim()?void 0:s.create("datatype","The 2nd "+r):s.create("datatype","The 1st "+r)},function(e,t,r,i,a){e.attr.push({"data-2bind":!0}),e.data.twoWayBindEvent=function(t,n,o){if(r.varRef.matches(n,o)){var s=r.varRef.get();if("number"==typeof s)e.target.children("tw-icon").text(s>0?L(s):q(s)).attr("data-label",1!==F(s)&&void 0!==a?a:i)}};var o=r.varRef.get();return"number"!=typeof o?s.create("datatype","(icon-counter:) can only be bound to a variable holding a number, not "+T(o)+"."):R(e,{source:'<tw-icon data-label="'+n.escape(1!==F(o)&&void 0!==a?a:i)+'">'+(o>0?L(o):q(o))+"</tw-icon>"})},[g,String,P(String)]),t.addCommand("meter",function(e,t,n,r){return"string"!=typeof r||r.trim()?-1===n.search(j)||!n.includes("=")&&n.length>1?s.create("datatype",'The (meter:) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not '+JSON.stringify(n)+"."):void 0:s.create("datatype","The label string given to (meter:) can't be empty or only whitespace.")},function(e,t,n,r,i,a,o){a&&"string"!=typeof a&&(o=a,a=void 0),o||(o=d.create({h:0,s:0,l:.5,a:.5})),d.isPrototypeOf(o)&&(o=h.create(90,[{colour:o,stop:0},{colour:o,stop:1}]));var c=O(i),u=c.marginLeft,l=c.size,p=u>0&&Math.ceil(u+l)<100,f=function(e){var t=V(0,H(1,e/r)),n=o.repeating?o:o.multiply(r/e);return"height:100%;background-repeat:no-repeat;background-image:"+(p?R(n,n.repeating?{}:{angle:270}).toLinearGradientString()+", ":"")+R(n,n.repeating?{}:{angle:p||0===u?90:270}).toLinearGradientString()+";background-size:"+(p?Array(2).fill(50*t+"%"):100*t+"%")+";background-position-x:"+(p?-100/(2-t)+100+"%,"+100/(2-t)+"%":0===u?"left":"right")+";text-align:"+(p?"center":0===u?"left":"right")};e.styles.push({"margin-left":u+"%",width:l+"%",height:"1.5em",display:"block"}),e.attr.push({"data-2bind":!0});var y=a&&t.stackTop.tempVariables;e.data.twoWayBindEvent=function(t,r,i){if(n.varRef.matches(r,i)){var o=n.varRef.get();if("number"==typeof o){var s=e.target.children("tw-meter");if(s.attr("style",f(o)),a){var c=R({},e,{source:a,target:s,append:"replace",transitionDeferred:!1});e.section.renderInto("",null,c,y)}}}};var m=n.varRef.get();return"number"!=typeof m?s.create("datatype","(meter:) can only be bound to a variable holding a number, not "+T(m)+"."):R(e,{source:'<tw-meter style="'+f(m)+'">'+(a||"")+"</tw-meter>"})},[g,D,String,P(N(String,d,h)),P(N(d,h))]),[["cycling-link"],["seq-link","sequence-link"]].forEach(function(e,n){return t.addCommand(e,function(){return""===(arguments.length<=0?void 0:arguments[0])?s.create("datatype","The first string in a ("+e[0]+":) can't be empty."):arguments.length<=(g.isPrototypeOf(arguments.length<=0?void 0:arguments[0])?2:1)?s.create("datatype","I need two or more strings to "+(n?"sequence":"cycle")+" through, not just '"+(t=arguments.length-1,arguments.length<=t?void 0:arguments[t])+"'."):void 0;var t},function(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o=void 0;g.isPrototypeOf(i[0])&&(o=i.shift());var c=0;if(o&&"two way"===o.bind){e.attr.push({"data-2bind":!0});var u=i.indexOf(o.varRef.get());u>-1&&(c=u)}var l=t.stackTop.tempVariables;function p(t,r){var a=c>=i.length-1&&n,u=""===i[c]?"":a?i[c]:"<tw-link>"+i[c]+"</tw-link>";if(a&&(e.data.clickEvent=void 0),o&&!r){var p=o.set(i[c]);if(s.containsError(p))return void t.replaceWith(p.render(i[c]))}var f=R({},e,{source:u,transitionDeferred:!1});e.section.renderInto("",null,f,l)}i[c]&&(e.data.clickEvent=function(e){c=(c+1)%i.length,p(e,!1)})&&(e.data.twoWayBindEvent=function(e,t,n){if(o.varRef.matches(t,n)){var r=o.varRef.get(),a=i.indexOf(r);a>-1&&a!==c&&(c=a,p(e,!0))}});var f="<tw-link>"+i[c]+"</tw-link>";if(o){var d=o.set(i[c]);if(s.containsError(d))return d}return R(e,{source:f,append:"replace",transitionDeferred:!0})},[N(g,String),_(String)])}),n.onStartup(function(){return e(n.storyElement).on("change.dropdown-macro","select",function(){var t=e(this),n=t.closest("tw-expression, tw-hook").data("dropdownEvent");n&&n(t)})}),t.addCommand("dropdown",function(e){var t;return""===(arguments.length<=1?void 0:arguments[1])||""===(t=(arguments.length<=1?0:arguments.length-1)-1+1,arguments.length<=t?void 0:arguments[t])?s.create("datatype","The first or last strings in a (dropdown:) can't be empty.","Because empty strings create separators within (dropdown:)s, having them at the start or end doesn't make sense."):(arguments.length<=1?0:arguments.length-1)<=1?s.create("datatype","I need two or more strings to create a (dropdown:) menu, not just "+(arguments.length<=1?0:arguments.length-1)+"."):void 0},function(t,r,i){for(var a=arguments.length,o=Array(a>3?a-3:0),c=3;c<a;c++)o[c-3]=arguments[c];var u=0;if("two way"===i.bind){t.attr.push({"data-2bind":!0});var l=o.indexOf(i.varRef.get());l>-1&&(u=l)}var p=Math.max.apply(Math,_toConsumableArray(o.map(function(e){return[].concat(_toConsumableArray(e)).length}))),f="<select>"+o.map(function(e,t){return"<option"+(t===u?" selected":"")+(""===e?" disabled":"")+">"+n.escape(e||"\u2500".repeat(p))+"</option>"}).join("\n")+"</select>";t.data.dropdownEvent=function(e){var t=e.val(),n=i.set(t);s.containsError(n)&&e.replaceWith(n.render(t))},t.data.twoWayBindEvent=function(e,t,n){if(i.varRef.matches(t,n)){var r=i.varRef.get(),a=o.indexOf(r);a>-1&&a!==u&&(e.find("select").val(r),u=a)}},t.styles.push({"background-color":function(){return n.parentColours(e(this)).backgroundColour}});var d=i.set(o[u]);return s.containsError(d)?d:R(t,{source:f,append:"replace"})},[g,String,_(String)]),n.onStartup(function(){return e(n.storyElement).on("input.checkbox-macro","input[type=checkbox]",function(){var t=e(this),n=t.closest("tw-expression").data("checkboxEvent");n&&n(t)})});var B=1;t.addCommand("checkbox",function(){},function(e,t,n,r){var i=!1,a="checkbox-"+ ++B;if("two way"===n.bind){e.attr.push({"data-2bind":!0});var o=n.varRef.get();"boolean"==typeof o&&(i=o),e.data.twoWayBindEvent=function(e,t,r){if(n.varRef.matches(t,r)){var i=n.varRef.get();"boolean"==typeof i&&e.children("input[type=checkbox]").prop("checked",i)}}}return e.data.checkboxEvent=function(e){var t=e.is(":checked"),r=n.set(t);s.containsError(r)&&e.replaceWith(r.render(""))},R(e,{source:'<input id="'+a+'" type="checkbox" '+(i?"checked":"")+'><label for="'+a+'">'+r+"</label>",append:"replace"})},[g,String]),n.onStartup(function(){return e(document).on("fullscreenchange",function(){e("input[type=checkbox][id^=fullscreen]",n.storyElement).each(function(t,n){(e(n).closest("tw-expression").data("fullscreenEvent")||Object)(n)})})}),t.addCommand("checkbox-fullscreen",function(){},function(t,n,r){var i="fullscreenCheckbox-"+ ++B;return t.data.fullscreenEvent=function(t){return e(t).prop("checked",!(!document.fullscreenElement&&!document.msFullscreenElement))},t.data.checkboxEvent=function(){return o.toggleFullscreen()},R(t,{source:'<input id="'+i+'" type="checkbox" '+(document.fullscreenEnabled||document.msFullscreenEnabled?" ":"disabled ")+(document.fullscreenElement||document.msFullscreenElement?"checked":"")+'><label for="'+i+'">'+r+"</label>",append:"replace"})},[String]),n.onStartup(function(){return e(n.storyElement).on("input.input-box-macro","textarea",function(){var t=e(this),n=t.closest("tw-expression").data("inputBoxEvent");n&&n(t)})}),["input-box","force-input-box"].forEach(function(e){return t.addCommand(e,function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=g.isPrototypeOf(n[0]),a="number"==typeof n[1+i],o="string"==typeof n[1+i+a],c=n[+i];if("string"!=typeof c||-1===c.search(j)||!c.includes("=")&&c.length>1)return s.create("datatype","The ("+e+':) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not '+JSON.stringify(c)+".");if("force-input-box"===e&&!o)return s.create("datatype","The ("+e+":) macro requires a string of text to forcibly input.");var u=1+i+a+o;return n.length>u?s.create("datatype","An incorrect combination of values was given to this ("+e+":) macro."):void 0},function(t,r){for(var i=arguments.length,a=Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];var c="force-input-box"===e,u=g.isPrototypeOf(a[0]),l="number"==typeof a[1+u],p=u&&a[0],f=l?a[1+u]:3,d=O(a[+u]),h=d.marginLeft,y=d.size,m="string"==typeof a[1+u+l]?a[1+u+l]:"",v=c?"":m;if("two way"===p.bind){t.attr.push({"data-2bind":!0});var b=p.varRef.get();if("string"==typeof b){v=c?m.slice(0,b.length):b;var w=p.set(v);if(s.containsError(w))return w}t.data.twoWayBindEvent=function(e,t,n){if(p.varRef.matches(t,n)){var r=p.varRef.get();"string"==typeof r&&e.find("textarea").val(c?m.slice(0,r.length):r)}}}else if(p){var T=p.set(c?"":m);if(s.containsError(T))return T}c||(t.data.inputBoxEvent=function(e){var t=e.val(),n=p.set(t);s.containsError(n)&&e.replaceWith(n.render(""))});var S='<textarea style="width:100%" rows='+f+">"+n.escape(v)+"</textarea>";if(c){var x=Array.from(m);t.data.inputBoxEvent=function(e){var t=e.val().length,n=x.slice(0,t).join("");if(e.val(n),p){var r=p.set(n);s.containsError(r)&&e.replaceWith(r.render(""))}return!0}}return t.styles.push({display:"block","margin-left":h+"%",width:y+"%","border-style":function(){return this.style.borderStyle||"solid"}}),R(t,{source:S,append:"replace"})},[N(g,String),P(N(M,String)),P(N(M,String)),P(String)])}),["show","rerun"].forEach(function(n){return t.addCommand(n,z,function(t,r){for(var i=arguments.length,a=Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];return a.forEach(function(i){return i.forEach(r,function(i){var a=i.data("hidden");if(void 0!==a!=("rerun"===n))if(i.removeData("hidden"),a instanceof e)i.empty().append(a);else{var o=i.data("tempVariables");r.renderInto("",null,R({},t,{append:"replace",source:i.data("originalSource")||"",target:i}),o&&Object.create(o))}})}),t},[_(l)])});var W=function(e){return["I can't use a dialog macro in "+e+".","Please rewrite this without putting such macros here."]};t.addCommand("hide",z,function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){return t.forEach(e,function(e){Boolean(e.data("hidden"))||e.data("hidden",e.contents().detach())})})},[_(l)],!1)("stop",z,z,[],!1)("load-game",z,function(e,t){var n=localStorage.getItem($("Saved Game")+t);if(!n)return s.create("saving","I can't find a save slot named '"+t+"'!");var i=r.deserialise(e,n);if(i instanceof Error){var a=k({message:"Sorry to interrupt... The story tried to load saved data, but there was a problem.\n"+i.message+"\n\nThat data might have been saved from a different version of this story. Should I delete it?\n(Type 'delete' and choose Yes to delete it.)\n\nEither way, the story will now continue without loading the data.",defaultValue:"",buttons:[{name:"Yes",confirm:!0,callback:function(){"delete"===a.find("input").last().val()&&localStorage.removeItem($("Saved Game")+t),e.unblock("")}},{name:"No",cancel:!0,callback:function(){return e.unblock()}}]});return"blocked"}requestAnimationFrame(o.showPassage.bind(o,r.passage,!1))},[String],!1)("mock-visits",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!o.options.debug)return s.create("operation","(mock-visits:) cannot be used outside of debug mode.","This macro is not meant to be used outside of debugging your story.");var r=t.find(function(e){return!i.hasValid(e)});return r?s.create("datatype","I can't mock-visit '"+r+"' because no passage with that name exists."):void 0},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r.mockVisits=S(n)},[_(String)],!1)(["dialog","alert"],function(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(g.isPrototypeOf(e)){if("two way"===e.bind)return s.create("datatype","(dialog:) shouldn't be given two-way bound variables.");if(void 0===t)return s.create("datatype","(dialog:) needs a message string to display.")}else void 0!==t&&i.unshift(t);var o=i.findIndex(function(e){return""===e});if(o>-1)return s.create("datatype","(dialog:)'s "+n.nth(o+1)+" link text shouldn't be an empty string.")},function(e,t,n,r){for(var i=arguments.length,a=Array(i>4?i-4:0),o=4;o<i;o++)a[o-4]=arguments[o];return g.isPrototypeOf(n)||(void 0!==r&&a.unshift(r),r=n,n=void 0),a.length||(a=["OK"]),k({section:t,message:r,cd:e,buttons:a.map(function(e){return{name:e,callback:function(){t.unblock(n&&n.set(e)||"")}}})}),"blocked"},[N(g,String),I(String)])("open-url",z,function(e,t){window.open(t,"")},[String],!1)(["restart","reload"],z,function(){if(r.pastLength<1)return s.create("infinite","I mustn't (restart:) the story in the starting passage.");r.hasSessionStorage&&sessionStorage.removeItem("Saved Session"),window.location.reload()},[],!1)("goto-url",z,function(e,t){window.location.assign(t)},[String],!1)("ignore",z,z,[I(E)])("assert-exists",function(e){if(""===e)return s.create("datatype","(assert-exists:) mustn't be given an empty string.")},function(e,t,n){var r=0;return("string"==typeof n?l.create({type:"string",data:n}):n).forEach(t,function(){++r}),r?e:s.create("assertion","I didn't see any "+("string"==typeof n?"text occurrences of":"hooks matching")+" "+x(n)+" in this passage.")},[N(l,String)]),t.add("assert",function(e,t){return t?{TwineScript_TypeID:"instant",TwineScript_TypeName:"an (assert:) operation",TwineScript_ObjectName:"an (assert:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return""}}:R(s.create("assertion","An assertion failed: "),{appendTitleText:!0})},[Boolean])("save-game",function(e,t,n){if(n=n||"",!r.hasStorage)return!1;var i=r.serialise();if(s.containsError(i))return i;if(!1===i)return!1;try{return localStorage.setItem($("Saved Game")+t,i),localStorage.setItem($("Saved Game Filename")+t,n),!0}catch(e){return!1}},[String,P(String)])("prompt",function(e,t,n,r,i){if(e.stackTop&&e.stackTop.evaluateOnly)return s.create.apply(s,["macrocall"].concat(_toConsumableArray(W(e.stackTop.evaluateOnly))));if(""===i)return s.create("datatype","The text for (prompt:)'s confirm link can't be blank.");var a=k({section:e,message:t,defaultValue:n,buttons:[{name:i||"OK",confirm:!0,callback:function(){return e.unblock(a.find("input").last().val())}},{name:r||"Cancel",cancel:!0,callback:function(){return e.unblock(n)}}]});setTimeout(function(){return a.find("input").last().focus()},100)},[String,String,P(String),P(String)])("confirm",function(e,t,n,r){return e.stackTop&&e.stackTop.evaluateOnly?s.create.apply(s,["macrocall"].concat(_toConsumableArray(W(e.stackTop.evaluateOnly)))):""===r?s.create("datatype","The text for (confirm:)'s confirm link can't be blank."):void k({section:e,message:t,defaultValue:!1,buttons:[{name:r||"OK",confirm:!0,callback:function(){return e.unblock(!0)}},{name:n||"Cancel",cancel:!0,callback:function(){return e.unblock(!1)}}]})},[String,P(String),P(String)])("page-url",function(){return window.location.href},[]),a.options.blockerMacros.push("prompt","confirm")}),define("macrolib/datastructures",["jquery","utils","utils/naturalsort","macros","utils/operationutils","state","engine","passages","datatypes/lambda","datatypes/datatype","datatypes/typedvar","internaltypes/varref","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s,c,u,l,p,f){var d=t.shuffled,h=t.permutations,y=i.objectName,m=i.subset,g=i.collectionType,v=i.isValidDatamapName,b=i.is,w=i.unique,T=i.clone,S=i.range,x=r.TypeSignature,k=x.optional,O=x.rest,j=x.either,A=x.zeroOrMore,C=x.Any,E=x.nonNegativeInteger;r.add(["a","array"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n},A(j(l,C)))("range",function(e,t,n){return S(t,n)},[parseInt,parseInt])("subarray",function(e,t,n,r){return m(t,n,r)},[Array,parseInt,parseInt])("reversed",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reverse().map(T)},A(C))("shuffled",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return d.apply(void 0,n).map(T)},[C,O(C)])("sorted",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.sort(n("en"))},[j(Number,String),O(j(Number,String))])("rotated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return 0===(t*=-1)?f.create("macrocall","I can't rotate these values by 0 positions."):Math.abs(t)>=r.length?f.create("macrocall","I can't rotate these "+r.length+" values by "+t+" positions."):r.slice(t).concat(r.slice(0,t)).map(T)},[parseInt,C,O(C)])("rotated-to",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=t.filter(e,r);if(f.containsError(a))return a;if(!a.length)return f.create("macrocall","None of these "+r.length+" values matched the lambda, so I can't rotate them.");var o=r.indexOf(a[0]);return r.slice(o).concat(r.slice(0,o)).map(T)},[c.TypeSignature("where"),C,O(C)])("repeated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];for(var a=[];t-- >0;)a.push.apply(a,r);return a.map(T)},[E,O(C)])("interlaced",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=Math.min.apply(Math,_toConsumableArray(n.map(function(e){return e.length}))),a=[],o=0;o<i;o+=1)for(var s=0;s<n.length;s+=1)a.push(T(n[s][o]));return a},[Array,O(Array)])("permutations",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?h.apply(void 0,n):[]},[A(C)]),r.add("altered",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return r.map(function(n,r){return t.apply(e,{loop:n,pos:r+1})})},[c.TypeSignature("via"),A(C)])("find",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t.filter(e,r)},[c.TypeSignature("where"),A(C)])(["all-pass","pass"],function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=t.filter(e,r);return f.containsError(a)||a.length===r.length},[c.TypeSignature("where"),A(C)])("some-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=t.filter(e,r);return f.containsError(a)||a.length>0},[c.TypeSignature("where"),A(C)])("none-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=t.filter(e,r);return f.containsError(a)||0===a.length},[c.TypeSignature("where"),A(C)])("folded",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return"where"in t&&(r=t.filter(e,r)),f.containsError(r)||r.reduce(function(n,r,i){return t.apply(e,{making:n,loop:r,pos:i+1})})},[j(c.TypeSignature("where","via","making"),c.TypeSignature("via","making")),O(C)]),r.add("datanames",function(e,t){return Array.from(t.keys()).sort(n("en"))},[Map])("datavalues",function(e,t){return Array.from(t.entries()).sort(n("en",function(e){return String(e[0])})).map(function(e){return T(e[1])})},[Map])("dataentries",function(e,t){return Array.from(t.entries()).sort(function(e,t){return[e[0],t[0]].sort(n("en"))[0]===e[0]?-1:1}).map(function(e){return new Map([["name",e[0]],["value",T(e[1])]])})},[Map])("history",function(e,t){var n=a.mockVisits.concat(a.pastPassageNames());if(!t)return n;var r=t.filter(e,n.map(function(e){return s.get(e)}));return f.containsError(r)?r:r.map(function(e){return e.get("name")})},[k(c.TypeSignature("where"))])("passage",function(e,t){return T(s.get(t||a.passage))||f.create("macrocall","There's no passage named '"+t+"' in this story.")},[k(String)])("passages",function(e,t){var r=n("en"),i=[].concat(_toConsumableArray(s.values())).map(function(e){return T(e)}),a=t?t.filter(e,i):i,o=f.containsError(a);return o||a.sort(function(e,t){return r(e.get("name"),t.get("name"))})},[k(c.TypeSignature("where"))])("open-storylets",function(e,t){if(e.stackTop.evaluateOnly)return f.create("macrocall","(open-storylets:) can't be used in "+e.stackTop.evaluateOnly+".");var n=s.getStorylets(e,t),r=f.containsError(n);return r||n.map(T)},[k(c.TypeSignature("where"))])("savedgames",function(){function e(e){return"("+e+" "+o.options.ifid+") "}var t=0,n=void 0,r=new Map;do{if(!a.hasStorage)break;n=localStorage.key(t),t+=1;var i=e("Saved Game");n&&n.startsWith(i)&&(n=n.slice(i.length),r.set(n,localStorage.getItem(e("Saved Game Filename")+n)))}while(n);return r},[])(["datamap","dm"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=void 0,a=new Map,o=n.reduce(function(e,t){var n=void 0;if(f.containsError(e))return e;if(void 0===i)i=t;else{if(n=f.containsError(v(a,i)))return n;if(a.has(i))return f.create("macrocall","You used the same data name ("+y(i)+") twice in the same (datamap:) call.");a.set(i,T(t)),i=void 0}return e},!0);return f.containsError(o)?o:void 0!==i?f.create("macrocall","This datamap has a data name without a value."):a},A(j(l,C)))(["dataset","ds"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Set(n.filter(w).map(T))},A(C))("count",function e(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(i.length>1){var o,s=i.map(function(r){return e(t,n,r)});return(o=f.containsError(s))?o:s.reduce(function(e,t){return e+t},0)}var c=i[0];switch(g(n)){case"dataset":case"datamap":return f.create("macrocall","(count:) shouldn't be given a datamap or dataset.","You should use the 'contains' operator instead. For instance, write: $variable contains 'value'.");case"string":return"string"!=typeof c?f.create("macrocall",y(n)+" can't contain  "+y(c)+" because it isn't also a string."):c?n.split(c).length-1:0;case"array":return n.reduce(function(e,t){return e+b(t,c)},0);default:return f.create("macrocall",y(n)+" can't contain values, let alone "+y(c)+".")}},[C,O(C)])}),define("macrolib/stylechangers",["jquery","macros","utils","utils/renderutils","datatypes/colour","datatypes/hookset","datatypes/gradient","datatypes/changercommand","datatypes/lambda","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s,c,u,l){var p=r.geomParse,f=r.geomStringRegExp,d=Object.assign,h=t.TypeSignature,y=h.either,m=h.wrapped,g=h.optional,v=h.Any,b=h.Everything,w=h.zeroOrMore,T=h.rest,S=h.insensitiveSet,x=h.positiveNumber,k=h.positiveInteger,O=h.nonNegativeNumber,j=h.percent,A=[m(Boolean,'If you gave a number, you may instead want to check that the number is not 0. If you gave a string, you may instead want to check that the string is not "".')];n.onStartup(function(){return e(n.storyElement).on("mouseenter.hover-macro","[hover=false]",function(){var t=e(this),n=t.data("hoverChanger");t.data({mouseoutStyle:t.attr("style")||""}),u.create({target:t},n).update(),t.attr("hover",!0)}).on("mouseleave.hover-macro","[hover=true]",function(){var t=e(this),n=t.data("mouseoutStyle");t.attr("style",n).removeData("mouseoutStyle").attr("hover",!1)})});var C,E,_=S("instant","dissolve","fade","rumble","shudder","pulse","zoom","flicker","slideleft","slideright","slideup","slidedown","fadeleft","faderight","fadeup","fadedown","blur"),N=S("dotted","dashed","solid","double","groove","ridge","inset","outset","none");t.addChanger("if",function(e,t){return s.create("if",[t])},function(e,t){return e.enabled=e.enabled&&t},A)("unless",function(e,t){return s.create("unless",[t])},function(e,t){return e.enabled=e.enabled&&!t},A)("elseif",function(e,t){return"lastHookShown"in e.stack[0]?s.create("elseif",[!1===e.stack[0].lastHookShown&&!!t]):l.create("macrocall","There's no (if:) or something else before this to do (else-if:) with.")},function(e,t){return e.enabled=e.enabled&&t},A)("else",function(e){return"lastHookShown"in e.stack[0]?s.create("else",[!1===e.stack[0].lastHookShown]):l.create("macrocall","There's nothing before this to do (else:) with.")},function(e,t){return e.enabled=e.enabled&&t},null)("hidden",function(){return s.create("hidden")},function(e){return e.enabled=!1},null)(["verbatim","v6m"],function(){return s.create("verbatim")},function(e){return e.verbatim=!0},null)("live",function(e,t){return s.create("live",[t])},function(e,t){e.enabled=!1,e.data.live={delay:t}},g(Number))("event",function(e,t){return s.create("event",[t])},function(e,t){e.enabled=!1,e.data.live={event:t}},c.TypeSignature("when"))("more",function(){return s.create("more")},function(e){e.enabled=!1,e.data.live={event:{when:!0,filter:function(e){return 0!==e.eval("Operations").Identifiers.exits?[]:[!0]}}}},null)("after",function(e,t,n){return s.create("after",[t].concat(void 0!==n?[n]:[]))},function(e,t,r){e.enabled=!1,e.data.live={event:{when:!0,filter:function(e){return n.anyInputDown()&&(t-=r),e.eval("Operations").Identifiers.time>t?[!0]:[]}}}},[x,g(O)])("hook",function(e,t){return t?s.create("hook",[t]):l.create("datatype","(hook:) names can't be empty strings.")},function(e,t){return e.attr.push({name:t})},[String])(["for","loop"],function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t.loop?s.create("for",[t].concat(r)):l.create("datatype","The lambda provided to (for:) must refer to a temp variable, not just 'it'.")},function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a,o=t.filter(e.section,r);if(a=l.containsError(o))return a;e.loopVars[t.loop.getName()]=o||[]},[c.TypeSignature("where"),w(v)])(["transition","t8n"],function(e,t){return s.create("transition",[n.insensitiveName(t)])},function(t,r){return t.transition=r,"zoom"===r&&(t.transitionOrigin=function(){var t=e(this).offset(),r=t.left,i=t.top;return n.mouseCoords.x-r+"px "+(n.mouseCoords.y-i)+"px"}),t},[_])(["transition-time","t8n-time"],function(e,t){return s.create("transition-time",[t])},function(e,t){return e.transitionTime=t,e.data.passageT8n=d(e.data.passageT8n||{},{time:t}),e},[x])(["transition-delay","t8n-delay"],function(e,t){return s.create("transition-delay",[t])},function(e,t){return e.transitionDelay=t,e},[O])(["transition-skip","t8n-skip"],function(e,t){return s.create("transition-skip",[t])},function(e,t){return e.transitionSkip=t,e},[x])(["transition-depart","t8n-depart"],function(e,t){return s.create("transition-depart",[n.insensitiveName(t)])},function(t,r){return t.data.passageT8n=d(t.data.passageT8n||{},{depart:r}),"zoom"===r&&(t.data.passageT8n.departOrigin=function(){var t=e(this).offset(),r=t.left,i=t.top;return n.mouseCoords.x-r+"px "+(n.mouseCoords.y-i)+"px"}),t},[_])(["transition-arrive","t8n-arrive"],function(e,t){return s.create("transition-arrive",[n.insensitiveName(t)])},function(t,r){return t.data.passageT8n=d(t.data.passageT8n||{},{arrive:r}),"zoom"===r&&(t.data.passageT8n.arriveOrigin=function(){var t=e(this),r=t.offset(),i=r.left,a=r.top,o=t.height();return{"transform-origin":100*(n.mouseCoords.x-i)/t.width()+"% "+100*(n.mouseCoords.y-a)/o+"%",height:o+"px"}}),t},[_])("button",function(){return s.create("button",[])},function(e){return e.attr.push({class:function(){return this.className+(this.classList.contains("enchantment-button")?"":" ".repeat(this.className.length>0)+"enchantment-button")}}),e},[])(["border","b4r"],function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return s.create("border",r.map(n.insensitiveName))},function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.styles.push({display:function(){var t=e(this).css("display");return r.every(function(e){return"none"===e})||!t.includes("inline")?t:"inline-block"},"border-style":r.join(" "),"border-width":function(){return this.style.borderWidth||"2px"}}),t},[N].concat(_toConsumableArray(Array(3).fill(g(N)))))(["border-size","b4r-size"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("border-size",n)},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-width":n.map(function(e){return e+"px"}).join(" ")}),e},[O].concat(_toConsumableArray(Array(3).fill(g(O)))))("corner-radius",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("corner-radius",n)},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-radius":n.map(function(e){return e+"px"}).join(" "),padding:function(){return this.style.padding||n.map(function(e){return e+"px"}).join(" ")}}),e},[O].concat(_toConsumableArray(Array(3).fill(g(O)))))(["border-colour","b4r-colour","border-color","b4r-color"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s.create("border-colour",n.map(function(e){return i.isPrototypeOf(e)?e.toRGBAString(e):e}))},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.styles.push({"border-color":n.join(" ")}),e},[y(String,i)].concat(_toConsumableArray(Array(3).fill(g(y(String,i))))))("opacity",function(e,t){return s.create("opacity",[t])},function(e,t){return e.styles.push({opacity:t})},[j])("font",function(e,t){return s.create("font",[t])},function(e,t){return e.styles.push({"font-family":t}),e},[String])("align",function(e,t){var n=void 0,r=t.indexOf("><");if(!/^(==+>|<=+|=+><=+|<==+>)$/.test(t))return l.create("datatype",'The (align:) macro requires an alignment arrow ("==>", "<==", "==><=" etc.) be provided, not "'+t+'"');if(~r){var i=Math.round(r/(t.length-2)*50);n=d({"text-align":"center","max-width":"50%"},25===i?{"margin-left":"auto","margin-right":"auto"}:{"margin-left":i+"%"})}else n="<"===t[0]&&">"===t.slice(-1)?{"text-align":"justify","max-width":"50%"}:t.includes(">")?{"text-align":"right"}:{"text-align":"left"};return n.display="inline-block",s.create("align",[n])},function(e,t){e.styles.push(t)},[String])(["text-colour","text-color","color","colour"],function(e,t){return s.create("text-colour",[t])},function(e,t){return i.isPrototypeOf(t)&&(t=t.toRGBAString(t)),e.styles.push({color:t}),e},[y(String,i)])(["text-size","size"],function(e,t){return s.create("text-size",[t])},function(e,t){return e.styles.push({"font-size":24*t+"px","line-height":36*t+"px"}),e},[O])("text-indent",function(e,t){return s.create("text-indent",[t])},function(e,t){return e.styles.push({"text-indent":t+"px",display:"inline-block"}),e},[O])(["text-rotate-z","text-rotate"],function(e,t){return s.create("text-rotate-z",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" rotate("+n+"deg)"}}),t},[Number])("text-rotate-y",function(e,t){return s.create("text-rotate-y",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" perspective(50vw) rotateY("+n+"deg)"}}),t},[Number])("text-rotate-x",function(e,t){return s.create("text-rotate-x",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" perspective(50vw) rotateX("+n+"deg)"}}),t},[Number])(["background","bg"],function(e,t){return s.create("background",[t])},function(t,r){var a=void 0;return i.isPrototypeOf(r)?r=r.toRGBAString(r):o.isPrototypeOf(r)&&(r=r.toLinearGradientString(r)),a=i.isHexString(r)||i.isCSS3Function(r)?{"background-color":r}:r.startsWith("linear-gradient(")||r.startsWith("repeating-linear-gradient(")?{"background-image":r}:{"background-size":"cover","background-image":"url("+r+")"},t.styles.push(a,{display:function(){var t=e(this);return!t.children().length||n.childrenProbablyInline(t)?e(this).css("display"):"block"}}),t},[y(String,i,o)]).apply(void 0,_toConsumableArray((C={color:function(){return"transparent"}},E=d(Object.create(null),{none:{},bold:{"font-weight":"bold"},italic:{"font-style":"italic"},underline:{"text-decoration":"underline"},doubleunderline:{"text-decoration":"underline","text-decoration-style":"double"},wavyunderline:{"text-decoration":"underline","text-decoration-style":"wavy"},strike:{"text-decoration":"line-through"},doublestrike:{"text-decoration":"line-through","text-decoration-style":"double"},wavystrike:{"text-decoration":"line-through","text-decoration-style":"wavy"},superscript:{"vertical-align":"super","font-size":".83em"},subscript:{"vertical-align":"sub","font-size":".83em"},blink:{animation:"fade-in-out 1s steps(1,end) infinite alternate"},shudder:{animation:"shudder linear 0.1s 0s infinite"},mark:{"background-color":"hsla(60, 100%, 50%, 0.6)"},condense:{"letter-spacing":"-0.08em"},expand:{"letter-spacing":"0.1em"},outline:[{"text-shadow":function(){var t=e(this).css("color");return"-1px -1px 0 "+t+", 1px -1px 0 "+t+",-1px  1px 0 "+t+", 1px  1px 0 "+t}},{color:function(){return n.parentColours(e(this)).backgroundColour}}],shadow:{"text-shadow":function(){return"0.08em 0.08em 0.08em "+e(this).css("color")}},emboss:{"text-shadow":function(){return"0.04em 0.04em 0em "+e(this).css("color")}},smear:[{"text-shadow":function(){var t=e(this).css("color");return"0em   0em 0.02em "+t+",-0.2em 0em  0.5em "+t+", 0.2em 0em  0.5em "+t}},C],blur:[{"text-shadow":function(){return"0em 0em 0.08em "+e(this).css("color")}},C],blurrier:[{"text-shadow":function(){return"0em 0em 0.2em "+e(this).css("color")},"user-select":"none"},C],mirror:{display:"inline-block",transform:"scaleX(-1)"},upsidedown:{display:"inline-block",transform:"scaleY(-1)"},fadeinout:{animation:"fade-in-out 2s ease-in-out infinite alternate"},rumble:{animation:"rumble linear 0.1s 0s infinite"},sway:{animation:"sway linear 2.5s 0s infinite"},buoy:{animation:"buoy linear 2.5s 0s infinite"},fidget:{animation:function(){return"fidget step-end 60s "+60*-Math.random()+"s infinite"+(Math.random()<.5?" reverse":"")}}}),["text-style",function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return s.create("text-style",r.map(n.insensitiveName))},function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0;i<n.length;i+=1)"none"===n[i]?e.styles=[]:e.styles=e.styles.concat(E[n[i]]);return e},[T(S.apply(void 0,_toConsumableArray(Object.keys(E))))]])))("collapse",function(){return s.create("collapse")},function(e){return e.attr.push({collapsing:!0}),e},[])("hover-style",function(e,t){var n=u.create(),r=(t.run(n),n.summary());return r+""=="styles"||r.every(function(e){return"styles"===e||"attr"===e})&&n.attr.every(function(e){return Object.keys(e)+""=="style"})?s.create("hover-style",[t]):l.create("datatype","The changer given to (hover-style:) must only change the hook's style.")},function(e,t){return e.data.hoverChanger=t,e.attr.push({hover:function(e,t){return void 0!==t&&t}}),e},[s])("css",function(e,t){return t.trim().endsWith(";")||(t+=";"),s.create("css",[t])},function(t,n){return t.attr.push({style:function(){return(e(this).attr("style")||"")+n}}),t},[String])("test-true",function(){return s.create("test-true",[])},function(e){return e.enabled=!0},w(b))("test-false",function(){return s.create("test-false",[])},function(e){return e.enabled=!1},w(b)),t.addCommand("animate",e.noop,function(e,t,r,i,a){r.forEach(t,function(t){var r=void 0;if("zoom"===name){var o=t.offset(),s=o.left,c=o.top;r=n.mouseCoords.x-s+"px "+(n.mouseCoords.y-c)+"px"}n.transitionIn(t,i,e.transitionTime||a,e.transitionDelay,e.transitionSkip,0,r)})},[T(a),S.apply(void 0,_toConsumableArray(_.innerType.filter(function(e){return"instant"!==e}))),g(x)]),["box","float-box"].forEach(function(r){return t.addChanger(r,function(e,t,n){var i=-1===t.search(f)||t.length>1&&!t.includes("="),a="float-box"===r&&(-1===n.search(f)||n.length>1&&!n.includes("="));return i||a?l.create("datatype","The ("+r+':) macro requires a sizing line("==X==", "==X", "=XXXX=" etc.) be provided, not "'+(i?t:n)+'".'):s.create(r,[t,n].filter(function(e){return void 0!==e}))},function(t,i,a){var o,s=p(i),c=s.marginLeft,u=s.size,l=void 0;if("float-box"===r){var f=p(a);l=f.marginLeft,a=f.size}var h="box"===r?"%":"vw",y=(_defineProperty(o={display:"block",width:u+h,"max-width":u+h},"box"===r?"margin-left":"left",c+h),_defineProperty(o,"box-sizing","content-box"),_defineProperty(o,"overflow-y","auto"),_defineProperty(o,"padding",function(){return e(this).css("padding")||"1em"}),o);return void 0!==a&&(y.height=a+("box"===r?"em":"vh")),"float-box"===r&&d(y,{position:"fixed",top:l+"vh","background-color":function(){return n.parentColours(e(this)).backgroundColour}}),t.styles.push(y),t},[String,"box"===r?g(k):String])})}),define("internaltypes/enchantment",["jquery","utils","internaltypes/changedescriptor","datatypes/changercommand","utils/operationutils","internaltypes/twineerror","utils/renderutils"],function(e,t,n,r,i,a,o){var s=i.objectName,c=o.collapse,u={create:function(n){return t.assertOnlyHas(n,["scope","localHook","section","attr","data","changer","functions","lambda","name"]),Object.assign(Object.create(this),{enchantments:e()},n)},enchantScope:function(){var i=this,o=this.attr,u=this.data,l=this.functions,p=this.section,f=this.scope,d=this.localHook,h=this.lambda,y=[];f.forEach(p,function(m,g){if(!d||d.has(m[0]).length){var v=void 0;if(h)if(v=h.apply(p,{loop:f.TwineScript_GetProperty(g),pos:g+1}),a.containsError(v))m.replaceWith(v.render("")),h=v=null;else if(r.isPrototypeOf(v)){var b=v.summary();(b.includes("newTargets")||b.includes("target"))&&(m.replaceWith(a.create("macrocall","The changer produced by the 'via' lambda given to (enchant:) can't include a revision or enchantment changer like (replace:) or (click:).").render("")),h=v=null)}else m.replaceWith(a.create("macrocall","The 'via' lambda given to (enchant:) must return a changer, not "+s(v)+".").render("")),h=v=null;else v=i.changer;var w=!o&&!u&&(!v||v.summary().every(function(e){return e.startsWith("transition")})),T=w?m:m.wrap("<tw-enchantment>").parent();if(o&&T.attr(o),u&&T.data(u),l&&l.forEach(function(e){return e(T)}),v){var S=n.create({section:p,target:T});if(v.run(S),S.update(),m.is(t.storyElement)){var x=Object.keys(Object.assign.apply(Object,[{}].concat(_toConsumableArray(S.styles))));m.css(x.reduce(function(e,t){return e[t]="inherit",e},{})),T.data({enchantedProperties:x})}else if(m.is("tw-passage")&&S.styles.some(function(e){return"margin-left"in e||"margin"in e||"margin-right"in e})){var k="padding-left",O="padding-right";t.storyElement.css(k,"0px").css(O,"0px"),T.data({enchantedProperties:[k,O]})}}m.is(t.storyElement)&&T.css({width:"100%",height:"100%"}),"true"===T.attr("collapsing")&&(T.find("[collapsing=false]").each(function(){e(this).removeAttr("collapsing")}),c(T)),w||y.push(T)}}),this.enchantments=e(y)},disenchant:function(){this.enchantments.each(function(){e(this).contents().unwrap();var n=e(this).data("enchantedProperties");n&&t.storyElement.css(n.reduce(function(e,t){return e[t]="",e},{}))})}};return Object.freeze(u)}),define("macrolib/enchantments",["jquery","utils","utils/operationutils","engine","state","passages","macros","datatypes/hookset","datatypes/changercommand","datatypes/lambda","internaltypes/enchantment","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s,c,u,l,p){var f=n.is,d=o.TypeSignature,h=d.either,y=d.rest,m=d.optional;function g(e,t){if(c.isPrototypeOf(t)){var n=t.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return n.includes(e)}))return p.create("datatype","The changer given to ("+e+":) can't include a revision or enchantment changer like (replace:) or (click:).")}}["enchant","change"].forEach(function(e){o.addCommand(e,function(t,n){var r=g(e,n);if(r)return r},function(t,n,r){var i,a=l.create((_defineProperty(i={scope:s.from(n)},c.isPrototypeOf(r)?"changer":"lambda",r),_defineProperty(i,"section",t),i));return"enchant"===e?(t.addEnchantment(a),t.updateEnchantments()):a.enchantScope(),""},[h(s,String),h(c,u.TypeSignature("via"))],!1)}),o.addChanger("enchant-in",function(e,t,n){var r=g("enchant-in",n);return r||c.create("enchant-in",[t,n])},function(e,t,n){return e.functions=(e.functions||[]).concat(function(r){var i;e.section.addEnchantment(l.create((_defineProperty(i={scope:s.from(t),localHook:r},c.isPrototypeOf(n)?"changer":"lambda",n),_defineProperty(i,"section",e.section),i)))}),e},[h(s,String),h(c,u.TypeSignature("via"))]),[["link-style",s.create({type:"name",data:"link"})],["line-style",s.create({type:"base",data:s.create({type:"name",data:"page"})},"lines",void 0)],["char-style",s.create({type:"base",data:s.create({type:"name",data:"page"})},"chars",void 0)]].forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];o.addChanger(n,function(e,t){var r=g(n,t);return r||c.create(n,[t])},function(e,t){return e.functions=(e.functions||[]).concat(function(n){var i;e.section.addEnchantment(l.create((_defineProperty(i={scope:r,localHook:n},c.isPrototypeOf(t)?"changer":"lambda",t),_defineProperty(i,"section",e.section),i)))}),e},[h(c,u.TypeSignature("via"))])});var v=["replace","append","prepend"];function b(n,i){return t.onStartup(function(){var r=n.classList.replace(/ /g,"."),i=n.blockClassList?n.blockClassList.replace(/ /g,"."):"",a="."+r+(i?",."+i:"");t.storyElement.on(n.event.map(function(e){return e+".enchantment"}).join(" "),a,function(){var t=e(Array.from(e(this).parents(a).add(this)).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1})[0]),n=t.data("enchantmentEvent");n&&n(t)})}),[function(e,t,n){if(!t)return p.create("datatype","A string given to this ("+i+":) macro was empty.");if(n){var r=g(i,n);if(r)return r}return c.create(i,[s.from(t)].concat(n?[n]:[]))},function(e,t,a){e.enabled=!1,e.transitionDeferred=!0,n.rerender&&(e.newTargets=(e.newTargets||[]).concat({target:t,append:n.rerender}));var o=e.section&&e.section.stackTop?e.section.stackTop.tempVariables:Object.create(null),s=l.create(_defineProperty({functions:[function(e){e.attr("class",e.children().is("tw-story, tw-sidebar, tw-passage")||"block"===e.children().css("display")?n.blockClassList:n.classList)}],attr:(n.classList+"").match(/\b(?:link|enchantment-clickblock)\b/)?{tabIndex:"0"}:{},data:{enchantmentEvent:function(){e.section.stackTop&&e.section.stackTop.blocked||(n.once&&e.section.removeEnchantment(s),n.goto?r.goToPassage(n.goto,{transition:n.transition}):n.undo?r.goBack({transition:n.transition}):e.section.renderInto(e.source,null,Object.assign({},e,{enabled:!0,transitionDeferred:!1}),o))}},scope:t,section:e.section,name:i},c.isPrototypeOf(a)?"changer":"lambda",a));return e.section&&(e.section.addEnchantment(s),s.enchantScope()),e},[h(s,String),m(h(c,u.TypeSignature("via")))]]}v.forEach(function(t){o.addChanger(t,function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.every(Boolean)?c.create(t,r.map(s.from)):p.create("datatype","A string given to this ("+t+":) macro was empty.")},function(n){for(var r,i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return e(n.target).parents().filter("tw-collapsed,[collapsing=true]").length>0||n.attr.some(function(e){return e.collapsing})||(n.attr=[].concat(_toConsumableArray(n.attr),[{collapsing:!1}])),n.newTargets=n.newTargets||[],(r=n.newTargets).push.apply(r,_toConsumableArray(a.filter(function(e){return!n.newTargets.some(function(n){var r=n.target,i=n.append;return f(e,r)&&t===i})}).map(function(e){return{target:e,append:t,before:!0}}))),n},y(h(s,String)))(t+"-with",function(e,n){return c.create(t+"-with",[n])},function(e,n){return e.appendSource=(e.appendSource||[]).concat({source:n,append:t}),e},String)});var w="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,T=[{name:"click",enchantDesc:{event:["click"],once:!0,rerender:"",classList:"link enchantment-link",blockClassList:"enchantment-clickblock"}},{name:"mouseover",enchantDesc:{event:["mouseenter",w?"click":""].filter(Boolean),once:!0,rerender:"",classList:"enchantment-mouseover",blockClassList:"enchantment-mouseoverblock"}},{name:"mouseout",enchantDesc:{event:["mouseleave",w?"click":""].filter(Boolean),once:!0,rerender:"",classList:"enchantment-mouseout",blockClassList:"enchantment-mouseoutblock"}}];T.forEach(function(e){return o.addChanger.apply(o,[e.name].concat(_toConsumableArray(b(e.enchantDesc,e.name))))}),t.onStartup(function(){T.forEach(function(n){var r=n.enchantDesc;r.blockClassList&&t.storyElement.on(r.event.map(function(e){return e+".enchantment"}).join(" "),function(){var t=e(Array.from(e(this).parents("."+r.blockClassList.replace(/ /g,"."))).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1})[0]),n=t.data("enchantmentEvent");n&&n(t)})})}),v.forEach(function(e){T.forEach(function(t){var n=Object.assign({},t.enchantDesc,{rerender:e}),r=t.name+"-"+e;o.addChanger.apply(o,[r].concat(_toConsumableArray(b(n,r))))})}),T.forEach(function(e){["goto","undo"].forEach(function(t){var n=e.name+"-"+t;o.addCommand(n,function(e,r){return!e||!r&&"goto"===t?p.create("datatype","A string given to this ("+n+":) macro was empty."):"goto"!==t||a.hasValid(r)?void 0:p.create("macrocall","I can't ("+n+":) the passage '"+r+"' because it doesn't exist.")},function(r,a,o,c){if("undo"===t&&i.pastLength<1)return p.create("macrocall","I can't (undo:) on the first turn.");var u=b(Object.assign({},e.enchantDesc,{transition:r.data.passageT8n},"undo"===t?{undo:!0}:{goto:c}),n);return(0,_slicedToArray(u,2)[1])({section:a},s.from(o)),Object.assign(r,{source:""})},[h(s,String)].concat("undo"===t?[]:String))})})}),define("macrolib/metadata",["macros","renderer","utils/operationutils","datatypes/lambda","internaltypes/twineerror"],function(e,t,n,r,i){var a=n.clone,o=n.objectName,s=n.isValidDatamapName,c=e.TypeSignature,u=c.zeroOrMore,l=c.Any,p=t.options.metadataMacros,f=function(e){return{TwineScript_TypeName:"a ("+e+":) macro",TwineScript_ObjectName:"a ("+e+":) macro",TwineScript_Unstorable:!0,TwineScript_Print:function(){return""}}};[["storylet",r.TypeSignature("when")],["urgency",Number],["exclusivity",Number]].forEach(function(t){var n=_slicedToArray(t,2),r=n[0],i=n[1];e.add(r,function(e,t){return e.stackTop.speculativePassage?t:f(r)},i),p.push(r)}),e.add("metadata",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var c=void 0,u=new Map,l=n.reduce(function(e,t){var n=void 0;if(i.containsError(e))return e;if(void 0===c)c=t;else{if(n=i.containsError(s(u,c)))return n;if(u.has(c))return i.create("macrocall","You used the same data name ("+o(c)+") twice in the same (metadata:) call.");u.set(c,a(t)),c=void 0}return e},!0);return i.containsError(l)?l:void 0!==c?i.create("macrocall","This (metadata:) macro has a data name without a value."):e.stackTop.speculativePassage?u:f("storylet")},u(l)),p.push("metadata")}),define("macrolib/patterns",["jquery","macros","utils","utils/operationutils","datatypes/datatype","datatypes/typedvar","internaltypes/twineerror"],function(e,t,n,r,i,a,o){var s=n.anyRealLetter,c=n.anyUppercase,u=n.anyLowercase,l=n.anyCasedLetter,p=n.realWhitespace,f=n.impossible,d=r.objectName,h=r.toSource,y=t.TypeSignature,m=y.rest,g=y.either,v=y.optional,b=y.nonNegativeInteger,w=Object.assign,T=Object.create,S=m(g(String,i,a)),x=function e(t){var n,r=t.name,y=t.fullArgs,m=t.args,g=t.makeRegExpString,v=void 0===g?function(e){return e.join("")}:g,b=t.insensitive,S=void 0!==b&&b,x=t.canContainTypedVars,k=void 0===x||x,O=t.canBeUsedAlone,j=void 0===O||O,A=m||y,C=A.map(function e(t){if(a.isPrototypeOf(t)){if(!k)return o.create("operation","Optional string patterns, like ("+r+":)"+("p-many"===r?" with min 0":"")+", can't have typed variables inside them.");var n=e(t.datatype);return o.containsError(n)?n:"("+n+")"}if(i.isPrototypeOf(t)){if(!k&&"typedVars"in t&&t.typedVars().length)return o.create("operation","("+r+":) can't have typed variables inside its pattern.");if(t.regExp)return(t.rest?"(?:":"")+(S?t.insensitive().regExp:t.regExp)+(t.rest?")*":"");var h=t.name,y=t.rest?"*":"";return"alnum"===h?s+y:"whitespace"===h?p+y:"uppercase"===h?(S?l:c)+y:"lowercase"===h?(S?l:u)+y:"anycase"===h?l+y:"digit"===h?"\\d"+y:"linebreak"===h?"(?:\\r|\\n|\\r\\n)"+y:"str"===h?".*?":["even","odd","int","num"].includes(h)?o.create("datatype","Please use string datatypes like 'digit' in ("+r+":) instead of number datatypes."):o.create("datatype","The ("+r+":) macro must only be given string-related datatypes, not "+d(t)+".")}return"string"==typeof t?(t=t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),S&&(t=t.replace(RegExp("("+c+"|"+u+")","g"),function(e){return"["+e.toUpperCase()+e.toLowerCase()+"]"})),t):(f("createPattern","mapper() was given a non-string non-datatype "+t),"")});if(n=o.containsError(C))return n;var E=v(C),_=w(T(i),{name:r,regExp:E,insensitive:function(){return S?_:e({name:r,fullArgs:y,args:A.map(function(e){return i.isPrototypeOf(e)&&"function"==typeof e.insensitive?e.insensitive():e}),makeRegExpString:v,insensitive:!0,canContainTypedVars:k,canBeUsedAlone:j})},typedVars:function(){return A.reduce(function(t,n){return a.isPrototypeOf(n)&&(t=t.concat(S?a.create(e({name:"p-ins",fullArgs:[n.datatype],insensitive:!0}),n.varRef):n),n=n.datatype),i.isPrototypeOf(n)&&"function"==typeof n.typedVars&&(t=t.concat(n.typedVars())),t},[])},destructure:function(t){if("string"!=typeof t)return[o.create("operation","I can't unpack "+d(t)+" into "+this.TwineScript_ToSource()+" because it isn't a string.")];var n=this.typedVars();if(!n.length)return[];var r=(RegExp("^"+(this.rest?"(?:":"")+E+(this.rest?")*":"")+"$").exec(t)||[]).slice(1);return r.length?r.map(function(t,r){var i=n[r];if(i)return i.datatype.rest&&!i.datatype.regExp&&((i=i.TwineScript_Clone()).datatype=e({name:"p",fullArgs:[i.datatype]})),{dest:i,value:t||"",src:void 0}}).filter(Boolean):[o.create("operation","I can't unpack "+d(t)+" because it doesn't match the pattern "+this.TwineScript_ToSource()+".")]},TwineScript_IsTypeOf:function(e){return j?"string"==typeof e&&!!e.match("^"+(this.rest?"(?:":"")+E+(this.rest?")*":"")+"$"):o.create("operation","A ("+r+":) datatype must only be used with a (p:) macro.")},TwineScript_toTypeSignatureObject:function(){var e=this;return{pattern:"range",name:r,range:function(t){return e.TwineScript_IsTypeOf(t)}}},TwineScript_ToSource:function(){return(this.rest?"...":"")+"("+r+":"+y.map(h)+")"}});return Object.defineProperty(_,"TwineScript_ObjectName",{get:function(){return"a ("+r+":) datatype"}}),_};t.add(["p","pattern"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p",fullArgs:n})},S)(["p-either","pattern-either"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-either",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?:"+e.join("|")+")"}})},S)(["p-opt","pattern-opt","p-optional","pattern-optional"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-opt",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"(?:"+e.join("")+")?"}})},S)(["p-not","pattern-not"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.find(function(e){return"string"==typeof e?1!==[].concat(_toConsumableArray(e)).length:e.rest||e.regExp||["str","empty"].includes(e.name)})?o.create("datatype","(p-not:) should only be given single character"):x({name:"p-not",fullArgs:n,canContainTypedVars:!1,makeRegExpString:function(e){return"[^"+e.join("")+"]"}})},S)(["p-many","pattern-many"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s=n.slice(),c=void 0,u=void 0;if("number"==typeof n[0]&&(c=n.shift(),u="number"==typeof n[0]?n.shift():1/0),void 0!==u&&u<c)return o.create("datatype","The (p-many:) macro needs to be given string patterns, not just min and max numbers.");if(!n.length)return o.create("datatype","The (p-many:) macro needs to be given string patterns, not just min and max numbers.");var l=n.find(function(e){return"string"!=typeof e&&!i.isPrototypeOf(e)&&!a.isPrototypeOf(e)});return l?o.create("datatype","This (p-many:) macro can only be given a min and max number followed by datatypes or strings, but was also given "+d(l)+"."):x({name:"p-many",args:n,fullArgs:s,canContainTypedVars:c>0,makeRegExpString:function(e){return"(?:"+e.join("")+")"+(void 0!==c?"{"+c+(u===1/0?",":u!==c?","+u:"")+"}":"+")}})},[m(g(b,String,i,a))])(["p-ins","pattern-ins","p-insensitive","pattern-insensitive"],function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x({name:"p-ins",fullArgs:n,insensitive:!0})},S)(["split","splitted"],function(e,t,n){if(t=x({name:"split",fullArgs:[t],canContainTypedVars:!1}),o.containsError(t))return t;if(!n)return[""];if(!t.regExp)return[].concat(_toConsumableArray(n));for(var r=RegExp(t.regExp),i=[],a=void 0;n&&(a=r.exec(n));){if(a.index+a[0].length===0)return i;i.push(n.slice(0,a.index)),n=n.slice(a.index+a[0].length)}return i.concat(n||[])},[g(String,i),String])("trimmed",function(e,t,n){return void 0===n||i.isPrototypeOf(t)&&"whitespace"===t.name?t.trim():(t=x({name:"trimmed",fullArgs:[t],canContainTypedVars:!1}),o.containsError(t)?t:t.regExp?n.replace(RegExp("^("+t.regExp+")*|("+t.regExp+")*$","g"),""):n)},[g(String,i),v(String)])}),define("macrolib/links",["jquery","macros","utils","state","passages","engine","datatypes/changercommand","internaltypes/changedescriptor","datatypes/hookset","datatypes/lambda","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s,c,u,l){var p=t.TypeSignature,f=p.optional,d=p.rest,h=p.either,y=["Links can't have empty strings for their displayed text.","In the link syntax, a link's displayed text is inside the [[ and ]], and on the non-pointy side of the -> or <- arrow if it's there."],m=Object.assign;function g(e,t,r){r=r||t;var a=i.hasValid(t)&&t===r,o=e.evaluateTwineMarkup(n.unescape(r),"a link's passage name"),s=void 0;if(a){var c=o.children().length>0?"`".repeat((r.match(/`+/)||[]).reduce(function(e,t){return Math.max(e,t.length+1)},1)):"";t=c+"\0".repeat(!!c)+t+"\0".repeat(!!c)+c}else o.findAndFilter("tw-error").length&&(s=o.findAndFilter("tw-error").data("TwineError")),r=o.text();return{text:t,passage:r,error:s}}n.onStartup(function(){e(n.storyElement).on("click.passage-link","tw-link",function(){var t=e(this),n=t.closest("tw-expression"),r=t.closest("tw-expression, tw-hook"),i=r.data("clickEvent"),o=r.data("section");if(!(o&&o.stackTop&&o.stackTop.blocked))if(i){if(t.find("tw-error").length>0)return;i(t)}else{var s=n.data("linkPassageName"),c=Object.assign({},n.data("passageT8n")||{});n.find("tw-enchantment").each(function(t,n){Object.assign(c,e(n).data("passageT8n")||{})}),s?a.goToPassage(s,{transition:c}):t.is("[undo]")?a.goBack({transition:c}):t.is("[fullscreen]")&&a.toggleFullscreen()}}),e(document).on("fullscreenchange",function(){e("tw-link[fullscreen]",n.storyElement).each(function(t,n){(e(n).closest("tw-expression, tw-hook").data("fullscreenEvent")||Object)(n)})})}),[["link","link-replace"],["link-reveal"],["link-repeat"],["link-rerun"]].forEach(function(e){return t.addChanger(e,function(t,n,r){if(!n)return l.create("datatype",y[0]);if(r){var i=r.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return i.includes(e)}))return l.create("datatype","The changer given to ("+e[0]+":) can't include a revision or enchantment changer like (replace:) or (click:).")}return o.create(e[0],[n].concat(r||[]))},function(t,n,r){var i=e[0],a=t.section&&t.section.stackTop?t.section.stackTop.tempVariables:Object.create(null),o=s.create({source:"<tw-link tabindex=0>"+n+"</tw-link>",target:function(){return t.target},append:"replace",data:{section:t.section,clickEvent:function(e){t.enablers=t.enablers.filter(function(e){return e.descriptor!==o}),"link-reveal"===i&&e.contents().unwrap();var n=e.parent();"link-rerun"===i&&e.detach(),"link"!==i&&"link-rerun"!==i&&"click-block"!==i||n.empty(),t.section.renderInto("",null,t,a),"link-rerun"===i&&n.prepend(e)}}});return t.enablers=(t.enablers||[]).concat({descriptor:o,changer:r}),t},[String,f(o)])}),t.addCommand("link-goto",function(e){if(!e)return l.create.apply(l,["datatype"].concat(y))},function(e,t,a,o){var s,c=g(t,a,o);if(a=c.text,o=c.passage,s=c.error)return s;if(e.transition){var u="transition";return l.create("datatype","Please attach ("+u+"-depart:) or ("+u+"-arrive:) to a passage link, not ("+u+":).")}var p=void 0;return i.hasValid(o)||(p='<tw-broken-link passage-name="'+n.escape(o)+'">'+a+"</tw-broken-link>"),p=p||"<tw-link tabindex=0 "+(r.passageNameVisited(o)>0?'class="visited" ':"")+">"+a+"</tw-link>",e.data.linkPassageName=o,e.data.section=t,m(e,{source:p,transitionDeferred:!0})},[String,f(String)])("link-storylet",function(){var e,t=(e=1===arguments.length||"string"!=typeof(arguments.length<=0?void 0:arguments[0])?0:1,arguments.length<=e?void 0:arguments[e]);if(!t||"string"==typeof t)return l.create("datatype","(link-storylet:) should be given one index number or one 'where' lambda, after the optional link text string.")},function(e,t){var n,a,o,s=(n=2+(1==(arguments.length<=2?0:arguments.length-2)?0:3==(arguments.length<=2?0:arguments.length-2)||"string"==typeof(arguments.length<=2?void 0:arguments[2])?1:2),arguments.length<=n?void 0:arguments[n]),c="string"==typeof(arguments.length<=2?void 0:arguments[2])&&(arguments.length<=2?void 0:arguments[2]),p=(a=(arguments.length<=2?0:arguments.length-2)-1+2,(arguments.length<=a?void 0:arguments[a])!==s&&(o=(arguments.length<=2?0:arguments.length-2)-1+2,arguments.length<=o?void 0:arguments[o]));if(e.transition){var f="transition";return l.create("datatype","Please attach ("+f+"-depart:) or ("+f+"-arrive:) to (link-storylet:), not ("+f+":).")}var d=u.isPrototypeOf(s),h=i.getStorylets(t,d&&s),y=l.containsError(h);if(y)return y;var g=h[d?0:s<0?h.length+s:s-1],v=void 0;if(g)g=g.get("name"),c=c||g,v=v||"<tw-link tabindex=0 "+(r.passageNameVisited(g)>0?'class="visited" ':"")+">"+c+"</tw-link>",e.data.linkPassageName=g,e.data.section=t;else{if(!p)return e;v=p}return m(e,{source:v,transitionDeferred:!0})},[h(parseInt,String,u.TypeSignature("where")),f(h(parseInt,String,u.TypeSignature("where"))),f(String)])("link-undo",function(e){if(!e)return l.create("datatype",y[0])},function(e,t,n){return r.pastLength<1?l.create("macrocall","I can't use (link-undo:) on the first turn."):(e.data.section=t,m(e,{source:"<tw-link tabindex=0 undo>"+n+"</tw-link>",transitionDeferred:!0}))},[String])("link-show",function(e){if(!e)return l.create("datatype",y[0])},function(t,n,r){for(var i=arguments.length,a=Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return t.data.section=n,t.data.clickEvent=function(r){r.contents().unwrap(),a.forEach(function(r){return r.forEach(n,function(r){var i=r.data("originalSource")||"",a=r.data("hidden");if(a)if(r.removeData("hidden"),a instanceof e)r.empty().append(a);else{var o=r.data("tempVariables");n.renderInto("",null,m({},t,{source:i,target:r,transitionDeferred:!1}),o&&Object.create(o))}})})},m(t,{source:"<tw-link tabindex=0>"+r+"</tw-link>",transitionDeferred:!0})},[String,d(c)])("link-fullscreen",function(e,t){if(!e||!t)return l.create("datatype",y[0])},function(e,t,n,r){var i=function(){return document.fullscreenEnabled||document.msFullscreenEnabled?"<tw-link tabindex=0 fullscreen>"+(document.fullscreenElement||document.msFullscreenElement?r:n)+"</tw-link>":r?"<tw-broken-link>"+r+"</tw-broken-link>":""},a=t.stackTop.tempVariables;return e.data.section=t,e.data.fullscreenEvent=function(){(document.fullscreenEnabled||document.msFullscreenEnabled)&&e.data.section.whenUnblocked(function(){var t=m({},e,{append:"replace",source:i(),transitionDeferred:!1});e.section.renderInto("",null,t,a)})},m(e,{source:i(),transitionDeferred:!0})},[String,String,f(String)]),t.addChanger(["link-reveal-goto"],function(e,t,n,r){if(!t)return l.create.apply(l,["datatype"].concat(y));if(o.isPrototypeOf(n)){if(o.isPrototypeOf(r))return l.create("datatype","You mustn't give two changers to (link-reveal-goto:)");r=n,n=void 0}if(r){var i=r.summary();if(["newTargets","target","appendSource","functions"].some(function(e){return i.includes(e)}))return l.create("datatype","The changer given to (link-reveal-goto:) can't include a revision or enchantment changer like (replace:) or (click:).")}var a=g(e,t,n);return t=a.text,n=a.passage,a.error||o.create("link-reveal-goto",[t,n,r].filter(function(e){return void 0!==e}))},function(e,t,o,c){if(i.hasValid(o)){var u=r.passageNameVisited(o),l=e.section&&e.section.stackTop?e.section.stackTop.tempVariables:Object.create(null),p=s.create({source:"<tw-link tabindex=0 "+(u>0?'class="visited" ':"")+">"+t+"</tw-link>",target:e.target,append:"replace",data:{section:e.section,append:"replace",clickEvent:function(t){e.enablers=e.enablers.filter(function(e){return e.descriptor!==p}),t.contents().unwrap(),e.section.renderInto("",null,e,l),e.section.whenUnblocked(function(){return a.goToPassage(o,{transition:e.data.passageT8n})})}}});return e.enablers=(e.enablers||[]).concat({descriptor:p,changer:c}),e}e.source='<tw-broken-link passage-name="'+n.escape(o)+'">'+t+"</tw-broken-link>"},[String,f(h(o,String)),f(o)])}),define("macrolib/custommacros",["utils","macros","state","utils/operationutils","datatypes/changercommand","datatypes/custommacro","datatypes/codehook","datatypes/typedvar","internaltypes/twineerror"],function(e,t,n,r,i,a,o,s,c){var u=t.add,l=t.addChanger,p=t.addCommand,f=t.TypeSignature,d=f.rest,h=f.either,y=f.Any,m=r.objectName;u("macro",function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var u=void 0,l=[];for(u=0;u<i.length;u+=1){var p=u===i.length-1;if(s.isPrototypeOf(i[u])===p)return c.create("datatype","The "+(p?"":e.nth(i.length-u+1)+"-")+"last value given to (macro:) should be a "+(p?"code hook":"datatyped variable")+", not "+m(i[u]));if(!p){var f="A custom macro";if(i[u].varRef.object===n.variables)return c.create("datatype",f+"'s typed variables must be temp variables (with a '_'), not global variables (with a '$').","Write them with a _ symbol at the start instead of a $ symbol.");if(i[u].varRef.propertyChain.length>1)return c.create("datatype",f+"'s typed variables can't be properties inside a data structure.");if(i[u].datatype.rest&&u!==i.length-2)return c.create("datatype",f+" can only have one spread variable, and it must be its last variable.");var d=i[u].varRef.propertyChain[0];if(l.includes(d))return c.create("datatype",f+"'s typed variables can't both be named '"+d+"'.");l.push(d)}}return a.create(i.slice(0,-1),i[i.length-1])},[d(h(s,o))]);var g=function(e,t,n){if(!t.some(function(e){if("function"==typeof e.output)return e.output(n),!0}))return c.create("macrocall","("+e+":) should only be used inside a code hook passed to (macro:).")};p(["output-data","out-data"],function(){},function(e,t){var n=e.stack;return g("output-data",n,t)||"blocked"},[y],!1),l(["output","out"],function(e){return Object.assign(i.create("output",[e]))},function(e,t){var n=t.stack,r=t.stackTop;return e.loopVars=Object.keys(r.tempVariables).reduce(function(e,t){return e[t]=[r.tempVariables[t]],e},{}),g("output",n,e),r.blocked=!0,e},[]),p("error",function(e){if(!e)return c.create("datatype","This (error:) macro was given an empty string.")},function(e,t){var n=e.stack;return g("error",n,c.create("user",t))||"blocked"},[String],!1)}),define("repl",["utils","engine","markup","twinescript/compiler","twinescript/environ"],function(e,t,n,r,i){e.onStartup(function(){return setTimeout(function(){t.options.debug&&(window.REPL=function(e){var t=r(n.lex("(print:"+e+")"));console.log(t);var a=i({}).eval(t);return a.TwineScript_Run?a.TwineScript_Run().source:a},window.LEX=function(e){var t=n.lex(e);return 1===t.length?t[0]:t})})})}),require.config({paths:{jquery:"../node_modules/jquery/dist/jquery",almond:"../node_modules/almond/almond","es6-shim":"../node_modules/es6-shim/es6-shim",jqueryplugins:"utils/jqueryplugins",markup:"./markup/markup",lexer:"./markup/lexer",patterns:"./markup/patterns"},deps:["es6-shim","jqueryplugins"]}),require(["jquery","debugmode/mode","renderer","state","section","engine","passages","utils","utils/renderutils","internaltypes/twineerror","macros","macrolib/values","macrolib/commands","macrolib/datastructures","macrolib/stylechangers","macrolib/enchantments","macrolib/metadata","macrolib/patterns","macrolib/links","macrolib/custommacros","repl"],function($,DebugMode,Renderer,State,Section,Engine,Passages,Utils,_ref118,TwineError){var dialog=_ref118.dialog;function __HarloweEval(text){return eval(text+"")}var _installHandlers=function(){$(document.documentElement).on("keydown",function(e){13===e.which&&"0"===e.target.getAttribute("tabindex")&&$(e.target).trigger("click")}),Engine.options.debug?DebugMode():TwineError.on("error",function(e,t){return!$("tw-debugger").length&&DebugMode(e,t)}),_installHandlers=null},oldOnError;function printJSError(e){var t=e.name+": "+e.message;if(e.stack){var n=e.stack.split("\n"),r=n.findIndex(function(e){return e.includes("__HarloweEval")});t+="\n"+n.slice(0,r).join("\n").replace(/\([^\)]+\)/g,"")}return"<div style='font-family:monospace;overflow-y:scroll;max-height:30vh'>```"+t+"```</div>"}oldOnError=window.onerror,window.onerror=function(e,t,n,r,i){window.onerror=oldOnError,Utils.storyElement.parent().append(dialog({message:"Sorry to interrupt, but this page's code has got itself in a mess.\n\n"+printJSError(i)+"\n(This is probably due to a bug in the Harlowe game engine.)"})),"function"==typeof oldOnError&&oldOnError.apply(void 0,arguments)},Utils.onStartup(function(){var e=$("tw-storydata");if(0!==e.length){var t=e.attr("options");t&&t.split(/\s/).forEach(function(e){Renderer.options[e]=Engine.options[e]=!0});var n=e.attr("startnode");Renderer.options.ifid=Engine.options.ifid=e.attr("ifid"),n||(n=[].reduce.call($("tw-passagedata"),function(e,t){var n=t.getAttribute("pid");return n<e?n:e},1/0)),n=$("tw-passagedata[pid="+n+"]").attr("name"),_installHandlers();var r=!1;$("[role=script]").each(function(e){try{__HarloweEval($(this).html())}catch(t){r||(r=!0,dialog({parent:Utils.storyElement.parent(),message:"There is a problem with this story's "+Utils.nth(e+1)+" script:\n\n"+printJSError(t)}))}}),$("[role=stylesheet]").each(function(e){$(document.head).append('<style data-title="Story stylesheet '+(e+1)+'">'+$(this).html())});var i=Section.create(),a=Passages.loadMetadata(i);if(a.length){var o=dialog({parent:Utils.storyElement.parent(),message:"These errors occurred when running the `(metadata:)` macro calls in this story's passages:<p></p>"});a.forEach(function(e){return o.find("p").append(e.render(""))})}var s=!Engine.options.debug&&State.hasSessionStorage&&sessionStorage.getItem("Saved Session");s&&!0===State.deserialise(i,s)?Engine.showPassage(State.passage,!1):Engine.goToPassage(n)}})}),define("harlowe",function(){}),require(["harlowe"])}();
</script>

</body>
</html>
